/*! For license information please see main.js.LICENSE */
!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s="./js/main.js")}({"../node_modules/OblioUtils/classes/MenuPaginator.js":function(e,t,n){var i;void 0===(i=function(){var e=function(e){var t=0;this.elements={wrapper:e.wrapper,masker:e.wrapper.querySelector(".paginatorMasker"),list:e.wrapper.querySelector("ul"),prev:document.createElement("p"),next:document.createElement("p")},this.elements.prev.className="prev",this.elements.next.className="next",this.elements.wrapper.appendChild(this.elements.prev),this.elements.wrapper.appendChild(this.elements.next);for(var n,i,r,o=this.elements.list.getElementsByTagName("li"),s=o.length-1;s>=0;s--)t+=(n=o[s],i=void 0,r=void 0,i=n.offsetWidth,r=getComputedStyle(n),(i+=parseInt(r.marginLeft)+parseInt(r.marginRight))+1);this.listWidth=t,this.elements.list.style.width=t+"px",this.elements.wrapper.addEventListener("click",function(e){e.preventDefault();var t=e.target;if(t.matches(".prev, .next"))switch(t.className){case"prev on":this.previous();break;case"next on":this.next()}}.bind(this)),this.paginated=!1,this.currentPage=1,this.numPages=1,this.resize()};return e.prototype={paginate:function(){!1===this.paginated&&(this.currentPage=1,this.elements.prev.className="prev off",this.elements.next.className="next on",this.paginated=!0)},unpaginate:function(){!0===this.paginated&&(this.currentPage=1,this.elements.prev.className="prev off",this.elements.next.className="next off",this.elements.list.style.left="0px",this.paginated=!1)},next:function(){var e;if(this.currentPage+1<=this.numPages)if(this.currentPage+=1,this.currentPage===this.numPages)this.elements.next.className="next off",e=this.elements.masker.offsetWidth-this.listWidth+"px",TweenLite.to(this.elements.list,1,{left:e,ease:Power4.easeInOut});else{if(-(this.elements.masker.offsetWidth-this.listWidth)-this.elements.masker.offsetWidth*(this.currentPage-1)<100)return void this.next();e=-this.elements.masker.offsetWidth*(this.currentPage-1)+"px",TweenLite.to(this.elements.list,1,{left:e,ease:Power4.easeInOut})}this.elements.prev.className="prev on"},previous:function(){if(this.currentPage-1>=1)if(this.currentPage-=1,1===this.currentPage)this.elements.prev.className="prev off",TweenLite.to(this.elements.list,1,{left:"0px",ease:Power4.easeInOut});else{if(-this.elements.list.offsetLeft-this.elements.masker.offsetWidth*(this.currentPage-1)<100)return void this.previous();newleft=-this.elements.masker.offsetWidth*(this.currentPage-1)+"px",TweenLite.to(this.elements.list,1,{left:newleft,ease:Power4.easeInOut})}this.elements.next.className="next on"},resize:function(){var e=this.elements.masker.offsetWidth,t=-this.elements.list.offsetLeft+this.elements.masker.offsetWidth;e<this.listWidth?(this.numPages=Math.ceil(this.listWidth/e),isNaN(t)||(this.listWidth>t?(this.currentPage=0===this.elements.list.offsetLeft?1:Math.ceil(-this.elements.list.offsetLeft/this.elements.masker.offsetWidth)+1,this.elements.next.className="next on"):(this.elements.next.className="next off",this.currentPage=this.numPages,this.elements.list.style.left=-(this.listWidth-this.elements.masker.offsetWidth)+"px")),this.paginate()):this.unpaginate()}},window.oblio=window.oblio||{},oblio.classes=oblio.classes||{},oblio.classes.MenuPaginator=e,oblio.classes.MenuPaginator}.apply(t,[]))||(e.exports=i)},"../node_modules/OblioUtils/utils/polyfills/matches.js":function(e,t,n){"use strict";Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector)},"../node_modules/OblioUtils/utils/videoPlayerHTML5.js":function(e,t,n){var i;void 0===(i=function(){"use strict";function e(e,i){for(var r in this.div="string"==typeof e?document.getElementById(e):e,this.autoplay=i.autoplay||0,this.loop=i.loop||0,this.controls=void 0===i.controls||i.controls,this.videoSrc=i.videoSrc,this.isReady=!1,this.isAndroid=!1,this.isiPad=!1,this.isMobile=t.call(this),this.player=null,this.extension=".mp4",this.playerID="player_"+(new Date).getTime()+Math.round(999*Math.random()),this.onComplete=void 0,this.onPlaying=void 0,this.onPaused=void 0,i)this[r]=i[r];void 0!==this.videoSrc&&(this.videoSrc.match(".mp4")||(this.videoSrc=this.videoSrc+this.extension)),n.call(this)}function t(){var e=navigator.userAgent.toLowerCase(),t=navigator.platform.toLowerCase();return this.isAndroid=e.indexOf("android")>-1,this.isiPad=null!==e.match(/ipad/i),this.isAndroid||this.isiPad||"ipad"===t||"iphone"===t||"ipod"===t||"android"===t||"palm"===t||"windows phone"===t||"blackberry"===t}function n(){this.autoplay=this.isMobile?0:this.autoplay,this.isReady=!1,this.player=document.createElement("video"),this.player.width=this.player.height="500px",this.player.id=this.playerID,this.player.preload="auto",this.player.controls=this.controls,this.player.style.position="absolute",this.player.style.left="0px",this.player.style.top="0px",this.player.autoplay=this.autoplay,this.player.loop=this.loop,this.player.src=this.videoSrc,i.call(this),this.div.appendChild(this.player)}function i(){for(var e=["abort","canplay","canplaythrough","durationchange","emptied","ended","error","interruptbegin","interruptend","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","timeupdate"],t=0;t<e.length;t++)this.player.addEventListener(e[t],r.bind(this))}function r(e){switch(e.type){case"loadedmetadata":this.onLoadedMetadata&&this.onLoadedMetadata();break;case"ended":this.onComplete&&this.onComplete();break;case"canplaythrough":this.onCanPlayThrough&&this.onCanPlayThrough();break;case"playing":this.onPlaying&&this.onPlaying();break;case"timeupdate":this.onTimeUpdate&&this.onTimeUpdate();break;case"pause":this.onPaused&&this.onPaused()}}return e.prototype.type="htmlVideo",e.prototype.loadVideo=function(e){try{this.videoSrc=e,this.videoSrc.match(".mp4")||(this.videoSrc+=this.extension),this.player.pause(),this.player.setSrc(this.videoSrc)}catch(e){}},e.prototype.play=function(){this.player.play()},e.prototype.pause=function(){this.player.pause()},e.prototype.destroy=function(){this.player.pause(),this.onComplete=void 0,this.onPlaying=void 0,this.onPaused=void 0,this.onBuffering=void 0,this.player.remove();var e=this.div;e&&(e.innerHTML=""),this.player=null},e.prototype.resize=function(e,t){},window.oblio=window.oblio||{},oblio.utils=oblio.utils||{},oblio.utils.VideoPlayerHTML5=e,oblio.utils.VideoPlayerHTML5}.call(t,n,t,e))||(e.exports=i)},"../node_modules/OblioUtils/utils/videoPlayerYT.js":function(e,t,n){var i;void 0===(i=function(){function e(e,o){for(var s in this.div="string"==typeof e?document.getElementById(e):e,this.autoplay=o.autoplay||0,this.color=o.color||"red",this.showinfo=o.showinfo||1,this.controls=o.controls||1,this.videoSrc=o.videoSrc||void 0,this.isReady=o.isReady||!1,this.isMobile=o.isMobile||!1,this.relatedVideos=o.relatedVideos||0,this.modestbranding=o.modestbranding||1,this.relatedVideos=o.relatedVideos||0,!0===o.tracking&&(this.tracking=!0,this.playerDiv=this.div,this.videoTitle=o.title,this.duration=null,this.nextPercentage=10,this.progressInterval=!0,this.progressInterval=setInterval(t.bind(this),1e3)),this.onComplete=void 0,this.onPlaying=void 0,this.onPaused=void 0,this.onBuffering=void 0,n.call(this),o)o.hasOwnProperty(s)&&(this[s]=o[s]);if("undefined"==typeof YT){var a=document.createElement("script");a.type="text/javascript",a.src="https://www.youtube.com/iframe_api",document.body.appendChild(a),i.call(this)}else void 0===YT.Player?i.call(this):r.call(this)}function t(){if(null!==this.duration&&0!==this.duration){var e=this.player.getCurrentTime(),t=Math.ceil(e/this.duration*100);if(t>=this.nextPercentage)for(app.trackEvent("Video Completion",this.title,this.nextPercentage+"% complete");this.nextPercentage<=t;)this.nextPercentage+=10}else this.duration=this.player.getDuration()}function n(){var e=navigator.userAgent.toLowerCase().indexOf("android")>-1,t=null!==navigator.userAgent.match(/iPad/i),n=navigator.platform.toLowerCase();(e||t||"ipad"===n||"iphone"===n||"ipod"===n||"android"===n||"palm"===n||"windows phone"===n||"blackberry"===n)&&(this.isMobile=!0)}function i(){if(this.isReady)return!0;"undefined"==typeof YT||void 0===YT.Player?setTimeout(i.bind(this),100):r.call(this)}function r(){var e=oblio.settings.isIpad?"95%":"100%";this.autoplay=this.isMobile?0:this.autoplay,this.isReady=!1,this.player=new YT.Player(this.div,{height:e,width:"100%",videoId:this.videoSrc,playerVars:{autoplay:this.autoplay,enablejsapi:this.enablejsapi,color:this.color,showinfo:this.showinfo,controls:this.controls,wmode:"transparent",rel:this.relatedVideos,modestbranding:this.modestbranding},events:{onStateChange:s.bind(this),onError:o.bind(this)}})}function o(e){e.data,this.onError&&this.onError(e)}function s(e){switch(e.data){case YT.PlayerState.ENDED:this.onComplete&&this.onComplete();break;case YT.PlayerState.PLAYING:this.onPlaying&&this.onPlaying();break;case YT.PlayerState.PAUSED:this.onPaused&&this.onPaused();break;case YT.PlayerState.BUFFERING:this.onBuffering&&this.onBuffering()}}return e.prototype.type="youTube",e.prototype.loadVideo=function(e){try{this.isMobile?(this.player.destroy(),this.videoSrc=e,r.call(this)):this.player.loadVideoById(e)}catch(e){}},e.prototype.play=function(){try{this.player.playVideo()}catch(e){}},e.prototype.pause=function(){try{this.player.pauseVideo()}catch(e){}},e.prototype.destroy=function(){try{this.progressInterval&&(window.clearInterval(this.progressInterval),this.progressInterval=null,this.nextPercentage=10),this.onComplete=void 0,this.onPlaying=void 0,this.onPaused=void 0,this.onBuffering=void 0,this.player.destroy(),this.div.innerHTML="",this.player=null}catch(e){}},e.prototype.resize=function(e,t){},window.oblio=window.oblio||{},oblio.utils=oblio.utils||{},oblio.utils.VideoPlayerYT=e,oblio.utils.VideoPlayerYT}.apply(t,[]))||(e.exports=i)},"../node_modules/babel-polyfill/lib/index.js":function(e,t,n){"use strict";(function(e){if(n("../node_modules/core-js/shim.js"),n("../node_modules/babel-polyfill/node_modules/regenerator-runtime/runtime.js"),n("../node_modules/core-js/fn/regexp/escape.js"),e._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");e._babelPolyfill=!0;var t="defineProperty";function i(e,n,i){e[n]||Object[t](e,n,{writable:!0,configurable:!0,value:i})}i(String.prototype,"padLeft","".padStart),i(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(e){[][e]&&i(Array,e,Function.call.bind([][e]))})}).call(this,n("../node_modules/webpack/buildin/global.js"))},"../node_modules/babel-polyfill/node_modules/regenerator-runtime/runtime.js":function(e,t,n){(function(t){!function(t){"use strict";var n,i=Object.prototype,r=i.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag",u="object"==typeof e,c=t.regeneratorRuntime;if(c)u&&(e.exports=c);else{(c=t.regeneratorRuntime=u?e.exports:{}).wrap=x;var d="suspendedStart",h="suspendedYield",p="executing",f="completed",m={},_={};_[s]=function(){return this};var g=Object.getPrototypeOf,v=g&&g(g(O([])));v&&v!==i&&r.call(v,s)&&(_=v);var y=S.prototype=w.prototype=Object.create(_);j.prototype=y.constructor=S,S.constructor=j,S[l]=j.displayName="GeneratorFunction",c.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===j||"GeneratorFunction"===(t.displayName||t.name))},c.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,S):(e.__proto__=S,l in e||(e[l]="GeneratorFunction")),e.prototype=Object.create(y),e},c.awrap=function(e){return{__await:e}},A(M.prototype),M.prototype[a]=function(){return this},c.AsyncIterator=M,c.async=function(e,t,n,i){var r=new M(x(e,t,n,i));return c.isGeneratorFunction(t)?r:r.next().then(function(e){return e.done?e.value:r.next()})},A(y),y[l]="Generator",y[s]=function(){return this},y.toString=function(){return"[object Generator]"},c.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var i=t.pop();if(i in e)return n.value=i,n.done=!1,n}return n.done=!0,n}},c.values=O,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(L),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=n)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function i(i,r){return a.type="throw",a.arg=e,t.next=i,r&&(t.method="next",t.arg=n),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return i("end");if(s.tryLoc<=this.prev){var l=r.call(s,"catchLoc"),u=r.call(s,"finallyLoc");if(l&&u){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(l){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),L(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;L(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,i){return this.delegate={iterator:O(e),resultName:t,nextLoc:i},"next"===this.method&&(this.arg=n),m}}}function x(e,t,n,i){var r=t&&t.prototype instanceof w?t:w,o=Object.create(r.prototype),s=new E(i||[]);return o._invoke=function(e,t,n){var i=d;return function(r,o){if(i===p)throw new Error("Generator is already running");if(i===f){if("throw"===r)throw o;return I()}for(n.method=r,n.arg=o;;){var s=n.delegate;if(s){var a=T(s,n);if(a){if(a===m)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===d)throw i=f,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=p;var l=b(e,t,n);if("normal"===l.type){if(i=n.done?f:h,l.arg===m)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i=f,n.method="throw",n.arg=l.arg)}}}(e,n,s),o}function b(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function w(){}function j(){}function S(){}function A(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function M(e){function n(t,i,o,s){var a=b(e[t],e,i);if("throw"!==a.type){var l=a.arg,u=l.value;return u&&"object"==typeof u&&r.call(u,"__await")?Promise.resolve(u.__await).then(function(e){n("next",e,o,s)},function(e){n("throw",e,o,s)}):Promise.resolve(u).then(function(e){l.value=e,o(l)},s)}s(a.arg)}var i;"object"==typeof t.process&&t.process.domain&&(n=t.process.domain.bind(n)),this._invoke=function(e,t){function r(){return new Promise(function(i,r){n(e,t,i,r)})}return i=i?i.then(r,r):r()}}function T(e,t){var i=e.iterator[t.method];if(i===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=n,T(e,t),"throw"===t.method))return m;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var r=b(i,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,m;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=n),t.delegate=null,m):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,m)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function O(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function t(){for(;++i<e.length;)if(r.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=n,t.done=!0,t};return o.next=o}}return{next:I}}function I(){return{value:n,done:!0}}}("object"==typeof t?t:"object"==typeof window?window:"object"==typeof self?self:this)}).call(this,n("../node_modules/webpack/buildin/global.js"))},"../node_modules/core-js/fn/regexp/escape.js":function(e,t,n){n("../node_modules/core-js/modules/core.regexp.escape.js"),e.exports=n("../node_modules/core-js/modules/_core.js").RegExp.escape},"../node_modules/core-js/modules/_a-function.js":function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},"../node_modules/core-js/modules/_a-number-value.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_cof.js");e.exports=function(e,t){if("number"!=typeof e&&"Number"!=i(e))throw TypeError(t);return+e}},"../node_modules/core-js/modules/_add-to-unscopables.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_wks.js")("unscopables"),r=Array.prototype;null==r[i]&&n("../node_modules/core-js/modules/_hide.js")(r,i,{}),e.exports=function(e){r[i][e]=!0}},"../node_modules/core-js/modules/_advance-string-index.js":function(e,t,n){"use strict";var i=n("../node_modules/core-js/modules/_string-at.js")(!0);e.exports=function(e,t,n){return t+(n?i(e,t).length:1)}},"../node_modules/core-js/modules/_an-instance.js":function(e,t){e.exports=function(e,t,n,i){if(!(e instanceof t)||void 0!==i&&i in e)throw TypeError(n+": incorrect invocation!");return e}},"../node_modules/core-js/modules/_an-object.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_is-object.js");e.exports=function(e){if(!i(e))throw TypeError(e+" is not an object!");return e}},"../node_modules/core-js/modules/_array-copy-within.js":function(e,t,n){"use strict";var i=n("../node_modules/core-js/modules/_to-object.js"),r=n("../node_modules/core-js/modules/_to-absolute-index.js"),o=n("../node_modules/core-js/modules/_to-length.js");e.exports=[].copyWithin||function(e,t){var n=i(this),s=o(n.length),a=r(e,s),l=r(t,s),u=arguments.length>2?arguments[2]:void 0,c=Math.min((void 0===u?s:r(u,s))-l,s-a),d=1;for(l<a&&a<l+c&&(d=-1,l+=c-1,a+=c-1);c-- >0;)l in n?n[a]=n[l]:delete n[a],a+=d,l+=d;return n}},"../node_modules/core-js/modules/_array-fill.js":function(e,t,n){"use strict";var i=n("../node_modules/core-js/modules/_to-object.js"),r=n("../node_modules/core-js/modules/_to-absolute-index.js"),o=n("../node_modules/core-js/modules/_to-length.js");e.exports=function(e){for(var t=i(this),n=o(t.length),s=arguments.length,a=r(s>1?arguments[1]:void 0,n),l=s>2?arguments[2]:void 0,u=void 0===l?n:r(l,n);u>a;)t[a++]=e;return t}},"../node_modules/core-js/modules/_array-from-iterable.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_for-of.js");e.exports=function(e,t){var n=[];return i(e,!1,n.push,n,t),n}},"../node_modules/core-js/modules/_array-includes.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_to-iobject.js"),r=n("../node_modules/core-js/modules/_to-length.js"),o=n("../node_modules/core-js/modules/_to-absolute-index.js");e.exports=function(e){return function(t,n,s){var a,l=i(t),u=r(l.length),c=o(s,u);if(e&&n!=n){for(;u>c;)if((a=l[c++])!=a)return!0}else for(;u>c;c++)if((e||c in l)&&l[c]===n)return e||c||0;return!e&&-1}}},"../node_modules/core-js/modules/_array-methods.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_ctx.js"),r=n("../node_modules/core-js/modules/_iobject.js"),o=n("../node_modules/core-js/modules/_to-object.js"),s=n("../node_modules/core-js/modules/_to-length.js"),a=n("../node_modules/core-js/modules/_array-species-create.js");e.exports=function(e,t){var n=1==e,l=2==e,u=3==e,c=4==e,d=6==e,h=5==e||d,p=t||a;return function(t,a,f){for(var m,_,g=o(t),v=r(g),y=i(a,f,3),x=s(v.length),b=0,w=n?p(t,x):l?p(t,0):void 0;x>b;b++)if((h||b in v)&&(_=y(m=v[b],b,g),e))if(n)w[b]=_;else if(_)switch(e){case 3:return!0;case 5:return m;case 6:return b;case 2:w.push(m)}else if(c)return!1;return d?-1:u||c?c:w}}},"../node_modules/core-js/modules/_array-reduce.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_a-function.js"),r=n("../node_modules/core-js/modules/_to-object.js"),o=n("../node_modules/core-js/modules/_iobject.js"),s=n("../node_modules/core-js/modules/_to-length.js");e.exports=function(e,t,n,a,l){i(t);var u=r(e),c=o(u),d=s(u.length),h=l?d-1:0,p=l?-1:1;if(n<2)for(;;){if(h in c){a=c[h],h+=p;break}if(h+=p,l?h<0:d<=h)throw TypeError("Reduce of empty array with no initial value")}for(;l?h>=0:d>h;h+=p)h in c&&(a=t(a,c[h],h,u));return a}},"../node_modules/core-js/modules/_array-species-constructor.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_is-object.js"),r=n("../node_modules/core-js/modules/_is-array.js"),o=n("../node_modules/core-js/modules/_wks.js")("species");e.exports=function(e){var t;return r(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!r(t.prototype)||(t=void 0),i(t)&&null===(t=t[o])&&(t=void 0)),void 0===t?Array:t}},"../node_modules/core-js/modules/_array-species-create.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_array-species-constructor.js");e.exports=function(e,t){return new(i(e))(t)}},"../node_modules/core-js/modules/_bind.js":function(e,t,n){"use strict";var i=n("../node_modules/core-js/modules/_a-function.js"),r=n("../node_modules/core-js/modules/_is-object.js"),o=n("../node_modules/core-js/modules/_invoke.js"),s=[].slice,a={},l=function(e,t,n){if(!(t in a)){for(var i=[],r=0;r<t;r++)i[r]="a["+r+"]";a[t]=Function("F,a","return new F("+i.join(",")+")")}return a[t](e,n)};e.exports=Function.bind||function(e){var t=i(this),n=s.call(arguments,1),a=function(){var i=n.concat(s.call(arguments));return this instanceof a?l(t,i.length,i):o(t,i,e)};return r(t.prototype)&&(a.prototype=t.prototype),a}},"../node_modules/core-js/modules/_classof.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_cof.js"),r=n("../node_modules/core-js/modules/_wks.js")("toStringTag"),o="Arguments"==i(function(){return arguments}());e.exports=function(e){var t,n,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),r))?n:o?i(t):"Object"==(s=i(t))&&"function"==typeof t.callee?"Arguments":s}},"../node_modules/core-js/modules/_cof.js":function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},"../node_modules/core-js/modules/_collection-strong.js":function(e,t,n){"use strict";var i=n("../node_modules/core-js/modules/_object-dp.js").f,r=n("../node_modules/core-js/modules/_object-create.js"),o=n("../node_modules/core-js/modules/_redefine-all.js"),s=n("../node_modules/core-js/modules/_ctx.js"),a=n("../node_modules/core-js/modules/_an-instance.js"),l=n("../node_modules/core-js/modules/_for-of.js"),u=n("../node_modules/core-js/modules/_iter-define.js"),c=n("../node_modules/core-js/modules/_iter-step.js"),d=n("../node_modules/core-js/modules/_set-species.js"),h=n("../node_modules/core-js/modules/_descriptors.js"),p=n("../node_modules/core-js/modules/_meta.js").fastKey,f=n("../node_modules/core-js/modules/_validate-collection.js"),m=h?"_s":"size",_=function(e,t){var n,i=p(t);if("F"!==i)return e._i[i];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,u){var c=e(function(e,i){a(e,c,t,"_i"),e._t=t,e._i=r(null),e._f=void 0,e._l=void 0,e[m]=0,null!=i&&l(i,n,e[u],e)});return o(c.prototype,{clear:function(){for(var e=f(this,t),n=e._i,i=e._f;i;i=i.n)i.r=!0,i.p&&(i.p=i.p.n=void 0),delete n[i.i];e._f=e._l=void 0,e[m]=0},delete:function(e){var n=f(this,t),i=_(n,e);if(i){var r=i.n,o=i.p;delete n._i[i.i],i.r=!0,o&&(o.n=r),r&&(r.p=o),n._f==i&&(n._f=r),n._l==i&&(n._l=o),n[m]--}return!!i},forEach:function(e){f(this,t);for(var n,i=s(e,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(i(n.v,n.k,this);n&&n.r;)n=n.p},has:function(e){return!!_(f(this,t),e)}}),h&&i(c.prototype,"size",{get:function(){return f(this,t)[m]}}),c},def:function(e,t,n){var i,r,o=_(e,t);return o?o.v=n:(e._l=o={i:r=p(t,!0),k:t,v:n,p:i=e._l,n:void 0,r:!1},e._f||(e._f=o),i&&(i.n=o),e[m]++,"F"!==r&&(e._i[r]=o)),e},getEntry:_,setStrong:function(e,t,n){u(e,t,function(e,n){this._t=f(e,t),this._k=n,this._l=void 0},function(){for(var e=this._k,t=this._l;t&&t.r;)t=t.p;return this._t&&(this._l=t=t?t.n:this._t._f)?c(0,"keys"==e?t.k:"values"==e?t.v:[t.k,t.v]):(this._t=void 0,c(1))},n?"entries":"values",!n,!0),d(t)}}},"../node_modules/core-js/modules/_collection-to-json.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_classof.js"),r=n("../node_modules/core-js/modules/_array-from-iterable.js");e.exports=function(e){return function(){if(i(this)!=e)throw TypeError(e+"#toJSON isn't generic");return r(this)}}},"../node_modules/core-js/modules/_collection-weak.js":function(e,t,n){"use strict";var i=n("../node_modules/core-js/modules/_redefine-all.js"),r=n("../node_modules/core-js/modules/_meta.js").getWeak,o=n("../node_modules/core-js/modules/_an-object.js"),s=n("../node_modules/core-js/modules/_is-object.js"),a=n("../node_modules/core-js/modules/_an-instance.js"),l=n("../node_modules/core-js/modules/_for-of.js"),u=n("../node_modules/core-js/modules/_array-methods.js"),c=n("../node_modules/core-js/modules/_has.js"),d=n("../node_modules/core-js/modules/_validate-collection.js"),h=u(5),p=u(6),f=0,m=function(e){return e._l||(e._l=new _)},_=function(){this.a=[]},g=function(e,t){return h(e.a,function(e){return e[0]===t})};_.prototype={get:function(e){var t=g(this,e);if(t)return t[1]},has:function(e){return!!g(this,e)},set:function(e,t){var n=g(this,e);n?n[1]=t:this.a.push([e,t])},delete:function(e){var t=p(this.a,function(t){return t[0]===e});return~t&&this.a.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,n,o){var u=e(function(e,i){a(e,u,t,"_i"),e._t=t,e._i=f++,e._l=void 0,null!=i&&l(i,n,e[o],e)});return i(u.prototype,{delete:function(e){if(!s(e))return!1;var n=r(e);return!0===n?m(d(this,t)).delete(e):n&&c(n,this._i)&&delete n[this._i]},has:function(e){if(!s(e))return!1;var n=r(e);return!0===n?m(d(this,t)).has(e):n&&c(n,this._i)}}),u},def:function(e,t,n){var i=r(o(t),!0);return!0===i?m(e).set(t,n):i[e._i]=n,e},ufstore:m}},"../node_modules/core-js/modules/_collection.js":function(e,t,n){"use strict";var i=n("../node_modules/core-js/modules/_global.js"),r=n("../node_modules/core-js/modules/_export.js"),o=n("../node_modules/core-js/modules/_redefine.js"),s=n("../node_modules/core-js/modules/_redefine-all.js"),a=n("../node_modules/core-js/modules/_meta.js"),l=n("../node_modules/core-js/modules/_for-of.js"),u=n("../node_modules/core-js/modules/_an-instance.js"),c=n("../node_modules/core-js/modules/_is-object.js"),d=n("../node_modules/core-js/modules/_fails.js"),h=n("../node_modules/core-js/modules/_iter-detect.js"),p=n("../node_modules/core-js/modules/_set-to-string-tag.js"),f=n("../node_modules/core-js/modules/_inherit-if-required.js");e.exports=function(e,t,n,m,_,g){var v=i[e],y=v,x=_?"set":"add",b=y&&y.prototype,w={},j=function(e){var t=b[e];o(b,e,"delete"==e?function(e){return!(g&&!c(e))&&t.call(this,0===e?0:e)}:"has"==e?function(e){return!(g&&!c(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return g&&!c(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,n){return t.call(this,0===e?0:e,n),this})};if("function"==typeof y&&(g||b.forEach&&!d(function(){(new y).entries().next()}))){var S=new y,A=S[x](g?{}:-0,1)!=S,M=d(function(){S.has(1)}),T=h(function(e){new y(e)}),P=!g&&d(function(){for(var e=new y,t=5;t--;)e[x](t,t);return!e.has(-0)});T||((y=t(function(t,n){u(t,y,e);var i=f(new v,t,y);return null!=n&&l(n,_,i[x],i),i})).prototype=b,b.constructor=y),(M||P)&&(j("delete"),j("has"),_&&j("get")),(P||A)&&j(x),g&&b.clear&&delete b.clear}else y=m.getConstructor(t,e,_,x),s(y.prototype,n),a.NEED=!0;return p(y,e),w[e]=y,r(r.G+r.W+r.F*(y!=v),w),g||m.setStrong(y,e,_),y}},"../node_modules/core-js/modules/_core.js":function(e,t){var n=e.exports={version:"2.6.9"};"number"==typeof __e&&(__e=n)},"../node_modules/core-js/modules/_create-property.js":function(e,t,n){"use strict";var i=n("../node_modules/core-js/modules/_object-dp.js"),r=n("../node_modules/core-js/modules/_property-desc.js");e.exports=function(e,t,n){t in e?i.f(e,t,r(0,n)):e[t]=n}},"../node_modules/core-js/modules/_ctx.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_a-function.js");e.exports=function(e,t,n){if(i(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)}}return function(){return e.apply(t,arguments)}}},"../node_modules/core-js/modules/_date-to-iso-string.js":function(e,t,n){"use strict";var i=n("../node_modules/core-js/modules/_fails.js"),r=Date.prototype.getTime,o=Date.prototype.toISOString,s=function(e){return e>9?e:"0"+e};e.exports=i(function(){return"0385-07-25T07:06:39.999Z"!=o.call(new Date(-5e13-1))})||!i(function(){o.call(new Date(NaN))})?function(){if(!isFinite(r.call(this)))throw RangeError("Invalid time value");var e=this,t=e.getUTCFullYear(),n=e.getUTCMilliseconds(),i=t<0?"-":t>9999?"+":"";return i+("00000"+Math.abs(t)).slice(i?-6:-4)+"-"+s(e.getUTCMonth()+1)+"-"+s(e.getUTCDate())+"T"+s(e.getUTCHours())+":"+s(e.getUTCMinutes())+":"+s(e.getUTCSeconds())+"."+(n>99?n:"0"+s(n))+"Z"}:o},"../node_modules/core-js/modules/_date-to-primitive.js":function(e,t,n){"use strict";var i=n("../node_modules/core-js/modules/_an-object.js"),r=n("../node_modules/core-js/modules/_to-primitive.js");e.exports=function(e){if("string"!==e&&"number"!==e&&"default"!==e)throw TypeError("Incorrect hint");return r(i(this),"number"!=e)}},"../node_modules/core-js/modules/_defined.js":function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},"../node_modules/core-js/modules/_descriptors.js":function(e,t,n){e.exports=!n("../node_modules/core-js/modules/_fails.js")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},"../node_modules/core-js/modules/_dom-create.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_is-object.js"),r=n("../node_modules/core-js/modules/_global.js").document,o=i(r)&&i(r.createElement);e.exports=function(e){return o?r.createElement(e):{}}},"../node_modules/core-js/modules/_enum-bug-keys.js":function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},"../node_modules/core-js/modules/_enum-keys.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_object-keys.js"),r=n("../node_modules/core-js/modules/_object-gops.js"),o=n("../node_modules/core-js/modules/_object-pie.js");e.exports=function(e){var t=i(e),n=r.f;if(n)for(var s,a=n(e),l=o.f,u=0;a.length>u;)l.call(e,s=a[u++])&&t.push(s);return t}},"../node_modules/core-js/modules/_export.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_global.js"),r=n("../node_modules/core-js/modules/_core.js"),o=n("../node_modules/core-js/modules/_hide.js"),s=n("../node_modules/core-js/modules/_redefine.js"),a=n("../node_modules/core-js/modules/_ctx.js"),l=function(e,t,n){var u,c,d,h,p=e&l.F,f=e&l.G,m=e&l.S,_=e&l.P,g=e&l.B,v=f?i:m?i[t]||(i[t]={}):(i[t]||{}).prototype,y=f?r:r[t]||(r[t]={}),x=y.prototype||(y.prototype={});for(u in f&&(n=t),n)d=((c=!p&&v&&void 0!==v[u])?v:n)[u],h=g&&c?a(d,i):_&&"function"==typeof d?a(Function.call,d):d,v&&s(v,u,d,e&l.U),y[u]!=d&&o(y,u,h),_&&x[u]!=d&&(x[u]=d)};i.core=r,l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},"../node_modules/core-js/modules/_fails-is-regexp.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_wks.js")("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[i]=!1,!"/./"[e](t)}catch(e){}}return!0}},"../node_modules/core-js/modules/_fails.js":function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},"../node_modules/core-js/modules/_fix-re-wks.js":function(e,t,n){"use strict";n("../node_modules/core-js/modules/es6.regexp.exec.js");var i=n("../node_modules/core-js/modules/_redefine.js"),r=n("../node_modules/core-js/modules/_hide.js"),o=n("../node_modules/core-js/modules/_fails.js"),s=n("../node_modules/core-js/modules/_defined.js"),a=n("../node_modules/core-js/modules/_wks.js"),l=n("../node_modules/core-js/modules/_regexp-exec.js"),u=a("species"),c=!o(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}),d=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();e.exports=function(e,t,n){var h=a(e),p=!o(function(){var t={};return t[h]=function(){return 7},7!=""[e](t)}),f=p?!o(function(){var t=!1,n=/a/;return n.exec=function(){return t=!0,null},"split"===e&&(n.constructor={},n.constructor[u]=function(){return n}),n[h](""),!t}):void 0;if(!p||!f||"replace"===e&&!c||"split"===e&&!d){var m=/./[h],_=n(s,h,""[e],function(e,t,n,i,r){return t.exec===l?p&&!r?{done:!0,value:m.call(t,n,i)}:{done:!0,value:e.call(n,t,i)}:{done:!1}}),g=_[0],v=_[1];i(String.prototype,e,g),r(RegExp.prototype,h,2==t?function(e,t){return v.call(e,this,t)}:function(e){return v.call(e,this)})}}},"../node_modules/core-js/modules/_flags.js":function(e,t,n){"use strict";var i=n("../node_modules/core-js/modules/_an-object.js");e.exports=function(){var e=i(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},"../node_modules/core-js/modules/_flatten-into-array.js":function(e,t,n){"use strict";var i=n("../node_modules/core-js/modules/_is-array.js"),r=n("../node_modules/core-js/modules/_is-object.js"),o=n("../node_modules/core-js/modules/_to-length.js"),s=n("../node_modules/core-js/modules/_ctx.js"),a=n("../node_modules/core-js/modules/_wks.js")("isConcatSpreadable");e.exports=function e(t,n,l,u,c,d,h,p){for(var f,m,_=c,g=0,v=!!h&&s(h,p,3);g<u;){if(g in l){if(f=v?v(l[g],g,n):l[g],m=!1,r(f)&&(m=void 0!==(m=f[a])?!!m:i(f)),m&&d>0)_=e(t,n,f,o(f.length),_,d-1)-1;else{if(_>=9007199254740991)throw TypeError();t[_]=f}_++}g++}return _}},"../node_modules/core-js/modules/_for-of.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_ctx.js"),r=n("../node_modules/core-js/modules/_iter-call.js"),o=n("../node_modules/core-js/modules/_is-array-iter.js"),s=n("../node_modules/core-js/modules/_an-object.js"),a=n("../node_modules/core-js/modules/_to-length.js"),l=n("../node_modules/core-js/modules/core.get-iterator-method.js"),u={},c={};(t=e.exports=function(e,t,n,d,h){var p,f,m,_,g=h?function(){return e}:l(e),v=i(n,d,t?2:1),y=0;if("function"!=typeof g)throw TypeError(e+" is not iterable!");if(o(g)){for(p=a(e.length);p>y;y++)if((_=t?v(s(f=e[y])[0],f[1]):v(e[y]))===u||_===c)return _}else for(m=g.call(e);!(f=m.next()).done;)if((_=r(m,v,f.value,t))===u||_===c)return _}).BREAK=u,t.RETURN=c},"../node_modules/core-js/modules/_function-to-string.js":function(e,t,n){e.exports=n("../node_modules/core-js/modules/_shared.js")("native-function-to-string",Function.toString)},"../node_modules/core-js/modules/_global.js":function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},"../node_modules/core-js/modules/_has.js":function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},"../node_modules/core-js/modules/_hide.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_object-dp.js"),r=n("../node_modules/core-js/modules/_property-desc.js");e.exports=n("../node_modules/core-js/modules/_descriptors.js")?function(e,t,n){return i.f(e,t,r(1,n))}:function(e,t,n){return e[t]=n,e}},"../node_modules/core-js/modules/_html.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_global.js").document;e.exports=i&&i.documentElement},"../node_modules/core-js/modules/_ie8-dom-define.js":function(e,t,n){e.exports=!n("../node_modules/core-js/modules/_descriptors.js")&&!n("../node_modules/core-js/modules/_fails.js")(function(){return 7!=Object.defineProperty(n("../node_modules/core-js/modules/_dom-create.js")("div"),"a",{get:function(){return 7}}).a})},"../node_modules/core-js/modules/_inherit-if-required.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_is-object.js"),r=n("../node_modules/core-js/modules/_set-proto.js").set;e.exports=function(e,t,n){var o,s=t.constructor;return s!==n&&"function"==typeof s&&(o=s.prototype)!==n.prototype&&i(o)&&r&&r(e,o),e}},"../node_modules/core-js/modules/_invoke.js":function(e,t){e.exports=function(e,t,n){var i=void 0===n;switch(t.length){case 0:return i?e():e.call(n);case 1:return i?e(t[0]):e.call(n,t[0]);case 2:return i?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return i?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return i?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},"../node_modules/core-js/modules/_iobject.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_cof.js");e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==i(e)?e.split(""):Object(e)}},"../node_modules/core-js/modules/_is-array-iter.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_iterators.js"),r=n("../node_modules/core-js/modules/_wks.js")("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||o[r]===e)}},"../node_modules/core-js/modules/_is-array.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_cof.js");e.exports=Array.isArray||function(e){return"Array"==i(e)}},"../node_modules/core-js/modules/_is-integer.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_is-object.js"),r=Math.floor;e.exports=function(e){return!i(e)&&isFinite(e)&&r(e)===e}},"../node_modules/core-js/modules/_is-object.js":function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},"../node_modules/core-js/modules/_is-regexp.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_is-object.js"),r=n("../node_modules/core-js/modules/_cof.js"),o=n("../node_modules/core-js/modules/_wks.js")("match");e.exports=function(e){var t;return i(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==r(e))}},"../node_modules/core-js/modules/_iter-call.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_an-object.js");e.exports=function(e,t,n,r){try{return r?t(i(n)[0],n[1]):t(n)}catch(t){var o=e.return;throw void 0!==o&&i(o.call(e)),t}}},"../node_modules/core-js/modules/_iter-create.js":function(e,t,n){"use strict";var i=n("../node_modules/core-js/modules/_object-create.js"),r=n("../node_modules/core-js/modules/_property-desc.js"),o=n("../node_modules/core-js/modules/_set-to-string-tag.js"),s={};n("../node_modules/core-js/modules/_hide.js")(s,n("../node_modules/core-js/modules/_wks.js")("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=i(s,{next:r(1,n)}),o(e,t+" Iterator")}},"../node_modules/core-js/modules/_iter-define.js":function(e,t,n){"use strict";var i=n("../node_modules/core-js/modules/_library.js"),r=n("../node_modules/core-js/modules/_export.js"),o=n("../node_modules/core-js/modules/_redefine.js"),s=n("../node_modules/core-js/modules/_hide.js"),a=n("../node_modules/core-js/modules/_iterators.js"),l=n("../node_modules/core-js/modules/_iter-create.js"),u=n("../node_modules/core-js/modules/_set-to-string-tag.js"),c=n("../node_modules/core-js/modules/_object-gpo.js"),d=n("../node_modules/core-js/modules/_wks.js")("iterator"),h=!([].keys&&"next"in[].keys()),p=function(){return this};e.exports=function(e,t,n,f,m,_,g){l(n,t,f);var v,y,x,b=function(e){if(!h&&e in A)return A[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},w=t+" Iterator",j="values"==m,S=!1,A=e.prototype,M=A[d]||A["@@iterator"]||m&&A[m],T=M||b(m),P=m?j?b("entries"):T:void 0,L="Array"==t&&A.entries||M;if(L&&(x=c(L.call(new e)))!==Object.prototype&&x.next&&(u(x,w,!0),i||"function"==typeof x[d]||s(x,d,p)),j&&M&&"values"!==M.name&&(S=!0,T=function(){return M.call(this)}),i&&!g||!h&&!S&&A[d]||s(A,d,T),a[t]=T,a[w]=p,m)if(v={values:j?T:b("values"),keys:_?T:b("keys"),entries:P},g)for(y in v)y in A||o(A,y,v[y]);else r(r.P+r.F*(h||S),t,v);return v}},"../node_modules/core-js/modules/_iter-detect.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_wks.js")("iterator"),r=!1;try{var o=[7][i]();o.return=function(){r=!0},Array.from(o,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!r)return!1;var n=!1;try{var o=[7],s=o[i]();s.next=function(){return{done:n=!0}},o[i]=function(){return s},e(o)}catch(e){}return n}},"../node_modules/core-js/modules/_iter-step.js":function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},"../node_modules/core-js/modules/_iterators.js":function(e,t){e.exports={}},"../node_modules/core-js/modules/_library.js":function(e,t){e.exports=!1},"../node_modules/core-js/modules/_math-expm1.js":function(e,t){var n=Math.expm1;e.exports=!n||n(10)>22025.465794806718||n(10)<22025.465794806718||-2e-17!=n(-2e-17)?function(e){return 0==(e=+e)?e:e>-1e-6&&e<1e-6?e+e*e/2:Math.exp(e)-1}:n},"../node_modules/core-js/modules/_math-fround.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_math-sign.js"),r=Math.pow,o=r(2,-52),s=r(2,-23),a=r(2,127)*(2-s),l=r(2,-126);e.exports=Math.fround||function(e){var t,n,r=Math.abs(e),u=i(e);return r<l?u*(r/l/s+1/o-1/o)*l*s:(n=(t=(1+s/o)*r)-(t-r))>a||n!=n?u*(1/0):u*n}},"../node_modules/core-js/modules/_math-log1p.js":function(e,t){e.exports=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:Math.log(1+e)}},"../node_modules/core-js/modules/_math-scale.js":function(e,t){e.exports=Math.scale||function(e,t,n,i,r){return 0===arguments.length||e!=e||t!=t||n!=n||i!=i||r!=r?NaN:e===1/0||e===-1/0?e:(e-t)*(r-i)/(n-t)+i}},"../node_modules/core-js/modules/_math-sign.js":function(e,t){e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},"../node_modules/core-js/modules/_meta.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_uid.js")("meta"),r=n("../node_modules/core-js/modules/_is-object.js"),o=n("../node_modules/core-js/modules/_has.js"),s=n("../node_modules/core-js/modules/_object-dp.js").f,a=0,l=Object.isExtensible||function(){return!0},u=!n("../node_modules/core-js/modules/_fails.js")(function(){return l(Object.preventExtensions({}))}),c=function(e){s(e,i,{value:{i:"O"+ ++a,w:{}}})},d=e.exports={KEY:i,NEED:!1,fastKey:function(e,t){if(!r(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,i)){if(!l(e))return"F";if(!t)return"E";c(e)}return e[i].i},getWeak:function(e,t){if(!o(e,i)){if(!l(e))return!0;if(!t)return!1;c(e)}return e[i].w},onFreeze:function(e){return u&&d.NEED&&l(e)&&!o(e,i)&&c(e),e}}},"../node_modules/core-js/modules/_metadata.js":function(e,t,n){var i=n("../node_modules/core-js/modules/es6.map.js"),r=n("../node_modules/core-js/modules/_export.js"),o=n("../node_modules/core-js/modules/_shared.js")("metadata"),s=o.store||(o.store=new(n("../node_modules/core-js/modules/es6.weak-map.js"))),a=function(e,t,n){var r=s.get(e);if(!r){if(!n)return;s.set(e,r=new i)}var o=r.get(t);if(!o){if(!n)return;r.set(t,o=new i)}return o};e.exports={store:s,map:a,has:function(e,t,n){var i=a(t,n,!1);return void 0!==i&&i.has(e)},get:function(e,t,n){var i=a(t,n,!1);return void 0===i?void 0:i.get(e)},set:function(e,t,n,i){a(n,i,!0).set(e,t)},keys:function(e,t){var n=a(e,t,!1),i=[];return n&&n.forEach(function(e,t){i.push(t)}),i},key:function(e){return void 0===e||"symbol"==typeof e?e:String(e)},exp:function(e){r(r.S,"Reflect",e)}}},"../node_modules/core-js/modules/_microtask.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_global.js"),r=n("../node_modules/core-js/modules/_task.js").set,o=i.MutationObserver||i.WebKitMutationObserver,s=i.process,a=i.Promise,l="process"==n("../node_modules/core-js/modules/_cof.js")(s);e.exports=function(){var e,t,n,u=function(){var i,r;for(l&&(i=s.domain)&&i.exit();e;){r=e.fn,e=e.next;try{r()}catch(i){throw e?n():t=void 0,i}}t=void 0,i&&i.enter()};if(l)n=function(){s.nextTick(u)};else if(!o||i.navigator&&i.navigator.standalone)if(a&&a.resolve){var c=a.resolve(void 0);n=function(){c.then(u)}}else n=function(){r.call(i,u)};else{var d=!0,h=document.createTextNode("");new o(u).observe(h,{characterData:!0}),n=function(){h.data=d=!d}}return function(i){var r={fn:i,next:void 0};t&&(t.next=r),e||(e=r,n()),t=r}}},"../node_modules/core-js/modules/_new-promise-capability.js":function(e,t,n){"use strict";var i=n("../node_modules/core-js/modules/_a-function.js");function r(e){var t,n;this.promise=new e(function(e,i){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=i}),this.resolve=i(t),this.reject=i(n)}e.exports.f=function(e){return new r(e)}},"../node_modules/core-js/modules/_object-assign.js":function(e,t,n){"use strict";var i=n("../node_modules/core-js/modules/_descriptors.js"),r=n("../node_modules/core-js/modules/_object-keys.js"),o=n("../node_modules/core-js/modules/_object-gops.js"),s=n("../node_modules/core-js/modules/_object-pie.js"),a=n("../node_modules/core-js/modules/_to-object.js"),l=n("../node_modules/core-js/modules/_iobject.js"),u=Object.assign;e.exports=!u||n("../node_modules/core-js/modules/_fails.js")(function(){var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach(function(e){t[e]=e}),7!=u({},e)[n]||Object.keys(u({},t)).join("")!=i})?function(e,t){for(var n=a(e),u=arguments.length,c=1,d=o.f,h=s.f;u>c;)for(var p,f=l(arguments[c++]),m=d?r(f).concat(d(f)):r(f),_=m.length,g=0;_>g;)p=m[g++],i&&!h.call(f,p)||(n[p]=f[p]);return n}:u},"../node_modules/core-js/modules/_object-create.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_an-object.js"),r=n("../node_modules/core-js/modules/_object-dps.js"),o=n("../node_modules/core-js/modules/_enum-bug-keys.js"),s=n("../node_modules/core-js/modules/_shared-key.js")("IE_PROTO"),a=function(){},l=function(){var e,t=n("../node_modules/core-js/modules/_dom-create.js")("iframe"),i=o.length;for(t.style.display="none",n("../node_modules/core-js/modules/_html.js").appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),l=e.F;i--;)delete l.prototype[o[i]];return l()};e.exports=Object.create||function(e,t){var n;return null!==e?(a.prototype=i(e),n=new a,a.prototype=null,n[s]=e):n=l(),void 0===t?n:r(n,t)}},"../node_modules/core-js/modules/_object-dp.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_an-object.js"),r=n("../node_modules/core-js/modules/_ie8-dom-define.js"),o=n("../node_modules/core-js/modules/_to-primitive.js"),s=Object.defineProperty;t.f=n("../node_modules/core-js/modules/_descriptors.js")?Object.defineProperty:function(e,t,n){if(i(e),t=o(t,!0),i(n),r)try{return s(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},"../node_modules/core-js/modules/_object-dps.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_object-dp.js"),r=n("../node_modules/core-js/modules/_an-object.js"),o=n("../node_modules/core-js/modules/_object-keys.js");e.exports=n("../node_modules/core-js/modules/_descriptors.js")?Object.defineProperties:function(e,t){r(e);for(var n,s=o(t),a=s.length,l=0;a>l;)i.f(e,n=s[l++],t[n]);return e}},"../node_modules/core-js/modules/_object-forced-pam.js":function(e,t,n){"use strict";e.exports=n("../node_modules/core-js/modules/_library.js")||!n("../node_modules/core-js/modules/_fails.js")(function(){var e=Math.random();__defineSetter__.call(null,e,function(){}),delete n("../node_modules/core-js/modules/_global.js")[e]})},"../node_modules/core-js/modules/_object-gopd.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_object-pie.js"),r=n("../node_modules/core-js/modules/_property-desc.js"),o=n("../node_modules/core-js/modules/_to-iobject.js"),s=n("../node_modules/core-js/modules/_to-primitive.js"),a=n("../node_modules/core-js/modules/_has.js"),l=n("../node_modules/core-js/modules/_ie8-dom-define.js"),u=Object.getOwnPropertyDescriptor;t.f=n("../node_modules/core-js/modules/_descriptors.js")?u:function(e,t){if(e=o(e),t=s(t,!0),l)try{return u(e,t)}catch(e){}if(a(e,t))return r(!i.f.call(e,t),e[t])}},"../node_modules/core-js/modules/_object-gopn-ext.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_to-iobject.js"),r=n("../node_modules/core-js/modules/_object-gopn.js").f,o={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return s&&"[object Window]"==o.call(e)?function(e){try{return r(e)}catch(e){return s.slice()}}(e):r(i(e))}},"../node_modules/core-js/modules/_object-gopn.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_object-keys-internal.js"),r=n("../node_modules/core-js/modules/_enum-bug-keys.js").concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,r)}},"../node_modules/core-js/modules/_object-gops.js":function(e,t){t.f=Object.getOwnPropertySymbols},"../node_modules/core-js/modules/_object-gpo.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_has.js"),r=n("../node_modules/core-js/modules/_to-object.js"),o=n("../node_modules/core-js/modules/_shared-key.js")("IE_PROTO"),s=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=r(e),i(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?s:null}},"../node_modules/core-js/modules/_object-keys-internal.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_has.js"),r=n("../node_modules/core-js/modules/_to-iobject.js"),o=n("../node_modules/core-js/modules/_array-includes.js")(!1),s=n("../node_modules/core-js/modules/_shared-key.js")("IE_PROTO");e.exports=function(e,t){var n,a=r(e),l=0,u=[];for(n in a)n!=s&&i(a,n)&&u.push(n);for(;t.length>l;)i(a,n=t[l++])&&(~o(u,n)||u.push(n));return u}},"../node_modules/core-js/modules/_object-keys.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_object-keys-internal.js"),r=n("../node_modules/core-js/modules/_enum-bug-keys.js");e.exports=Object.keys||function(e){return i(e,r)}},"../node_modules/core-js/modules/_object-pie.js":function(e,t){t.f={}.propertyIsEnumerable},"../node_modules/core-js/modules/_object-sap.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js"),r=n("../node_modules/core-js/modules/_core.js"),o=n("../node_modules/core-js/modules/_fails.js");e.exports=function(e,t){var n=(r.Object||{})[e]||Object[e],s={};s[e]=t(n),i(i.S+i.F*o(function(){n(1)}),"Object",s)}},"../node_modules/core-js/modules/_object-to-array.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_descriptors.js"),r=n("../node_modules/core-js/modules/_object-keys.js"),o=n("../node_modules/core-js/modules/_to-iobject.js"),s=n("../node_modules/core-js/modules/_object-pie.js").f;e.exports=function(e){return function(t){for(var n,a=o(t),l=r(a),u=l.length,c=0,d=[];u>c;)n=l[c++],i&&!s.call(a,n)||d.push(e?[n,a[n]]:a[n]);return d}}},"../node_modules/core-js/modules/_own-keys.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_object-gopn.js"),r=n("../node_modules/core-js/modules/_object-gops.js"),o=n("../node_modules/core-js/modules/_an-object.js"),s=n("../node_modules/core-js/modules/_global.js").Reflect;e.exports=s&&s.ownKeys||function(e){var t=i.f(o(e)),n=r.f;return n?t.concat(n(e)):t}},"../node_modules/core-js/modules/_parse-float.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_global.js").parseFloat,r=n("../node_modules/core-js/modules/_string-trim.js").trim;e.exports=1/i(n("../node_modules/core-js/modules/_string-ws.js")+"-0")!=-1/0?function(e){var t=r(String(e),3),n=i(t);return 0===n&&"-"==t.charAt(0)?-0:n}:i},"../node_modules/core-js/modules/_parse-int.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_global.js").parseInt,r=n("../node_modules/core-js/modules/_string-trim.js").trim,o=n("../node_modules/core-js/modules/_string-ws.js"),s=/^[-+]?0[xX]/;e.exports=8!==i(o+"08")||22!==i(o+"0x16")?function(e,t){var n=r(String(e),3);return i(n,t>>>0||(s.test(n)?16:10))}:i},"../node_modules/core-js/modules/_perform.js":function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},"../node_modules/core-js/modules/_promise-resolve.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_an-object.js"),r=n("../node_modules/core-js/modules/_is-object.js"),o=n("../node_modules/core-js/modules/_new-promise-capability.js");e.exports=function(e,t){if(i(e),r(t)&&t.constructor===e)return t;var n=o.f(e);return(0,n.resolve)(t),n.promise}},"../node_modules/core-js/modules/_property-desc.js":function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},"../node_modules/core-js/modules/_redefine-all.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_redefine.js");e.exports=function(e,t,n){for(var r in t)i(e,r,t[r],n);return e}},"../node_modules/core-js/modules/_redefine.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_global.js"),r=n("../node_modules/core-js/modules/_hide.js"),o=n("../node_modules/core-js/modules/_has.js"),s=n("../node_modules/core-js/modules/_uid.js")("src"),a=n("../node_modules/core-js/modules/_function-to-string.js"),l=(""+a).split("toString");n("../node_modules/core-js/modules/_core.js").inspectSource=function(e){return a.call(e)},(e.exports=function(e,t,n,a){var u="function"==typeof n;u&&(o(n,"name")||r(n,"name",t)),e[t]!==n&&(u&&(o(n,s)||r(n,s,e[t]?""+e[t]:l.join(String(t)))),e===i?e[t]=n:a?e[t]?e[t]=n:r(e,t,n):(delete e[t],r(e,t,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[s]||a.call(this)})},"../node_modules/core-js/modules/_regexp-exec-abstract.js":function(e,t,n){"use strict";var i=n("../node_modules/core-js/modules/_classof.js"),r=RegExp.prototype.exec;e.exports=function(e,t){var n=e.exec;if("function"==typeof n){var o=n.call(e,t);if("object"!=typeof o)throw new TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==i(e))throw new TypeError("RegExp#exec called on incompatible receiver");return r.call(e,t)}},"../node_modules/core-js/modules/_regexp-exec.js":function(e,t,n){"use strict";var i,r,o=n("../node_modules/core-js/modules/_flags.js"),s=RegExp.prototype.exec,a=String.prototype.replace,l=s,u=(i=/a/,r=/b*/g,s.call(i,"a"),s.call(r,"a"),0!==i.lastIndex||0!==r.lastIndex),c=void 0!==/()??/.exec("")[1];(u||c)&&(l=function(e){var t,n,i,r,l=this;return c&&(n=new RegExp("^"+l.source+"$(?!\\s)",o.call(l))),u&&(t=l.lastIndex),i=s.call(l,e),u&&i&&(l.lastIndex=l.global?i.index+i[0].length:t),c&&i&&i.length>1&&a.call(i[0],n,function(){for(r=1;r<arguments.length-2;r++)void 0===arguments[r]&&(i[r]=void 0)}),i}),e.exports=l},"../node_modules/core-js/modules/_replacer.js":function(e,t){e.exports=function(e,t){var n=t===Object(t)?function(e){return t[e]}:t;return function(t){return String(t).replace(e,n)}}},"../node_modules/core-js/modules/_same-value.js":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},"../node_modules/core-js/modules/_set-collection-from.js":function(e,t,n){"use strict";var i=n("../node_modules/core-js/modules/_export.js"),r=n("../node_modules/core-js/modules/_a-function.js"),o=n("../node_modules/core-js/modules/_ctx.js"),s=n("../node_modules/core-js/modules/_for-of.js");e.exports=function(e){i(i.S,e,{from:function(e){var t,n,i,a,l=arguments[1];return r(this),(t=void 0!==l)&&r(l),null==e?new this:(n=[],t?(i=0,a=o(l,arguments[2],2),s(e,!1,function(e){n.push(a(e,i++))})):s(e,!1,n.push,n),new this(n))}})}},"../node_modules/core-js/modules/_set-collection-of.js":function(e,t,n){"use strict";var i=n("../node_modules/core-js/modules/_export.js");e.exports=function(e){i(i.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},"../node_modules/core-js/modules/_set-proto.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_is-object.js"),r=n("../node_modules/core-js/modules/_an-object.js"),o=function(e,t){if(r(e),!i(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,i){try{(i=n("../node_modules/core-js/modules/_ctx.js")(Function.call,n("../node_modules/core-js/modules/_object-gopd.js").f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return o(e,n),t?e.__proto__=n:i(e,n),e}}({},!1):void 0),check:o}},"../node_modules/core-js/modules/_set-species.js":function(e,t,n){"use strict";var i=n("../node_modules/core-js/modules/_global.js"),r=n("../node_modules/core-js/modules/_object-dp.js"),o=n("../node_modules/core-js/modules/_descriptors.js"),s=n("../node_modules/core-js/modules/_wks.js")("species");e.exports=function(e){var t=i[e];o&&t&&!t[s]&&r.f(t,s,{configurable:!0,get:function(){return this}})}},"../node_modules/core-js/modules/_set-to-string-tag.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_object-dp.js").f,r=n("../node_modules/core-js/modules/_has.js"),o=n("../node_modules/core-js/modules/_wks.js")("toStringTag");e.exports=function(e,t,n){e&&!r(e=n?e:e.prototype,o)&&i(e,o,{configurable:!0,value:t})}},"../node_modules/core-js/modules/_shared-key.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_shared.js")("keys"),r=n("../node_modules/core-js/modules/_uid.js");e.exports=function(e){return i[e]||(i[e]=r(e))}},"../node_modules/core-js/modules/_shared.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_core.js"),r=n("../node_modules/core-js/modules/_global.js"),o=r["__core-js_shared__"]||(r["__core-js_shared__"]={});(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:i.version,mode:n("../node_modules/core-js/modules/_library.js")?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},"../node_modules/core-js/modules/_species-constructor.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_an-object.js"),r=n("../node_modules/core-js/modules/_a-function.js"),o=n("../node_modules/core-js/modules/_wks.js")("species");e.exports=function(e,t){var n,s=i(e).constructor;return void 0===s||null==(n=i(s)[o])?t:r(n)}},"../node_modules/core-js/modules/_strict-method.js":function(e,t,n){"use strict";var i=n("../node_modules/core-js/modules/_fails.js");e.exports=function(e,t){return!!e&&i(function(){t?e.call(null,function(){},1):e.call(null)})}},"../node_modules/core-js/modules/_string-at.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_to-integer.js"),r=n("../node_modules/core-js/modules/_defined.js");e.exports=function(e){return function(t,n){var o,s,a=String(r(t)),l=i(n),u=a.length;return l<0||l>=u?e?"":void 0:(o=a.charCodeAt(l))<55296||o>56319||l+1===u||(s=a.charCodeAt(l+1))<56320||s>57343?e?a.charAt(l):o:e?a.slice(l,l+2):s-56320+(o-55296<<10)+65536}}},"../node_modules/core-js/modules/_string-context.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_is-regexp.js"),r=n("../node_modules/core-js/modules/_defined.js");e.exports=function(e,t,n){if(i(t))throw TypeError("String#"+n+" doesn't accept regex!");return String(r(e))}},"../node_modules/core-js/modules/_string-html.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js"),r=n("../node_modules/core-js/modules/_fails.js"),o=n("../node_modules/core-js/modules/_defined.js"),s=/"/g,a=function(e,t,n,i){var r=String(o(e)),a="<"+t;return""!==n&&(a+=" "+n+'="'+String(i).replace(s,"&quot;")+'"'),a+">"+r+"</"+t+">"};e.exports=function(e,t){var n={};n[e]=t(a),i(i.P+i.F*r(function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}),"String",n)}},"../node_modules/core-js/modules/_string-pad.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_to-length.js"),r=n("../node_modules/core-js/modules/_string-repeat.js"),o=n("../node_modules/core-js/modules/_defined.js");e.exports=function(e,t,n,s){var a=String(o(e)),l=a.length,u=void 0===n?" ":String(n),c=i(t);if(c<=l||""==u)return a;var d=c-l,h=r.call(u,Math.ceil(d/u.length));return h.length>d&&(h=h.slice(0,d)),s?h+a:a+h}},"../node_modules/core-js/modules/_string-repeat.js":function(e,t,n){"use strict";var i=n("../node_modules/core-js/modules/_to-integer.js"),r=n("../node_modules/core-js/modules/_defined.js");e.exports=function(e){var t=String(r(this)),n="",o=i(e);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(t+=t))1&o&&(n+=t);return n}},"../node_modules/core-js/modules/_string-trim.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js"),r=n("../node_modules/core-js/modules/_defined.js"),o=n("../node_modules/core-js/modules/_fails.js"),s=n("../node_modules/core-js/modules/_string-ws.js"),a="["+s+"]",l=RegExp("^"+a+a+"*"),u=RegExp(a+a+"*$"),c=function(e,t,n){var r={},a=o(function(){return!!s[e]()||"​"!="​"[e]()}),l=r[e]=a?t(d):s[e];n&&(r[n]=l),i(i.P+i.F*a,"String",r)},d=c.trim=function(e,t){return e=String(r(e)),1&t&&(e=e.replace(l,"")),2&t&&(e=e.replace(u,"")),e};e.exports=c},"../node_modules/core-js/modules/_string-ws.js":function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},"../node_modules/core-js/modules/_task.js":function(e,t,n){var i,r,o,s=n("../node_modules/core-js/modules/_ctx.js"),a=n("../node_modules/core-js/modules/_invoke.js"),l=n("../node_modules/core-js/modules/_html.js"),u=n("../node_modules/core-js/modules/_dom-create.js"),c=n("../node_modules/core-js/modules/_global.js"),d=c.process,h=c.setImmediate,p=c.clearImmediate,f=c.MessageChannel,m=c.Dispatch,_=0,g={},v=function(){var e=+this;if(g.hasOwnProperty(e)){var t=g[e];delete g[e],t()}},y=function(e){v.call(e.data)};h&&p||(h=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return g[++_]=function(){a("function"==typeof e?e:Function(e),t)},i(_),_},p=function(e){delete g[e]},"process"==n("../node_modules/core-js/modules/_cof.js")(d)?i=function(e){d.nextTick(s(v,e,1))}:m&&m.now?i=function(e){m.now(s(v,e,1))}:f?(o=(r=new f).port2,r.port1.onmessage=y,i=s(o.postMessage,o,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(i=function(e){c.postMessage(e+"","*")},c.addEventListener("message",y,!1)):i="onreadystatechange"in u("script")?function(e){l.appendChild(u("script")).onreadystatechange=function(){l.removeChild(this),v.call(e)}}:function(e){setTimeout(s(v,e,1),0)}),e.exports={set:h,clear:p}},"../node_modules/core-js/modules/_to-absolute-index.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_to-integer.js"),r=Math.max,o=Math.min;e.exports=function(e,t){return(e=i(e))<0?r(e+t,0):o(e,t)}},"../node_modules/core-js/modules/_to-index.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_to-integer.js"),r=n("../node_modules/core-js/modules/_to-length.js");e.exports=function(e){if(void 0===e)return 0;var t=i(e),n=r(t);if(t!==n)throw RangeError("Wrong length!");return n}},"../node_modules/core-js/modules/_to-integer.js":function(e,t){var n=Math.ceil,i=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?i:n)(e)}},"../node_modules/core-js/modules/_to-iobject.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_iobject.js"),r=n("../node_modules/core-js/modules/_defined.js");e.exports=function(e){return i(r(e))}},"../node_modules/core-js/modules/_to-length.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_to-integer.js"),r=Math.min;e.exports=function(e){return e>0?r(i(e),9007199254740991):0}},"../node_modules/core-js/modules/_to-object.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_defined.js");e.exports=function(e){return Object(i(e))}},"../node_modules/core-js/modules/_to-primitive.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_is-object.js");e.exports=function(e,t){if(!i(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!i(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},"../node_modules/core-js/modules/_typed-array.js":function(e,t,n){"use strict";if(n("../node_modules/core-js/modules/_descriptors.js")){var i=n("../node_modules/core-js/modules/_library.js"),r=n("../node_modules/core-js/modules/_global.js"),o=n("../node_modules/core-js/modules/_fails.js"),s=n("../node_modules/core-js/modules/_export.js"),a=n("../node_modules/core-js/modules/_typed.js"),l=n("../node_modules/core-js/modules/_typed-buffer.js"),u=n("../node_modules/core-js/modules/_ctx.js"),c=n("../node_modules/core-js/modules/_an-instance.js"),d=n("../node_modules/core-js/modules/_property-desc.js"),h=n("../node_modules/core-js/modules/_hide.js"),p=n("../node_modules/core-js/modules/_redefine-all.js"),f=n("../node_modules/core-js/modules/_to-integer.js"),m=n("../node_modules/core-js/modules/_to-length.js"),_=n("../node_modules/core-js/modules/_to-index.js"),g=n("../node_modules/core-js/modules/_to-absolute-index.js"),v=n("../node_modules/core-js/modules/_to-primitive.js"),y=n("../node_modules/core-js/modules/_has.js"),x=n("../node_modules/core-js/modules/_classof.js"),b=n("../node_modules/core-js/modules/_is-object.js"),w=n("../node_modules/core-js/modules/_to-object.js"),j=n("../node_modules/core-js/modules/_is-array-iter.js"),S=n("../node_modules/core-js/modules/_object-create.js"),A=n("../node_modules/core-js/modules/_object-gpo.js"),M=n("../node_modules/core-js/modules/_object-gopn.js").f,T=n("../node_modules/core-js/modules/core.get-iterator-method.js"),P=n("../node_modules/core-js/modules/_uid.js"),L=n("../node_modules/core-js/modules/_wks.js"),E=n("../node_modules/core-js/modules/_array-methods.js"),O=n("../node_modules/core-js/modules/_array-includes.js"),I=n("../node_modules/core-js/modules/_species-constructor.js"),C=n("../node_modules/core-js/modules/es6.array.iterator.js"),F=n("../node_modules/core-js/modules/_iterators.js"),N=n("../node_modules/core-js/modules/_iter-detect.js"),k=n("../node_modules/core-js/modules/_set-species.js"),D=n("../node_modules/core-js/modules/_array-fill.js"),R=n("../node_modules/core-js/modules/_array-copy-within.js"),z=n("../node_modules/core-js/modules/_object-dp.js"),U=n("../node_modules/core-js/modules/_object-gopd.js"),B=z.f,G=U.f,V=r.RangeError,H=r.TypeError,X=r.Uint8Array,W=Array.prototype,Y=l.ArrayBuffer,q=l.DataView,Q=E(0),J=E(2),Z=E(3),K=E(4),$=E(5),ee=E(6),te=O(!0),ne=O(!1),ie=C.values,re=C.keys,oe=C.entries,se=W.lastIndexOf,ae=W.reduce,le=W.reduceRight,ue=W.join,ce=W.sort,de=W.slice,he=W.toString,pe=W.toLocaleString,fe=L("iterator"),me=L("toStringTag"),_e=P("typed_constructor"),ge=P("def_constructor"),ve=a.CONSTR,ye=a.TYPED,xe=a.VIEW,be=E(1,function(e,t){return Me(I(e,e[ge]),t)}),we=o(function(){return 1===new X(new Uint16Array([1]).buffer)[0]}),je=!!X&&!!X.prototype.set&&o(function(){new X(1).set({})}),Se=function(e,t){var n=f(e);if(n<0||n%t)throw V("Wrong offset!");return n},Ae=function(e){if(b(e)&&ye in e)return e;throw H(e+" is not a typed array!")},Me=function(e,t){if(!(b(e)&&_e in e))throw H("It is not a typed array constructor!");return new e(t)},Te=function(e,t){return Pe(I(e,e[ge]),t)},Pe=function(e,t){for(var n=0,i=t.length,r=Me(e,i);i>n;)r[n]=t[n++];return r},Le=function(e,t,n){B(e,t,{get:function(){return this._d[n]}})},Ee=function(e){var t,n,i,r,o,s,a=w(e),l=arguments.length,c=l>1?arguments[1]:void 0,d=void 0!==c,h=T(a);if(null!=h&&!j(h)){for(s=h.call(a),i=[],t=0;!(o=s.next()).done;t++)i.push(o.value);a=i}for(d&&l>2&&(c=u(c,arguments[2],2)),t=0,n=m(a.length),r=Me(this,n);n>t;t++)r[t]=d?c(a[t],t):a[t];return r},Oe=function(){for(var e=0,t=arguments.length,n=Me(this,t);t>e;)n[e]=arguments[e++];return n},Ie=!!X&&o(function(){pe.call(new X(1))}),Ce=function(){return pe.apply(Ie?de.call(Ae(this)):Ae(this),arguments)},Fe={copyWithin:function(e,t){return R.call(Ae(this),e,t,arguments.length>2?arguments[2]:void 0)},every:function(e){return K(Ae(this),e,arguments.length>1?arguments[1]:void 0)},fill:function(e){return D.apply(Ae(this),arguments)},filter:function(e){return Te(this,J(Ae(this),e,arguments.length>1?arguments[1]:void 0))},find:function(e){return $(Ae(this),e,arguments.length>1?arguments[1]:void 0)},findIndex:function(e){return ee(Ae(this),e,arguments.length>1?arguments[1]:void 0)},forEach:function(e){Q(Ae(this),e,arguments.length>1?arguments[1]:void 0)},indexOf:function(e){return ne(Ae(this),e,arguments.length>1?arguments[1]:void 0)},includes:function(e){return te(Ae(this),e,arguments.length>1?arguments[1]:void 0)},join:function(e){return ue.apply(Ae(this),arguments)},lastIndexOf:function(e){return se.apply(Ae(this),arguments)},map:function(e){return be(Ae(this),e,arguments.length>1?arguments[1]:void 0)},reduce:function(e){return ae.apply(Ae(this),arguments)},reduceRight:function(e){return le.apply(Ae(this),arguments)},reverse:function(){for(var e,t=Ae(this).length,n=Math.floor(t/2),i=0;i<n;)e=this[i],this[i++]=this[--t],this[t]=e;return this},some:function(e){return Z(Ae(this),e,arguments.length>1?arguments[1]:void 0)},sort:function(e){return ce.call(Ae(this),e)},subarray:function(e,t){var n=Ae(this),i=n.length,r=g(e,i);return new(I(n,n[ge]))(n.buffer,n.byteOffset+r*n.BYTES_PER_ELEMENT,m((void 0===t?i:g(t,i))-r))}},Ne=function(e,t){return Te(this,de.call(Ae(this),e,t))},ke=function(e){Ae(this);var t=Se(arguments[1],1),n=this.length,i=w(e),r=m(i.length),o=0;if(r+t>n)throw V("Wrong length!");for(;o<r;)this[t+o]=i[o++]},De={entries:function(){return oe.call(Ae(this))},keys:function(){return re.call(Ae(this))},values:function(){return ie.call(Ae(this))}},Re=function(e,t){return b(e)&&e[ye]&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},ze=function(e,t){return Re(e,t=v(t,!0))?d(2,e[t]):G(e,t)},Ue=function(e,t,n){return!(Re(e,t=v(t,!0))&&b(n)&&y(n,"value"))||y(n,"get")||y(n,"set")||n.configurable||y(n,"writable")&&!n.writable||y(n,"enumerable")&&!n.enumerable?B(e,t,n):(e[t]=n.value,e)};ve||(U.f=ze,z.f=Ue),s(s.S+s.F*!ve,"Object",{getOwnPropertyDescriptor:ze,defineProperty:Ue}),o(function(){he.call({})})&&(he=pe=function(){return ue.call(this)});var Be=p({},Fe);p(Be,De),h(Be,fe,De.values),p(Be,{slice:Ne,set:ke,constructor:function(){},toString:he,toLocaleString:Ce}),Le(Be,"buffer","b"),Le(Be,"byteOffset","o"),Le(Be,"byteLength","l"),Le(Be,"length","e"),B(Be,me,{get:function(){return this[ye]}}),e.exports=function(e,t,n,l){var u=e+((l=!!l)?"Clamped":"")+"Array",d="get"+e,p="set"+e,f=r[u],g=f||{},v=f&&A(f),y=!f||!a.ABV,w={},j=f&&f.prototype,T=function(e,n){B(e,n,{get:function(){return function(e,n){var i=e._d;return i.v[d](n*t+i.o,we)}(this,n)},set:function(e){return function(e,n,i){var r=e._d;l&&(i=(i=Math.round(i))<0?0:i>255?255:255&i),r.v[p](n*t+r.o,i,we)}(this,n,e)},enumerable:!0})};y?(f=n(function(e,n,i,r){c(e,f,u,"_d");var o,s,a,l,d=0,p=0;if(b(n)){if(!(n instanceof Y||"ArrayBuffer"==(l=x(n))||"SharedArrayBuffer"==l))return ye in n?Pe(f,n):Ee.call(f,n);o=n,p=Se(i,t);var g=n.byteLength;if(void 0===r){if(g%t)throw V("Wrong length!");if((s=g-p)<0)throw V("Wrong length!")}else if((s=m(r)*t)+p>g)throw V("Wrong length!");a=s/t}else a=_(n),o=new Y(s=a*t);for(h(e,"_d",{b:o,o:p,l:s,e:a,v:new q(o)});d<a;)T(e,d++)}),j=f.prototype=S(Be),h(j,"constructor",f)):o(function(){f(1)})&&o(function(){new f(-1)})&&N(function(e){new f,new f(null),new f(1.5),new f(e)},!0)||(f=n(function(e,n,i,r){var o;return c(e,f,u),b(n)?n instanceof Y||"ArrayBuffer"==(o=x(n))||"SharedArrayBuffer"==o?void 0!==r?new g(n,Se(i,t),r):void 0!==i?new g(n,Se(i,t)):new g(n):ye in n?Pe(f,n):Ee.call(f,n):new g(_(n))}),Q(v!==Function.prototype?M(g).concat(M(v)):M(g),function(e){e in f||h(f,e,g[e])}),f.prototype=j,i||(j.constructor=f));var P=j[fe],L=!!P&&("values"==P.name||null==P.name),E=De.values;h(f,_e,!0),h(j,ye,u),h(j,xe,!0),h(j,ge,f),(l?new f(1)[me]==u:me in j)||B(j,me,{get:function(){return u}}),w[u]=f,s(s.G+s.W+s.F*(f!=g),w),s(s.S,u,{BYTES_PER_ELEMENT:t}),s(s.S+s.F*o(function(){g.of.call(f,1)}),u,{from:Ee,of:Oe}),"BYTES_PER_ELEMENT"in j||h(j,"BYTES_PER_ELEMENT",t),s(s.P,u,Fe),k(u),s(s.P+s.F*je,u,{set:ke}),s(s.P+s.F*!L,u,De),i||j.toString==he||(j.toString=he),s(s.P+s.F*o(function(){new f(1).slice()}),u,{slice:Ne}),s(s.P+s.F*(o(function(){return[1,2].toLocaleString()!=new f([1,2]).toLocaleString()})||!o(function(){j.toLocaleString.call([1,2])})),u,{toLocaleString:Ce}),F[u]=L?P:E,i||L||h(j,fe,E)}}else e.exports=function(){}},"../node_modules/core-js/modules/_typed-buffer.js":function(e,t,n){"use strict";var i=n("../node_modules/core-js/modules/_global.js"),r=n("../node_modules/core-js/modules/_descriptors.js"),o=n("../node_modules/core-js/modules/_library.js"),s=n("../node_modules/core-js/modules/_typed.js"),a=n("../node_modules/core-js/modules/_hide.js"),l=n("../node_modules/core-js/modules/_redefine-all.js"),u=n("../node_modules/core-js/modules/_fails.js"),c=n("../node_modules/core-js/modules/_an-instance.js"),d=n("../node_modules/core-js/modules/_to-integer.js"),h=n("../node_modules/core-js/modules/_to-length.js"),p=n("../node_modules/core-js/modules/_to-index.js"),f=n("../node_modules/core-js/modules/_object-gopn.js").f,m=n("../node_modules/core-js/modules/_object-dp.js").f,_=n("../node_modules/core-js/modules/_array-fill.js"),g=n("../node_modules/core-js/modules/_set-to-string-tag.js"),v="prototype",y="Wrong index!",x=i.ArrayBuffer,b=i.DataView,w=i.Math,j=i.RangeError,S=i.Infinity,A=x,M=w.abs,T=w.pow,P=w.floor,L=w.log,E=w.LN2,O=r?"_b":"buffer",I=r?"_l":"byteLength",C=r?"_o":"byteOffset";function F(e,t,n){var i,r,o,s=new Array(n),a=8*n-t-1,l=(1<<a)-1,u=l>>1,c=23===t?T(2,-24)-T(2,-77):0,d=0,h=e<0||0===e&&1/e<0?1:0;for((e=M(e))!=e||e===S?(r=e!=e?1:0,i=l):(i=P(L(e)/E),e*(o=T(2,-i))<1&&(i--,o*=2),(e+=i+u>=1?c/o:c*T(2,1-u))*o>=2&&(i++,o/=2),i+u>=l?(r=0,i=l):i+u>=1?(r=(e*o-1)*T(2,t),i+=u):(r=e*T(2,u-1)*T(2,t),i=0));t>=8;s[d++]=255&r,r/=256,t-=8);for(i=i<<t|r,a+=t;a>0;s[d++]=255&i,i/=256,a-=8);return s[--d]|=128*h,s}function N(e,t,n){var i,r=8*n-t-1,o=(1<<r)-1,s=o>>1,a=r-7,l=n-1,u=e[l--],c=127&u;for(u>>=7;a>0;c=256*c+e[l],l--,a-=8);for(i=c&(1<<-a)-1,c>>=-a,a+=t;a>0;i=256*i+e[l],l--,a-=8);if(0===c)c=1-s;else{if(c===o)return i?NaN:u?-S:S;i+=T(2,t),c-=s}return(u?-1:1)*i*T(2,c-t)}function k(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function D(e){return[255&e]}function R(e){return[255&e,e>>8&255]}function z(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function U(e){return F(e,52,8)}function B(e){return F(e,23,4)}function G(e,t,n){m(e[v],t,{get:function(){return this[n]}})}function V(e,t,n,i){var r=p(+n);if(r+t>e[I])throw j(y);var o=e[O]._b,s=r+e[C],a=o.slice(s,s+t);return i?a:a.reverse()}function H(e,t,n,i,r,o){var s=p(+n);if(s+t>e[I])throw j(y);for(var a=e[O]._b,l=s+e[C],u=i(+r),c=0;c<t;c++)a[l+c]=u[o?c:t-c-1]}if(s.ABV){if(!u(function(){x(1)})||!u(function(){new x(-1)})||u(function(){return new x,new x(1.5),new x(NaN),"ArrayBuffer"!=x.name})){for(var X,W=(x=function(e){return c(this,x),new A(p(e))})[v]=A[v],Y=f(A),q=0;Y.length>q;)(X=Y[q++])in x||a(x,X,A[X]);o||(W.constructor=x)}var Q=new b(new x(2)),J=b[v].setInt8;Q.setInt8(0,2147483648),Q.setInt8(1,2147483649),!Q.getInt8(0)&&Q.getInt8(1)||l(b[v],{setInt8:function(e,t){J.call(this,e,t<<24>>24)},setUint8:function(e,t){J.call(this,e,t<<24>>24)}},!0)}else x=function(e){c(this,x,"ArrayBuffer");var t=p(e);this._b=_.call(new Array(t),0),this[I]=t},b=function(e,t,n){c(this,b,"DataView"),c(e,x,"DataView");var i=e[I],r=d(t);if(r<0||r>i)throw j("Wrong offset!");if(r+(n=void 0===n?i-r:h(n))>i)throw j("Wrong length!");this[O]=e,this[C]=r,this[I]=n},r&&(G(x,"byteLength","_l"),G(b,"buffer","_b"),G(b,"byteLength","_l"),G(b,"byteOffset","_o")),l(b[v],{getInt8:function(e){return V(this,1,e)[0]<<24>>24},getUint8:function(e){return V(this,1,e)[0]},getInt16:function(e){var t=V(this,2,e,arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=V(this,2,e,arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return k(V(this,4,e,arguments[1]))},getUint32:function(e){return k(V(this,4,e,arguments[1]))>>>0},getFloat32:function(e){return N(V(this,4,e,arguments[1]),23,4)},getFloat64:function(e){return N(V(this,8,e,arguments[1]),52,8)},setInt8:function(e,t){H(this,1,e,D,t)},setUint8:function(e,t){H(this,1,e,D,t)},setInt16:function(e,t){H(this,2,e,R,t,arguments[2])},setUint16:function(e,t){H(this,2,e,R,t,arguments[2])},setInt32:function(e,t){H(this,4,e,z,t,arguments[2])},setUint32:function(e,t){H(this,4,e,z,t,arguments[2])},setFloat32:function(e,t){H(this,4,e,B,t,arguments[2])},setFloat64:function(e,t){H(this,8,e,U,t,arguments[2])}});g(x,"ArrayBuffer"),g(b,"DataView"),a(b[v],s.VIEW,!0),t.ArrayBuffer=x,t.DataView=b},"../node_modules/core-js/modules/_typed.js":function(e,t,n){for(var i,r=n("../node_modules/core-js/modules/_global.js"),o=n("../node_modules/core-js/modules/_hide.js"),s=n("../node_modules/core-js/modules/_uid.js"),a=s("typed_array"),l=s("view"),u=!(!r.ArrayBuffer||!r.DataView),c=u,d=0,h="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");d<9;)(i=r[h[d++]])?(o(i.prototype,a,!0),o(i.prototype,l,!0)):c=!1;e.exports={ABV:u,CONSTR:c,TYPED:a,VIEW:l}},"../node_modules/core-js/modules/_uid.js":function(e,t){var n=0,i=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+i).toString(36))}},"../node_modules/core-js/modules/_user-agent.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_global.js").navigator;e.exports=i&&i.userAgent||""},"../node_modules/core-js/modules/_validate-collection.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_is-object.js");e.exports=function(e,t){if(!i(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},"../node_modules/core-js/modules/_wks-define.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_global.js"),r=n("../node_modules/core-js/modules/_core.js"),o=n("../node_modules/core-js/modules/_library.js"),s=n("../node_modules/core-js/modules/_wks-ext.js"),a=n("../node_modules/core-js/modules/_object-dp.js").f;e.exports=function(e){var t=r.Symbol||(r.Symbol=o?{}:i.Symbol||{});"_"==e.charAt(0)||e in t||a(t,e,{value:s.f(e)})}},"../node_modules/core-js/modules/_wks-ext.js":function(e,t,n){t.f=n("../node_modules/core-js/modules/_wks.js")},"../node_modules/core-js/modules/_wks.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_shared.js")("wks"),r=n("../node_modules/core-js/modules/_uid.js"),o=n("../node_modules/core-js/modules/_global.js").Symbol,s="function"==typeof o;(e.exports=function(e){return i[e]||(i[e]=s&&o[e]||(s?o:r)("Symbol."+e))}).store=i},"../node_modules/core-js/modules/core.get-iterator-method.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_classof.js"),r=n("../node_modules/core-js/modules/_wks.js")("iterator"),o=n("../node_modules/core-js/modules/_iterators.js");e.exports=n("../node_modules/core-js/modules/_core.js").getIteratorMethod=function(e){if(null!=e)return e[r]||e["@@iterator"]||o[i(e)]}},"../node_modules/core-js/modules/core.regexp.escape.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js"),r=n("../node_modules/core-js/modules/_replacer.js")(/[\\^$*+?.()|[\]{}]/g,"\\$&");i(i.S,"RegExp",{escape:function(e){return r(e)}})},"../node_modules/core-js/modules/es6.array.copy-within.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js");i(i.P,"Array",{copyWithin:n("../node_modules/core-js/modules/_array-copy-within.js")}),n("../node_modules/core-js/modules/_add-to-unscopables.js")("copyWithin")},"../node_modules/core-js/modules/es6.array.every.js":function(e,t,n){"use strict";var i=n("../node_modules/core-js/modules/_export.js"),r=n("../node_modules/core-js/modules/_array-methods.js")(4);i(i.P+i.F*!n("../node_modules/core-js/modules/_strict-method.js")([].every,!0),"Array",{every:function(e){return r(this,e,arguments[1])}})},"../node_modules/core-js/modules/es6.array.fill.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js");i(i.P,"Array",{fill:n("../node_modules/core-js/modules/_array-fill.js")}),n("../node_modules/core-js/modules/_add-to-unscopables.js")("fill")},"../node_modules/core-js/modules/es6.array.filter.js":function(e,t,n){"use strict";var i=n("../node_modules/core-js/modules/_export.js"),r=n("../node_modules/core-js/modules/_array-methods.js")(2);i(i.P+i.F*!n("../node_modules/core-js/modules/_strict-method.js")([].filter,!0),"Array",{filter:function(e){return r(this,e,arguments[1])}})},"../node_modules/core-js/modules/es6.array.find-index.js":function(e,t,n){"use strict";var i=n("../node_modules/core-js/modules/_export.js"),r=n("../node_modules/core-js/modules/_array-methods.js")(6),o="findIndex",s=!0;o in[]&&Array(1)[o](function(){s=!1}),i(i.P+i.F*s,"Array",{findIndex:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),n("../node_modules/core-js/modules/_add-to-unscopables.js")(o)},"../node_modules/core-js/modules/es6.array.find.js":function(e,t,n){"use strict";var i=n("../node_modules/core-js/modules/_export.js"),r=n("../node_modules/core-js/modules/_array-methods.js")(5),o=!0;"find"in[]&&Array(1).find(function(){o=!1}),i(i.P+i.F*o,"Array",{find:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),n("../node_modules/core-js/modules/_add-to-unscopables.js")("find")},"../node_modules/core-js/modules/es6.array.for-each.js":function(e,t,n){"use strict";var i=n("../node_modules/core-js/modules/_export.js"),r=n("../node_modules/core-js/modules/_array-methods.js")(0),o=n("../node_modules/core-js/modules/_strict-method.js")([].forEach,!0);i(i.P+i.F*!o,"Array",{forEach:function(e){return r(this,e,arguments[1])}})},"../node_modules/core-js/modules/es6.array.from.js":function(e,t,n){"use strict";var i=n("../node_modules/core-js/modules/_ctx.js"),r=n("../node_modules/core-js/modules/_export.js"),o=n("../node_modules/core-js/modules/_to-object.js"),s=n("../node_modules/core-js/modules/_iter-call.js"),a=n("../node_modules/core-js/modules/_is-array-iter.js"),l=n("../node_modules/core-js/modules/_to-length.js"),u=n("../node_modules/core-js/modules/_create-property.js"),c=n("../node_modules/core-js/modules/core.get-iterator-method.js");r(r.S+r.F*!n("../node_modules/core-js/modules/_iter-detect.js")(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,r,d,h=o(e),p="function"==typeof this?this:Array,f=arguments.length,m=f>1?arguments[1]:void 0,_=void 0!==m,g=0,v=c(h);if(_&&(m=i(m,f>2?arguments[2]:void 0,2)),null==v||p==Array&&a(v))for(n=new p(t=l(h.length));t>g;g++)u(n,g,_?m(h[g],g):h[g]);else for(d=v.call(h),n=new p;!(r=d.next()).done;g++)u(n,g,_?s(d,m,[r.value,g],!0):r.value);return n.length=g,n}})},"../node_modules/core-js/modules/es6.array.index-of.js":function(e,t,n){"use strict";var i=n("../node_modules/core-js/modules/_export.js"),r=n("../node_modules/core-js/modules/_array-includes.js")(!1),o=[].indexOf,s=!!o&&1/[1].indexOf(1,-0)<0;i(i.P+i.F*(s||!n("../node_modules/core-js/modules/_strict-method.js")(o)),"Array",{indexOf:function(e){return s?o.apply(this,arguments)||0:r(this,e,arguments[1])}})},"../node_modules/core-js/modules/es6.array.is-array.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js");i(i.S,"Array",{isArray:n("../node_modules/core-js/modules/_is-array.js")})},"../node_modules/core-js/modules/es6.array.iterator.js":function(e,t,n){"use strict";var i=n("../node_modules/core-js/modules/_add-to-unscopables.js"),r=n("../node_modules/core-js/modules/_iter-step.js"),o=n("../node_modules/core-js/modules/_iterators.js"),s=n("../node_modules/core-js/modules/_to-iobject.js");e.exports=n("../node_modules/core-js/modules/_iter-define.js")(Array,"Array",function(e,t){this._t=s(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,r(1)):r(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])},"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},"../node_modules/core-js/modules/es6.array.join.js":function(e,t,n){"use strict";var i=n("../node_modules/core-js/modules/_export.js"),r=n("../node_modules/core-js/modules/_to-iobject.js"),o=[].join;i(i.P+i.F*(n("../node_modules/core-js/modules/_iobject.js")!=Object||!n("../node_modules/core-js/modules/_strict-method.js")(o)),"Array",{join:function(e){return o.call(r(this),void 0===e?",":e)}})},"../node_modules/core-js/modules/es6.array.last-index-of.js":function(e,t,n){"use strict";var i=n("../node_modules/core-js/modules/_export.js"),r=n("../node_modules/core-js/modules/_to-iobject.js"),o=n("../node_modules/core-js/modules/_to-integer.js"),s=n("../node_modules/core-js/modules/_to-length.js"),a=[].lastIndexOf,l=!!a&&1/[1].lastIndexOf(1,-0)<0;i(i.P+i.F*(l||!n("../node_modules/core-js/modules/_strict-method.js")(a)),"Array",{lastIndexOf:function(e){if(l)return a.apply(this,arguments)||0;var t=r(this),n=s(t.length),i=n-1;for(arguments.length>1&&(i=Math.min(i,o(arguments[1]))),i<0&&(i=n+i);i>=0;i--)if(i in t&&t[i]===e)return i||0;return-1}})},"../node_modules/core-js/modules/es6.array.map.js":function(e,t,n){"use strict";var i=n("../node_modules/core-js/modules/_export.js"),r=n("../node_modules/core-js/modules/_array-methods.js")(1);i(i.P+i.F*!n("../node_modules/core-js/modules/_strict-method.js")([].map,!0),"Array",{map:function(e){return r(this,e,arguments[1])}})},"../node_modules/core-js/modules/es6.array.of.js":function(e,t,n){"use strict";var i=n("../node_modules/core-js/modules/_export.js"),r=n("../node_modules/core-js/modules/_create-property.js");i(i.S+i.F*n("../node_modules/core-js/modules/_fails.js")(function(){function e(){}return!(Array.of.call(e)instanceof e)}),"Array",{of:function(){for(var e=0,t=arguments.length,n=new("function"==typeof this?this:Array)(t);t>e;)r(n,e,arguments[e++]);return n.length=t,n}})},"../node_modules/core-js/modules/es6.array.reduce-right.js":function(e,t,n){"use strict";var i=n("../node_modules/core-js/modules/_export.js"),r=n("../node_modules/core-js/modules/_array-reduce.js");i(i.P+i.F*!n("../node_modules/core-js/modules/_strict-method.js")([].reduceRight,!0),"Array",{reduceRight:function(e){return r(this,e,arguments.length,arguments[1],!0)}})},"../node_modules/core-js/modules/es6.array.reduce.js":function(e,t,n){"use strict";var i=n("../node_modules/core-js/modules/_export.js"),r=n("../node_modules/core-js/modules/_array-reduce.js");i(i.P+i.F*!n("../node_modules/core-js/modules/_strict-method.js")([].reduce,!0),"Array",{reduce:function(e){return r(this,e,arguments.length,arguments[1],!1)}})},"../node_modules/core-js/modules/es6.array.slice.js":function(e,t,n){"use strict";var i=n("../node_modules/core-js/modules/_export.js"),r=n("../node_modules/core-js/modules/_html.js"),o=n("../node_modules/core-js/modules/_cof.js"),s=n("../node_modules/core-js/modules/_to-absolute-index.js"),a=n("../node_modules/core-js/modules/_to-length.js"),l=[].slice;i(i.P+i.F*n("../node_modules/core-js/modules/_fails.js")(function(){r&&l.call(r)}),"Array",{slice:function(e,t){var n=a(this.length),i=o(this);if(t=void 0===t?n:t,"Array"==i)return l.call(this,e,t);for(var r=s(e,n),u=s(t,n),c=a(u-r),d=new Array(c),h=0;h<c;h++)d[h]="String"==i?this.charAt(r+h):this[r+h];return d}})},"../node_modules/core-js/modules/es6.array.some.js":function(e,t,n){"use strict";var i=n("../node_modules/core-js/modules/_export.js"),r=n("../node_modules/core-js/modules/_array-methods.js")(3);i(i.P+i.F*!n("../node_modules/core-js/modules/_strict-method.js")([].some,!0),"Array",{some:function(e){return r(this,e,arguments[1])}})},"../node_modules/core-js/modules/es6.array.sort.js":function(e,t,n){"use strict";var i=n("../node_modules/core-js/modules/_export.js"),r=n("../node_modules/core-js/modules/_a-function.js"),o=n("../node_modules/core-js/modules/_to-object.js"),s=n("../node_modules/core-js/modules/_fails.js"),a=[].sort,l=[1,2,3];i(i.P+i.F*(s(function(){l.sort(void 0)})||!s(function(){l.sort(null)})||!n("../node_modules/core-js/modules/_strict-method.js")(a)),"Array",{sort:function(e){return void 0===e?a.call(o(this)):a.call(o(this),r(e))}})},"../node_modules/core-js/modules/es6.array.species.js":function(e,t,n){n("../node_modules/core-js/modules/_set-species.js")("Array")},"../node_modules/core-js/modules/es6.date.now.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js");i(i.S,"Date",{now:function(){return(new Date).getTime()}})},"../node_modules/core-js/modules/es6.date.to-iso-string.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js"),r=n("../node_modules/core-js/modules/_date-to-iso-string.js");i(i.P+i.F*(Date.prototype.toISOString!==r),"Date",{toISOString:r})},"../node_modules/core-js/modules/es6.date.to-json.js":function(e,t,n){"use strict";var i=n("../node_modules/core-js/modules/_export.js"),r=n("../node_modules/core-js/modules/_to-object.js"),o=n("../node_modules/core-js/modules/_to-primitive.js");i(i.P+i.F*n("../node_modules/core-js/modules/_fails.js")(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(e){var t=r(this),n=o(t);return"number"!=typeof n||isFinite(n)?t.toISOString():null}})},"../node_modules/core-js/modules/es6.date.to-primitive.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_wks.js")("toPrimitive"),r=Date.prototype;i in r||n("../node_modules/core-js/modules/_hide.js")(r,i,n("../node_modules/core-js/modules/_date-to-primitive.js"))},"../node_modules/core-js/modules/es6.date.to-string.js":function(e,t,n){var i=Date.prototype,r=i.toString,o=i.getTime;new Date(NaN)+""!="Invalid Date"&&n("../node_modules/core-js/modules/_redefine.js")(i,"toString",function(){var e=o.call(this);return e==e?r.call(this):"Invalid Date"})},"../node_modules/core-js/modules/es6.function.bind.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js");i(i.P,"Function",{bind:n("../node_modules/core-js/modules/_bind.js")})},"../node_modules/core-js/modules/es6.function.has-instance.js":function(e,t,n){"use strict";var i=n("../node_modules/core-js/modules/_is-object.js"),r=n("../node_modules/core-js/modules/_object-gpo.js"),o=n("../node_modules/core-js/modules/_wks.js")("hasInstance"),s=Function.prototype;o in s||n("../node_modules/core-js/modules/_object-dp.js").f(s,o,{value:function(e){if("function"!=typeof this||!i(e))return!1;if(!i(this.prototype))return e instanceof this;for(;e=r(e);)if(this.prototype===e)return!0;return!1}})},"../node_modules/core-js/modules/es6.function.name.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_object-dp.js").f,r=Function.prototype,o=/^\s*function ([^ (]*)/;"name"in r||n("../node_modules/core-js/modules/_descriptors.js")&&i(r,"name",{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(e){return""}}})},"../node_modules/core-js/modules/es6.map.js":function(e,t,n){"use strict";var i=n("../node_modules/core-js/modules/_collection-strong.js"),r=n("../node_modules/core-js/modules/_validate-collection.js");e.exports=n("../node_modules/core-js/modules/_collection.js")("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=i.getEntry(r(this,"Map"),e);return t&&t.v},set:function(e,t){return i.def(r(this,"Map"),0===e?0:e,t)}},i,!0)},"../node_modules/core-js/modules/es6.math.acosh.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js"),r=n("../node_modules/core-js/modules/_math-log1p.js"),o=Math.sqrt,s=Math.acosh;i(i.S+i.F*!(s&&710==Math.floor(s(Number.MAX_VALUE))&&s(1/0)==1/0),"Math",{acosh:function(e){return(e=+e)<1?NaN:e>94906265.62425156?Math.log(e)+Math.LN2:r(e-1+o(e-1)*o(e+1))}})},"../node_modules/core-js/modules/es6.math.asinh.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js"),r=Math.asinh;i(i.S+i.F*!(r&&1/r(0)>0),"Math",{asinh:function e(t){return isFinite(t=+t)&&0!=t?t<0?-e(-t):Math.log(t+Math.sqrt(t*t+1)):t}})},"../node_modules/core-js/modules/es6.math.atanh.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js"),r=Math.atanh;i(i.S+i.F*!(r&&1/r(-0)<0),"Math",{atanh:function(e){return 0==(e=+e)?e:Math.log((1+e)/(1-e))/2}})},"../node_modules/core-js/modules/es6.math.cbrt.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js"),r=n("../node_modules/core-js/modules/_math-sign.js");i(i.S,"Math",{cbrt:function(e){return r(e=+e)*Math.pow(Math.abs(e),1/3)}})},"../node_modules/core-js/modules/es6.math.clz32.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js");i(i.S,"Math",{clz32:function(e){return(e>>>=0)?31-Math.floor(Math.log(e+.5)*Math.LOG2E):32}})},"../node_modules/core-js/modules/es6.math.cosh.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js"),r=Math.exp;i(i.S,"Math",{cosh:function(e){return(r(e=+e)+r(-e))/2}})},"../node_modules/core-js/modules/es6.math.expm1.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js"),r=n("../node_modules/core-js/modules/_math-expm1.js");i(i.S+i.F*(r!=Math.expm1),"Math",{expm1:r})},"../node_modules/core-js/modules/es6.math.fround.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js");i(i.S,"Math",{fround:n("../node_modules/core-js/modules/_math-fround.js")})},"../node_modules/core-js/modules/es6.math.hypot.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js"),r=Math.abs;i(i.S,"Math",{hypot:function(e,t){for(var n,i,o=0,s=0,a=arguments.length,l=0;s<a;)l<(n=r(arguments[s++]))?(o=o*(i=l/n)*i+1,l=n):o+=n>0?(i=n/l)*i:n;return l===1/0?1/0:l*Math.sqrt(o)}})},"../node_modules/core-js/modules/es6.math.imul.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js"),r=Math.imul;i(i.S+i.F*n("../node_modules/core-js/modules/_fails.js")(function(){return-5!=r(4294967295,5)||2!=r.length}),"Math",{imul:function(e,t){var n=+e,i=+t,r=65535&n,o=65535&i;return 0|r*o+((65535&n>>>16)*o+r*(65535&i>>>16)<<16>>>0)}})},"../node_modules/core-js/modules/es6.math.log10.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js");i(i.S,"Math",{log10:function(e){return Math.log(e)*Math.LOG10E}})},"../node_modules/core-js/modules/es6.math.log1p.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js");i(i.S,"Math",{log1p:n("../node_modules/core-js/modules/_math-log1p.js")})},"../node_modules/core-js/modules/es6.math.log2.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js");i(i.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}})},"../node_modules/core-js/modules/es6.math.sign.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js");i(i.S,"Math",{sign:n("../node_modules/core-js/modules/_math-sign.js")})},"../node_modules/core-js/modules/es6.math.sinh.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js"),r=n("../node_modules/core-js/modules/_math-expm1.js"),o=Math.exp;i(i.S+i.F*n("../node_modules/core-js/modules/_fails.js")(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(e){return Math.abs(e=+e)<1?(r(e)-r(-e))/2:(o(e-1)-o(-e-1))*(Math.E/2)}})},"../node_modules/core-js/modules/es6.math.tanh.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js"),r=n("../node_modules/core-js/modules/_math-expm1.js"),o=Math.exp;i(i.S,"Math",{tanh:function(e){var t=r(e=+e),n=r(-e);return t==1/0?1:n==1/0?-1:(t-n)/(o(e)+o(-e))}})},"../node_modules/core-js/modules/es6.math.trunc.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js");i(i.S,"Math",{trunc:function(e){return(e>0?Math.floor:Math.ceil)(e)}})},"../node_modules/core-js/modules/es6.number.constructor.js":function(e,t,n){"use strict";var i=n("../node_modules/core-js/modules/_global.js"),r=n("../node_modules/core-js/modules/_has.js"),o=n("../node_modules/core-js/modules/_cof.js"),s=n("../node_modules/core-js/modules/_inherit-if-required.js"),a=n("../node_modules/core-js/modules/_to-primitive.js"),l=n("../node_modules/core-js/modules/_fails.js"),u=n("../node_modules/core-js/modules/_object-gopn.js").f,c=n("../node_modules/core-js/modules/_object-gopd.js").f,d=n("../node_modules/core-js/modules/_object-dp.js").f,h=n("../node_modules/core-js/modules/_string-trim.js").trim,p=i.Number,f=p,m=p.prototype,_="Number"==o(n("../node_modules/core-js/modules/_object-create.js")(m)),g="trim"in String.prototype,v=function(e){var t=a(e,!1);if("string"==typeof t&&t.length>2){var n,i,r,o=(t=g?t.trim():h(t,3)).charCodeAt(0);if(43===o||45===o){if(88===(n=t.charCodeAt(2))||120===n)return NaN}else if(48===o){switch(t.charCodeAt(1)){case 66:case 98:i=2,r=49;break;case 79:case 111:i=8,r=55;break;default:return+t}for(var s,l=t.slice(2),u=0,c=l.length;u<c;u++)if((s=l.charCodeAt(u))<48||s>r)return NaN;return parseInt(l,i)}}return+t};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof p&&(_?l(function(){m.valueOf.call(n)}):"Number"!=o(n))?s(new f(v(t)),n,p):v(t)};for(var y,x=n("../node_modules/core-js/modules/_descriptors.js")?u(f):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),b=0;x.length>b;b++)r(f,y=x[b])&&!r(p,y)&&d(p,y,c(f,y));p.prototype=m,m.constructor=p,n("../node_modules/core-js/modules/_redefine.js")(i,"Number",p)}},"../node_modules/core-js/modules/es6.number.epsilon.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js");i(i.S,"Number",{EPSILON:Math.pow(2,-52)})},"../node_modules/core-js/modules/es6.number.is-finite.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js"),r=n("../node_modules/core-js/modules/_global.js").isFinite;i(i.S,"Number",{isFinite:function(e){return"number"==typeof e&&r(e)}})},"../node_modules/core-js/modules/es6.number.is-integer.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js");i(i.S,"Number",{isInteger:n("../node_modules/core-js/modules/_is-integer.js")})},"../node_modules/core-js/modules/es6.number.is-nan.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js");i(i.S,"Number",{isNaN:function(e){return e!=e}})},"../node_modules/core-js/modules/es6.number.is-safe-integer.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js"),r=n("../node_modules/core-js/modules/_is-integer.js"),o=Math.abs;i(i.S,"Number",{isSafeInteger:function(e){return r(e)&&o(e)<=9007199254740991}})},"../node_modules/core-js/modules/es6.number.max-safe-integer.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js");i(i.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},"../node_modules/core-js/modules/es6.number.min-safe-integer.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js");i(i.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},"../node_modules/core-js/modules/es6.number.parse-float.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js"),r=n("../node_modules/core-js/modules/_parse-float.js");i(i.S+i.F*(Number.parseFloat!=r),"Number",{parseFloat:r})},"../node_modules/core-js/modules/es6.number.parse-int.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js"),r=n("../node_modules/core-js/modules/_parse-int.js");i(i.S+i.F*(Number.parseInt!=r),"Number",{parseInt:r})},"../node_modules/core-js/modules/es6.number.to-fixed.js":function(e,t,n){"use strict";var i=n("../node_modules/core-js/modules/_export.js"),r=n("../node_modules/core-js/modules/_to-integer.js"),o=n("../node_modules/core-js/modules/_a-number-value.js"),s=n("../node_modules/core-js/modules/_string-repeat.js"),a=1..toFixed,l=Math.floor,u=[0,0,0,0,0,0],c="Number.toFixed: incorrect invocation!",d=function(e,t){for(var n=-1,i=t;++n<6;)i+=e*u[n],u[n]=i%1e7,i=l(i/1e7)},h=function(e){for(var t=6,n=0;--t>=0;)n+=u[t],u[t]=l(n/e),n=n%e*1e7},p=function(){for(var e=6,t="";--e>=0;)if(""!==t||0===e||0!==u[e]){var n=String(u[e]);t=""===t?n:t+s.call("0",7-n.length)+n}return t},f=function(e,t,n){return 0===t?n:t%2==1?f(e,t-1,n*e):f(e*e,t/2,n)};i(i.P+i.F*(!!a&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!n("../node_modules/core-js/modules/_fails.js")(function(){a.call({})})),"Number",{toFixed:function(e){var t,n,i,a,l=o(this,c),u=r(e),m="",_="0";if(u<0||u>20)throw RangeError(c);if(l!=l)return"NaN";if(l<=-1e21||l>=1e21)return String(l);if(l<0&&(m="-",l=-l),l>1e-21)if(n=(t=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}(l*f(2,69,1))-69)<0?l*f(2,-t,1):l/f(2,t,1),n*=4503599627370496,(t=52-t)>0){for(d(0,n),i=u;i>=7;)d(1e7,0),i-=7;for(d(f(10,i,1),0),i=t-1;i>=23;)h(1<<23),i-=23;h(1<<i),d(1,1),h(2),_=p()}else d(0,n),d(1<<-t,0),_=p()+s.call("0",u);return _=u>0?m+((a=_.length)<=u?"0."+s.call("0",u-a)+_:_.slice(0,a-u)+"."+_.slice(a-u)):m+_}})},"../node_modules/core-js/modules/es6.number.to-precision.js":function(e,t,n){"use strict";var i=n("../node_modules/core-js/modules/_export.js"),r=n("../node_modules/core-js/modules/_fails.js"),o=n("../node_modules/core-js/modules/_a-number-value.js"),s=1..toPrecision;i(i.P+i.F*(r(function(){return"1"!==s.call(1,void 0)})||!r(function(){s.call({})})),"Number",{toPrecision:function(e){var t=o(this,"Number#toPrecision: incorrect invocation!");return void 0===e?s.call(t):s.call(t,e)}})},"../node_modules/core-js/modules/es6.object.assign.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js");i(i.S+i.F,"Object",{assign:n("../node_modules/core-js/modules/_object-assign.js")})},"../node_modules/core-js/modules/es6.object.create.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js");i(i.S,"Object",{create:n("../node_modules/core-js/modules/_object-create.js")})},"../node_modules/core-js/modules/es6.object.define-properties.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js");i(i.S+i.F*!n("../node_modules/core-js/modules/_descriptors.js"),"Object",{defineProperties:n("../node_modules/core-js/modules/_object-dps.js")})},"../node_modules/core-js/modules/es6.object.define-property.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js");i(i.S+i.F*!n("../node_modules/core-js/modules/_descriptors.js"),"Object",{defineProperty:n("../node_modules/core-js/modules/_object-dp.js").f})},"../node_modules/core-js/modules/es6.object.freeze.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_is-object.js"),r=n("../node_modules/core-js/modules/_meta.js").onFreeze;n("../node_modules/core-js/modules/_object-sap.js")("freeze",function(e){return function(t){return e&&i(t)?e(r(t)):t}})},"../node_modules/core-js/modules/es6.object.get-own-property-descriptor.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_to-iobject.js"),r=n("../node_modules/core-js/modules/_object-gopd.js").f;n("../node_modules/core-js/modules/_object-sap.js")("getOwnPropertyDescriptor",function(){return function(e,t){return r(i(e),t)}})},"../node_modules/core-js/modules/es6.object.get-own-property-names.js":function(e,t,n){n("../node_modules/core-js/modules/_object-sap.js")("getOwnPropertyNames",function(){return n("../node_modules/core-js/modules/_object-gopn-ext.js").f})},"../node_modules/core-js/modules/es6.object.get-prototype-of.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_to-object.js"),r=n("../node_modules/core-js/modules/_object-gpo.js");n("../node_modules/core-js/modules/_object-sap.js")("getPrototypeOf",function(){return function(e){return r(i(e))}})},"../node_modules/core-js/modules/es6.object.is-extensible.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_is-object.js");n("../node_modules/core-js/modules/_object-sap.js")("isExtensible",function(e){return function(t){return!!i(t)&&(!e||e(t))}})},"../node_modules/core-js/modules/es6.object.is-frozen.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_is-object.js");n("../node_modules/core-js/modules/_object-sap.js")("isFrozen",function(e){return function(t){return!i(t)||!!e&&e(t)}})},"../node_modules/core-js/modules/es6.object.is-sealed.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_is-object.js");n("../node_modules/core-js/modules/_object-sap.js")("isSealed",function(e){return function(t){return!i(t)||!!e&&e(t)}})},"../node_modules/core-js/modules/es6.object.is.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js");i(i.S,"Object",{is:n("../node_modules/core-js/modules/_same-value.js")})},"../node_modules/core-js/modules/es6.object.keys.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_to-object.js"),r=n("../node_modules/core-js/modules/_object-keys.js");n("../node_modules/core-js/modules/_object-sap.js")("keys",function(){return function(e){return r(i(e))}})},"../node_modules/core-js/modules/es6.object.prevent-extensions.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_is-object.js"),r=n("../node_modules/core-js/modules/_meta.js").onFreeze;n("../node_modules/core-js/modules/_object-sap.js")("preventExtensions",function(e){return function(t){return e&&i(t)?e(r(t)):t}})},"../node_modules/core-js/modules/es6.object.seal.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_is-object.js"),r=n("../node_modules/core-js/modules/_meta.js").onFreeze;n("../node_modules/core-js/modules/_object-sap.js")("seal",function(e){return function(t){return e&&i(t)?e(r(t)):t}})},"../node_modules/core-js/modules/es6.object.set-prototype-of.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js");i(i.S,"Object",{setPrototypeOf:n("../node_modules/core-js/modules/_set-proto.js").set})},"../node_modules/core-js/modules/es6.object.to-string.js":function(e,t,n){"use strict";var i=n("../node_modules/core-js/modules/_classof.js"),r={};r[n("../node_modules/core-js/modules/_wks.js")("toStringTag")]="z",r+""!="[object z]"&&n("../node_modules/core-js/modules/_redefine.js")(Object.prototype,"toString",function(){return"[object "+i(this)+"]"},!0)},"../node_modules/core-js/modules/es6.parse-float.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js"),r=n("../node_modules/core-js/modules/_parse-float.js");i(i.G+i.F*(parseFloat!=r),{parseFloat:r})},"../node_modules/core-js/modules/es6.parse-int.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js"),r=n("../node_modules/core-js/modules/_parse-int.js");i(i.G+i.F*(parseInt!=r),{parseInt:r})},"../node_modules/core-js/modules/es6.promise.js":function(e,t,n){"use strict";var i,r,o,s,a=n("../node_modules/core-js/modules/_library.js"),l=n("../node_modules/core-js/modules/_global.js"),u=n("../node_modules/core-js/modules/_ctx.js"),c=n("../node_modules/core-js/modules/_classof.js"),d=n("../node_modules/core-js/modules/_export.js"),h=n("../node_modules/core-js/modules/_is-object.js"),p=n("../node_modules/core-js/modules/_a-function.js"),f=n("../node_modules/core-js/modules/_an-instance.js"),m=n("../node_modules/core-js/modules/_for-of.js"),_=n("../node_modules/core-js/modules/_species-constructor.js"),g=n("../node_modules/core-js/modules/_task.js").set,v=n("../node_modules/core-js/modules/_microtask.js")(),y=n("../node_modules/core-js/modules/_new-promise-capability.js"),x=n("../node_modules/core-js/modules/_perform.js"),b=n("../node_modules/core-js/modules/_user-agent.js"),w=n("../node_modules/core-js/modules/_promise-resolve.js"),j=l.TypeError,S=l.process,A=S&&S.versions,M=A&&A.v8||"",T=l.Promise,P="process"==c(S),L=function(){},E=r=y.f,O=!!function(){try{var e=T.resolve(1),t=(e.constructor={})[n("../node_modules/core-js/modules/_wks.js")("species")]=function(e){e(L,L)};return(P||"function"==typeof PromiseRejectionEvent)&&e.then(L)instanceof t&&0!==M.indexOf("6.6")&&-1===b.indexOf("Chrome/66")}catch(e){}}(),I=function(e){var t;return!(!h(e)||"function"!=typeof(t=e.then))&&t},C=function(e,t){if(!e._n){e._n=!0;var n=e._c;v(function(){for(var i=e._v,r=1==e._s,o=0,s=function(t){var n,o,s,a=r?t.ok:t.fail,l=t.resolve,u=t.reject,c=t.domain;try{a?(r||(2==e._h&&k(e),e._h=1),!0===a?n=i:(c&&c.enter(),n=a(i),c&&(c.exit(),s=!0)),n===t.promise?u(j("Promise-chain cycle")):(o=I(n))?o.call(n,l,u):l(n)):u(i)}catch(e){c&&!s&&c.exit(),u(e)}};n.length>o;)s(n[o++]);e._c=[],e._n=!1,t&&!e._h&&F(e)})}},F=function(e){g.call(l,function(){var t,n,i,r=e._v,o=N(e);if(o&&(t=x(function(){P?S.emit("unhandledRejection",r,e):(n=l.onunhandledrejection)?n({promise:e,reason:r}):(i=l.console)&&i.error&&i.error("Unhandled promise rejection",r)}),e._h=P||N(e)?2:1),e._a=void 0,o&&t.e)throw t.v})},N=function(e){return 1!==e._h&&0===(e._a||e._c).length},k=function(e){g.call(l,function(){var t;P?S.emit("rejectionHandled",e):(t=l.onrejectionhandled)&&t({promise:e,reason:e._v})})},D=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),C(t,!0))},R=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw j("Promise can't be resolved itself");(t=I(e))?v(function(){var i={_w:n,_d:!1};try{t.call(e,u(R,i,1),u(D,i,1))}catch(e){D.call(i,e)}}):(n._v=e,n._s=1,C(n,!1))}catch(e){D.call({_w:n,_d:!1},e)}}};O||(T=function(e){f(this,T,"Promise","_h"),p(e),i.call(this);try{e(u(R,this,1),u(D,this,1))}catch(e){D.call(this,e)}},(i=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n("../node_modules/core-js/modules/_redefine-all.js")(T.prototype,{then:function(e,t){var n=E(_(this,T));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=P?S.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&C(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new i;this.promise=e,this.resolve=u(R,e,1),this.reject=u(D,e,1)},y.f=E=function(e){return e===T||e===s?new o(e):r(e)}),d(d.G+d.W+d.F*!O,{Promise:T}),n("../node_modules/core-js/modules/_set-to-string-tag.js")(T,"Promise"),n("../node_modules/core-js/modules/_set-species.js")("Promise"),s=n("../node_modules/core-js/modules/_core.js").Promise,d(d.S+d.F*!O,"Promise",{reject:function(e){var t=E(this);return(0,t.reject)(e),t.promise}}),d(d.S+d.F*(a||!O),"Promise",{resolve:function(e){return w(a&&this===s?T:this,e)}}),d(d.S+d.F*!(O&&n("../node_modules/core-js/modules/_iter-detect.js")(function(e){T.all(e).catch(L)})),"Promise",{all:function(e){var t=this,n=E(t),i=n.resolve,r=n.reject,o=x(function(){var n=[],o=0,s=1;m(e,!1,function(e){var a=o++,l=!1;n.push(void 0),s++,t.resolve(e).then(function(e){l||(l=!0,n[a]=e,--s||i(n))},r)}),--s||i(n)});return o.e&&r(o.v),n.promise},race:function(e){var t=this,n=E(t),i=n.reject,r=x(function(){m(e,!1,function(e){t.resolve(e).then(n.resolve,i)})});return r.e&&i(r.v),n.promise}})},"../node_modules/core-js/modules/es6.reflect.apply.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js"),r=n("../node_modules/core-js/modules/_a-function.js"),o=n("../node_modules/core-js/modules/_an-object.js"),s=(n("../node_modules/core-js/modules/_global.js").Reflect||{}).apply,a=Function.apply;i(i.S+i.F*!n("../node_modules/core-js/modules/_fails.js")(function(){s(function(){})}),"Reflect",{apply:function(e,t,n){var i=r(e),l=o(n);return s?s(i,t,l):a.call(i,t,l)}})},"../node_modules/core-js/modules/es6.reflect.construct.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js"),r=n("../node_modules/core-js/modules/_object-create.js"),o=n("../node_modules/core-js/modules/_a-function.js"),s=n("../node_modules/core-js/modules/_an-object.js"),a=n("../node_modules/core-js/modules/_is-object.js"),l=n("../node_modules/core-js/modules/_fails.js"),u=n("../node_modules/core-js/modules/_bind.js"),c=(n("../node_modules/core-js/modules/_global.js").Reflect||{}).construct,d=l(function(){function e(){}return!(c(function(){},[],e)instanceof e)}),h=!l(function(){c(function(){})});i(i.S+i.F*(d||h),"Reflect",{construct:function(e,t){o(e),s(t);var n=arguments.length<3?e:o(arguments[2]);if(h&&!d)return c(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var i=[null];return i.push.apply(i,t),new(u.apply(e,i))}var l=n.prototype,p=r(a(l)?l:Object.prototype),f=Function.apply.call(e,p,t);return a(f)?f:p}})},"../node_modules/core-js/modules/es6.reflect.define-property.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_object-dp.js"),r=n("../node_modules/core-js/modules/_export.js"),o=n("../node_modules/core-js/modules/_an-object.js"),s=n("../node_modules/core-js/modules/_to-primitive.js");r(r.S+r.F*n("../node_modules/core-js/modules/_fails.js")(function(){Reflect.defineProperty(i.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(e,t,n){o(e),t=s(t,!0),o(n);try{return i.f(e,t,n),!0}catch(e){return!1}}})},"../node_modules/core-js/modules/es6.reflect.delete-property.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js"),r=n("../node_modules/core-js/modules/_object-gopd.js").f,o=n("../node_modules/core-js/modules/_an-object.js");i(i.S,"Reflect",{deleteProperty:function(e,t){var n=r(o(e),t);return!(n&&!n.configurable)&&delete e[t]}})},"../node_modules/core-js/modules/es6.reflect.enumerate.js":function(e,t,n){"use strict";var i=n("../node_modules/core-js/modules/_export.js"),r=n("../node_modules/core-js/modules/_an-object.js"),o=function(e){this._t=r(e),this._i=0;var t,n=this._k=[];for(t in e)n.push(t)};n("../node_modules/core-js/modules/_iter-create.js")(o,"Object",function(){var e,t=this._k;do{if(this._i>=t.length)return{value:void 0,done:!0}}while(!((e=t[this._i++])in this._t));return{value:e,done:!1}}),i(i.S,"Reflect",{enumerate:function(e){return new o(e)}})},"../node_modules/core-js/modules/es6.reflect.get-own-property-descriptor.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_object-gopd.js"),r=n("../node_modules/core-js/modules/_export.js"),o=n("../node_modules/core-js/modules/_an-object.js");r(r.S,"Reflect",{getOwnPropertyDescriptor:function(e,t){return i.f(o(e),t)}})},"../node_modules/core-js/modules/es6.reflect.get-prototype-of.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js"),r=n("../node_modules/core-js/modules/_object-gpo.js"),o=n("../node_modules/core-js/modules/_an-object.js");i(i.S,"Reflect",{getPrototypeOf:function(e){return r(o(e))}})},"../node_modules/core-js/modules/es6.reflect.get.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_object-gopd.js"),r=n("../node_modules/core-js/modules/_object-gpo.js"),o=n("../node_modules/core-js/modules/_has.js"),s=n("../node_modules/core-js/modules/_export.js"),a=n("../node_modules/core-js/modules/_is-object.js"),l=n("../node_modules/core-js/modules/_an-object.js");s(s.S,"Reflect",{get:function e(t,n){var s,u,c=arguments.length<3?t:arguments[2];return l(t)===c?t[n]:(s=i.f(t,n))?o(s,"value")?s.value:void 0!==s.get?s.get.call(c):void 0:a(u=r(t))?e(u,n,c):void 0}})},"../node_modules/core-js/modules/es6.reflect.has.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js");i(i.S,"Reflect",{has:function(e,t){return t in e}})},"../node_modules/core-js/modules/es6.reflect.is-extensible.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js"),r=n("../node_modules/core-js/modules/_an-object.js"),o=Object.isExtensible;i(i.S,"Reflect",{isExtensible:function(e){return r(e),!o||o(e)}})},"../node_modules/core-js/modules/es6.reflect.own-keys.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js");i(i.S,"Reflect",{ownKeys:n("../node_modules/core-js/modules/_own-keys.js")})},"../node_modules/core-js/modules/es6.reflect.prevent-extensions.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js"),r=n("../node_modules/core-js/modules/_an-object.js"),o=Object.preventExtensions;i(i.S,"Reflect",{preventExtensions:function(e){r(e);try{return o&&o(e),!0}catch(e){return!1}}})},"../node_modules/core-js/modules/es6.reflect.set-prototype-of.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js"),r=n("../node_modules/core-js/modules/_set-proto.js");r&&i(i.S,"Reflect",{setPrototypeOf:function(e,t){r.check(e,t);try{return r.set(e,t),!0}catch(e){return!1}}})},"../node_modules/core-js/modules/es6.reflect.set.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_object-dp.js"),r=n("../node_modules/core-js/modules/_object-gopd.js"),o=n("../node_modules/core-js/modules/_object-gpo.js"),s=n("../node_modules/core-js/modules/_has.js"),a=n("../node_modules/core-js/modules/_export.js"),l=n("../node_modules/core-js/modules/_property-desc.js"),u=n("../node_modules/core-js/modules/_an-object.js"),c=n("../node_modules/core-js/modules/_is-object.js");a(a.S,"Reflect",{set:function e(t,n,a){var d,h,p=arguments.length<4?t:arguments[3],f=r.f(u(t),n);if(!f){if(c(h=o(t)))return e(h,n,a,p);f=l(0)}if(s(f,"value")){if(!1===f.writable||!c(p))return!1;if(d=r.f(p,n)){if(d.get||d.set||!1===d.writable)return!1;d.value=a,i.f(p,n,d)}else i.f(p,n,l(0,a));return!0}return void 0!==f.set&&(f.set.call(p,a),!0)}})},"../node_modules/core-js/modules/es6.regexp.constructor.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_global.js"),r=n("../node_modules/core-js/modules/_inherit-if-required.js"),o=n("../node_modules/core-js/modules/_object-dp.js").f,s=n("../node_modules/core-js/modules/_object-gopn.js").f,a=n("../node_modules/core-js/modules/_is-regexp.js"),l=n("../node_modules/core-js/modules/_flags.js"),u=i.RegExp,c=u,d=u.prototype,h=/a/g,p=/a/g,f=new u(h)!==h;if(n("../node_modules/core-js/modules/_descriptors.js")&&(!f||n("../node_modules/core-js/modules/_fails.js")(function(){return p[n("../node_modules/core-js/modules/_wks.js")("match")]=!1,u(h)!=h||u(p)==p||"/a/i"!=u(h,"i")}))){u=function(e,t){var n=this instanceof u,i=a(e),o=void 0===t;return!n&&i&&e.constructor===u&&o?e:r(f?new c(i&&!o?e.source:e,t):c((i=e instanceof u)?e.source:e,i&&o?l.call(e):t),n?this:d,u)};for(var m=function(e){e in u||o(u,e,{configurable:!0,get:function(){return c[e]},set:function(t){c[e]=t}})},_=s(c),g=0;_.length>g;)m(_[g++]);d.constructor=u,u.prototype=d,n("../node_modules/core-js/modules/_redefine.js")(i,"RegExp",u)}n("../node_modules/core-js/modules/_set-species.js")("RegExp")},"../node_modules/core-js/modules/es6.regexp.exec.js":function(e,t,n){"use strict";var i=n("../node_modules/core-js/modules/_regexp-exec.js");n("../node_modules/core-js/modules/_export.js")({target:"RegExp",proto:!0,forced:i!==/./.exec},{exec:i})},"../node_modules/core-js/modules/es6.regexp.flags.js":function(e,t,n){n("../node_modules/core-js/modules/_descriptors.js")&&"g"!=/./g.flags&&n("../node_modules/core-js/modules/_object-dp.js").f(RegExp.prototype,"flags",{configurable:!0,get:n("../node_modules/core-js/modules/_flags.js")})},"../node_modules/core-js/modules/es6.regexp.match.js":function(e,t,n){"use strict";var i=n("../node_modules/core-js/modules/_an-object.js"),r=n("../node_modules/core-js/modules/_to-length.js"),o=n("../node_modules/core-js/modules/_advance-string-index.js"),s=n("../node_modules/core-js/modules/_regexp-exec-abstract.js");n("../node_modules/core-js/modules/_fix-re-wks.js")("match",1,function(e,t,n,a){return[function(n){var i=e(this),r=null==n?void 0:n[t];return void 0!==r?r.call(n,i):new RegExp(n)[t](String(i))},function(e){var t=a(n,e,this);if(t.done)return t.value;var l=i(e),u=String(this);if(!l.global)return s(l,u);var c=l.unicode;l.lastIndex=0;for(var d,h=[],p=0;null!==(d=s(l,u));){var f=String(d[0]);h[p]=f,""===f&&(l.lastIndex=o(u,r(l.lastIndex),c)),p++}return 0===p?null:h}]})},"../node_modules/core-js/modules/es6.regexp.replace.js":function(e,t,n){"use strict";var i=n("../node_modules/core-js/modules/_an-object.js"),r=n("../node_modules/core-js/modules/_to-object.js"),o=n("../node_modules/core-js/modules/_to-length.js"),s=n("../node_modules/core-js/modules/_to-integer.js"),a=n("../node_modules/core-js/modules/_advance-string-index.js"),l=n("../node_modules/core-js/modules/_regexp-exec-abstract.js"),u=Math.max,c=Math.min,d=Math.floor,h=/\$([$&`']|\d\d?|<[^>]*>)/g,p=/\$([$&`']|\d\d?)/g;n("../node_modules/core-js/modules/_fix-re-wks.js")("replace",2,function(e,t,n,f){return[function(i,r){var o=e(this),s=null==i?void 0:i[t];return void 0!==s?s.call(i,o,r):n.call(String(o),i,r)},function(e,t){var r=f(n,e,this,t);if(r.done)return r.value;var d=i(e),h=String(this),p="function"==typeof t;p||(t=String(t));var _=d.global;if(_){var g=d.unicode;d.lastIndex=0}for(var v=[];;){var y=l(d,h);if(null===y)break;if(v.push(y),!_)break;""===String(y[0])&&(d.lastIndex=a(h,o(d.lastIndex),g))}for(var x,b="",w=0,j=0;j<v.length;j++){y=v[j];for(var S=String(y[0]),A=u(c(s(y.index),h.length),0),M=[],T=1;T<y.length;T++)M.push(void 0===(x=y[T])?x:String(x));var P=y.groups;if(p){var L=[S].concat(M,A,h);void 0!==P&&L.push(P);var E=String(t.apply(void 0,L))}else E=m(S,h,A,M,P,t);A>=w&&(b+=h.slice(w,A)+E,w=A+S.length)}return b+h.slice(w)}];function m(e,t,i,o,s,a){var l=i+e.length,u=o.length,c=p;return void 0!==s&&(s=r(s),c=h),n.call(a,c,function(n,r){var a;switch(r.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,i);case"'":return t.slice(l);case"<":a=s[r.slice(1,-1)];break;default:var c=+r;if(0===c)return n;if(c>u){var h=d(c/10);return 0===h?n:h<=u?void 0===o[h-1]?r.charAt(1):o[h-1]+r.charAt(1):n}a=o[c-1]}return void 0===a?"":a})}})},"../node_modules/core-js/modules/es6.regexp.search.js":function(e,t,n){"use strict";var i=n("../node_modules/core-js/modules/_an-object.js"),r=n("../node_modules/core-js/modules/_same-value.js"),o=n("../node_modules/core-js/modules/_regexp-exec-abstract.js");n("../node_modules/core-js/modules/_fix-re-wks.js")("search",1,function(e,t,n,s){return[function(n){var i=e(this),r=null==n?void 0:n[t];return void 0!==r?r.call(n,i):new RegExp(n)[t](String(i))},function(e){var t=s(n,e,this);if(t.done)return t.value;var a=i(e),l=String(this),u=a.lastIndex;r(u,0)||(a.lastIndex=0);var c=o(a,l);return r(a.lastIndex,u)||(a.lastIndex=u),null===c?-1:c.index}]})},"../node_modules/core-js/modules/es6.regexp.split.js":function(e,t,n){"use strict";var i=n("../node_modules/core-js/modules/_is-regexp.js"),r=n("../node_modules/core-js/modules/_an-object.js"),o=n("../node_modules/core-js/modules/_species-constructor.js"),s=n("../node_modules/core-js/modules/_advance-string-index.js"),a=n("../node_modules/core-js/modules/_to-length.js"),l=n("../node_modules/core-js/modules/_regexp-exec-abstract.js"),u=n("../node_modules/core-js/modules/_regexp-exec.js"),c=n("../node_modules/core-js/modules/_fails.js"),d=Math.min,h=[].push,p=!c(function(){RegExp(4294967295,"y")});n("../node_modules/core-js/modules/_fix-re-wks.js")("split",2,function(e,t,n,c){var f;return f="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,t){var r=String(this);if(void 0===e&&0===t)return[];if(!i(e))return n.call(r,e,t);for(var o,s,a,l=[],c=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),d=0,p=void 0===t?4294967295:t>>>0,f=new RegExp(e.source,c+"g");(o=u.call(f,r))&&!((s=f.lastIndex)>d&&(l.push(r.slice(d,o.index)),o.length>1&&o.index<r.length&&h.apply(l,o.slice(1)),a=o[0].length,d=s,l.length>=p));)f.lastIndex===o.index&&f.lastIndex++;return d===r.length?!a&&f.test("")||l.push(""):l.push(r.slice(d)),l.length>p?l.slice(0,p):l}:"0".split(void 0,0).length?function(e,t){return void 0===e&&0===t?[]:n.call(this,e,t)}:n,[function(n,i){var r=e(this),o=null==n?void 0:n[t];return void 0!==o?o.call(n,r,i):f.call(String(r),n,i)},function(e,t){var i=c(f,e,this,t,f!==n);if(i.done)return i.value;var u=r(e),h=String(this),m=o(u,RegExp),_=u.unicode,g=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(p?"y":"g"),v=new m(p?u:"^(?:"+u.source+")",g),y=void 0===t?4294967295:t>>>0;if(0===y)return[];if(0===h.length)return null===l(v,h)?[h]:[];for(var x=0,b=0,w=[];b<h.length;){v.lastIndex=p?b:0;var j,S=l(v,p?h:h.slice(b));if(null===S||(j=d(a(v.lastIndex+(p?0:b)),h.length))===x)b=s(h,b,_);else{if(w.push(h.slice(x,b)),w.length===y)return w;for(var A=1;A<=S.length-1;A++)if(w.push(S[A]),w.length===y)return w;b=x=j}}return w.push(h.slice(x)),w}]})},"../node_modules/core-js/modules/es6.regexp.to-string.js":function(e,t,n){"use strict";n("../node_modules/core-js/modules/es6.regexp.flags.js");var i=n("../node_modules/core-js/modules/_an-object.js"),r=n("../node_modules/core-js/modules/_flags.js"),o=n("../node_modules/core-js/modules/_descriptors.js"),s=/./.toString,a=function(e){n("../node_modules/core-js/modules/_redefine.js")(RegExp.prototype,"toString",e,!0)};n("../node_modules/core-js/modules/_fails.js")(function(){return"/a/b"!=s.call({source:"a",flags:"b"})})?a(function(){var e=i(this);return"/".concat(e.source,"/","flags"in e?e.flags:!o&&e instanceof RegExp?r.call(e):void 0)}):"toString"!=s.name&&a(function(){return s.call(this)})},"../node_modules/core-js/modules/es6.set.js":function(e,t,n){"use strict";var i=n("../node_modules/core-js/modules/_collection-strong.js"),r=n("../node_modules/core-js/modules/_validate-collection.js");e.exports=n("../node_modules/core-js/modules/_collection.js")("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return i.def(r(this,"Set"),e=0===e?0:e,e)}},i)},"../node_modules/core-js/modules/es6.string.anchor.js":function(e,t,n){"use strict";n("../node_modules/core-js/modules/_string-html.js")("anchor",function(e){return function(t){return e(this,"a","name",t)}})},"../node_modules/core-js/modules/es6.string.big.js":function(e,t,n){"use strict";n("../node_modules/core-js/modules/_string-html.js")("big",function(e){return function(){return e(this,"big","","")}})},"../node_modules/core-js/modules/es6.string.blink.js":function(e,t,n){"use strict";n("../node_modules/core-js/modules/_string-html.js")("blink",function(e){return function(){return e(this,"blink","","")}})},"../node_modules/core-js/modules/es6.string.bold.js":function(e,t,n){"use strict";n("../node_modules/core-js/modules/_string-html.js")("bold",function(e){return function(){return e(this,"b","","")}})},"../node_modules/core-js/modules/es6.string.code-point-at.js":function(e,t,n){"use strict";var i=n("../node_modules/core-js/modules/_export.js"),r=n("../node_modules/core-js/modules/_string-at.js")(!1);i(i.P,"String",{codePointAt:function(e){return r(this,e)}})},"../node_modules/core-js/modules/es6.string.ends-with.js":function(e,t,n){"use strict";var i=n("../node_modules/core-js/modules/_export.js"),r=n("../node_modules/core-js/modules/_to-length.js"),o=n("../node_modules/core-js/modules/_string-context.js"),s="".endsWith;i(i.P+i.F*n("../node_modules/core-js/modules/_fails-is-regexp.js")("endsWith"),"String",{endsWith:function(e){var t=o(this,e,"endsWith"),n=arguments.length>1?arguments[1]:void 0,i=r(t.length),a=void 0===n?i:Math.min(r(n),i),l=String(e);return s?s.call(t,l,a):t.slice(a-l.length,a)===l}})},"../node_modules/core-js/modules/es6.string.fixed.js":function(e,t,n){"use strict";n("../node_modules/core-js/modules/_string-html.js")("fixed",function(e){return function(){return e(this,"tt","","")}})},"../node_modules/core-js/modules/es6.string.fontcolor.js":function(e,t,n){"use strict";n("../node_modules/core-js/modules/_string-html.js")("fontcolor",function(e){return function(t){return e(this,"font","color",t)}})},"../node_modules/core-js/modules/es6.string.fontsize.js":function(e,t,n){"use strict";n("../node_modules/core-js/modules/_string-html.js")("fontsize",function(e){return function(t){return e(this,"font","size",t)}})},"../node_modules/core-js/modules/es6.string.from-code-point.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js"),r=n("../node_modules/core-js/modules/_to-absolute-index.js"),o=String.fromCharCode,s=String.fromCodePoint;i(i.S+i.F*(!!s&&1!=s.length),"String",{fromCodePoint:function(e){for(var t,n=[],i=arguments.length,s=0;i>s;){if(t=+arguments[s++],r(t,1114111)!==t)throw RangeError(t+" is not a valid code point");n.push(t<65536?o(t):o(55296+((t-=65536)>>10),t%1024+56320))}return n.join("")}})},"../node_modules/core-js/modules/es6.string.includes.js":function(e,t,n){"use strict";var i=n("../node_modules/core-js/modules/_export.js"),r=n("../node_modules/core-js/modules/_string-context.js");i(i.P+i.F*n("../node_modules/core-js/modules/_fails-is-regexp.js")("includes"),"String",{includes:function(e){return!!~r(this,e,"includes").indexOf(e,arguments.length>1?arguments[1]:void 0)}})},"../node_modules/core-js/modules/es6.string.italics.js":function(e,t,n){"use strict";n("../node_modules/core-js/modules/_string-html.js")("italics",function(e){return function(){return e(this,"i","","")}})},"../node_modules/core-js/modules/es6.string.iterator.js":function(e,t,n){"use strict";var i=n("../node_modules/core-js/modules/_string-at.js")(!0);n("../node_modules/core-js/modules/_iter-define.js")(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=i(t,n),this._i+=e.length,{value:e,done:!1})})},"../node_modules/core-js/modules/es6.string.link.js":function(e,t,n){"use strict";n("../node_modules/core-js/modules/_string-html.js")("link",function(e){return function(t){return e(this,"a","href",t)}})},"../node_modules/core-js/modules/es6.string.raw.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js"),r=n("../node_modules/core-js/modules/_to-iobject.js"),o=n("../node_modules/core-js/modules/_to-length.js");i(i.S,"String",{raw:function(e){for(var t=r(e.raw),n=o(t.length),i=arguments.length,s=[],a=0;n>a;)s.push(String(t[a++])),a<i&&s.push(String(arguments[a]));return s.join("")}})},"../node_modules/core-js/modules/es6.string.repeat.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js");i(i.P,"String",{repeat:n("../node_modules/core-js/modules/_string-repeat.js")})},"../node_modules/core-js/modules/es6.string.small.js":function(e,t,n){"use strict";n("../node_modules/core-js/modules/_string-html.js")("small",function(e){return function(){return e(this,"small","","")}})},"../node_modules/core-js/modules/es6.string.starts-with.js":function(e,t,n){"use strict";var i=n("../node_modules/core-js/modules/_export.js"),r=n("../node_modules/core-js/modules/_to-length.js"),o=n("../node_modules/core-js/modules/_string-context.js"),s="".startsWith;i(i.P+i.F*n("../node_modules/core-js/modules/_fails-is-regexp.js")("startsWith"),"String",{startsWith:function(e){var t=o(this,e,"startsWith"),n=r(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),i=String(e);return s?s.call(t,i,n):t.slice(n,n+i.length)===i}})},"../node_modules/core-js/modules/es6.string.strike.js":function(e,t,n){"use strict";n("../node_modules/core-js/modules/_string-html.js")("strike",function(e){return function(){return e(this,"strike","","")}})},"../node_modules/core-js/modules/es6.string.sub.js":function(e,t,n){"use strict";n("../node_modules/core-js/modules/_string-html.js")("sub",function(e){return function(){return e(this,"sub","","")}})},"../node_modules/core-js/modules/es6.string.sup.js":function(e,t,n){"use strict";n("../node_modules/core-js/modules/_string-html.js")("sup",function(e){return function(){return e(this,"sup","","")}})},"../node_modules/core-js/modules/es6.string.trim.js":function(e,t,n){"use strict";n("../node_modules/core-js/modules/_string-trim.js")("trim",function(e){return function(){return e(this,3)}})},"../node_modules/core-js/modules/es6.symbol.js":function(e,t,n){"use strict";var i=n("../node_modules/core-js/modules/_global.js"),r=n("../node_modules/core-js/modules/_has.js"),o=n("../node_modules/core-js/modules/_descriptors.js"),s=n("../node_modules/core-js/modules/_export.js"),a=n("../node_modules/core-js/modules/_redefine.js"),l=n("../node_modules/core-js/modules/_meta.js").KEY,u=n("../node_modules/core-js/modules/_fails.js"),c=n("../node_modules/core-js/modules/_shared.js"),d=n("../node_modules/core-js/modules/_set-to-string-tag.js"),h=n("../node_modules/core-js/modules/_uid.js"),p=n("../node_modules/core-js/modules/_wks.js"),f=n("../node_modules/core-js/modules/_wks-ext.js"),m=n("../node_modules/core-js/modules/_wks-define.js"),_=n("../node_modules/core-js/modules/_enum-keys.js"),g=n("../node_modules/core-js/modules/_is-array.js"),v=n("../node_modules/core-js/modules/_an-object.js"),y=n("../node_modules/core-js/modules/_is-object.js"),x=n("../node_modules/core-js/modules/_to-object.js"),b=n("../node_modules/core-js/modules/_to-iobject.js"),w=n("../node_modules/core-js/modules/_to-primitive.js"),j=n("../node_modules/core-js/modules/_property-desc.js"),S=n("../node_modules/core-js/modules/_object-create.js"),A=n("../node_modules/core-js/modules/_object-gopn-ext.js"),M=n("../node_modules/core-js/modules/_object-gopd.js"),T=n("../node_modules/core-js/modules/_object-gops.js"),P=n("../node_modules/core-js/modules/_object-dp.js"),L=n("../node_modules/core-js/modules/_object-keys.js"),E=M.f,O=P.f,I=A.f,C=i.Symbol,F=i.JSON,N=F&&F.stringify,k=p("_hidden"),D=p("toPrimitive"),R={}.propertyIsEnumerable,z=c("symbol-registry"),U=c("symbols"),B=c("op-symbols"),G=Object.prototype,V="function"==typeof C&&!!T.f,H=i.QObject,X=!H||!H.prototype||!H.prototype.findChild,W=o&&u(function(){return 7!=S(O({},"a",{get:function(){return O(this,"a",{value:7}).a}})).a})?function(e,t,n){var i=E(G,t);i&&delete G[t],O(e,t,n),i&&e!==G&&O(G,t,i)}:O,Y=function(e){var t=U[e]=S(C.prototype);return t._k=e,t},q=V&&"symbol"==typeof C.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof C},Q=function(e,t,n){return e===G&&Q(B,t,n),v(e),t=w(t,!0),v(n),r(U,t)?(n.enumerable?(r(e,k)&&e[k][t]&&(e[k][t]=!1),n=S(n,{enumerable:j(0,!1)})):(r(e,k)||O(e,k,j(1,{})),e[k][t]=!0),W(e,t,n)):O(e,t,n)},J=function(e,t){v(e);for(var n,i=_(t=b(t)),r=0,o=i.length;o>r;)Q(e,n=i[r++],t[n]);return e},Z=function(e){var t=R.call(this,e=w(e,!0));return!(this===G&&r(U,e)&&!r(B,e))&&(!(t||!r(this,e)||!r(U,e)||r(this,k)&&this[k][e])||t)},K=function(e,t){if(e=b(e),t=w(t,!0),e!==G||!r(U,t)||r(B,t)){var n=E(e,t);return!n||!r(U,t)||r(e,k)&&e[k][t]||(n.enumerable=!0),n}},$=function(e){for(var t,n=I(b(e)),i=[],o=0;n.length>o;)r(U,t=n[o++])||t==k||t==l||i.push(t);return i},ee=function(e){for(var t,n=e===G,i=I(n?B:b(e)),o=[],s=0;i.length>s;)!r(U,t=i[s++])||n&&!r(G,t)||o.push(U[t]);return o};V||(a((C=function(){if(this instanceof C)throw TypeError("Symbol is not a constructor!");var e=h(arguments.length>0?arguments[0]:void 0),t=function(n){this===G&&t.call(B,n),r(this,k)&&r(this[k],e)&&(this[k][e]=!1),W(this,e,j(1,n))};return o&&X&&W(G,e,{configurable:!0,set:t}),Y(e)}).prototype,"toString",function(){return this._k}),M.f=K,P.f=Q,n("../node_modules/core-js/modules/_object-gopn.js").f=A.f=$,n("../node_modules/core-js/modules/_object-pie.js").f=Z,T.f=ee,o&&!n("../node_modules/core-js/modules/_library.js")&&a(G,"propertyIsEnumerable",Z,!0),f.f=function(e){return Y(p(e))}),s(s.G+s.W+s.F*!V,{Symbol:C});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ne=0;te.length>ne;)p(te[ne++]);for(var ie=L(p.store),re=0;ie.length>re;)m(ie[re++]);s(s.S+s.F*!V,"Symbol",{for:function(e){return r(z,e+="")?z[e]:z[e]=C(e)},keyFor:function(e){if(!q(e))throw TypeError(e+" is not a symbol!");for(var t in z)if(z[t]===e)return t},useSetter:function(){X=!0},useSimple:function(){X=!1}}),s(s.S+s.F*!V,"Object",{create:function(e,t){return void 0===t?S(e):J(S(e),t)},defineProperty:Q,defineProperties:J,getOwnPropertyDescriptor:K,getOwnPropertyNames:$,getOwnPropertySymbols:ee});var oe=u(function(){T.f(1)});s(s.S+s.F*oe,"Object",{getOwnPropertySymbols:function(e){return T.f(x(e))}}),F&&s(s.S+s.F*(!V||u(function(){var e=C();return"[null]"!=N([e])||"{}"!=N({a:e})||"{}"!=N(Object(e))})),"JSON",{stringify:function(e){for(var t,n,i=[e],r=1;arguments.length>r;)i.push(arguments[r++]);if(n=t=i[1],(y(t)||void 0!==e)&&!q(e))return g(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!q(t))return t}),i[1]=t,N.apply(F,i)}}),C.prototype[D]||n("../node_modules/core-js/modules/_hide.js")(C.prototype,D,C.prototype.valueOf),d(C,"Symbol"),d(Math,"Math",!0),d(i.JSON,"JSON",!0)},"../node_modules/core-js/modules/es6.typed.array-buffer.js":function(e,t,n){"use strict";var i=n("../node_modules/core-js/modules/_export.js"),r=n("../node_modules/core-js/modules/_typed.js"),o=n("../node_modules/core-js/modules/_typed-buffer.js"),s=n("../node_modules/core-js/modules/_an-object.js"),a=n("../node_modules/core-js/modules/_to-absolute-index.js"),l=n("../node_modules/core-js/modules/_to-length.js"),u=n("../node_modules/core-js/modules/_is-object.js"),c=n("../node_modules/core-js/modules/_global.js").ArrayBuffer,d=n("../node_modules/core-js/modules/_species-constructor.js"),h=o.ArrayBuffer,p=o.DataView,f=r.ABV&&c.isView,m=h.prototype.slice,_=r.VIEW;i(i.G+i.W+i.F*(c!==h),{ArrayBuffer:h}),i(i.S+i.F*!r.CONSTR,"ArrayBuffer",{isView:function(e){return f&&f(e)||u(e)&&_ in e}}),i(i.P+i.U+i.F*n("../node_modules/core-js/modules/_fails.js")(function(){return!new h(2).slice(1,void 0).byteLength}),"ArrayBuffer",{slice:function(e,t){if(void 0!==m&&void 0===t)return m.call(s(this),e);for(var n=s(this).byteLength,i=a(e,n),r=a(void 0===t?n:t,n),o=new(d(this,h))(l(r-i)),u=new p(this),c=new p(o),f=0;i<r;)c.setUint8(f++,u.getUint8(i++));return o}}),n("../node_modules/core-js/modules/_set-species.js")("ArrayBuffer")},"../node_modules/core-js/modules/es6.typed.data-view.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js");i(i.G+i.W+i.F*!n("../node_modules/core-js/modules/_typed.js").ABV,{DataView:n("../node_modules/core-js/modules/_typed-buffer.js").DataView})},"../node_modules/core-js/modules/es6.typed.float32-array.js":function(e,t,n){n("../node_modules/core-js/modules/_typed-array.js")("Float32",4,function(e){return function(t,n,i){return e(this,t,n,i)}})},"../node_modules/core-js/modules/es6.typed.float64-array.js":function(e,t,n){n("../node_modules/core-js/modules/_typed-array.js")("Float64",8,function(e){return function(t,n,i){return e(this,t,n,i)}})},"../node_modules/core-js/modules/es6.typed.int16-array.js":function(e,t,n){n("../node_modules/core-js/modules/_typed-array.js")("Int16",2,function(e){return function(t,n,i){return e(this,t,n,i)}})},"../node_modules/core-js/modules/es6.typed.int32-array.js":function(e,t,n){n("../node_modules/core-js/modules/_typed-array.js")("Int32",4,function(e){return function(t,n,i){return e(this,t,n,i)}})},"../node_modules/core-js/modules/es6.typed.int8-array.js":function(e,t,n){n("../node_modules/core-js/modules/_typed-array.js")("Int8",1,function(e){return function(t,n,i){return e(this,t,n,i)}})},"../node_modules/core-js/modules/es6.typed.uint16-array.js":function(e,t,n){n("../node_modules/core-js/modules/_typed-array.js")("Uint16",2,function(e){return function(t,n,i){return e(this,t,n,i)}})},"../node_modules/core-js/modules/es6.typed.uint32-array.js":function(e,t,n){n("../node_modules/core-js/modules/_typed-array.js")("Uint32",4,function(e){return function(t,n,i){return e(this,t,n,i)}})},"../node_modules/core-js/modules/es6.typed.uint8-array.js":function(e,t,n){n("../node_modules/core-js/modules/_typed-array.js")("Uint8",1,function(e){return function(t,n,i){return e(this,t,n,i)}})},"../node_modules/core-js/modules/es6.typed.uint8-clamped-array.js":function(e,t,n){n("../node_modules/core-js/modules/_typed-array.js")("Uint8",1,function(e){return function(t,n,i){return e(this,t,n,i)}},!0)},"../node_modules/core-js/modules/es6.weak-map.js":function(e,t,n){"use strict";var i,r=n("../node_modules/core-js/modules/_global.js"),o=n("../node_modules/core-js/modules/_array-methods.js")(0),s=n("../node_modules/core-js/modules/_redefine.js"),a=n("../node_modules/core-js/modules/_meta.js"),l=n("../node_modules/core-js/modules/_object-assign.js"),u=n("../node_modules/core-js/modules/_collection-weak.js"),c=n("../node_modules/core-js/modules/_is-object.js"),d=n("../node_modules/core-js/modules/_validate-collection.js"),h=n("../node_modules/core-js/modules/_validate-collection.js"),p=!r.ActiveXObject&&"ActiveXObject"in r,f=a.getWeak,m=Object.isExtensible,_=u.ufstore,g=function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},v={get:function(e){if(c(e)){var t=f(e);return!0===t?_(d(this,"WeakMap")).get(e):t?t[this._i]:void 0}},set:function(e,t){return u.def(d(this,"WeakMap"),e,t)}},y=e.exports=n("../node_modules/core-js/modules/_collection.js")("WeakMap",g,v,u,!0,!0);h&&p&&(l((i=u.getConstructor(g,"WeakMap")).prototype,v),a.NEED=!0,o(["delete","has","get","set"],function(e){var t=y.prototype,n=t[e];s(t,e,function(t,r){if(c(t)&&!m(t)){this._f||(this._f=new i);var o=this._f[e](t,r);return"set"==e?this:o}return n.call(this,t,r)})}))},"../node_modules/core-js/modules/es6.weak-set.js":function(e,t,n){"use strict";var i=n("../node_modules/core-js/modules/_collection-weak.js"),r=n("../node_modules/core-js/modules/_validate-collection.js");n("../node_modules/core-js/modules/_collection.js")("WeakSet",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return i.def(r(this,"WeakSet"),e,!0)}},i,!1,!0)},"../node_modules/core-js/modules/es7.array.flat-map.js":function(e,t,n){"use strict";var i=n("../node_modules/core-js/modules/_export.js"),r=n("../node_modules/core-js/modules/_flatten-into-array.js"),o=n("../node_modules/core-js/modules/_to-object.js"),s=n("../node_modules/core-js/modules/_to-length.js"),a=n("../node_modules/core-js/modules/_a-function.js"),l=n("../node_modules/core-js/modules/_array-species-create.js");i(i.P,"Array",{flatMap:function(e){var t,n,i=o(this);return a(e),t=s(i.length),n=l(i,0),r(n,i,i,t,0,1,e,arguments[1]),n}}),n("../node_modules/core-js/modules/_add-to-unscopables.js")("flatMap")},"../node_modules/core-js/modules/es7.array.flatten.js":function(e,t,n){"use strict";var i=n("../node_modules/core-js/modules/_export.js"),r=n("../node_modules/core-js/modules/_flatten-into-array.js"),o=n("../node_modules/core-js/modules/_to-object.js"),s=n("../node_modules/core-js/modules/_to-length.js"),a=n("../node_modules/core-js/modules/_to-integer.js"),l=n("../node_modules/core-js/modules/_array-species-create.js");i(i.P,"Array",{flatten:function(){var e=arguments[0],t=o(this),n=s(t.length),i=l(t,0);return r(i,t,t,n,0,void 0===e?1:a(e)),i}}),n("../node_modules/core-js/modules/_add-to-unscopables.js")("flatten")},"../node_modules/core-js/modules/es7.array.includes.js":function(e,t,n){"use strict";var i=n("../node_modules/core-js/modules/_export.js"),r=n("../node_modules/core-js/modules/_array-includes.js")(!0);i(i.P,"Array",{includes:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),n("../node_modules/core-js/modules/_add-to-unscopables.js")("includes")},"../node_modules/core-js/modules/es7.asap.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js"),r=n("../node_modules/core-js/modules/_microtask.js")(),o=n("../node_modules/core-js/modules/_global.js").process,s="process"==n("../node_modules/core-js/modules/_cof.js")(o);i(i.G,{asap:function(e){var t=s&&o.domain;r(t?t.bind(e):e)}})},"../node_modules/core-js/modules/es7.error.is-error.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js"),r=n("../node_modules/core-js/modules/_cof.js");i(i.S,"Error",{isError:function(e){return"Error"===r(e)}})},"../node_modules/core-js/modules/es7.global.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js");i(i.G,{global:n("../node_modules/core-js/modules/_global.js")})},"../node_modules/core-js/modules/es7.map.from.js":function(e,t,n){n("../node_modules/core-js/modules/_set-collection-from.js")("Map")},"../node_modules/core-js/modules/es7.map.of.js":function(e,t,n){n("../node_modules/core-js/modules/_set-collection-of.js")("Map")},"../node_modules/core-js/modules/es7.map.to-json.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js");i(i.P+i.R,"Map",{toJSON:n("../node_modules/core-js/modules/_collection-to-json.js")("Map")})},"../node_modules/core-js/modules/es7.math.clamp.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js");i(i.S,"Math",{clamp:function(e,t,n){return Math.min(n,Math.max(t,e))}})},"../node_modules/core-js/modules/es7.math.deg-per-rad.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js");i(i.S,"Math",{DEG_PER_RAD:Math.PI/180})},"../node_modules/core-js/modules/es7.math.degrees.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js"),r=180/Math.PI;i(i.S,"Math",{degrees:function(e){return e*r}})},"../node_modules/core-js/modules/es7.math.fscale.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js"),r=n("../node_modules/core-js/modules/_math-scale.js"),o=n("../node_modules/core-js/modules/_math-fround.js");i(i.S,"Math",{fscale:function(e,t,n,i,s){return o(r(e,t,n,i,s))}})},"../node_modules/core-js/modules/es7.math.iaddh.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js");i(i.S,"Math",{iaddh:function(e,t,n,i){var r=e>>>0,o=n>>>0;return(t>>>0)+(i>>>0)+((r&o|(r|o)&~(r+o>>>0))>>>31)|0}})},"../node_modules/core-js/modules/es7.math.imulh.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js");i(i.S,"Math",{imulh:function(e,t){var n=+e,i=+t,r=65535&n,o=65535&i,s=n>>16,a=i>>16,l=(s*o>>>0)+(r*o>>>16);return s*a+(l>>16)+((r*a>>>0)+(65535&l)>>16)}})},"../node_modules/core-js/modules/es7.math.isubh.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js");i(i.S,"Math",{isubh:function(e,t,n,i){var r=e>>>0,o=n>>>0;return(t>>>0)-(i>>>0)-((~r&o|~(r^o)&r-o>>>0)>>>31)|0}})},"../node_modules/core-js/modules/es7.math.rad-per-deg.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js");i(i.S,"Math",{RAD_PER_DEG:180/Math.PI})},"../node_modules/core-js/modules/es7.math.radians.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js"),r=Math.PI/180;i(i.S,"Math",{radians:function(e){return e*r}})},"../node_modules/core-js/modules/es7.math.scale.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js");i(i.S,"Math",{scale:n("../node_modules/core-js/modules/_math-scale.js")})},"../node_modules/core-js/modules/es7.math.signbit.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js");i(i.S,"Math",{signbit:function(e){return(e=+e)!=e?e:0==e?1/e==1/0:e>0}})},"../node_modules/core-js/modules/es7.math.umulh.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js");i(i.S,"Math",{umulh:function(e,t){var n=+e,i=+t,r=65535&n,o=65535&i,s=n>>>16,a=i>>>16,l=(s*o>>>0)+(r*o>>>16);return s*a+(l>>>16)+((r*a>>>0)+(65535&l)>>>16)}})},"../node_modules/core-js/modules/es7.object.define-getter.js":function(e,t,n){"use strict";var i=n("../node_modules/core-js/modules/_export.js"),r=n("../node_modules/core-js/modules/_to-object.js"),o=n("../node_modules/core-js/modules/_a-function.js"),s=n("../node_modules/core-js/modules/_object-dp.js");n("../node_modules/core-js/modules/_descriptors.js")&&i(i.P+n("../node_modules/core-js/modules/_object-forced-pam.js"),"Object",{__defineGetter__:function(e,t){s.f(r(this),e,{get:o(t),enumerable:!0,configurable:!0})}})},"../node_modules/core-js/modules/es7.object.define-setter.js":function(e,t,n){"use strict";var i=n("../node_modules/core-js/modules/_export.js"),r=n("../node_modules/core-js/modules/_to-object.js"),o=n("../node_modules/core-js/modules/_a-function.js"),s=n("../node_modules/core-js/modules/_object-dp.js");n("../node_modules/core-js/modules/_descriptors.js")&&i(i.P+n("../node_modules/core-js/modules/_object-forced-pam.js"),"Object",{__defineSetter__:function(e,t){s.f(r(this),e,{set:o(t),enumerable:!0,configurable:!0})}})},"../node_modules/core-js/modules/es7.object.entries.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js"),r=n("../node_modules/core-js/modules/_object-to-array.js")(!0);i(i.S,"Object",{entries:function(e){return r(e)}})},"../node_modules/core-js/modules/es7.object.get-own-property-descriptors.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js"),r=n("../node_modules/core-js/modules/_own-keys.js"),o=n("../node_modules/core-js/modules/_to-iobject.js"),s=n("../node_modules/core-js/modules/_object-gopd.js"),a=n("../node_modules/core-js/modules/_create-property.js");i(i.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,n,i=o(e),l=s.f,u=r(i),c={},d=0;u.length>d;)void 0!==(n=l(i,t=u[d++]))&&a(c,t,n);return c}})},"../node_modules/core-js/modules/es7.object.lookup-getter.js":function(e,t,n){"use strict";var i=n("../node_modules/core-js/modules/_export.js"),r=n("../node_modules/core-js/modules/_to-object.js"),o=n("../node_modules/core-js/modules/_to-primitive.js"),s=n("../node_modules/core-js/modules/_object-gpo.js"),a=n("../node_modules/core-js/modules/_object-gopd.js").f;n("../node_modules/core-js/modules/_descriptors.js")&&i(i.P+n("../node_modules/core-js/modules/_object-forced-pam.js"),"Object",{__lookupGetter__:function(e){var t,n=r(this),i=o(e,!0);do{if(t=a(n,i))return t.get}while(n=s(n))}})},"../node_modules/core-js/modules/es7.object.lookup-setter.js":function(e,t,n){"use strict";var i=n("../node_modules/core-js/modules/_export.js"),r=n("../node_modules/core-js/modules/_to-object.js"),o=n("../node_modules/core-js/modules/_to-primitive.js"),s=n("../node_modules/core-js/modules/_object-gpo.js"),a=n("../node_modules/core-js/modules/_object-gopd.js").f;n("../node_modules/core-js/modules/_descriptors.js")&&i(i.P+n("../node_modules/core-js/modules/_object-forced-pam.js"),"Object",{__lookupSetter__:function(e){var t,n=r(this),i=o(e,!0);do{if(t=a(n,i))return t.set}while(n=s(n))}})},"../node_modules/core-js/modules/es7.object.values.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js"),r=n("../node_modules/core-js/modules/_object-to-array.js")(!1);i(i.S,"Object",{values:function(e){return r(e)}})},"../node_modules/core-js/modules/es7.observable.js":function(e,t,n){"use strict";var i=n("../node_modules/core-js/modules/_export.js"),r=n("../node_modules/core-js/modules/_global.js"),o=n("../node_modules/core-js/modules/_core.js"),s=n("../node_modules/core-js/modules/_microtask.js")(),a=n("../node_modules/core-js/modules/_wks.js")("observable"),l=n("../node_modules/core-js/modules/_a-function.js"),u=n("../node_modules/core-js/modules/_an-object.js"),c=n("../node_modules/core-js/modules/_an-instance.js"),d=n("../node_modules/core-js/modules/_redefine-all.js"),h=n("../node_modules/core-js/modules/_hide.js"),p=n("../node_modules/core-js/modules/_for-of.js"),f=p.RETURN,m=function(e){return null==e?void 0:l(e)},_=function(e){var t=e._c;t&&(e._c=void 0,t())},g=function(e){return void 0===e._o},v=function(e){g(e)||(e._o=void 0,_(e))},y=function(e,t){u(e),this._c=void 0,this._o=e,e=new x(this);try{var n=t(e),i=n;null!=n&&("function"==typeof n.unsubscribe?n=function(){i.unsubscribe()}:l(n),this._c=n)}catch(t){return void e.error(t)}g(this)&&_(this)};y.prototype=d({},{unsubscribe:function(){v(this)}});var x=function(e){this._s=e};x.prototype=d({},{next:function(e){var t=this._s;if(!g(t)){var n=t._o;try{var i=m(n.next);if(i)return i.call(n,e)}catch(e){try{v(t)}finally{throw e}}}},error:function(e){var t=this._s;if(g(t))throw e;var n=t._o;t._o=void 0;try{var i=m(n.error);if(!i)throw e;e=i.call(n,e)}catch(e){try{_(t)}finally{throw e}}return _(t),e},complete:function(e){var t=this._s;if(!g(t)){var n=t._o;t._o=void 0;try{var i=m(n.complete);e=i?i.call(n,e):void 0}catch(e){try{_(t)}finally{throw e}}return _(t),e}}});var b=function(e){c(this,b,"Observable","_f")._f=l(e)};d(b.prototype,{subscribe:function(e){return new y(e,this._f)},forEach:function(e){var t=this;return new(o.Promise||r.Promise)(function(n,i){l(e);var r=t.subscribe({next:function(t){try{return e(t)}catch(e){i(e),r.unsubscribe()}},error:i,complete:n})})}}),d(b,{from:function(e){var t="function"==typeof this?this:b,n=m(u(e)[a]);if(n){var i=u(n.call(e));return i.constructor===t?i:new t(function(e){return i.subscribe(e)})}return new t(function(t){var n=!1;return s(function(){if(!n){try{if(p(e,!1,function(e){if(t.next(e),n)return f})===f)return}catch(e){if(n)throw e;return void t.error(e)}t.complete()}}),function(){n=!0}})},of:function(){for(var e=0,t=arguments.length,n=new Array(t);e<t;)n[e]=arguments[e++];return new("function"==typeof this?this:b)(function(e){var t=!1;return s(function(){if(!t){for(var i=0;i<n.length;++i)if(e.next(n[i]),t)return;e.complete()}}),function(){t=!0}})}}),h(b.prototype,a,function(){return this}),i(i.G,{Observable:b}),n("../node_modules/core-js/modules/_set-species.js")("Observable")},"../node_modules/core-js/modules/es7.promise.finally.js":function(e,t,n){"use strict";var i=n("../node_modules/core-js/modules/_export.js"),r=n("../node_modules/core-js/modules/_core.js"),o=n("../node_modules/core-js/modules/_global.js"),s=n("../node_modules/core-js/modules/_species-constructor.js"),a=n("../node_modules/core-js/modules/_promise-resolve.js");i(i.P+i.R,"Promise",{finally:function(e){var t=s(this,r.Promise||o.Promise),n="function"==typeof e;return this.then(n?function(n){return a(t,e()).then(function(){return n})}:e,n?function(n){return a(t,e()).then(function(){throw n})}:e)}})},"../node_modules/core-js/modules/es7.promise.try.js":function(e,t,n){"use strict";var i=n("../node_modules/core-js/modules/_export.js"),r=n("../node_modules/core-js/modules/_new-promise-capability.js"),o=n("../node_modules/core-js/modules/_perform.js");i(i.S,"Promise",{try:function(e){var t=r.f(this),n=o(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}})},"../node_modules/core-js/modules/es7.reflect.define-metadata.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_metadata.js"),r=n("../node_modules/core-js/modules/_an-object.js"),o=i.key,s=i.set;i.exp({defineMetadata:function(e,t,n,i){s(e,t,r(n),o(i))}})},"../node_modules/core-js/modules/es7.reflect.delete-metadata.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_metadata.js"),r=n("../node_modules/core-js/modules/_an-object.js"),o=i.key,s=i.map,a=i.store;i.exp({deleteMetadata:function(e,t){var n=arguments.length<3?void 0:o(arguments[2]),i=s(r(t),n,!1);if(void 0===i||!i.delete(e))return!1;if(i.size)return!0;var l=a.get(t);return l.delete(n),!!l.size||a.delete(t)}})},"../node_modules/core-js/modules/es7.reflect.get-metadata-keys.js":function(e,t,n){var i=n("../node_modules/core-js/modules/es6.set.js"),r=n("../node_modules/core-js/modules/_array-from-iterable.js"),o=n("../node_modules/core-js/modules/_metadata.js"),s=n("../node_modules/core-js/modules/_an-object.js"),a=n("../node_modules/core-js/modules/_object-gpo.js"),l=o.keys,u=o.key,c=function(e,t){var n=l(e,t),o=a(e);if(null===o)return n;var s=c(o,t);return s.length?n.length?r(new i(n.concat(s))):s:n};o.exp({getMetadataKeys:function(e){return c(s(e),arguments.length<2?void 0:u(arguments[1]))}})},"../node_modules/core-js/modules/es7.reflect.get-metadata.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_metadata.js"),r=n("../node_modules/core-js/modules/_an-object.js"),o=n("../node_modules/core-js/modules/_object-gpo.js"),s=i.has,a=i.get,l=i.key,u=function(e,t,n){if(s(e,t,n))return a(e,t,n);var i=o(t);return null!==i?u(e,i,n):void 0};i.exp({getMetadata:function(e,t){return u(e,r(t),arguments.length<3?void 0:l(arguments[2]))}})},"../node_modules/core-js/modules/es7.reflect.get-own-metadata-keys.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_metadata.js"),r=n("../node_modules/core-js/modules/_an-object.js"),o=i.keys,s=i.key;i.exp({getOwnMetadataKeys:function(e){return o(r(e),arguments.length<2?void 0:s(arguments[1]))}})},"../node_modules/core-js/modules/es7.reflect.get-own-metadata.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_metadata.js"),r=n("../node_modules/core-js/modules/_an-object.js"),o=i.get,s=i.key;i.exp({getOwnMetadata:function(e,t){return o(e,r(t),arguments.length<3?void 0:s(arguments[2]))}})},"../node_modules/core-js/modules/es7.reflect.has-metadata.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_metadata.js"),r=n("../node_modules/core-js/modules/_an-object.js"),o=n("../node_modules/core-js/modules/_object-gpo.js"),s=i.has,a=i.key,l=function(e,t,n){if(s(e,t,n))return!0;var i=o(t);return null!==i&&l(e,i,n)};i.exp({hasMetadata:function(e,t){return l(e,r(t),arguments.length<3?void 0:a(arguments[2]))}})},"../node_modules/core-js/modules/es7.reflect.has-own-metadata.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_metadata.js"),r=n("../node_modules/core-js/modules/_an-object.js"),o=i.has,s=i.key;i.exp({hasOwnMetadata:function(e,t){return o(e,r(t),arguments.length<3?void 0:s(arguments[2]))}})},"../node_modules/core-js/modules/es7.reflect.metadata.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_metadata.js"),r=n("../node_modules/core-js/modules/_an-object.js"),o=n("../node_modules/core-js/modules/_a-function.js"),s=i.key,a=i.set;i.exp({metadata:function(e,t){return function(n,i){a(e,t,(void 0!==i?r:o)(n),s(i))}}})},"../node_modules/core-js/modules/es7.set.from.js":function(e,t,n){n("../node_modules/core-js/modules/_set-collection-from.js")("Set")},"../node_modules/core-js/modules/es7.set.of.js":function(e,t,n){n("../node_modules/core-js/modules/_set-collection-of.js")("Set")},"../node_modules/core-js/modules/es7.set.to-json.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js");i(i.P+i.R,"Set",{toJSON:n("../node_modules/core-js/modules/_collection-to-json.js")("Set")})},"../node_modules/core-js/modules/es7.string.at.js":function(e,t,n){"use strict";var i=n("../node_modules/core-js/modules/_export.js"),r=n("../node_modules/core-js/modules/_string-at.js")(!0);i(i.P,"String",{at:function(e){return r(this,e)}})},"../node_modules/core-js/modules/es7.string.match-all.js":function(e,t,n){"use strict";var i=n("../node_modules/core-js/modules/_export.js"),r=n("../node_modules/core-js/modules/_defined.js"),o=n("../node_modules/core-js/modules/_to-length.js"),s=n("../node_modules/core-js/modules/_is-regexp.js"),a=n("../node_modules/core-js/modules/_flags.js"),l=RegExp.prototype,u=function(e,t){this._r=e,this._s=t};n("../node_modules/core-js/modules/_iter-create.js")(u,"RegExp String",function(){var e=this._r.exec(this._s);return{value:e,done:null===e}}),i(i.P,"String",{matchAll:function(e){if(r(this),!s(e))throw TypeError(e+" is not a regexp!");var t=String(this),n="flags"in l?String(e.flags):a.call(e),i=new RegExp(e.source,~n.indexOf("g")?n:"g"+n);return i.lastIndex=o(e.lastIndex),new u(i,t)}})},"../node_modules/core-js/modules/es7.string.pad-end.js":function(e,t,n){"use strict";var i=n("../node_modules/core-js/modules/_export.js"),r=n("../node_modules/core-js/modules/_string-pad.js"),o=n("../node_modules/core-js/modules/_user-agent.js"),s=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);i(i.P+i.F*s,"String",{padEnd:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0,!1)}})},"../node_modules/core-js/modules/es7.string.pad-start.js":function(e,t,n){"use strict";var i=n("../node_modules/core-js/modules/_export.js"),r=n("../node_modules/core-js/modules/_string-pad.js"),o=n("../node_modules/core-js/modules/_user-agent.js"),s=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);i(i.P+i.F*s,"String",{padStart:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0,!0)}})},"../node_modules/core-js/modules/es7.string.trim-left.js":function(e,t,n){"use strict";n("../node_modules/core-js/modules/_string-trim.js")("trimLeft",function(e){return function(){return e(this,1)}},"trimStart")},"../node_modules/core-js/modules/es7.string.trim-right.js":function(e,t,n){"use strict";n("../node_modules/core-js/modules/_string-trim.js")("trimRight",function(e){return function(){return e(this,2)}},"trimEnd")},"../node_modules/core-js/modules/es7.symbol.async-iterator.js":function(e,t,n){n("../node_modules/core-js/modules/_wks-define.js")("asyncIterator")},"../node_modules/core-js/modules/es7.symbol.observable.js":function(e,t,n){n("../node_modules/core-js/modules/_wks-define.js")("observable")},"../node_modules/core-js/modules/es7.system.global.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js");i(i.S,"System",{global:n("../node_modules/core-js/modules/_global.js")})},"../node_modules/core-js/modules/es7.weak-map.from.js":function(e,t,n){n("../node_modules/core-js/modules/_set-collection-from.js")("WeakMap")},"../node_modules/core-js/modules/es7.weak-map.of.js":function(e,t,n){n("../node_modules/core-js/modules/_set-collection-of.js")("WeakMap")},"../node_modules/core-js/modules/es7.weak-set.from.js":function(e,t,n){n("../node_modules/core-js/modules/_set-collection-from.js")("WeakSet")},"../node_modules/core-js/modules/es7.weak-set.of.js":function(e,t,n){n("../node_modules/core-js/modules/_set-collection-of.js")("WeakSet")},"../node_modules/core-js/modules/web.dom.iterable.js":function(e,t,n){for(var i=n("../node_modules/core-js/modules/es6.array.iterator.js"),r=n("../node_modules/core-js/modules/_object-keys.js"),o=n("../node_modules/core-js/modules/_redefine.js"),s=n("../node_modules/core-js/modules/_global.js"),a=n("../node_modules/core-js/modules/_hide.js"),l=n("../node_modules/core-js/modules/_iterators.js"),u=n("../node_modules/core-js/modules/_wks.js"),c=u("iterator"),d=u("toStringTag"),h=l.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},f=r(p),m=0;m<f.length;m++){var _,g=f[m],v=p[g],y=s[g],x=y&&y.prototype;if(x&&(x[c]||a(x,c,h),x[d]||a(x,d,g),l[g]=h,v))for(_ in i)x[_]||o(x,_,i[_],!0)}},"../node_modules/core-js/modules/web.immediate.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_export.js"),r=n("../node_modules/core-js/modules/_task.js");i(i.G+i.B,{setImmediate:r.set,clearImmediate:r.clear})},"../node_modules/core-js/modules/web.timers.js":function(e,t,n){var i=n("../node_modules/core-js/modules/_global.js"),r=n("../node_modules/core-js/modules/_export.js"),o=n("../node_modules/core-js/modules/_user-agent.js"),s=[].slice,a=/MSIE .\./.test(o),l=function(e){return function(t,n){var i=arguments.length>2,r=!!i&&s.call(arguments,2);return e(i?function(){("function"==typeof t?t:Function(t)).apply(this,r)}:t,n)}};r(r.G+r.B+r.F*a,{setTimeout:l(i.setTimeout),setInterval:l(i.setInterval)})},"../node_modules/core-js/shim.js":function(e,t,n){n("../node_modules/core-js/modules/es6.symbol.js"),n("../node_modules/core-js/modules/es6.object.create.js"),n("../node_modules/core-js/modules/es6.object.define-property.js"),n("../node_modules/core-js/modules/es6.object.define-properties.js"),n("../node_modules/core-js/modules/es6.object.get-own-property-descriptor.js"),n("../node_modules/core-js/modules/es6.object.get-prototype-of.js"),n("../node_modules/core-js/modules/es6.object.keys.js"),n("../node_modules/core-js/modules/es6.object.get-own-property-names.js"),n("../node_modules/core-js/modules/es6.object.freeze.js"),n("../node_modules/core-js/modules/es6.object.seal.js"),n("../node_modules/core-js/modules/es6.object.prevent-extensions.js"),n("../node_modules/core-js/modules/es6.object.is-frozen.js"),n("../node_modules/core-js/modules/es6.object.is-sealed.js"),n("../node_modules/core-js/modules/es6.object.is-extensible.js"),n("../node_modules/core-js/modules/es6.object.assign.js"),n("../node_modules/core-js/modules/es6.object.is.js"),n("../node_modules/core-js/modules/es6.object.set-prototype-of.js"),n("../node_modules/core-js/modules/es6.object.to-string.js"),n("../node_modules/core-js/modules/es6.function.bind.js"),n("../node_modules/core-js/modules/es6.function.name.js"),n("../node_modules/core-js/modules/es6.function.has-instance.js"),n("../node_modules/core-js/modules/es6.parse-int.js"),n("../node_modules/core-js/modules/es6.parse-float.js"),n("../node_modules/core-js/modules/es6.number.constructor.js"),n("../node_modules/core-js/modules/es6.number.to-fixed.js"),n("../node_modules/core-js/modules/es6.number.to-precision.js"),n("../node_modules/core-js/modules/es6.number.epsilon.js"),n("../node_modules/core-js/modules/es6.number.is-finite.js"),n("../node_modules/core-js/modules/es6.number.is-integer.js"),n("../node_modules/core-js/modules/es6.number.is-nan.js"),n("../node_modules/core-js/modules/es6.number.is-safe-integer.js"),n("../node_modules/core-js/modules/es6.number.max-safe-integer.js"),n("../node_modules/core-js/modules/es6.number.min-safe-integer.js"),n("../node_modules/core-js/modules/es6.number.parse-float.js"),n("../node_modules/core-js/modules/es6.number.parse-int.js"),n("../node_modules/core-js/modules/es6.math.acosh.js"),n("../node_modules/core-js/modules/es6.math.asinh.js"),n("../node_modules/core-js/modules/es6.math.atanh.js"),n("../node_modules/core-js/modules/es6.math.cbrt.js"),n("../node_modules/core-js/modules/es6.math.clz32.js"),n("../node_modules/core-js/modules/es6.math.cosh.js"),n("../node_modules/core-js/modules/es6.math.expm1.js"),n("../node_modules/core-js/modules/es6.math.fround.js"),n("../node_modules/core-js/modules/es6.math.hypot.js"),n("../node_modules/core-js/modules/es6.math.imul.js"),n("../node_modules/core-js/modules/es6.math.log10.js"),n("../node_modules/core-js/modules/es6.math.log1p.js"),n("../node_modules/core-js/modules/es6.math.log2.js"),n("../node_modules/core-js/modules/es6.math.sign.js"),n("../node_modules/core-js/modules/es6.math.sinh.js"),n("../node_modules/core-js/modules/es6.math.tanh.js"),n("../node_modules/core-js/modules/es6.math.trunc.js"),n("../node_modules/core-js/modules/es6.string.from-code-point.js"),n("../node_modules/core-js/modules/es6.string.raw.js"),n("../node_modules/core-js/modules/es6.string.trim.js"),n("../node_modules/core-js/modules/es6.string.iterator.js"),n("../node_modules/core-js/modules/es6.string.code-point-at.js"),n("../node_modules/core-js/modules/es6.string.ends-with.js"),n("../node_modules/core-js/modules/es6.string.includes.js"),n("../node_modules/core-js/modules/es6.string.repeat.js"),n("../node_modules/core-js/modules/es6.string.starts-with.js"),n("../node_modules/core-js/modules/es6.string.anchor.js"),n("../node_modules/core-js/modules/es6.string.big.js"),n("../node_modules/core-js/modules/es6.string.blink.js"),n("../node_modules/core-js/modules/es6.string.bold.js"),n("../node_modules/core-js/modules/es6.string.fixed.js"),n("../node_modules/core-js/modules/es6.string.fontcolor.js"),n("../node_modules/core-js/modules/es6.string.fontsize.js"),n("../node_modules/core-js/modules/es6.string.italics.js"),n("../node_modules/core-js/modules/es6.string.link.js"),n("../node_modules/core-js/modules/es6.string.small.js"),n("../node_modules/core-js/modules/es6.string.strike.js"),n("../node_modules/core-js/modules/es6.string.sub.js"),n("../node_modules/core-js/modules/es6.string.sup.js"),n("../node_modules/core-js/modules/es6.date.now.js"),n("../node_modules/core-js/modules/es6.date.to-json.js"),n("../node_modules/core-js/modules/es6.date.to-iso-string.js"),n("../node_modules/core-js/modules/es6.date.to-string.js"),n("../node_modules/core-js/modules/es6.date.to-primitive.js"),n("../node_modules/core-js/modules/es6.array.is-array.js"),n("../node_modules/core-js/modules/es6.array.from.js"),n("../node_modules/core-js/modules/es6.array.of.js"),n("../node_modules/core-js/modules/es6.array.join.js"),n("../node_modules/core-js/modules/es6.array.slice.js"),n("../node_modules/core-js/modules/es6.array.sort.js"),n("../node_modules/core-js/modules/es6.array.for-each.js"),n("../node_modules/core-js/modules/es6.array.map.js"),n("../node_modules/core-js/modules/es6.array.filter.js"),n("../node_modules/core-js/modules/es6.array.some.js"),n("../node_modules/core-js/modules/es6.array.every.js"),n("../node_modules/core-js/modules/es6.array.reduce.js"),n("../node_modules/core-js/modules/es6.array.reduce-right.js"),n("../node_modules/core-js/modules/es6.array.index-of.js"),n("../node_modules/core-js/modules/es6.array.last-index-of.js"),n("../node_modules/core-js/modules/es6.array.copy-within.js"),n("../node_modules/core-js/modules/es6.array.fill.js"),n("../node_modules/core-js/modules/es6.array.find.js"),n("../node_modules/core-js/modules/es6.array.find-index.js"),n("../node_modules/core-js/modules/es6.array.species.js"),n("../node_modules/core-js/modules/es6.array.iterator.js"),n("../node_modules/core-js/modules/es6.regexp.constructor.js"),n("../node_modules/core-js/modules/es6.regexp.exec.js"),n("../node_modules/core-js/modules/es6.regexp.to-string.js"),n("../node_modules/core-js/modules/es6.regexp.flags.js"),n("../node_modules/core-js/modules/es6.regexp.match.js"),n("../node_modules/core-js/modules/es6.regexp.replace.js"),n("../node_modules/core-js/modules/es6.regexp.search.js"),n("../node_modules/core-js/modules/es6.regexp.split.js"),n("../node_modules/core-js/modules/es6.promise.js"),n("../node_modules/core-js/modules/es6.map.js"),n("../node_modules/core-js/modules/es6.set.js"),n("../node_modules/core-js/modules/es6.weak-map.js"),n("../node_modules/core-js/modules/es6.weak-set.js"),n("../node_modules/core-js/modules/es6.typed.array-buffer.js"),n("../node_modules/core-js/modules/es6.typed.data-view.js"),n("../node_modules/core-js/modules/es6.typed.int8-array.js"),n("../node_modules/core-js/modules/es6.typed.uint8-array.js"),n("../node_modules/core-js/modules/es6.typed.uint8-clamped-array.js"),n("../node_modules/core-js/modules/es6.typed.int16-array.js"),n("../node_modules/core-js/modules/es6.typed.uint16-array.js"),n("../node_modules/core-js/modules/es6.typed.int32-array.js"),n("../node_modules/core-js/modules/es6.typed.uint32-array.js"),n("../node_modules/core-js/modules/es6.typed.float32-array.js"),n("../node_modules/core-js/modules/es6.typed.float64-array.js"),n("../node_modules/core-js/modules/es6.reflect.apply.js"),n("../node_modules/core-js/modules/es6.reflect.construct.js"),n("../node_modules/core-js/modules/es6.reflect.define-property.js"),n("../node_modules/core-js/modules/es6.reflect.delete-property.js"),n("../node_modules/core-js/modules/es6.reflect.enumerate.js"),n("../node_modules/core-js/modules/es6.reflect.get.js"),n("../node_modules/core-js/modules/es6.reflect.get-own-property-descriptor.js"),n("../node_modules/core-js/modules/es6.reflect.get-prototype-of.js"),n("../node_modules/core-js/modules/es6.reflect.has.js"),n("../node_modules/core-js/modules/es6.reflect.is-extensible.js"),n("../node_modules/core-js/modules/es6.reflect.own-keys.js"),n("../node_modules/core-js/modules/es6.reflect.prevent-extensions.js"),n("../node_modules/core-js/modules/es6.reflect.set.js"),n("../node_modules/core-js/modules/es6.reflect.set-prototype-of.js"),n("../node_modules/core-js/modules/es7.array.includes.js"),n("../node_modules/core-js/modules/es7.array.flat-map.js"),n("../node_modules/core-js/modules/es7.array.flatten.js"),n("../node_modules/core-js/modules/es7.string.at.js"),n("../node_modules/core-js/modules/es7.string.pad-start.js"),n("../node_modules/core-js/modules/es7.string.pad-end.js"),n("../node_modules/core-js/modules/es7.string.trim-left.js"),n("../node_modules/core-js/modules/es7.string.trim-right.js"),n("../node_modules/core-js/modules/es7.string.match-all.js"),n("../node_modules/core-js/modules/es7.symbol.async-iterator.js"),n("../node_modules/core-js/modules/es7.symbol.observable.js"),n("../node_modules/core-js/modules/es7.object.get-own-property-descriptors.js"),n("../node_modules/core-js/modules/es7.object.values.js"),n("../node_modules/core-js/modules/es7.object.entries.js"),n("../node_modules/core-js/modules/es7.object.define-getter.js"),n("../node_modules/core-js/modules/es7.object.define-setter.js"),n("../node_modules/core-js/modules/es7.object.lookup-getter.js"),n("../node_modules/core-js/modules/es7.object.lookup-setter.js"),n("../node_modules/core-js/modules/es7.map.to-json.js"),n("../node_modules/core-js/modules/es7.set.to-json.js"),n("../node_modules/core-js/modules/es7.map.of.js"),n("../node_modules/core-js/modules/es7.set.of.js"),n("../node_modules/core-js/modules/es7.weak-map.of.js"),n("../node_modules/core-js/modules/es7.weak-set.of.js"),n("../node_modules/core-js/modules/es7.map.from.js"),n("../node_modules/core-js/modules/es7.set.from.js"),n("../node_modules/core-js/modules/es7.weak-map.from.js"),n("../node_modules/core-js/modules/es7.weak-set.from.js"),n("../node_modules/core-js/modules/es7.global.js"),n("../node_modules/core-js/modules/es7.system.global.js"),n("../node_modules/core-js/modules/es7.error.is-error.js"),n("../node_modules/core-js/modules/es7.math.clamp.js"),n("../node_modules/core-js/modules/es7.math.deg-per-rad.js"),n("../node_modules/core-js/modules/es7.math.degrees.js"),n("../node_modules/core-js/modules/es7.math.fscale.js"),n("../node_modules/core-js/modules/es7.math.iaddh.js"),n("../node_modules/core-js/modules/es7.math.isubh.js"),n("../node_modules/core-js/modules/es7.math.imulh.js"),n("../node_modules/core-js/modules/es7.math.rad-per-deg.js"),n("../node_modules/core-js/modules/es7.math.radians.js"),n("../node_modules/core-js/modules/es7.math.scale.js"),n("../node_modules/core-js/modules/es7.math.umulh.js"),n("../node_modules/core-js/modules/es7.math.signbit.js"),n("../node_modules/core-js/modules/es7.promise.finally.js"),n("../node_modules/core-js/modules/es7.promise.try.js"),n("../node_modules/core-js/modules/es7.reflect.define-metadata.js"),n("../node_modules/core-js/modules/es7.reflect.delete-metadata.js"),n("../node_modules/core-js/modules/es7.reflect.get-metadata.js"),n("../node_modules/core-js/modules/es7.reflect.get-metadata-keys.js"),n("../node_modules/core-js/modules/es7.reflect.get-own-metadata.js"),n("../node_modules/core-js/modules/es7.reflect.get-own-metadata-keys.js"),n("../node_modules/core-js/modules/es7.reflect.has-metadata.js"),n("../node_modules/core-js/modules/es7.reflect.has-own-metadata.js"),n("../node_modules/core-js/modules/es7.reflect.metadata.js"),n("../node_modules/core-js/modules/es7.asap.js"),n("../node_modules/core-js/modules/es7.observable.js"),n("../node_modules/core-js/modules/web.timers.js"),n("../node_modules/core-js/modules/web.immediate.js"),n("../node_modules/core-js/modules/web.dom.iterable.js"),e.exports=n("../node_modules/core-js/modules/_core.js")},"../node_modules/gsap/TweenLite.js":function(e,t,n){"use strict";(function(e,i){n.d(t,"g",function(){return r}),n.d(t,"i",function(){return s}),n.d(t,"h",function(){return o}),n.d(t,"e",function(){return l}),n.d(t,"a",function(){return u}),n.d(t,"b",function(){return c}),n.d(t,"c",function(){return d}),n.d(t,"d",function(){return h}),n.d(t,"f",function(){return p});var r="undefined"!=typeof window?window:e.exports&&void 0!==i?i:{},o=function(e){var t={},n=e.document,i=e.GreenSockGlobals=e.GreenSockGlobals||e;if(i.TweenLite)return i.TweenLite;var r,o,s,a,l,u,c,d=function(e){var t,n=e.split("."),r=i;for(t=0;t<n.length;t++)r[n[t]]=r=r[n[t]]||{};return r},h=d("com.greensock"),p=function(e){var t,n=[],i=e.length;for(t=0;t!==i;n.push(e[t++]));return n},f=function(){},m=(u=Object.prototype.toString,c=u.call([]),function(e){return null!=e&&(e instanceof Array||"object"==typeof e&&!!e.push&&u.call(e)===c)}),_={},g=function(e,n,r,o){this.sc=_[e]?_[e].sc:[],_[e]=this,this.gsClass=null,this.func=r;var s=[];this.check=function(a){for(var l,u,c,h,p=n.length,f=p;--p>-1;)(l=_[n[p]]||new g(n[p],[])).gsClass?(s[p]=l.gsClass,f--):a&&l.sc.push(this);if(0===f&&r)for(c=(u=("com.greensock."+e).split(".")).pop(),h=d(u.join("."))[c]=this.gsClass=r.apply(r,s),o&&(i[c]=t[c]=h),p=0;p<this.sc.length;p++)this.sc[p].check()},this.check(!0)},v=e._gsDefine=function(e,t,n,i){return new g(e,t,n,i)},y=h._class=function(e,t,n){return t=t||function(){},v(e,[],function(){return t},n),t};v.globals=i;var x=[0,0,1,1],b=y("easing.Ease",function(e,t,n,i){this._func=e,this._type=n||0,this._power=i||0,this._params=t?x.concat(t):x},!0),w=b.map={},j=b.register=function(e,t,n,i){for(var r,o,s,a,l=t.split(","),u=l.length,c=(n||"easeIn,easeOut,easeInOut").split(",");--u>-1;)for(o=l[u],r=i?y("easing."+o,null,!0):h.easing[o]||{},s=c.length;--s>-1;)a=c[s],w[o+"."+a]=w[a+o]=r[a]=e.getRatio?e:e[a]||new e};for((s=b.prototype)._calcEnd=!1,s.getRatio=function(e){if(this._func)return this._params[0]=e,this._func.apply(null,this._params);var t=this._type,n=this._power,i=1===t?1-e:2===t?e:e<.5?2*e:2*(1-e);return 1===n?i*=i:2===n?i*=i*i:3===n?i*=i*i*i:4===n&&(i*=i*i*i*i),1===t?1-i:2===t?i:e<.5?i/2:1-i/2},o=(r=["Linear","Quad","Cubic","Quart","Quint,Strong"]).length;--o>-1;)s=r[o]+",Power"+o,j(new b(null,null,1,o),s,"easeOut",!0),j(new b(null,null,2,o),s,"easeIn"+(0===o?",easeNone":"")),j(new b(null,null,3,o),s,"easeInOut");w.linear=h.easing.Linear.easeIn,w.swing=h.easing.Quad.easeInOut;var S=y("events.EventDispatcher",function(e){this._listeners={},this._eventTarget=e||this});(s=S.prototype).addEventListener=function(e,t,n,i,r){r=r||0;var o,s,u=this._listeners[e],c=0;for(this!==a||l||a.wake(),null==u&&(this._listeners[e]=u=[]),s=u.length;--s>-1;)(o=u[s]).c===t&&o.s===n?u.splice(s,1):0===c&&o.pr<r&&(c=s+1);u.splice(c,0,{c:t,s:n,up:i,pr:r})},s.removeEventListener=function(e,t){var n,i=this._listeners[e];if(i)for(n=i.length;--n>-1;)if(i[n].c===t)return void i.splice(n,1)},s.dispatchEvent=function(e){var t,n,i,r=this._listeners[e];if(r)for((t=r.length)>1&&(r=r.slice(0)),n=this._eventTarget;--t>-1;)(i=r[t])&&(i.up?i.c.call(i.s||n,{type:e,target:n}):i.c.call(i.s||n))};var A=e.requestAnimationFrame,M=e.cancelAnimationFrame,T=Date.now||function(){return(new Date).getTime()},P=T();for(o=(r=["ms","moz","webkit","o"]).length;--o>-1&&!A;)A=e[r[o]+"RequestAnimationFrame"],M=e[r[o]+"CancelAnimationFrame"]||e[r[o]+"CancelRequestAnimationFrame"];y("Ticker",function(e,t){var i,r,o,s,u,c=this,d=T(),h=!(!1===t||!A)&&"auto",p=500,m=33,_=function(e){var t,n,a=T()-P;a>p&&(d+=a-m),P+=a,c.time=(P-d)/1e3,t=c.time-u,(!i||t>0||!0===e)&&(c.frame++,u+=t+(t>=s?.004:s-t),n=!0),!0!==e&&(o=r(_)),n&&c.dispatchEvent("tick")};S.call(c),c.time=c.frame=0,c.tick=function(){_(!0)},c.lagSmoothing=function(e,t){if(!arguments.length)return p<1e8;p=e||1e8,m=Math.min(t,p,0)},c.sleep=function(){null!=o&&(h&&M?M(o):clearTimeout(o),r=f,o=null,c===a&&(l=!1))},c.wake=function(e){null!==o?c.sleep():e?d+=-P+(P=T()):c.frame>10&&(P=T()-p+5),r=0===i?f:h&&A?A:function(e){return setTimeout(e,1e3*(u-c.time)+1|0)},c===a&&(l=!0),_(2)},c.fps=function(e){if(!arguments.length)return i;s=1/((i=e)||60),u=this.time+s,c.wake()},c.useRAF=function(e){if(!arguments.length)return h;c.sleep(),h=e,c.fps(i)},c.fps(e),setTimeout(function(){"auto"===h&&c.frame<5&&"hidden"!==(n||{}).visibilityState&&c.useRAF(!1)},1500)}),(s=h.Ticker.prototype=new h.events.EventDispatcher).constructor=h.Ticker;var L=y("core.Animation",function(e,t){if(this.vars=t=t||{},this._duration=this._totalDuration=e||0,this._delay=Number(t.delay)||0,this._timeScale=1,this._active=!!t.immediateRender,this.data=t.data,this._reversed=!!t.reversed,Q){l||a.wake();var n=this.vars.useFrames?q:Q;n.add(this,n._time),this.vars.paused&&this.paused(!0)}});a=L.ticker=new h.Ticker,(s=L.prototype)._dirty=s._gc=s._initted=s._paused=!1,s._totalTime=s._time=0,s._rawPrevTime=-1,s._next=s._last=s._onUpdate=s._timeline=s.timeline=null,s._paused=!1;var E=function(){l&&T()-P>2e3&&("hidden"!==(n||{}).visibilityState||!a.lagSmoothing())&&a.wake();var e=setTimeout(E,2e3);e.unref&&e.unref()};E(),s.play=function(e,t){return null!=e&&this.seek(e,t),this.reversed(!1).paused(!1)},s.pause=function(e,t){return null!=e&&this.seek(e,t),this.paused(!0)},s.resume=function(e,t){return null!=e&&this.seek(e,t),this.paused(!1)},s.seek=function(e,t){return this.totalTime(Number(e),!1!==t)},s.restart=function(e,t){return this.reversed(!1).paused(!1).totalTime(e?-this._delay:0,!1!==t,!0)},s.reverse=function(e,t){return null!=e&&this.seek(e||this.totalDuration(),t),this.reversed(!0).paused(!1)},s.render=function(e,t,n){},s.invalidate=function(){return this._time=this._totalTime=0,this._initted=this._gc=!1,this._rawPrevTime=-1,!this._gc&&this.timeline||this._enabled(!0),this},s.isActive=function(){var e,t=this._timeline,n=this._startTime;return!t||!this._gc&&!this._paused&&t.isActive()&&(e=t.rawTime(!0))>=n&&e<n+this.totalDuration()/this._timeScale-1e-8},s._enabled=function(e,t){return l||a.wake(),this._gc=!e,this._active=this.isActive(),!0!==t&&(e&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!e&&this.timeline&&this._timeline._remove(this,!0)),!1},s._kill=function(e,t){return this._enabled(!1,!1)},s.kill=function(e,t){return this._kill(e,t),this},s._uncache=function(e){for(var t=e?this:this.timeline;t;)t._dirty=!0,t=t.timeline;return this},s._swapSelfInParams=function(e){for(var t=e.length,n=e.concat();--t>-1;)"{self}"===e[t]&&(n[t]=this);return n},s._callback=function(e){var t=this.vars,n=t[e],i=t[e+"Params"],r=t[e+"Scope"]||t.callbackScope||this;switch(i?i.length:0){case 0:n.call(r);break;case 1:n.call(r,i[0]);break;case 2:n.call(r,i[0],i[1]);break;default:n.apply(r,i)}},s.eventCallback=function(e,t,n,i){if("on"===(e||"").substr(0,2)){var r=this.vars;if(1===arguments.length)return r[e];null==t?delete r[e]:(r[e]=t,r[e+"Params"]=m(n)&&-1!==n.join("").indexOf("{self}")?this._swapSelfInParams(n):n,r[e+"Scope"]=i),"onUpdate"===e&&(this._onUpdate=t)}return this},s.delay=function(e){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+e-this._delay),this._delay=e,this):this._delay},s.duration=function(e){return arguments.length?(this._duration=this._totalDuration=e,this._uncache(!0),this._timeline.smoothChildTiming&&this._time>0&&this._time<this._duration&&0!==e&&this.totalTime(this._totalTime*(e/this._duration),!0),this):(this._dirty=!1,this._duration)},s.totalDuration=function(e){return this._dirty=!1,arguments.length?this.duration(e):this._totalDuration},s.time=function(e,t){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(e>this._duration?this._duration:e,t)):this._time},s.totalTime=function(e,t,n){if(l||a.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(e<0&&!n&&(e+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var i=this._totalDuration,r=this._timeline;if(e>i&&!n&&(e=i),this._startTime=(this._paused?this._pauseTime:r._time)-(this._reversed?i-e:e)/this._timeScale,r._dirty||this._uncache(!1),r._timeline)for(;r._timeline;)r._timeline._time!==(r._startTime+r._totalTime)/r._timeScale&&r.totalTime(r._totalTime,!0),r=r._timeline}this._gc&&this._enabled(!0,!1),this._totalTime===e&&0!==this._duration||(F.length&&Z(),this.render(e,t,!1),F.length&&Z())}return this},s.progress=s.totalProgress=function(e,t){var n=this.duration();return arguments.length?this.totalTime(n*e,t):n?this._time/n:this.ratio},s.startTime=function(e){return arguments.length?(e!==this._startTime&&(this._startTime=e,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,e-this._delay)),this):this._startTime},s.endTime=function(e){return this._startTime+(0!=e?this.totalDuration():this.duration())/this._timeScale},s.timeScale=function(e){if(!arguments.length)return this._timeScale;var t,n;for(e=e||1e-8,this._timeline&&this._timeline.smoothChildTiming&&(n=(t=this._pauseTime)||0===t?t:this._timeline.totalTime(),this._startTime=n-(n-this._startTime)*this._timeScale/e),this._timeScale=e,n=this.timeline;n&&n.timeline;)n._dirty=!0,n.totalDuration(),n=n.timeline;return this},s.reversed=function(e){return arguments.length?(e!=this._reversed&&(this._reversed=e,this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,!0)),this):this._reversed},s.paused=function(e){if(!arguments.length)return this._paused;var t,n,i=this._timeline;return e!=this._paused&&i&&(l||e||a.wake(),n=(t=i.rawTime())-this._pauseTime,!e&&i.smoothChildTiming&&(this._startTime+=n,this._uncache(!1)),this._pauseTime=e?t:null,this._paused=e,this._active=this.isActive(),!e&&0!==n&&this._initted&&this.duration()&&(t=i.smoothChildTiming?this._totalTime:(t-this._startTime)/this._timeScale,this.render(t,t===this._totalTime,!0))),this._gc&&!e&&this._enabled(!0,!1),this};var O=y("core.SimpleTimeline",function(e){L.call(this,0,e),this.autoRemoveChildren=this.smoothChildTiming=!0});(s=O.prototype=new L).constructor=O,s.kill()._gc=!1,s._first=s._last=s._recent=null,s._sortChildren=!1,s.add=s.insert=function(e,t,n,i){var r,o;if(e._startTime=Number(t||0)+e._delay,e._paused&&this!==e._timeline&&(e._pauseTime=this.rawTime()-(e._timeline.rawTime()-e._pauseTime)),e.timeline&&e.timeline._remove(e,!0),e.timeline=e._timeline=this,e._gc&&e._enabled(!0,!0),r=this._last,this._sortChildren)for(o=e._startTime;r&&r._startTime>o;)r=r._prev;return r?(e._next=r._next,r._next=e):(e._next=this._first,this._first=e),e._next?e._next._prev=e:this._last=e,e._prev=r,this._recent=e,this._timeline&&this._uncache(!0),this},s._remove=function(e,t){return e.timeline===this&&(t||e._enabled(!1,!0),e._prev?e._prev._next=e._next:this._first===e&&(this._first=e._next),e._next?e._next._prev=e._prev:this._last===e&&(this._last=e._prev),e._next=e._prev=e.timeline=null,e===this._recent&&(this._recent=this._last),this._timeline&&this._uncache(!0)),this},s.render=function(e,t,n){var i,r=this._first;for(this._totalTime=this._time=this._rawPrevTime=e;r;)i=r._next,(r._active||e>=r._startTime&&!r._paused&&!r._gc)&&(r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(e-r._startTime)*r._timeScale,t,n):r.render((e-r._startTime)*r._timeScale,t,n)),r=i},s.rawTime=function(){return l||a.wake(),this._totalTime};var I=y("TweenLite",function(t,n,i){if(L.call(this,n,i),this.render=I.prototype.render,null==t)throw"Cannot tween a null target.";this.target=t="string"!=typeof t?t:I.selector(t)||t;var r,o,s,a=t.jquery||t.length&&t!==e&&t[0]&&(t[0]===e||t[0].nodeType&&t[0].style&&!t.nodeType),l=this.vars.overwrite;if(this._overwrite=l=null==l?Y[I.defaultOverwrite]:"number"==typeof l?l>>0:Y[l],(a||t instanceof Array||t.push&&m(t))&&"number"!=typeof t[0])for(this._targets=s=p(t),this._propLookup=[],this._siblings=[],r=0;r<s.length;r++)(o=s[r])?"string"!=typeof o?o.length&&o!==e&&o[0]&&(o[0]===e||o[0].nodeType&&o[0].style&&!o.nodeType)?(s.splice(r--,1),this._targets=s=s.concat(p(o))):(this._siblings[r]=K(o,this,!1),1===l&&this._siblings[r].length>1&&ee(o,this,null,1,this._siblings[r])):"string"==typeof(o=s[r--]=I.selector(o))&&s.splice(r+1,1):s.splice(r--,1);else this._propLookup={},this._siblings=K(t,this,!1),1===l&&this._siblings.length>1&&ee(t,this,null,1,this._siblings);(this.vars.immediateRender||0===n&&0===this._delay&&!1!==this.vars.immediateRender)&&(this._time=-1e-8,this.render(Math.min(0,-this._delay)))},!0),C=function(t){return t&&t.length&&t!==e&&t[0]&&(t[0]===e||t[0].nodeType&&t[0].style&&!t.nodeType)};(s=I.prototype=new L).constructor=I,s.kill()._gc=!1,s.ratio=0,s._firstPT=s._targets=s._overwrittenProps=s._startAt=null,s._notifyPluginsOfEnabled=s._lazy=!1,I.version="2.1.3",I.defaultEase=s._ease=new b(null,null,1,1),I.defaultOverwrite="auto",I.ticker=a,I.autoSleep=120,I.lagSmoothing=function(e,t){a.lagSmoothing(e,t)},I.selector=e.$||e.jQuery||function(t){var i=e.$||e.jQuery;return i?(I.selector=i,i(t)):(n||(n=e.document),n?n.querySelectorAll?n.querySelectorAll(t):n.getElementById("#"===t.charAt(0)?t.substr(1):t):t)};var F=[],N={},k=/(?:(-|-=|\+=)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,D=/[\+-]=-?[\.\d]/,R=function(e){for(var t,n=this._firstPT;n;)t=n.blob?1===e&&null!=this.end?this.end:e?this.join(""):this.start:n.c*e+n.s,n.m?t=n.m.call(this._tween,t,this._target||n.t,this._tween):t<1e-6&&t>-1e-6&&!n.blob&&(t=0),n.f?n.fp?n.t[n.p](n.fp,t):n.t[n.p](t):n.t[n.p]=t,n=n._next},z=function(e){return(1e3*e|0)/1e3+""},U=function(e,t,n,i){var r,o,s,a,l,u,c,d=[],h=0,p="",f=0;for(d.start=e,d.end=t,e=d[0]=e+"",t=d[1]=t+"",n&&(n(d),e=d[0],t=d[1]),d.length=0,r=e.match(k)||[],o=t.match(k)||[],i&&(i._next=null,i.blob=1,d._firstPT=d._applyPT=i),l=o.length,a=0;a<l;a++)c=o[a],p+=(u=t.substr(h,t.indexOf(c,h)-h))||!a?u:",",h+=u.length,f?f=(f+1)%5:"rgba("===u.substr(-5)&&(f=1),c===r[a]||r.length<=a?p+=c:(p&&(d.push(p),p=""),s=parseFloat(r[a]),d.push(s),d._firstPT={_next:d._firstPT,t:d,p:d.length-1,s:s,c:("="===c.charAt(1)?parseInt(c.charAt(0)+"1",10)*parseFloat(c.substr(2)):parseFloat(c)-s)||0,f:0,m:f&&f<4?Math.round:z}),h+=c.length;return(p+=t.substr(h))&&d.push(p),d.setRatio=R,D.test(t)&&(d.end=null),d},B=function(e,t,n,i,r,o,s,a,l){"function"==typeof i&&(i=i(l||0,e));var u=typeof e[t],c="function"!==u?"":t.indexOf("set")||"function"!=typeof e["get"+t.substr(3)]?t:"get"+t.substr(3),d="get"!==n?n:c?s?e[c](s):e[c]():e[t],h="string"==typeof i&&"="===i.charAt(1),p={t:e,p:t,s:d,f:"function"===u,pg:0,n:r||t,m:o?"function"==typeof o?o:Math.round:0,pr:0,c:h?parseInt(i.charAt(0)+"1",10)*parseFloat(i.substr(2)):parseFloat(i)-d||0};if(("number"!=typeof d||"number"!=typeof i&&!h)&&(s||isNaN(d)||!h&&isNaN(i)||"boolean"==typeof d||"boolean"==typeof i?(p.fp=s,p={t:U(d,h?parseFloat(p.s)+p.c+(p.s+"").replace(/[0-9\-\.]/g,""):i,a||I.defaultStringFilter,p),p:"setRatio",s:0,c:1,f:2,pg:0,n:r||t,pr:0,m:0}):(p.s=parseFloat(d),h||(p.c=parseFloat(i)-p.s||0))),p.c)return(p._next=this._firstPT)&&(p._next._prev=p),this._firstPT=p,p},G=I._internals={isArray:m,isSelector:C,lazyTweens:F,blobDif:U},V=I._plugins={},H=G.tweenLookup={},X=0,W=G.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1,lazy:1,onOverwrite:1,callbackScope:1,stringFilter:1,id:1,yoyoEase:1,stagger:1},Y={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,true:1,false:0},q=L._rootFramesTimeline=new O,Q=L._rootTimeline=new O,J=30,Z=G.lazyRender=function(){var e,t,n=F.length;for(N={},e=0;e<n;e++)(t=F[e])&&!1!==t._lazy&&(t.render(t._lazy[0],t._lazy[1],!0),t._lazy=!1);F.length=0};Q._startTime=a.time,q._startTime=a.frame,Q._active=q._active=!0,setTimeout(Z,1),L._updateRoot=I.render=function(){var e,t,n;if(F.length&&Z(),Q.render((a.time-Q._startTime)*Q._timeScale,!1,!1),q.render((a.frame-q._startTime)*q._timeScale,!1,!1),F.length&&Z(),a.frame>=J){for(n in J=a.frame+(parseInt(I.autoSleep,10)||120),H){for(e=(t=H[n].tweens).length;--e>-1;)t[e]._gc&&t.splice(e,1);0===t.length&&delete H[n]}if((!(n=Q._first)||n._paused)&&I.autoSleep&&!q._first&&1===a._listeners.tick.length){for(;n&&n._paused;)n=n._next;n||a.sleep()}}},a.addEventListener("tick",L._updateRoot);var K=function(e,t,n){var i,r,o=e._gsTweenID;if(H[o||(e._gsTweenID=o="t"+X++)]||(H[o]={target:e,tweens:[]}),t&&((i=H[o].tweens)[r=i.length]=t,n))for(;--r>-1;)i[r]===t&&i.splice(r,1);return H[o].tweens},$=function(e,t,n,i){var r,o,s=e.vars.onOverwrite;return s&&(r=s(e,t,n,i)),(s=I.onOverwrite)&&(o=s(e,t,n,i)),!1!==r&&!1!==o},ee=function(e,t,n,i,r){var o,s,a,l;if(1===i||i>=4){for(l=r.length,o=0;o<l;o++)if((a=r[o])!==t)a._gc||a._kill(null,e,t)&&(s=!0);else if(5===i)break;return s}var u,c=t._startTime+1e-8,d=[],h=0,p=0===t._duration;for(o=r.length;--o>-1;)(a=r[o])===t||a._gc||a._paused||(a._timeline!==t._timeline?(u=u||te(t,0,p),0===te(a,u,p)&&(d[h++]=a)):a._startTime<=c&&a._startTime+a.totalDuration()/a._timeScale>c&&((p||!a._initted)&&c-a._startTime<=2e-8||(d[h++]=a)));for(o=h;--o>-1;)if(l=(a=d[o])._firstPT,2===i&&a._kill(n,e,t)&&(s=!0),2!==i||!a._firstPT&&a._initted&&l){if(2!==i&&!$(a,t))continue;a._enabled(!1,!1)&&(s=!0)}return s},te=function(e,t,n){for(var i=e._timeline,r=i._timeScale,o=e._startTime;i._timeline;){if(o+=i._startTime,r*=i._timeScale,i._paused)return-100;i=i._timeline}return(o/=r)>t?o-t:n&&o===t||!e._initted&&o-t<2e-8?1e-8:(o+=e.totalDuration()/e._timeScale/r)>t+1e-8?0:o-t-1e-8};s._init=function(){var e,t,n,i,r,o,s=this.vars,a=this._overwrittenProps,l=this._duration,u=!!s.immediateRender,c=s.ease,d=this._startAt;if(s.startAt){for(i in d&&(d.render(-1,!0),d.kill()),r={},s.startAt)r[i]=s.startAt[i];if(r.data="isStart",r.overwrite=!1,r.immediateRender=!0,r.lazy=u&&!1!==s.lazy,r.startAt=r.delay=null,r.onUpdate=s.onUpdate,r.onUpdateParams=s.onUpdateParams,r.onUpdateScope=s.onUpdateScope||s.callbackScope||this,this._startAt=I.to(this.target||{},0,r),u)if(this._time>0)this._startAt=null;else if(0!==l)return}else if(s.runBackwards&&0!==l)if(d)d.render(-1,!0),d.kill(),this._startAt=null;else{for(i in 0!==this._time&&(u=!1),n={},s)W[i]&&"autoCSS"!==i||(n[i]=s[i]);if(n.overwrite=0,n.data="isFromStart",n.lazy=u&&!1!==s.lazy,n.immediateRender=u,this._startAt=I.to(this.target,0,n),u){if(0===this._time)return}else this._startAt._init(),this._startAt._enabled(!1),this.vars.immediateRender&&(this._startAt=null)}if(this._ease=c=c?c instanceof b?c:"function"==typeof c?new b(c,s.easeParams):w[c]||I.defaultEase:I.defaultEase,s.easeParams instanceof Array&&c.config&&(this._ease=c.config.apply(c,s.easeParams)),this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null,this._targets)for(o=this._targets.length,e=0;e<o;e++)this._initProps(this._targets[e],this._propLookup[e]={},this._siblings[e],a?a[e]:null,e)&&(t=!0);else t=this._initProps(this.target,this._propLookup,this._siblings,a,0);if(t&&I._onPluginEvent("_onInitAllProps",this),a&&(this._firstPT||"function"!=typeof this.target&&this._enabled(!1,!1)),s.runBackwards)for(n=this._firstPT;n;)n.s+=n.c,n.c=-n.c,n=n._next;this._onUpdate=s.onUpdate,this._initted=!0},s._initProps=function(t,n,i,r,o){var s,a,l,u,c,d;if(null==t)return!1;for(s in N[t._gsTweenID]&&Z(),this.vars.css||t.style&&t!==e&&t.nodeType&&V.css&&!1!==this.vars.autoCSS&&function(e,t){var n,i={};for(n in e)W[n]||n in t&&"transform"!==n&&"x"!==n&&"y"!==n&&"width"!==n&&"height"!==n&&"className"!==n&&"border"!==n||!(!V[n]||V[n]&&V[n]._autoCSS)||(i[n]=e[n],delete e[n]);e.css=i}(this.vars,t),this.vars)if(d=this.vars[s],W[s])d&&(d instanceof Array||d.push&&m(d))&&-1!==d.join("").indexOf("{self}")&&(this.vars[s]=d=this._swapSelfInParams(d,this));else if(V[s]&&(u=new V[s])._onInitTween(t,this.vars[s],this,o)){for(this._firstPT=c={_next:this._firstPT,t:u,p:"setRatio",s:0,c:1,f:1,n:s,pg:1,pr:u._priority,m:0},a=u._overwriteProps.length;--a>-1;)n[u._overwriteProps[a]]=this._firstPT;(u._priority||u._onInitAllProps)&&(l=!0),(u._onDisable||u._onEnable)&&(this._notifyPluginsOfEnabled=!0),c._next&&(c._next._prev=c)}else n[s]=B.call(this,t,s,"get",d,s,0,null,this.vars.stringFilter,o);return r&&this._kill(r,t)?this._initProps(t,n,i,r,o):this._overwrite>1&&this._firstPT&&i.length>1&&ee(t,this,n,this._overwrite,i)?(this._kill(n,t),this._initProps(t,n,i,r,o)):(this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration)&&(N[t._gsTweenID]=!0),l)},s.render=function(e,t,n){var i,r,o,s,a=this._time,l=this._duration,u=this._rawPrevTime;if(e>=l-1e-8&&e>=0)this._totalTime=this._time=l,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1,this._reversed||(i=!0,r="onComplete",n=n||this._timeline.autoRemoveChildren),0===l&&(this._initted||!this.vars.lazy||n)&&(this._startTime===this._timeline._duration&&(e=0),(u<0||e<=0&&e>=-1e-8||1e-8===u&&"isPause"!==this.data)&&u!==e&&(n=!0,u>1e-8&&(r="onReverseComplete")),this._rawPrevTime=s=!t||e||u===e?e:1e-8);else if(e<1e-8)this._totalTime=this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==a||0===l&&u>0)&&(r="onReverseComplete",i=this._reversed),e>-1e-8?e=0:e<0&&(this._active=!1,0===l&&(this._initted||!this.vars.lazy||n)&&(u>=0&&(1e-8!==u||"isPause"!==this.data)&&(n=!0),this._rawPrevTime=s=!t||e||u===e?e:1e-8)),(!this._initted||this._startAt&&this._startAt.progress())&&(n=!0);else if(this._totalTime=this._time=e,this._easeType){var c=e/l,d=this._easeType,h=this._easePower;(1===d||3===d&&c>=.5)&&(c=1-c),3===d&&(c*=2),1===h?c*=c:2===h?c*=c*c:3===h?c*=c*c*c:4===h&&(c*=c*c*c*c),this.ratio=1===d?1-c:2===d?c:e/l<.5?c/2:1-c/2}else this.ratio=this._ease.getRatio(e/l);if(this._time!==a||n){if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!n&&this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration))return this._time=this._totalTime=a,this._rawPrevTime=u,F.push(this),void(this._lazy=[e,t]);this._time&&!i?this.ratio=this._ease.getRatio(this._time/l):i&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(!1!==this._lazy&&(this._lazy=!1),this._active||!this._paused&&this._time!==a&&e>=0&&(this._active=!0),0===a&&(this._startAt&&(e>=0?this._startAt.render(e,!0,n):r||(r="_dummyGS")),this.vars.onStart&&(0===this._time&&0!==l||t||this._callback("onStart"))),o=this._firstPT;o;)o.f?o.t[o.p](o.c*this.ratio+o.s):o.t[o.p]=o.c*this.ratio+o.s,o=o._next;this._onUpdate&&(e<0&&this._startAt&&-1e-4!==e&&this._startAt.render(e,!0,n),t||(this._time!==a||i||n)&&this._callback("onUpdate")),r&&(this._gc&&!n||(e<0&&this._startAt&&!this._onUpdate&&-1e-4!==e&&this._startAt.render(e,!0,n),i&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!t&&this.vars[r]&&this._callback(r),0===l&&1e-8===this._rawPrevTime&&1e-8!==s&&(this._rawPrevTime=0)))}},s._kill=function(e,t,n){if("all"===e&&(e=null),null==e&&(null==t||t===this.target))return this._lazy=!1,this._enabled(!1,!1);t="string"!=typeof t?t||this._targets||this.target:I.selector(t)||t;var i,r,o,s,a,l,u,c,d,h=n&&this._time&&n._startTime===this._startTime&&this._timeline===n._timeline,p=this._firstPT;if((m(t)||C(t))&&"number"!=typeof t[0])for(i=t.length;--i>-1;)this._kill(e,t[i],n)&&(l=!0);else{if(this._targets){for(i=this._targets.length;--i>-1;)if(t===this._targets[i]){a=this._propLookup[i]||{},this._overwrittenProps=this._overwrittenProps||[],r=this._overwrittenProps[i]=e?this._overwrittenProps[i]||{}:"all";break}}else{if(t!==this.target)return!1;a=this._propLookup,r=this._overwrittenProps=e?this._overwrittenProps||{}:"all"}if(a){if(u=e||a,c=e!==r&&"all"!==r&&e!==a&&("object"!=typeof e||!e._tempKill),n&&(I.onOverwrite||this.vars.onOverwrite)){for(o in u)a[o]&&(d||(d=[]),d.push(o));if((d||!e)&&!$(this,n,t,d))return!1}for(o in u)(s=a[o])&&(h&&(s.f?s.t[s.p](s.s):s.t[s.p]=s.s,l=!0),s.pg&&s.t._kill(u)&&(l=!0),s.pg&&0!==s.t._overwriteProps.length||(s._prev?s._prev._next=s._next:s===this._firstPT&&(this._firstPT=s._next),s._next&&(s._next._prev=s._prev),s._next=s._prev=null),delete a[o]),c&&(r[o]=1);!this._firstPT&&this._initted&&p&&this._enabled(!1,!1)}}return l},s.invalidate=function(){this._notifyPluginsOfEnabled&&I._onPluginEvent("_onDisable",this);var e=this._time;return this._firstPT=this._overwrittenProps=this._startAt=this._onUpdate=null,this._notifyPluginsOfEnabled=this._active=this._lazy=!1,this._propLookup=this._targets?{}:[],L.prototype.invalidate.call(this),this.vars.immediateRender&&(this._time=-1e-8,this.render(e,!1,!1!==this.vars.lazy)),this},s._enabled=function(e,t){if(l||a.wake(),e&&this._gc){var n,i=this._targets;if(i)for(n=i.length;--n>-1;)this._siblings[n]=K(i[n],this,!0);else this._siblings=K(this.target,this,!0)}return L.prototype._enabled.call(this,e,t),!(!this._notifyPluginsOfEnabled||!this._firstPT)&&I._onPluginEvent(e?"_onEnable":"_onDisable",this)},I.to=function(e,t,n){return new I(e,t,n)},I.from=function(e,t,n){return n.runBackwards=!0,n.immediateRender=0!=n.immediateRender,new I(e,t,n)},I.fromTo=function(e,t,n,i){return i.startAt=n,i.immediateRender=0!=i.immediateRender&&0!=n.immediateRender,new I(e,t,i)},I.delayedCall=function(e,t,n,i,r){return new I(t,0,{delay:e,onComplete:t,onCompleteParams:n,callbackScope:i,onReverseComplete:t,onReverseCompleteParams:n,immediateRender:!1,lazy:!1,useFrames:r,overwrite:0})},I.set=function(e,t){return new I(e,0,t)},I.getTweensOf=function(e,t){if(null==e)return[];var n,i,r,o;if(e="string"!=typeof e?e:I.selector(e)||e,(m(e)||C(e))&&"number"!=typeof e[0]){for(n=e.length,i=[];--n>-1;)i=i.concat(I.getTweensOf(e[n],t));for(n=i.length;--n>-1;)for(o=i[n],r=n;--r>-1;)o===i[r]&&i.splice(n,1)}else if(e._gsTweenID)for(n=(i=K(e).concat()).length;--n>-1;)(i[n]._gc||t&&!i[n].isActive())&&i.splice(n,1);return i||[]},I.killTweensOf=I.killDelayedCallsTo=function(e,t,n){"object"==typeof t&&(n=t,t=!1);for(var i=I.getTweensOf(e,t),r=i.length;--r>-1;)i[r]._kill(n,e)};var ne=y("plugins.TweenPlugin",function(e,t){this._overwriteProps=(e||"").split(","),this._propName=this._overwriteProps[0],this._priority=t||0,this._super=ne.prototype},!0);if(s=ne.prototype,ne.version="1.19.0",ne.API=2,s._firstPT=null,s._addTween=B,s.setRatio=R,s._kill=function(e){var t,n=this._overwriteProps,i=this._firstPT;if(null!=e[this._propName])this._overwriteProps=[];else for(t=n.length;--t>-1;)null!=e[n[t]]&&n.splice(t,1);for(;i;)null!=e[i.n]&&(i._next&&(i._next._prev=i._prev),i._prev?(i._prev._next=i._next,i._prev=null):this._firstPT===i&&(this._firstPT=i._next)),i=i._next;return!1},s._mod=s._roundProps=function(e){for(var t,n=this._firstPT;n;)(t=e[this._propName]||null!=n.n&&e[n.n.split(this._propName+"_").join("")])&&"function"==typeof t&&(2===n.f?n.t._applyPT.m=t:n.m=t),n=n._next},I._onPluginEvent=function(e,t){var n,i,r,o,s,a=t._firstPT;if("_onInitAllProps"===e){for(;a;){for(s=a._next,i=r;i&&i.pr>a.pr;)i=i._next;(a._prev=i?i._prev:o)?a._prev._next=a:r=a,(a._next=i)?i._prev=a:o=a,a=s}a=t._firstPT=r}for(;a;)a.pg&&"function"==typeof a.t[e]&&a.t[e]()&&(n=!0),a=a._next;return n},ne.activate=function(e){for(var t=e.length;--t>-1;)e[t].API===ne.API&&(V[(new e[t])._propName]=e[t]);return!0},v.plugin=function(e){if(!(e&&e.propName&&e.init&&e.API))throw"illegal plugin definition.";var t,n=e.propName,i=e.priority||0,r=e.overwriteProps,o={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_mod",mod:"_mod",initAll:"_onInitAllProps"},s=y("plugins."+n.charAt(0).toUpperCase()+n.substr(1)+"Plugin",function(){ne.call(this,n,i),this._overwriteProps=r||[]},!0===e.global),a=s.prototype=new ne(n);for(t in a.constructor=s,s.API=e.API,o)"function"==typeof e[t]&&(a[o[t]]=e[t]);return s.version=e.version,ne.activate([s]),s},r=e._gsQueue){for(o=0;o<r.length;o++)r[o]();for(s in _)_[s].func||e.console.log("GSAP encountered missing dependency: "+s)}return l=!1,I}(r),s=r.GreenSockGlobals,a=s.com.greensock,l=a.core.SimpleTimeline,u=a.core.Animation,c=s.Ease,d=(s.Linear,s.Power1,s.Power2),h=s.Power3,p=(s.Power4,s.TweenPlugin);a.events.EventDispatcher}).call(this,n("../node_modules/webpack/buildin/harmony-module.js")(e),n("../node_modules/webpack/buildin/global.js"))},"../node_modules/howler/dist/howler.js":function(e,t,n){(function(n){var i;!function(){"use strict";var r=function(){this.init()};r.prototype={init:function(){var e=this||o;return e._counter=1e3,e._html5AudioPool=[],e.html5PoolSize=10,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.autoUnlock=!0,e._setup(),e},volume:function(e){var t=this||o;if(e=parseFloat(e),t.ctx||p(),void 0!==e&&e>=0&&e<=1){if(t._volume=e,t._muted)return t;t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e,o.ctx.currentTime);for(var n=0;n<t._howls.length;n++)if(!t._howls[n]._webAudio)for(var i=t._howls[n]._getSoundIds(),r=0;r<i.length;r++){var s=t._howls[n]._soundById(i[r]);s&&s._node&&(s._node.volume=s._volume*e)}return t}return t._volume},mute:function(e){var t=this||o;t.ctx||p(),t._muted=e,t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e?0:t._volume,o.ctx.currentTime);for(var n=0;n<t._howls.length;n++)if(!t._howls[n]._webAudio)for(var i=t._howls[n]._getSoundIds(),r=0;r<i.length;r++){var s=t._howls[n]._soundById(i[r]);s&&s._node&&(s._node.muted=!!e||s._muted)}return t},unload:function(){for(var e=this||o,t=e._howls.length-1;t>=0;t--)e._howls[t].unload();return e.usingWebAudio&&e.ctx&&void 0!==e.ctx.close&&(e.ctx.close(),e.ctx=null,p()),e},codecs:function(e){return(this||o)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||o;if(e.state=e.ctx&&e.ctx.state||"suspended",e._autoSuspend(),!e.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(new Audio).oncanplaythrough&&(e._canPlayEvent="canplay")}catch(t){e.noAudio=!0}else e.noAudio=!0;try{(new Audio).muted&&(e.noAudio=!0)}catch(e){}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||o,t=null;try{t="undefined"!=typeof Audio?new Audio:null}catch(t){return e}if(!t||"function"!=typeof t.canPlayType)return e;var n=t.canPlayType("audio/mpeg;").replace(/^no$/,""),i=e._navigator&&e._navigator.userAgent.match(/OPR\/([0-6].)/g),r=i&&parseInt(i[0].split("/")[1],10)<33;return e._codecs={mp3:!(r||!n&&!t.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!n,opus:!!t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!t.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!t.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!t.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/m4a;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(t.canPlayType("audio/x-mp4;")||t.canPlayType("audio/mp4;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!t.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(t.canPlayType("audio/x-flac;")||t.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_unlockAudio:function(){var e=this||o;if(!e._audioUnlocked&&e.ctx){e._audioUnlocked=!1,e.autoUnlock=!1,e._mobileUnloaded||44100===e.ctx.sampleRate||(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var t=function(n){for(var i=0;i<e.html5PoolSize;i++)try{var r=new Audio;r._unlocked=!0,e._releaseHtml5Audio(r)}catch(n){e.noAudio=!0}for(i=0;i<e._howls.length;i++)if(!e._howls[i]._webAudio)for(var o=e._howls[i]._getSoundIds(),s=0;s<o.length;s++){var a=e._howls[i]._soundById(o[s]);a&&a._node&&!a._node._unlocked&&(a._node._unlocked=!0,a._node.load())}e._autoResume();var l=e.ctx.createBufferSource();l.buffer=e._scratchBuffer,l.connect(e.ctx.destination),void 0===l.start?l.noteOn(0):l.start(0),"function"==typeof e.ctx.resume&&e.ctx.resume(),l.onended=function(){l.disconnect(0),e._audioUnlocked=!0,document.removeEventListener("touchstart",t,!0),document.removeEventListener("touchend",t,!0),document.removeEventListener("click",t,!0);for(var n=0;n<e._howls.length;n++)e._howls[n]._emit("unlock")}};return document.addEventListener("touchstart",t,!0),document.addEventListener("touchend",t,!0),document.addEventListener("click",t,!0),e}},_obtainHtml5Audio:function(){var e=this||o;if(e._html5AudioPool.length)return e._html5AudioPool.pop();var t=(new Audio).play();return t&&"undefined"!=typeof Promise&&(t instanceof Promise||"function"==typeof t.then)&&t.catch(function(){}),new Audio},_releaseHtml5Audio:function(e){var t=this||o;return e._unlocked&&t._html5AudioPool.push(e),t},_autoSuspend:function(){var e=this;if(e.autoSuspend&&e.ctx&&void 0!==e.ctx.suspend&&o.usingWebAudio){for(var t=0;t<e._howls.length;t++)if(e._howls[t]._webAudio)for(var n=0;n<e._howls[t]._sounds.length;n++)if(!e._howls[t]._sounds[n]._paused)return e;return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout(function(){e.autoSuspend&&(e._suspendTimer=null,e.state="suspending",e.ctx.suspend().then(function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())}))},3e4),e}},_autoResume:function(){var e=this;if(e.ctx&&void 0!==e.ctx.resume&&o.usingWebAudio)return"running"===e.state&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):"suspended"===e.state?(e.ctx.resume().then(function(){e.state="running";for(var t=0;t<e._howls.length;t++)e._howls[t]._emit("resume")}),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):"suspending"===e.state&&(e._resumeAfterSuspend=!0),e}};var o=new r,s=function(e){e.src&&0!==e.src.length&&this.init(e)};s.prototype={init:function(e){var t=this;return o.ctx||p(),t._autoplay=e.autoplay||!1,t._format="string"!=typeof e.format?e.format:[e.format],t._html5=e.html5||!1,t._muted=e.mute||!1,t._loop=e.loop||!1,t._pool=e.pool||5,t._preload="boolean"!=typeof e.preload||e.preload,t._rate=e.rate||1,t._sprite=e.sprite||{},t._src="string"!=typeof e.src?e.src:[e.src],t._volume=void 0!==e.volume?e.volume:1,t._xhrWithCredentials=e.xhrWithCredentials||!1,t._duration=0,t._state="unloaded",t._sounds=[],t._endTimers={},t._queue=[],t._playLock=!1,t._onend=e.onend?[{fn:e.onend}]:[],t._onfade=e.onfade?[{fn:e.onfade}]:[],t._onload=e.onload?[{fn:e.onload}]:[],t._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],t._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],t._onpause=e.onpause?[{fn:e.onpause}]:[],t._onplay=e.onplay?[{fn:e.onplay}]:[],t._onstop=e.onstop?[{fn:e.onstop}]:[],t._onmute=e.onmute?[{fn:e.onmute}]:[],t._onvolume=e.onvolume?[{fn:e.onvolume}]:[],t._onrate=e.onrate?[{fn:e.onrate}]:[],t._onseek=e.onseek?[{fn:e.onseek}]:[],t._onunlock=e.onunlock?[{fn:e.onunlock}]:[],t._onresume=[],t._webAudio=o.usingWebAudio&&!t._html5,void 0!==o.ctx&&o.ctx&&o.autoUnlock&&o._unlockAudio(),o._howls.push(t),t._autoplay&&t._queue.push({event:"play",action:function(){t.play()}}),t._preload&&t.load(),t},load:function(){var e=null;if(o.noAudio)this._emit("loaderror",null,"No audio support.");else{"string"==typeof this._src&&(this._src=[this._src]);for(var t=0;t<this._src.length;t++){var n,i;if(this._format&&this._format[t])n=this._format[t];else{if("string"!=typeof(i=this._src[t])){this._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(n=/^data:audio\/([^;,]+);/i.exec(i))||(n=/\.([^.]+)$/.exec(i.split("?",1)[0])),n&&(n=n[1].toLowerCase())}if(n&&o.codecs(n)){e=this._src[t];break}}if(e)return this._src=e,this._state="loading","https:"===window.location.protocol&&"http:"===e.slice(0,5)&&(this._html5=!0,this._webAudio=!1),new a(this),this._webAudio&&u(this),this;this._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(e,t){var n=this,i=null;if("number"==typeof e)i=e,e=null;else{if("string"==typeof e&&"loaded"===n._state&&!n._sprite[e])return null;if(void 0===e&&(e="__default",!n._playLock)){for(var r=0,s=0;s<n._sounds.length;s++)n._sounds[s]._paused&&!n._sounds[s]._ended&&(r++,i=n._sounds[s]._id);1===r?e=null:i=null}}var a=i?n._soundById(i):n._inactiveSound();if(!a)return null;if(i&&!e&&(e=a._sprite||"__default"),"loaded"!==n._state){a._sprite=e,a._ended=!1;var l=a._id;return n._queue.push({event:"play",action:function(){n.play(l)}}),l}if(i&&!a._paused)return t||n._loadQueue("play"),a._id;n._webAudio&&o._autoResume();var u=Math.max(0,a._seek>0?a._seek:n._sprite[e][0]/1e3),c=Math.max(0,(n._sprite[e][0]+n._sprite[e][1])/1e3-u),d=1e3*c/Math.abs(a._rate),h=n._sprite[e][0]/1e3,p=(n._sprite[e][0]+n._sprite[e][1])/1e3,f=!(!a._loop&&!n._sprite[e][2]);a._sprite=e,a._ended=!1;var m=function(){a._paused=!1,a._seek=u,a._start=h,a._stop=p,a._loop=f};if(!(u>=p)){var _=a._node;if(n._webAudio){var g=function(){n._playLock=!1,m(),n._refreshBuffer(a);var e=a._muted||n._muted?0:a._volume;_.gain.setValueAtTime(e,o.ctx.currentTime),a._playStart=o.ctx.currentTime,void 0===_.bufferSource.start?a._loop?_.bufferSource.noteGrainOn(0,u,86400):_.bufferSource.noteGrainOn(0,u,c):a._loop?_.bufferSource.start(0,u,86400):_.bufferSource.start(0,u,c),d!==1/0&&(n._endTimers[a._id]=setTimeout(n._ended.bind(n,a),d)),t||setTimeout(function(){n._emit("play",a._id),n._loadQueue()},0)};"running"===o.state?g():(n._playLock=!0,n.once("resume",g),n._clearTimer(a._id))}else{var v=function(){_.currentTime=u,_.muted=a._muted||n._muted||o._muted||_.muted,_.volume=a._volume*o.volume(),_.playbackRate=a._rate;try{var i=_.play();if(i&&"undefined"!=typeof Promise&&(i instanceof Promise||"function"==typeof i.then)?(n._playLock=!0,m(),i.then(function(){n._playLock=!1,_._unlocked=!0,t||(n._emit("play",a._id),n._loadQueue())}).catch(function(){n._playLock=!1,n._emit("playerror",a._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),a._ended=!0,a._paused=!0})):t||(n._playLock=!1,m(),n._emit("play",a._id),n._loadQueue()),_.playbackRate=a._rate,_.paused)return void n._emit("playerror",a._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==e||a._loop?n._endTimers[a._id]=setTimeout(n._ended.bind(n,a),d):(n._endTimers[a._id]=function(){n._ended(a),_.removeEventListener("ended",n._endTimers[a._id],!1)},_.addEventListener("ended",n._endTimers[a._id],!1))}catch(e){n._emit("playerror",a._id,e)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===_.src&&(_.src=n._src,_.load());var y=window&&window.ejecta||!_.readyState&&o._navigator.isCocoonJS;if(_.readyState>=3||y)v();else{n._playLock=!0;var x=function(){v(),_.removeEventListener(o._canPlayEvent,x,!1)};_.addEventListener(o._canPlayEvent,x,!1),n._clearTimer(a._id)}}return a._id}n._ended(a)},pause:function(e){var t=this;if("loaded"!==t._state||t._playLock)return t._queue.push({event:"pause",action:function(){t.pause(e)}}),t;for(var n=t._getSoundIds(e),i=0;i<n.length;i++){t._clearTimer(n[i]);var r=t._soundById(n[i]);if(r&&!r._paused&&(r._seek=t.seek(n[i]),r._rateSeek=0,r._paused=!0,t._stopFade(n[i]),r._node))if(t._webAudio){if(!r._node.bufferSource)continue;void 0===r._node.bufferSource.stop?r._node.bufferSource.noteOff(0):r._node.bufferSource.stop(0),t._cleanBuffer(r._node)}else isNaN(r._node.duration)&&r._node.duration!==1/0||r._node.pause();arguments[1]||t._emit("pause",r?r._id:null)}return t},stop:function(e,t){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"stop",action:function(){n.stop(e)}}),n;for(var i=n._getSoundIds(e),r=0;r<i.length;r++){n._clearTimer(i[r]);var o=n._soundById(i[r]);o&&(o._seek=o._start||0,o._rateSeek=0,o._paused=!0,o._ended=!0,n._stopFade(i[r]),o._node&&(n._webAudio?o._node.bufferSource&&(void 0===o._node.bufferSource.stop?o._node.bufferSource.noteOff(0):o._node.bufferSource.stop(0),n._cleanBuffer(o._node)):isNaN(o._node.duration)&&o._node.duration!==1/0||(o._node.currentTime=o._start||0,o._node.pause(),o._node.duration===1/0&&n._clearSound(o._node))),t||n._emit("stop",o._id))}return n},mute:function(e,t){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"mute",action:function(){n.mute(e,t)}}),n;if(void 0===t){if("boolean"!=typeof e)return n._muted;n._muted=e}for(var i=n._getSoundIds(t),r=0;r<i.length;r++){var s=n._soundById(i[r]);s&&(s._muted=e,s._interval&&n._stopFade(s._id),n._webAudio&&s._node?s._node.gain.setValueAtTime(e?0:s._volume,o.ctx.currentTime):s._node&&(s._node.muted=!!o._muted||e),n._emit("mute",s._id))}return n},volume:function(){var e,t,n,i=this,r=arguments;if(0===r.length)return i._volume;if(1===r.length||2===r.length&&void 0===r[1]){var s=i._getSoundIds(),a=s.indexOf(r[0]);a>=0?t=parseInt(r[0],10):e=parseFloat(r[0])}else r.length>=2&&(e=parseFloat(r[0]),t=parseInt(r[1],10));if(!(void 0!==e&&e>=0&&e<=1))return(n=t?i._soundById(t):i._sounds[0])?n._volume:0;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"volume",action:function(){i.volume.apply(i,r)}}),i;void 0===t&&(i._volume=e),t=i._getSoundIds(t);for(var l=0;l<t.length;l++)(n=i._soundById(t[l]))&&(n._volume=e,r[2]||i._stopFade(t[l]),i._webAudio&&n._node&&!n._muted?n._node.gain.setValueAtTime(e,o.ctx.currentTime):n._node&&!n._muted&&(n._node.volume=e*o.volume()),i._emit("volume",n._id));return i},fade:function(e,t,n,i){var r=this;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"fade",action:function(){r.fade(e,t,n,i)}}),r;e=parseFloat(e),t=parseFloat(t),n=parseFloat(n),r.volume(e,i);for(var s=r._getSoundIds(i),a=0;a<s.length;a++){var l=r._soundById(s[a]);if(l){if(i||r._stopFade(s[a]),r._webAudio&&!l._muted){var u=o.ctx.currentTime,c=u+n/1e3;l._volume=e,l._node.gain.setValueAtTime(e,u),l._node.gain.linearRampToValueAtTime(t,c)}r._startFadeInterval(l,e,t,n,s[a],void 0===i)}}return r},_startFadeInterval:function(e,t,n,i,r,o){var s=this,a=t,l=n-t,u=Math.abs(l/.01),c=Math.max(4,u>0?i/u:i),d=Date.now();e._fadeTo=n,e._interval=setInterval(function(){var r=(Date.now()-d)/i;d=Date.now(),a+=l*r,a=Math.max(0,a),a=Math.min(1,a),a=Math.round(100*a)/100,s._webAudio?e._volume=a:s.volume(a,e._id,!0),o&&(s._volume=a),(n<t&&a<=n||n>t&&a>=n)&&(clearInterval(e._interval),e._interval=null,e._fadeTo=null,s.volume(n,e._id),s._emit("fade",e._id))},c)},_stopFade:function(e){var t=this._soundById(e);return t&&t._interval&&(this._webAudio&&t._node.gain.cancelScheduledValues(o.ctx.currentTime),clearInterval(t._interval),t._interval=null,this.volume(t._fadeTo,e),t._fadeTo=null,this._emit("fade",e)),this},loop:function(){var e,t,n,i=this,r=arguments;if(0===r.length)return i._loop;if(1===r.length){if("boolean"!=typeof r[0])return!!(n=i._soundById(parseInt(r[0],10)))&&n._loop;e=r[0],i._loop=e}else 2===r.length&&(e=r[0],t=parseInt(r[1],10));for(var o=i._getSoundIds(t),s=0;s<o.length;s++)(n=i._soundById(o[s]))&&(n._loop=e,i._webAudio&&n._node&&n._node.bufferSource&&(n._node.bufferSource.loop=e,e&&(n._node.bufferSource.loopStart=n._start||0,n._node.bufferSource.loopEnd=n._stop)));return i},rate:function(){var e,t,n,i=this,r=arguments;if(0===r.length)t=i._sounds[0]._id;else if(1===r.length){var s=i._getSoundIds(),a=s.indexOf(r[0]);a>=0?t=parseInt(r[0],10):e=parseFloat(r[0])}else 2===r.length&&(e=parseFloat(r[0]),t=parseInt(r[1],10));if("number"!=typeof e)return(n=i._soundById(t))?n._rate:i._rate;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"rate",action:function(){i.rate.apply(i,r)}}),i;void 0===t&&(i._rate=e),t=i._getSoundIds(t);for(var l=0;l<t.length;l++)if(n=i._soundById(t[l])){i.playing(t[l])&&(n._rateSeek=i.seek(t[l]),n._playStart=i._webAudio?o.ctx.currentTime:n._playStart),n._rate=e,i._webAudio&&n._node&&n._node.bufferSource?n._node.bufferSource.playbackRate.setValueAtTime(e,o.ctx.currentTime):n._node&&(n._node.playbackRate=e);var u=i.seek(t[l]),c=(i._sprite[n._sprite][0]+i._sprite[n._sprite][1])/1e3-u,d=1e3*c/Math.abs(n._rate);!i._endTimers[t[l]]&&n._paused||(i._clearTimer(t[l]),i._endTimers[t[l]]=setTimeout(i._ended.bind(i,n),d)),i._emit("rate",n._id)}return i},seek:function(){var e,t,n=this,i=arguments;if(0===i.length)t=n._sounds[0]._id;else if(1===i.length){var r=n._getSoundIds(),s=r.indexOf(i[0]);s>=0?t=parseInt(i[0],10):n._sounds.length&&(t=n._sounds[0]._id,e=parseFloat(i[0]))}else 2===i.length&&(e=parseFloat(i[0]),t=parseInt(i[1],10));if(void 0===t)return n;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"seek",action:function(){n.seek.apply(n,i)}}),n;var a=n._soundById(t);if(a){if(!("number"==typeof e&&e>=0)){if(n._webAudio){var l=n.playing(t)?o.ctx.currentTime-a._playStart:0,u=a._rateSeek?a._rateSeek-a._seek:0;return a._seek+(u+l*Math.abs(a._rate))}return a._node.currentTime}var c=n.playing(t);c&&n.pause(t,!0),a._seek=e,a._ended=!1,n._clearTimer(t),n._webAudio||!a._node||isNaN(a._node.duration)||(a._node.currentTime=e);var d=function(){n._emit("seek",t),c&&n.play(t,!0)};if(c&&!n._webAudio){var h=function(){n._playLock?setTimeout(h,0):d()};setTimeout(h,0)}else d()}return n},playing:function(e){if("number"==typeof e){var t=this._soundById(e);return!!t&&!t._paused}for(var n=0;n<this._sounds.length;n++)if(!this._sounds[n]._paused)return!0;return!1},duration:function(e){var t=this._duration,n=this._soundById(e);return n&&(t=this._sprite[n._sprite][1]/1e3),t},state:function(){return this._state},unload:function(){for(var e=this,t=e._sounds,n=0;n<t.length;n++)t[n]._paused||e.stop(t[n]._id),e._webAudio||(e._clearSound(t[n]._node),t[n]._node.removeEventListener("error",t[n]._errorFn,!1),t[n]._node.removeEventListener(o._canPlayEvent,t[n]._loadFn,!1),o._releaseHtml5Audio(t[n]._node)),delete t[n]._node,e._clearTimer(t[n]._id);var i=o._howls.indexOf(e);i>=0&&o._howls.splice(i,1);var r=!0;for(n=0;n<o._howls.length;n++)if(o._howls[n]._src===e._src||e._src.indexOf(o._howls[n]._src)>=0){r=!1;break}return l&&r&&delete l[e._src],o.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,t,n,i){var r=this["_on"+e];return"function"==typeof t&&r.push(i?{id:n,fn:t,once:i}:{id:n,fn:t}),this},off:function(e,t,n){var i=this["_on"+e],r=0;if("number"==typeof t&&(n=t,t=null),t||n)for(r=0;r<i.length;r++){var o=n===i[r].id;if(t===i[r].fn&&o||!t&&o){i.splice(r,1);break}}else if(e)this["_on"+e]=[];else{var s=Object.keys(this);for(r=0;r<s.length;r++)0===s[r].indexOf("_on")&&Array.isArray(this[s[r]])&&(this[s[r]]=[])}return this},once:function(e,t,n){return this.on(e,t,n,1),this},_emit:function(e,t,n){for(var i=this["_on"+e],r=i.length-1;r>=0;r--)i[r].id&&i[r].id!==t&&"load"!==e||(setTimeout(function(e){e.call(this,t,n)}.bind(this,i[r].fn),0),i[r].once&&this.off(e,i[r].fn,i[r].id));return this._loadQueue(e),this},_loadQueue:function(e){if(this._queue.length>0){var t=this._queue[0];t.event===e&&(this._queue.shift(),this._loadQueue()),e||t.action()}return this},_ended:function(e){var t=e._sprite;if(!this._webAudio&&e._node&&!e._node.paused&&!e._node.ended&&e._node.currentTime<e._stop)return setTimeout(this._ended.bind(this,e),100),this;var n=!(!e._loop&&!this._sprite[t][2]);if(this._emit("end",e._id),!this._webAudio&&n&&this.stop(e._id,!0).play(e._id),this._webAudio&&n){this._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=o.ctx.currentTime;var i=1e3*(e._stop-e._start)/Math.abs(e._rate);this._endTimers[e._id]=setTimeout(this._ended.bind(this,e),i)}return this._webAudio&&!n&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,this._clearTimer(e._id),this._cleanBuffer(e._node),o._autoSuspend()),this._webAudio||n||this.stop(e._id,!0),this},_clearTimer:function(e){if(this._endTimers[e]){if("function"!=typeof this._endTimers[e])clearTimeout(this._endTimers[e]);else{var t=this._soundById(e);t&&t._node&&t._node.removeEventListener("ended",this._endTimers[e],!1)}delete this._endTimers[e]}return this},_soundById:function(e){for(var t=0;t<this._sounds.length;t++)if(e===this._sounds[t]._id)return this._sounds[t];return null},_inactiveSound:function(){this._drain();for(var e=0;e<this._sounds.length;e++)if(this._sounds[e]._ended)return this._sounds[e].reset();return new a(this)},_drain:function(){var e=this._pool,t=0,n=0;if(!(this._sounds.length<e)){for(n=0;n<this._sounds.length;n++)this._sounds[n]._ended&&t++;for(n=this._sounds.length-1;n>=0;n--){if(t<=e)return;this._sounds[n]._ended&&(this._webAudio&&this._sounds[n]._node&&this._sounds[n]._node.disconnect(0),this._sounds.splice(n,1),t--)}}},_getSoundIds:function(e){if(void 0===e){for(var t=[],n=0;n<this._sounds.length;n++)t.push(this._sounds[n]._id);return t}return[e]},_refreshBuffer:function(e){return e._node.bufferSource=o.ctx.createBufferSource(),e._node.bufferSource.buffer=l[this._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop||0),e._node.bufferSource.playbackRate.setValueAtTime(e._rate,o.ctx.currentTime),this},_cleanBuffer:function(e){var t=o._navigator&&o._navigator.vendor.indexOf("Apple")>=0;if(o._scratchBuffer&&e.bufferSource&&(e.bufferSource.onended=null,e.bufferSource.disconnect(0),t))try{e.bufferSource.buffer=o._scratchBuffer}catch(e){}return e.bufferSource=null,this},_clearSound:function(e){/MSIE |Trident\//.test(o._navigator&&o._navigator.userAgent)||(e.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var a=function(e){this._parent=e,this.init()};a.prototype={init:function(){var e=this._parent;return this._muted=e._muted,this._loop=e._loop,this._volume=e._volume,this._rate=e._rate,this._seek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++o._counter,e._sounds.push(this),this.create(),this},create:function(){var e=this._parent,t=o._muted||this._muted||this._parent._muted?0:this._volume;return e._webAudio?(this._node=void 0===o.ctx.createGain?o.ctx.createGainNode():o.ctx.createGain(),this._node.gain.setValueAtTime(t,o.ctx.currentTime),this._node.paused=!0,this._node.connect(o.masterGain)):(this._node=o._obtainHtml5Audio(),this._errorFn=this._errorListener.bind(this),this._node.addEventListener("error",this._errorFn,!1),this._loadFn=this._loadListener.bind(this),this._node.addEventListener(o._canPlayEvent,this._loadFn,!1),this._node.src=e._src,this._node.preload="auto",this._node.volume=t*o.volume(),this._node.load()),this},reset:function(){var e=this._parent;return this._muted=e._muted,this._loop=e._loop,this._volume=e._volume,this._rate=e._rate,this._seek=0,this._rateSeek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++o._counter,this},_errorListener:function(){this._parent._emit("loaderror",this._id,this._node.error?this._node.error.code:0),this._node.removeEventListener("error",this._errorFn,!1)},_loadListener:function(){var e=this._parent;e._duration=Math.ceil(10*this._node.duration)/10,0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue()),this._node.removeEventListener(o._canPlayEvent,this._loadFn,!1)}};var l={},u=function(e){var t=e._src;if(l[t])return e._duration=l[t].duration,void h(e);if(/^data:[^;]+;base64,/.test(t)){for(var n=atob(t.split(",")[1]),i=new Uint8Array(n.length),r=0;r<n.length;++r)i[r]=n.charCodeAt(r);d(i.buffer,e)}else{var o=new XMLHttpRequest;o.open("GET",t,!0),o.withCredentials=e._xhrWithCredentials,o.responseType="arraybuffer",o.onload=function(){var t=(o.status+"")[0];"0"===t||"2"===t||"3"===t?d(o.response,e):e._emit("loaderror",null,"Failed loading audio file with status: "+o.status+".")},o.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete l[t],e.load())},c(o)}},c=function(e){try{e.send()}catch(t){e.onerror()}},d=function(e,t){var n=function(){t._emit("loaderror",null,"Decoding audio data failed.")},i=function(e){e&&t._sounds.length>0?(l[t._src]=e,h(t,e)):n()};"undefined"!=typeof Promise&&1===o.ctx.decodeAudioData.length?o.ctx.decodeAudioData(e).then(i).catch(n):o.ctx.decodeAudioData(e,i,n)},h=function(e,t){t&&!e._duration&&(e._duration=t.duration),0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue())},p=function(){if(o.usingWebAudio){try{"undefined"!=typeof AudioContext?o.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?o.ctx=new webkitAudioContext:o.usingWebAudio=!1}catch(e){o.usingWebAudio=!1}o.ctx||(o.usingWebAudio=!1);var e=/iP(hone|od|ad)/.test(o._navigator&&o._navigator.platform),t=o._navigator&&o._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),n=t?parseInt(t[1],10):null;if(e&&n&&n<9){var i=/safari/.test(o._navigator&&o._navigator.userAgent.toLowerCase());(o._navigator&&o._navigator.standalone&&!i||o._navigator&&!o._navigator.standalone&&!i)&&(o.usingWebAudio=!1)}o.usingWebAudio&&(o.masterGain=void 0===o.ctx.createGain?o.ctx.createGainNode():o.ctx.createGain(),o.masterGain.gain.setValueAtTime(o._muted?0:1,o.ctx.currentTime),o.masterGain.connect(o.ctx.destination)),o._setup()}};void 0===(i=function(){return{Howler:o,Howl:s}}.apply(t,[]))||(e.exports=i),t.Howler=o,t.Howl=s,"undefined"!=typeof window?(window.HowlerGlobal=r,window.Howler=o,window.Howl=s,window.Sound=a):void 0!==n&&(n.HowlerGlobal=r,n.Howler=o,n.Howl=s,n.Sound=a)}(),function(){"use strict";var e;HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(e){if(!this.ctx||!this.ctx.listener)return this;for(var t=this._howls.length-1;t>=0;t--)this._howls[t].stereo(e);return this},HowlerGlobal.prototype.pos=function(e,t,n){return this.ctx&&this.ctx.listener?(t="number"!=typeof t?this._pos[1]:t,n="number"!=typeof n?this._pos[2]:n,"number"!=typeof e?this._pos:(this._pos=[e,t,n],void 0!==this.ctx.listener.positionX?(this.ctx.listener.positionX.setTargetAtTime(this._pos[0],Howler.ctx.currentTime,.1),this.ctx.listener.positionY.setTargetAtTime(this._pos[1],Howler.ctx.currentTime,.1),this.ctx.listener.positionZ.setTargetAtTime(this._pos[2],Howler.ctx.currentTime,.1)):this.ctx.listener.setPosition(this._pos[0],this._pos[1],this._pos[2]),this)):this},HowlerGlobal.prototype.orientation=function(e,t,n,i,r,o){if(!this.ctx||!this.ctx.listener)return this;var s=this._orientation;return t="number"!=typeof t?s[1]:t,n="number"!=typeof n?s[2]:n,i="number"!=typeof i?s[3]:i,r="number"!=typeof r?s[4]:r,o="number"!=typeof o?s[5]:o,"number"!=typeof e?s:(this._orientation=[e,t,n,i,r,o],void 0!==this.ctx.listener.forwardX?(this.ctx.listener.forwardX.setTargetAtTime(e,Howler.ctx.currentTime,.1),this.ctx.listener.forwardY.setTargetAtTime(t,Howler.ctx.currentTime,.1),this.ctx.listener.forwardZ.setTargetAtTime(n,Howler.ctx.currentTime,.1),this.ctx.listener.upX.setTargetAtTime(e,Howler.ctx.currentTime,.1),this.ctx.listener.upY.setTargetAtTime(t,Howler.ctx.currentTime,.1),this.ctx.listener.upZ.setTargetAtTime(n,Howler.ctx.currentTime,.1)):this.ctx.listener.setOrientation(e,t,n,i,r,o),this)},Howl.prototype.init=(e=Howl.prototype.init,function(t){return this._orientation=t.orientation||[1,0,0],this._stereo=t.stereo||null,this._pos=t.pos||null,this._pannerAttr={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:360,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:360,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:0,distanceModel:void 0!==t.distanceModel?t.distanceModel:"inverse",maxDistance:void 0!==t.maxDistance?t.maxDistance:1e4,panningModel:void 0!==t.panningModel?t.panningModel:"HRTF",refDistance:void 0!==t.refDistance?t.refDistance:1,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:1},this._onstereo=t.onstereo?[{fn:t.onstereo}]:[],this._onpos=t.onpos?[{fn:t.onpos}]:[],this._onorientation=t.onorientation?[{fn:t.onorientation}]:[],e.call(this,t)}),Howl.prototype.stereo=function(e,n){var i=this;if(!i._webAudio)return i;if("loaded"!==i._state)return i._queue.push({event:"stereo",action:function(){i.stereo(e,n)}}),i;var r=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===n){if("number"!=typeof e)return i._stereo;i._stereo=e,i._pos=[e,0,0]}for(var o=i._getSoundIds(n),s=0;s<o.length;s++){var a=i._soundById(o[s]);if(a){if("number"!=typeof e)return a._stereo;a._stereo=e,a._pos=[e,0,0],a._node&&(a._pannerAttr.panningModel="equalpower",a._panner&&a._panner.pan||t(a,r),"spatial"===r?void 0!==a._panner.positionX?(a._panner.positionX.setValueAtTime(e,Howler.ctx.currentTime),a._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),a._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):a._panner.setPosition(e,0,0):a._panner.pan.setValueAtTime(e,Howler.ctx.currentTime)),i._emit("stereo",a._id)}}return i},Howl.prototype.pos=function(e,n,i,r){var o=this;if(!o._webAudio)return o;if("loaded"!==o._state)return o._queue.push({event:"pos",action:function(){o.pos(e,n,i,r)}}),o;if(n="number"!=typeof n?0:n,i="number"!=typeof i?-.5:i,void 0===r){if("number"!=typeof e)return o._pos;o._pos=[e,n,i]}for(var s=o._getSoundIds(r),a=0;a<s.length;a++){var l=o._soundById(s[a]);if(l){if("number"!=typeof e)return l._pos;l._pos=[e,n,i],l._node&&(l._panner&&!l._panner.pan||t(l,"spatial"),void 0!==l._panner.positionX?(l._panner.positionX.setValueAtTime(e,Howler.ctx.currentTime),l._panner.positionY.setValueAtTime(n,Howler.ctx.currentTime),l._panner.positionZ.setValueAtTime(i,Howler.ctx.currentTime)):l._panner.setPosition(e,n,i)),o._emit("pos",l._id)}}return o},Howl.prototype.orientation=function(e,n,i,r){var o=this;if(!o._webAudio)return o;if("loaded"!==o._state)return o._queue.push({event:"orientation",action:function(){o.orientation(e,n,i,r)}}),o;if(n="number"!=typeof n?o._orientation[1]:n,i="number"!=typeof i?o._orientation[2]:i,void 0===r){if("number"!=typeof e)return o._orientation;o._orientation=[e,n,i]}for(var s=o._getSoundIds(r),a=0;a<s.length;a++){var l=o._soundById(s[a]);if(l){if("number"!=typeof e)return l._orientation;l._orientation=[e,n,i],l._node&&(l._panner||(l._pos||(l._pos=o._pos||[0,0,-.5]),t(l,"spatial")),void 0!==l._panner.orientationX?(l._panner.orientationX.setValueAtTime(e,Howler.ctx.currentTime),l._panner.orientationY.setValueAtTime(n,Howler.ctx.currentTime),l._panner.orientationZ.setValueAtTime(i,Howler.ctx.currentTime)):l._panner.setOrientation(e,n,i)),o._emit("orientation",l._id)}}return o},Howl.prototype.pannerAttr=function(){var e,n,i,r=this,o=arguments;if(!r._webAudio)return r;if(0===o.length)return r._pannerAttr;if(1===o.length){if("object"!=typeof o[0])return(i=r._soundById(parseInt(o[0],10)))?i._pannerAttr:r._pannerAttr;e=o[0],void 0===n&&(e.pannerAttr||(e.pannerAttr={coneInnerAngle:e.coneInnerAngle,coneOuterAngle:e.coneOuterAngle,coneOuterGain:e.coneOuterGain,distanceModel:e.distanceModel,maxDistance:e.maxDistance,refDistance:e.refDistance,rolloffFactor:e.rolloffFactor,panningModel:e.panningModel}),r._pannerAttr={coneInnerAngle:void 0!==e.pannerAttr.coneInnerAngle?e.pannerAttr.coneInnerAngle:r._coneInnerAngle,coneOuterAngle:void 0!==e.pannerAttr.coneOuterAngle?e.pannerAttr.coneOuterAngle:r._coneOuterAngle,coneOuterGain:void 0!==e.pannerAttr.coneOuterGain?e.pannerAttr.coneOuterGain:r._coneOuterGain,distanceModel:void 0!==e.pannerAttr.distanceModel?e.pannerAttr.distanceModel:r._distanceModel,maxDistance:void 0!==e.pannerAttr.maxDistance?e.pannerAttr.maxDistance:r._maxDistance,refDistance:void 0!==e.pannerAttr.refDistance?e.pannerAttr.refDistance:r._refDistance,rolloffFactor:void 0!==e.pannerAttr.rolloffFactor?e.pannerAttr.rolloffFactor:r._rolloffFactor,panningModel:void 0!==e.pannerAttr.panningModel?e.pannerAttr.panningModel:r._panningModel})}else 2===o.length&&(e=o[0],n=parseInt(o[1],10));for(var s=r._getSoundIds(n),a=0;a<s.length;a++)if(i=r._soundById(s[a])){var l=i._pannerAttr;l={coneInnerAngle:void 0!==e.coneInnerAngle?e.coneInnerAngle:l.coneInnerAngle,coneOuterAngle:void 0!==e.coneOuterAngle?e.coneOuterAngle:l.coneOuterAngle,coneOuterGain:void 0!==e.coneOuterGain?e.coneOuterGain:l.coneOuterGain,distanceModel:void 0!==e.distanceModel?e.distanceModel:l.distanceModel,maxDistance:void 0!==e.maxDistance?e.maxDistance:l.maxDistance,refDistance:void 0!==e.refDistance?e.refDistance:l.refDistance,rolloffFactor:void 0!==e.rolloffFactor?e.rolloffFactor:l.rolloffFactor,panningModel:void 0!==e.panningModel?e.panningModel:l.panningModel};var u=i._panner;u?(u.coneInnerAngle=l.coneInnerAngle,u.coneOuterAngle=l.coneOuterAngle,u.coneOuterGain=l.coneOuterGain,u.distanceModel=l.distanceModel,u.maxDistance=l.maxDistance,u.refDistance=l.refDistance,u.rolloffFactor=l.rolloffFactor,u.panningModel=l.panningModel):(i._pos||(i._pos=r._pos||[0,0,-.5]),t(i,"spatial"))}return r},Sound.prototype.init=function(e){return function(){var t=this._parent;this._orientation=t._orientation,this._stereo=t._stereo,this._pos=t._pos,this._pannerAttr=t._pannerAttr,e.call(this),this._stereo?t.stereo(this._stereo):this._pos&&t.pos(this._pos[0],this._pos[1],this._pos[2],this._id)}}(Sound.prototype.init),Sound.prototype.reset=function(e){return function(){var t=this._parent;return this._orientation=t._orientation,this._stereo=t._stereo,this._pos=t._pos,this._pannerAttr=t._pannerAttr,this._stereo?t.stereo(this._stereo):this._pos?t.pos(this._pos[0],this._pos[1],this._pos[2],this._id):this._panner&&(this._panner.disconnect(0),this._panner=void 0,t._refreshBuffer(this)),e.call(this)}}(Sound.prototype.reset);var t=function(e,t){"spatial"===(t=t||"spatial")?(e._panner=Howler.ctx.createPanner(),e._panner.coneInnerAngle=e._pannerAttr.coneInnerAngle,e._panner.coneOuterAngle=e._pannerAttr.coneOuterAngle,e._panner.coneOuterGain=e._pannerAttr.coneOuterGain,e._panner.distanceModel=e._pannerAttr.distanceModel,e._panner.maxDistance=e._pannerAttr.maxDistance,e._panner.refDistance=e._pannerAttr.refDistance,e._panner.rolloffFactor=e._pannerAttr.rolloffFactor,e._panner.panningModel=e._pannerAttr.panningModel,void 0!==e._panner.positionX?(e._panner.positionX.setValueAtTime(e._pos[0],Howler.ctx.currentTime),e._panner.positionY.setValueAtTime(e._pos[1],Howler.ctx.currentTime),e._panner.positionZ.setValueAtTime(e._pos[2],Howler.ctx.currentTime)):e._panner.setPosition(e._pos[0],e._pos[1],e._pos[2]),void 0!==e._panner.orientationX?(e._panner.orientationX.setValueAtTime(e._orientation[0],Howler.ctx.currentTime),e._panner.orientationY.setValueAtTime(e._orientation[1],Howler.ctx.currentTime),e._panner.orientationZ.setValueAtTime(e._orientation[2],Howler.ctx.currentTime)):e._panner.setOrientation(e._orientation[0],e._orientation[1],e._orientation[2])):(e._panner=Howler.ctx.createStereoPanner(),e._panner.pan.setValueAtTime(e._stereo,Howler.ctx.currentTime)),e._panner.connect(e._node),e._paused||e._parent.pause(e._id,!0).play(e._id,!0)}}()}).call(this,n("../node_modules/webpack/buildin/global.js"))},"../node_modules/process/browser.js":function(e,t){var n,i,r=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(e){i=s}}();var l,u=[],c=!1,d=-1;function h(){c&&l&&(c=!1,l.length?u=l.concat(u):d=-1,u.length&&p())}function p(){if(!c){var e=a(h);c=!0;for(var t=u.length;t;){for(l=u,u=[];++d<t;)l&&l[d].run();d=-1,t=u.length}l=null,c=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function m(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new f(e,t)),1!==u.length||c||a(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=m,r.addListener=m,r.once=m,r.off=m,r.removeListener=m,r.removeAllListeners=m,r.emit=m,r.prependListener=m,r.prependOnceListener=m,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},"../node_modules/q/q.js":function(e,t,n){(function(t,n){!function(t){"use strict";"function"==typeof bootstrap?bootstrap("promise",t):e.exports=t()}(function(){"use strict";var e=!1;try{throw new Error}catch(t){e=!!t.stack}var i,r=S(),o=function(){},s=function(){var e={task:void 0,next:null},i=e,r=!1,o=void 0,a=!1,l=[];function u(){for(var t,n;e.next;)t=(e=e.next).task,e.task=void 0,(n=e.domain)&&(e.domain=void 0,n.enter()),c(t,n);for(;l.length;)c(t=l.pop());r=!1}function c(e,t){try{e()}catch(e){if(a)throw t&&t.exit(),setTimeout(u,0),t&&t.enter(),e;setTimeout(function(){throw e},0)}t&&t.exit()}if(s=function(e){i=i.next={task:e,domain:a&&t.domain,next:null},r||(r=!0,o())},"object"==typeof t&&"[object process]"===t.toString()&&t.nextTick)a=!0,o=function(){t.nextTick(u)};else if("function"==typeof n)o="undefined"!=typeof window?n.bind(window,u):function(){n(u)};else if("undefined"!=typeof MessageChannel){var d=new MessageChannel;d.port1.onmessage=function(){o=h,d.port1.onmessage=u,u()};var h=function(){d.port2.postMessage(0)};o=function(){setTimeout(u,0),h()}}else o=function(){setTimeout(u,0)};return s.runAfter=function(e){l.push(e),r||(r=!0,o())},s}(),a=Function.call;function l(e){return function(){return a.apply(e,arguments)}}var u,c=l(Array.prototype.slice),d=l(Array.prototype.reduce||function(e,t){var n=0,i=this.length;if(1===arguments.length)for(;;){if(n in this){t=this[n++];break}if(++n>=i)throw new TypeError}for(;n<i;n++)n in this&&(t=e(t,this[n],n));return t}),h=l(Array.prototype.indexOf||function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return t;return-1}),p=l(Array.prototype.map||function(e,t){var n=this,i=[];return d(n,function(r,o,s){i.push(e.call(t,o,s,n))},void 0),i}),f=Object.create||function(e){function t(){}return t.prototype=e,new t},m=Object.defineProperty||function(e,t,n){return e[t]=n.value,e},_=l(Object.prototype.hasOwnProperty),g=Object.keys||function(e){var t=[];for(var n in e)_(e,n)&&t.push(n);return t},v=l(Object.prototype.toString);function y(e){return"[object StopIteration]"===v(e)||e instanceof u}u="undefined"!=typeof ReturnValue?ReturnValue:function(e){this.value=e};var x="From previous event:";function b(t,n){if(e&&n.stack&&"object"==typeof t&&null!==t&&t.stack){for(var i=[],r=n;r;r=r.source)r.stack&&(!t.__minimumStackCounter__||t.__minimumStackCounter__>r.stackCounter)&&(m(t,"__minimumStackCounter__",{value:r.stackCounter,configurable:!0}),i.unshift(r.stack));i.unshift(t.stack);var o=function(e){for(var t=e.split("\n"),n=[],i=0;i<t.length;++i){var r=t[i];!j(r)&&(-1===(o=r).indexOf("(module.js:")&&-1===o.indexOf("(node.js:"))&&r&&n.push(r)}var o;return n.join("\n")}(i.join("\n"+x+"\n"));m(t,"stack",{value:o,configurable:!0})}}function w(e){var t=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(e);if(t)return[t[1],Number(t[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(e);if(n)return[n[1],Number(n[2])];var i=/.*@(.+):(\d+)$/.exec(e);return i?[i[1],Number(i[2])]:void 0}function j(e){var t=w(e);if(!t)return!1;var n=t[0],o=t[1];return n===i&&o>=r&&o<=Y}function S(){if(e)try{throw new Error}catch(e){var t=e.stack.split("\n"),n=w(t[0].indexOf("@")>0?t[1]:t[2]);if(!n)return;return i=n[0],n[1]}}function A(e){return e instanceof E?e:F(e)?function(e){var t=T();return A.nextTick(function(){try{e.then(t.resolve,t.reject,t.notify)}catch(e){t.reject(e)}}),t.promise}(e):B(e)}A.resolve=A,A.nextTick=s,A.longStackSupport=!1;var M=1;function T(){var t,n=[],i=[],r=f(T.prototype),o=f(E.prototype);if(o.promiseDispatch=function(e,r,o){var s=c(arguments);n?(n.push(s),"when"===r&&o[1]&&i.push(o[1])):A.nextTick(function(){t.promiseDispatch.apply(t,s)})},o.valueOf=function(){if(n)return o;var e=I(t);return C(e)&&(t=e),e},o.inspect=function(){return t?t.inspect():{state:"pending"}},A.longStackSupport&&e)try{throw new Error}catch(e){o.stack=e.stack.substring(e.stack.indexOf("\n")+1),o.stackCounter=M++}function s(r){t=r,A.longStackSupport&&e&&(o.source=r),d(n,function(e,t){A.nextTick(function(){r.promiseDispatch.apply(r,t)})},void 0),n=void 0,i=void 0}return r.promise=o,r.resolve=function(e){t||s(A(e))},r.fulfill=function(e){t||s(B(e))},r.reject=function(e){t||s(U(e))},r.notify=function(e){t||d(i,function(t,n){A.nextTick(function(){n(e)})},void 0)},r}function P(e){if("function"!=typeof e)throw new TypeError("resolver must be a function.");var t=T();try{e(t.resolve,t.reject,t.notify)}catch(e){t.reject(e)}return t.promise}function L(e){return P(function(t,n){for(var i=0,r=e.length;i<r;i++)A(e[i]).then(t,n)})}function E(e,t,n){void 0===t&&(t=function(e){return U(new Error("Promise does not support operation: "+e))}),void 0===n&&(n=function(){return{state:"unknown"}});var i=f(E.prototype);if(i.promiseDispatch=function(n,r,o){var s;try{s=e[r]?e[r].apply(i,o):t.call(i,r,o)}catch(e){s=U(e)}n&&n(s)},i.inspect=n,n){var r=n();"rejected"===r.state&&(i.exception=r.reason),i.valueOf=function(){var e=n();return"pending"===e.state||"rejected"===e.state?i:e.value}}return i}function O(e,t,n,i){return A(e).then(t,n,i)}function I(e){if(C(e)){var t=e.inspect();if("fulfilled"===t.state)return t.value}return e}function C(e){return e instanceof E}function F(e){return(t=e)===Object(t)&&"function"==typeof e.then;var t}"object"==typeof t&&t&&Object({NODE_ENV:"production"})&&Object({NODE_ENV:"production"}).Q_DEBUG&&(A.longStackSupport=!0),A.defer=T,T.prototype.makeNodeResolver=function(){var e=this;return function(t,n){t?e.reject(t):arguments.length>2?e.resolve(c(arguments,1)):e.resolve(n)}},A.Promise=P,A.promise=P,P.race=L,P.all=H,P.reject=U,P.resolve=A,A.passByCopy=function(e){return e},E.prototype.passByCopy=function(){return this},A.join=function(e,t){return A(e).join(t)},E.prototype.join=function(e){return A([this,e]).spread(function(e,t){if(e===t)return e;throw new Error("Q can't join: not the same: "+e+" "+t)})},A.race=L,E.prototype.race=function(){return this.then(A.race)},A.makePromise=E,E.prototype.toString=function(){return"[object Promise]"},E.prototype.then=function(e,t,n){var i=this,r=T(),o=!1;return A.nextTick(function(){i.promiseDispatch(function(t){o||(o=!0,r.resolve(function(t){try{return"function"==typeof e?e(t):t}catch(e){return U(e)}}(t)))},"when",[function(e){o||(o=!0,r.resolve(function(e){if("function"==typeof t){b(e,i);try{return t(e)}catch(e){return U(e)}}return U(e)}(e)))}])}),i.promiseDispatch(void 0,"when",[void 0,function(e){var t,i=!1;try{t=function(e){return"function"==typeof n?n(e):e}(e)}catch(e){if(i=!0,!A.onerror)throw e;A.onerror(e)}i||r.notify(t)}]),r.promise},A.tap=function(e,t){return A(e).tap(t)},E.prototype.tap=function(e){return e=A(e),this.then(function(t){return e.fcall(t).thenResolve(t)})},A.when=O,E.prototype.thenResolve=function(e){return this.then(function(){return e})},A.thenResolve=function(e,t){return A(e).thenResolve(t)},E.prototype.thenReject=function(e){return this.then(function(){throw e})},A.thenReject=function(e,t){return A(e).thenReject(t)},A.nearer=I,A.isPromise=C,A.isPromiseAlike=F,A.isPending=function(e){return C(e)&&"pending"===e.inspect().state},E.prototype.isPending=function(){return"pending"===this.inspect().state},A.isFulfilled=function(e){return!C(e)||"fulfilled"===e.inspect().state},E.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},A.isRejected=function(e){return C(e)&&"rejected"===e.inspect().state},E.prototype.isRejected=function(){return"rejected"===this.inspect().state};var N=[],k=[],D=[],R=!0;function z(){N.length=0,k.length=0,R||(R=!0)}function U(e){var n=E({when:function(n){return n&&function(e){if(R){var n=h(k,e);-1!==n&&("object"==typeof t&&"function"==typeof t.emit&&A.nextTick.runAfter(function(){var i=h(D,e);-1!==i&&(t.emit("rejectionHandled",N[n],e),D.splice(i,1))}),k.splice(n,1),N.splice(n,1))}}(this),n?n(e):this}},function(){return this},function(){return{state:"rejected",reason:e}});return function(e,n){R&&("object"==typeof t&&"function"==typeof t.emit&&A.nextTick.runAfter(function(){-1!==h(k,e)&&(t.emit("unhandledRejection",n,e),D.push(e))}),k.push(e),n&&void 0!==n.stack?N.push(n.stack):N.push("(no stack) "+n))}(n,e),n}function B(e){return E({when:function(){return e},get:function(t){return e[t]},set:function(t,n){e[t]=n},delete:function(t){delete e[t]},post:function(t,n){return null==t?e.apply(void 0,n):e[t].apply(e,n)},apply:function(t,n){return e.apply(t,n)},keys:function(){return g(e)}},void 0,function(){return{state:"fulfilled",value:e}})}function G(e,t,n){return A(e).spread(t,n)}function V(e,t,n){return A(e).dispatch(t,n)}function H(e){return O(e,function(e){var t=0,n=T();return d(e,function(i,r,o){var s;C(r)&&"fulfilled"===(s=r.inspect()).state?e[o]=s.value:(++t,O(r,function(i){e[o]=i,0==--t&&n.resolve(e)},n.reject,function(e){n.notify({index:o,value:e})}))},void 0),0===t&&n.resolve(e),n.promise})}function X(e){if(0===e.length)return A.resolve();var t=A.defer(),n=0;return d(e,function(i,r,o){var s=e[o];n++,O(s,function(e){t.resolve(e)},function(e){if(0===--n){var i=e||new Error(""+e);i.message="Q can't get fulfillment value from any promise, all promises were rejected. Last error message: "+i.message,t.reject(i)}},function(e){t.notify({index:o,value:e})})},void 0),t.promise}function W(e){return O(e,function(e){return e=p(e,A),O(H(p(e,function(e){return O(e,o,o)})),function(){return e})})}A.resetUnhandledRejections=z,A.getUnhandledReasons=function(){return N.slice()},A.stopUnhandledRejectionTracking=function(){z(),R=!1},z(),A.reject=U,A.fulfill=B,A.master=function(e){return E({isDef:function(){}},function(t,n){return V(e,t,n)},function(){return A(e).inspect()})},A.spread=G,E.prototype.spread=function(e,t){return this.all().then(function(t){return e.apply(void 0,t)},t)},A.async=function(e){return function(){function t(e,t){var o;if("undefined"==typeof StopIteration){try{o=n[e](t)}catch(e){return U(e)}return o.done?A(o.value):O(o.value,i,r)}try{o=n[e](t)}catch(e){return y(e)?A(e.value):U(e)}return O(o,i,r)}var n=e.apply(this,arguments),i=t.bind(t,"next"),r=t.bind(t,"throw");return i()}},A.spawn=function(e){A.done(A.async(e)())},A.return=function(e){throw new u(e)},A.promised=function(e){return function(){return G([this,H(arguments)],function(t,n){return e.apply(t,n)})}},A.dispatch=V,E.prototype.dispatch=function(e,t){var n=this,i=T();return A.nextTick(function(){n.promiseDispatch(i.resolve,e,t)}),i.promise},A.get=function(e,t){return A(e).dispatch("get",[t])},E.prototype.get=function(e){return this.dispatch("get",[e])},A.set=function(e,t,n){return A(e).dispatch("set",[t,n])},E.prototype.set=function(e,t){return this.dispatch("set",[e,t])},A.del=A.delete=function(e,t){return A(e).dispatch("delete",[t])},E.prototype.del=E.prototype.delete=function(e){return this.dispatch("delete",[e])},A.mapply=A.post=function(e,t,n){return A(e).dispatch("post",[t,n])},E.prototype.mapply=E.prototype.post=function(e,t){return this.dispatch("post",[e,t])},A.send=A.mcall=A.invoke=function(e,t){return A(e).dispatch("post",[t,c(arguments,2)])},E.prototype.send=E.prototype.mcall=E.prototype.invoke=function(e){return this.dispatch("post",[e,c(arguments,1)])},A.fapply=function(e,t){return A(e).dispatch("apply",[void 0,t])},E.prototype.fapply=function(e){return this.dispatch("apply",[void 0,e])},A.try=A.fcall=function(e){return A(e).dispatch("apply",[void 0,c(arguments,1)])},E.prototype.fcall=function(){return this.dispatch("apply",[void 0,c(arguments)])},A.fbind=function(e){var t=A(e),n=c(arguments,1);return function(){return t.dispatch("apply",[this,n.concat(c(arguments))])}},E.prototype.fbind=function(){var e=this,t=c(arguments);return function(){return e.dispatch("apply",[this,t.concat(c(arguments))])}},A.keys=function(e){return A(e).dispatch("keys",[])},E.prototype.keys=function(){return this.dispatch("keys",[])},A.all=H,E.prototype.all=function(){return H(this)},A.any=X,E.prototype.any=function(){return X(this)},A.allResolved=function(e,t,n){return function(){return"undefined"!=typeof console&&console.warn,e.apply(e,arguments)}}(W),E.prototype.allResolved=function(){return W(this)},A.allSettled=function(e){return A(e).allSettled()},E.prototype.allSettled=function(){return this.then(function(e){return H(p(e,function(e){function t(){return e.inspect()}return(e=A(e)).then(t,t)}))})},A.fail=A.catch=function(e,t){return A(e).then(void 0,t)},E.prototype.fail=E.prototype.catch=function(e){return this.then(void 0,e)},A.progress=function(e,t){return A(e).then(void 0,void 0,t)},E.prototype.progress=function(e){return this.then(void 0,void 0,e)},A.fin=A.finally=function(e,t){return A(e).finally(t)},E.prototype.fin=E.prototype.finally=function(e){if(!e||"function"!=typeof e.apply)throw new Error("Q can't apply finally callback");return e=A(e),this.then(function(t){return e.fcall().then(function(){return t})},function(t){return e.fcall().then(function(){throw t})})},A.done=function(e,t,n,i){return A(e).done(t,n,i)},E.prototype.done=function(e,n,i){var r=function(e){A.nextTick(function(){if(b(e,o),!A.onerror)throw e;A.onerror(e)})},o=e||n||i?this.then(e,n,i):this;"object"==typeof t&&t&&t.domain&&(r=t.domain.bind(r)),o.then(void 0,r)},A.timeout=function(e,t,n){return A(e).timeout(t,n)},E.prototype.timeout=function(e,t){var n=T(),i=setTimeout(function(){t&&"string"!=typeof t||((t=new Error(t||"Timed out after "+e+" ms")).code="ETIMEDOUT"),n.reject(t)},e);return this.then(function(e){clearTimeout(i),n.resolve(e)},function(e){clearTimeout(i),n.reject(e)},n.notify),n.promise},A.delay=function(e,t){return void 0===t&&(t=e,e=void 0),A(e).delay(t)},E.prototype.delay=function(e){return this.then(function(t){var n=T();return setTimeout(function(){n.resolve(t)},e),n.promise})},A.nfapply=function(e,t){return A(e).nfapply(t)},E.prototype.nfapply=function(e){var t=T(),n=c(e);return n.push(t.makeNodeResolver()),this.fapply(n).fail(t.reject),t.promise},A.nfcall=function(e){var t=c(arguments,1);return A(e).nfapply(t)},E.prototype.nfcall=function(){var e=c(arguments),t=T();return e.push(t.makeNodeResolver()),this.fapply(e).fail(t.reject),t.promise},A.nfbind=A.denodeify=function(e){if(void 0===e)throw new Error("Q can't wrap an undefined function");var t=c(arguments,1);return function(){var n=t.concat(c(arguments)),i=T();return n.push(i.makeNodeResolver()),A(e).fapply(n).fail(i.reject),i.promise}},E.prototype.nfbind=E.prototype.denodeify=function(){var e=c(arguments);return e.unshift(this),A.denodeify.apply(void 0,e)},A.nbind=function(e,t){var n=c(arguments,2);return function(){var i=n.concat(c(arguments)),r=T();function o(){return e.apply(t,arguments)}return i.push(r.makeNodeResolver()),A(o).fapply(i).fail(r.reject),r.promise}},E.prototype.nbind=function(){var e=c(arguments,0);return e.unshift(this),A.nbind.apply(void 0,e)},A.nmapply=A.npost=function(e,t,n){return A(e).npost(t,n)},E.prototype.nmapply=E.prototype.npost=function(e,t){var n=c(t||[]),i=T();return n.push(i.makeNodeResolver()),this.dispatch("post",[e,n]).fail(i.reject),i.promise},A.nsend=A.nmcall=A.ninvoke=function(e,t){var n=c(arguments,2),i=T();return n.push(i.makeNodeResolver()),A(e).dispatch("post",[t,n]).fail(i.reject),i.promise},E.prototype.nsend=E.prototype.nmcall=E.prototype.ninvoke=function(e){var t=c(arguments,1),n=T();return t.push(n.makeNodeResolver()),this.dispatch("post",[e,t]).fail(n.reject),n.promise},A.nodeify=function(e,t){return A(e).nodeify(t)},E.prototype.nodeify=function(e){if(!e)return this;this.then(function(t){A.nextTick(function(){e(null,t)})},function(t){A.nextTick(function(){e(t)})})},A.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var Y=S();return A})}).call(this,n("../node_modules/process/browser.js"),n("../node_modules/timers-browserify/main.js").setImmediate)},"../node_modules/setimmediate/setImmediate.js":function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var i,r,o,s,a,l=1,u={},c=!1,d=e.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(e);h=h&&h.setTimeout?h:e,"[object process]"==={}.toString.call(e.process)?i=function(e){t.nextTick(function(){f(e)})}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((o=new MessageChannel).port1.onmessage=function(e){f(e.data)},i=function(e){o.port2.postMessage(e)}):d&&"onreadystatechange"in d.createElement("script")?(r=d.documentElement,i=function(e){var t=d.createElement("script");t.onreadystatechange=function(){f(e),t.onreadystatechange=null,r.removeChild(t),t=null},r.appendChild(t)}):i=function(e){setTimeout(f,0,e)}:(s="setImmediate$"+Math.random()+"$",a=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(s)&&f(+t.data.slice(s.length))},e.addEventListener?e.addEventListener("message",a,!1):e.attachEvent("onmessage",a),i=function(t){e.postMessage(s+t,"*")}),h.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return u[l]=r,i(l),l++},h.clearImmediate=p}function p(e){delete u[e]}function f(e){if(c)setTimeout(f,0,e);else{var t=u[e];if(t){c=!0;try{!function(e){var t=e.callback,i=e.args;switch(i.length){case 0:t();break;case 1:t(i[0]);break;case 2:t(i[0],i[1]);break;case 3:t(i[0],i[1],i[2]);break;default:t.apply(n,i)}}(t)}finally{p(e),c=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n("../node_modules/webpack/buildin/global.js"),n("../node_modules/process/browser.js"))},"../node_modules/timers-browserify/main.js":function(e,t,n){(function(e){var i=void 0!==e&&e||"undefined"!=typeof self&&self||window,r=Function.prototype.apply;function o(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new o(r.call(setTimeout,i,arguments),clearTimeout)},t.setInterval=function(){return new o(r.call(setInterval,i,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(i,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n("../node_modules/setimmediate/setImmediate.js"),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n("../node_modules/webpack/buildin/global.js"))},"../node_modules/webpack/buildin/global.js":function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},"../node_modules/webpack/buildin/harmony-module.js":function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},"./js/main.js":function(e,t,n){"use strict";n.r(t);n("./scss/main.scss"),n("../node_modules/babel-polyfill/lib/index.js");function i(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function r(e){for(var t in e)e.hasOwnProperty(t)&&(e[t]=null);e=null}var o=function(e){arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.random();var t=[];return{execute:function(e){0!==e.length&&(this.addNext(e),this.runStep(""))},addNext:function(e){"function"==typeof e?t.unshift({fn:e,vars:null}):t=[].concat(i(e),i(t))},tackOn:function(e){t=[].concat(i(t),i(e)),this.runStep("")},next:function(){this.runStep()},runStep:function(e){var n=this;if(0!=t.length){var o=t.shift(),s=o.fn;o.vars=o.vars||[],e&&(o.vars=o.vars.concat(e));var a=o.scope||this;new Promise(function(e,t){s.apply(a,[].concat(i(o.vars),[e,t]))}).then(function(e){n.runStep(e)}).catch(function(e){if(!0!==e)throw e;n.next()}),r(o)}},clearArrayExecuter:function(){t=[]},destroy:function(){for(var e=0;e<t.length;e++)r(t[e]);t=[]}}},s=n("../node_modules/gsap/TweenLite.js");s.g._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],function(){var e=function(e){s.e.call(this,e);var t,n,i=this.vars;for(n in this._labels={},this.autoRemoveChildren=!!i.autoRemoveChildren,this.smoothChildTiming=!!i.smoothChildTiming,this._sortChildren=!0,this._onUpdate=i.onUpdate,i)t=i[n],r(t)&&-1!==t.join("").indexOf("{self}")&&(i[n]=this._swapSelfInParams(t));r(i.tweens)&&this.add(i.tweens,0,i.align,i.stagger)},t=s.h._internals,n=e._internals={},i=t.isSelector,r=t.isArray,o=t.lazyTweens,a=t.lazyRender,l=s.g._gsDefine.globals,u=function(e){var t,n={};for(t in e)n[t]=e[t];return n},c=function(e,t,n){var i,r,o=e.cycle;for(i in o)r=o[i],e[i]="function"==typeof r?r(n,t[n],t):r[n%r.length];delete e.cycle},d=n.pauseCallback=function(){},h=function(e,t,n,i){var r="immediateRender";return r in t||(t[r]=!(n&&!1===n[r]||i)),t},p=function(e){if("function"==typeof e)return e;var t="object"==typeof e?e:{each:e},n=t.ease,i=t.from||0,r=t.base||0,o={},s=isNaN(i),a=t.axis,l={center:.5,end:1}[i]||0;return function(e,u,c){var d,h,p,f,m,_,g,v,y,x=(c||t).length,b=o[x];if(!b){if(!(y="auto"===t.grid?0:(t.grid||[1/0])[0])){for(g=-1/0;g<(g=c[y++].getBoundingClientRect().left)&&y<x;);y--}for(b=o[x]=[],d=s?Math.min(y,x)*l-.5:i%y,h=s?x*l/y-.5:i/y|0,g=0,v=1/0,_=0;_<x;_++)p=_%y-d,f=h-(_/y|0),b[_]=m=a?Math.abs("y"===a?f:p):Math.sqrt(p*p+f*f),m>g&&(g=m),m<v&&(v=m);b.max=g-v,b.min=v,b.v=x=t.amount||t.each*(y>x?x-1:a?"y"===a?x/y:y:Math.max(y,x/y))||0,b.b=x<0?r-x:r}return x=(b[e]-b.min)/b.max,b.b+(n?n.getRatio(x):x)*b.v}},f=e.prototype=new s.e;return e.version="2.1.3",e.distribute=p,f.constructor=e,f.kill()._gc=f._forcingPlayhead=f._hasPause=!1,f.to=function(e,t,n,i){var r=n.repeat&&l.TweenMax||s.h;return t?this.add(new r(e,t,n),i):this.set(e,n,i)},f.from=function(e,t,n,i){return this.add((n.repeat&&l.TweenMax||s.h).from(e,t,h(0,n)),i)},f.fromTo=function(e,t,n,i,r){var o=i.repeat&&l.TweenMax||s.h;return i=h(0,i,n),t?this.add(o.fromTo(e,t,n,i),r):this.set(e,i,r)},f.staggerTo=function(t,n,r,o,a,l,d,h){var f,m,_=new e({onComplete:l,onCompleteParams:d,callbackScope:h,smoothChildTiming:this.smoothChildTiming}),g=p(r.stagger||o),v=r.startAt,y=r.cycle;for("string"==typeof t&&(t=s.h.selector(t)||t),i(t=t||[])&&(t=function(e){var t,n=[],i=e.length;for(t=0;t!==i;n.push(e[t++]));return n}(t)),m=0;m<t.length;m++)f=u(r),v&&(f.startAt=u(v),v.cycle&&c(f.startAt,t,m)),y&&(c(f,t,m),null!=f.duration&&(n=f.duration,delete f.duration)),_.to(t[m],n,f,g(m,t[m],t));return this.add(_,a)},f.staggerFrom=function(e,t,n,i,r,o,s,a){return n.runBackwards=!0,this.staggerTo(e,t,h(0,n),i,r,o,s,a)},f.staggerFromTo=function(e,t,n,i,r,o,s,a,l){return i.startAt=n,this.staggerTo(e,t,h(0,i,n),r,o,s,a,l)},f.call=function(e,t,n,i){return this.add(s.h.delayedCall(0,e,t,n),i)},f.set=function(e,t,n){return this.add(new s.h(e,0,h(0,t,null,!0)),n)},e.exportRoot=function(t,n){null==(t=t||{}).smoothChildTiming&&(t.smoothChildTiming=!0);var i,r,o,a,l=new e(t),u=l._timeline;for(null==n&&(n=!0),u._remove(l,!0),l._startTime=0,l._rawPrevTime=l._time=l._totalTime=u._time,o=u._first;o;)a=o._next,n&&o instanceof s.h&&o.target===o.vars.onComplete||((r=o._startTime-o._delay)<0&&(i=1),l.add(o,r)),o=a;return u.add(l,0),i&&l.totalDuration(),l},f.add=function(t,n,i,o){var a,l,u,c,d,h;if("number"!=typeof n&&(n=this._parseTimeOrLabel(n,0,!0,t)),!(t instanceof s.a)){if(t instanceof Array||t&&t.push&&r(t)){for(i=i||"normal",o=o||0,a=n,l=t.length,u=0;u<l;u++)r(c=t[u])&&(c=new e({tweens:c})),this.add(c,a),"string"!=typeof c&&"function"!=typeof c&&("sequence"===i?a=c._startTime+c.totalDuration()/c._timeScale:"start"===i&&(c._startTime-=c.delay())),a+=o;return this._uncache(!0)}if("string"==typeof t)return this.addLabel(t,n);if("function"!=typeof t)throw"Cannot add "+t+" into the timeline; it is not a tween, timeline, function, or string.";t=s.h.delayedCall(0,t)}if(s.e.prototype.add.call(this,t,n),(t._time||!t._duration&&t._initted)&&(a=(this.rawTime()-t._startTime)*t._timeScale,(!t._duration||Math.abs(Math.max(0,Math.min(t.totalDuration(),a)))-t._totalTime>1e-5)&&t.render(a,!1,!1)),(this._gc||this._time===this._duration)&&!this._paused&&this._duration<this.duration())for(h=(d=this).rawTime()>t._startTime;d._timeline;)h&&d._timeline.smoothChildTiming?d.totalTime(d._totalTime,!0):d._gc&&d._enabled(!0,!1),d=d._timeline;return this},f.remove=function(e){if(e instanceof s.a){this._remove(e,!1);var t=e._timeline=e.vars.useFrames?s.a._rootFramesTimeline:s.a._rootTimeline;return e._startTime=(e._paused?e._pauseTime:t._time)-(e._reversed?e.totalDuration()-e._totalTime:e._totalTime)/e._timeScale,this}if(e instanceof Array||e&&e.push&&r(e)){for(var n=e.length;--n>-1;)this.remove(e[n]);return this}return"string"==typeof e?this.removeLabel(e):this.kill(null,e)},f._remove=function(e,t){return s.e.prototype._remove.call(this,e,t),this._last?this._time>this.duration()&&(this._time=this._duration,this._totalTime=this._totalDuration):this._time=this._totalTime=this._duration=this._totalDuration=0,this},f.append=function(e,t){return this.add(e,this._parseTimeOrLabel(null,t,!0,e))},f.insert=f.insertMultiple=function(e,t,n,i){return this.add(e,t||0,n,i)},f.appendMultiple=function(e,t,n,i){return this.add(e,this._parseTimeOrLabel(null,t,!0,e),n,i)},f.addLabel=function(e,t){return this._labels[e]=this._parseTimeOrLabel(t),this},f.addPause=function(e,t,n,i){var r=s.h.delayedCall(0,d,n,i||this);return r.vars.onComplete=r.vars.onReverseComplete=t,r.data="isPause",this._hasPause=!0,this.add(r,e)},f.removeLabel=function(e){return delete this._labels[e],this},f.getLabelTime=function(e){return null!=this._labels[e]?this._labels[e]:-1},f._parseTimeOrLabel=function(e,t,n,i){var o,a;if(i instanceof s.a&&i.timeline===this)this.remove(i);else if(i&&(i instanceof Array||i.push&&r(i)))for(a=i.length;--a>-1;)i[a]instanceof s.a&&i[a].timeline===this&&this.remove(i[a]);if(o="number"!=typeof e||t?this.duration()>99999999999?this.recent().endTime(!1):this._duration:0,"string"==typeof t)return this._parseTimeOrLabel(t,n&&"number"==typeof e&&null==this._labels[t]?e-o:0,n);if(t=t||0,"string"!=typeof e||!isNaN(e)&&null==this._labels[e])null==e&&(e=o);else{if(-1===(a=e.indexOf("=")))return null==this._labels[e]?n?this._labels[e]=o+t:t:this._labels[e]+t;t=parseInt(e.charAt(a-1)+"1",10)*Number(e.substr(a+1)),e=a>1?this._parseTimeOrLabel(e.substr(0,a-1),0,n):o}return Number(e)+t},f.seek=function(e,t){return this.totalTime("number"==typeof e?e:this._parseTimeOrLabel(e),!1!==t)},f.stop=function(){return this.paused(!0)},f.gotoAndPlay=function(e,t){return this.play(e,t)},f.gotoAndStop=function(e,t){return this.pause(e,t)},f.render=function(e,t,n){this._gc&&this._enabled(!0,!1);var i,r,s,l,u,c,d,h,p=this._time,f=this._dirty?this.totalDuration():this._totalDuration,m=this._startTime,_=this._timeScale,g=this._paused;if(p!==this._time&&(e+=this._time-p),this._hasPause&&!this._forcingPlayhead&&!t){if(e>p)for(i=this._first;i&&i._startTime<=e&&!c;)i._duration||"isPause"!==i.data||i.ratio||0===i._startTime&&0===this._rawPrevTime||(c=i),i=i._next;else for(i=this._last;i&&i._startTime>=e&&!c;)i._duration||"isPause"===i.data&&i._rawPrevTime>0&&(c=i),i=i._prev;c&&(this._time=this._totalTime=e=c._startTime,h=this._startTime+(this._reversed?this._duration-e:e)/this._timeScale)}if(e>=f-1e-8&&e>=0)this._totalTime=this._time=f,this._reversed||this._hasPausedChild()||(r=!0,l="onComplete",u=!!this._timeline.autoRemoveChildren,0===this._duration&&(e<=0&&e>=-1e-8||this._rawPrevTime<0||1e-8===this._rawPrevTime)&&this._rawPrevTime!==e&&this._first&&(u=!0,this._rawPrevTime>1e-8&&(l="onReverseComplete"))),this._rawPrevTime=this._duration||!t||e||this._rawPrevTime===e?e:1e-8,e=f+1e-4;else if(e<1e-8)if(this._totalTime=this._time=0,e>-1e-8&&(e=0),(0!==p||0===this._duration&&1e-8!==this._rawPrevTime&&(this._rawPrevTime>0||e<0&&this._rawPrevTime>=0))&&(l="onReverseComplete",r=this._reversed),e<0)this._active=!1,this._timeline.autoRemoveChildren&&this._reversed?(u=r=!0,l="onReverseComplete"):this._rawPrevTime>=0&&this._first&&(u=!0),this._rawPrevTime=e;else{if(this._rawPrevTime=this._duration||!t||e||this._rawPrevTime===e?e:1e-8,0===e&&r)for(i=this._first;i&&0===i._startTime;)i._duration||(r=!1),i=i._next;e=0,this._initted||(u=!0)}else this._totalTime=this._time=this._rawPrevTime=e;if(this._time!==p&&this._first||n||u||c){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._time!==p&&e>0&&(this._active=!0),0===p&&this.vars.onStart&&(0===this._time&&this._duration||t||this._callback("onStart")),(d=this._time)>=p)for(i=this._first;i&&(s=i._next,d===this._time&&(!this._paused||g));)(i._active||i._startTime<=d&&!i._paused&&!i._gc)&&(c===i&&(this.pause(),this._pauseTime=h),i._reversed?i.render((i._dirty?i.totalDuration():i._totalDuration)-(e-i._startTime)*i._timeScale,t,n):i.render((e-i._startTime)*i._timeScale,t,n)),i=s;else for(i=this._last;i&&(s=i._prev,d===this._time&&(!this._paused||g));){if(i._active||i._startTime<=p&&!i._paused&&!i._gc){if(c===i){for(c=i._prev;c&&c.endTime()>this._time;)c.render(c._reversed?c.totalDuration()-(e-c._startTime)*c._timeScale:(e-c._startTime)*c._timeScale,t,n),c=c._prev;c=null,this.pause(),this._pauseTime=h}i._reversed?i.render((i._dirty?i.totalDuration():i._totalDuration)-(e-i._startTime)*i._timeScale,t,n):i.render((e-i._startTime)*i._timeScale,t,n)}i=s}this._onUpdate&&(t||(o.length&&a(),this._callback("onUpdate"))),l&&(this._gc||m!==this._startTime&&_===this._timeScale||(0===this._time||f>=this.totalDuration())&&(r&&(o.length&&a(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!t&&this.vars[l]&&this._callback(l)))}},f._hasPausedChild=function(){for(var t=this._first;t;){if(t._paused||t instanceof e&&t._hasPausedChild())return!0;t=t._next}return!1},f.getChildren=function(e,t,n,i){i=i||-9999999999;for(var r=[],o=this._first,a=0;o;)o._startTime<i||(o instanceof s.h?!1!==t&&(r[a++]=o):(!1!==n&&(r[a++]=o),!1!==e&&(a=(r=r.concat(o.getChildren(!0,t,n))).length))),o=o._next;return r},f.getTweensOf=function(e,t){var n,i,r=this._gc,o=[],a=0;for(r&&this._enabled(!0,!0),i=(n=s.h.getTweensOf(e)).length;--i>-1;)(n[i].timeline===this||t&&this._contains(n[i]))&&(o[a++]=n[i]);return r&&this._enabled(!1,!0),o},f.recent=function(){return this._recent},f._contains=function(e){for(var t=e.timeline;t;){if(t===this)return!0;t=t.timeline}return!1},f.shiftChildren=function(e,t,n){n=n||0;for(var i,r=this._first,o=this._labels;r;)r._startTime>=n&&(r._startTime+=e),r=r._next;if(t)for(i in o)o[i]>=n&&(o[i]+=e);return this._uncache(!0)},f._kill=function(e,t){if(!e&&!t)return this._enabled(!1,!1);for(var n=t?this.getTweensOf(t):this.getChildren(!0,!0,!1),i=n.length,r=!1;--i>-1;)n[i]._kill(e,t)&&(r=!0);return r},f.clear=function(e){var t=this.getChildren(!1,!0,!0),n=t.length;for(this._time=this._totalTime=0;--n>-1;)t[n]._enabled(!1,!1);return!1!==e&&(this._labels={}),this._uncache(!0)},f.invalidate=function(){for(var e=this._first;e;)e.invalidate(),e=e._next;return s.a.prototype.invalidate.call(this)},f._enabled=function(e,t){if(e===this._gc)for(var n=this._first;n;)n._enabled(e,!0),n=n._next;return s.e.prototype._enabled.call(this,e,t)},f.totalTime=function(e,t,n){this._forcingPlayhead=!0;var i=s.a.prototype.totalTime.apply(this,arguments);return this._forcingPlayhead=!1,i},f.duration=function(e){return arguments.length?(0!==this.duration()&&0!==e&&this.timeScale(this._duration/e),this):(this._dirty&&this.totalDuration(),this._duration)},f.totalDuration=function(e){if(!arguments.length){if(this._dirty){for(var t,n,i=0,r=this,o=r._last,s=999999999999;o;)t=o._prev,o._dirty&&o.totalDuration(),o._startTime>s&&r._sortChildren&&!o._paused&&!r._calculatingDuration?(r._calculatingDuration=1,r.add(o,o._startTime-o._delay),r._calculatingDuration=0):s=o._startTime,o._startTime<0&&!o._paused&&(i-=o._startTime,r._timeline.smoothChildTiming&&(r._startTime+=o._startTime/r._timeScale,r._time-=o._startTime,r._totalTime-=o._startTime,r._rawPrevTime-=o._startTime),r.shiftChildren(-o._startTime,!1,-9999999999),s=0),(n=o._startTime+o._totalDuration/o._timeScale)>i&&(i=n),o=t;r._duration=r._totalDuration=i,r._dirty=!1}return this._totalDuration}return e&&this.totalDuration()?this.timeScale(this._totalDuration/e):this},f.paused=function(e){if(!1===e&&this._paused)for(var t=this._first;t;)t._startTime===this._time&&"isPause"===t.data&&(t._rawPrevTime=0),t=t._next;return s.a.prototype.paused.apply(this,arguments)},f.usesFrames=function(){for(var e=this._timeline;e._timeline;)e=e._timeline;return e===s.a._rootFramesTimeline},f.rawTime=function(e){return e&&(this._paused||this._repeat&&this.time()>0&&this.totalProgress()<1)?this._totalTime%(this._duration+this._repeatDelay):this._paused?this._totalTime:(this._timeline.rawTime(e)-this._startTime)*this._timeScale},e},!0);var a=s.i.TimelineLite,l=["assets/audio/fx.ogg","assets/audio/fx.m4a","assets/audio/fx.mp3","assets/audio/fx.ac3"],u={SX_KO_CharHover_Away_Off_var1:{start:0,end:1.3111111111111111,loop:!1},SX_KO_CharHover_benoit:{start:3,end:4.509569160997732,loop:!1},SX_KO_CharHover_donna:{start:6,end:7.370317460317461,loop:!1},SX_KO_CharHover_elliot:{start:9,end:9.922131519274377,loop:!1},SX_KO_CharHover_fran:{start:11,end:12.98764172335601,loop:!1},SX_KO_CharHover_harlan:{start:14,end:15.415124716553288,loop:!1},SX_KO_CharHover_jacob:{start:17,end:18.636167800453514,loop:!1},SX_KO_CharHover_joni:{start:20,end:21.442131519274376,loop:!1},SX_KO_CharHover_linda:{start:23,end:25.170408163265307,loop:!1},SX_KO_CharHover_marta:{start:27,end:28.85839002267574,loop:!1},SX_KO_CharHover_meg:{start:30,end:31.047755102040817,loop:!1},SX_KO_CharHover_nana:{start:33,end:34.51052154195011,loop:!1},SX_KO_CharHover_ransom:{start:36,end:37.473673469387755,loop:!1},SX_KO_CharHover_richard:{start:39,end:40.5434693877551,loop:!1},SX_KO_CharHover_wagner:{start:42,end:42.87965986394558,loop:!1},SX_KO_CharHover_walt:{start:44,end:45.30827664399093,loop:!1},SX_KO_Char_Hover_0_Generic:{start:47,end:47.839070294784584,loop:!1},SX_KO_Click_BackToHome_withWipe:{start:49,end:52.37886621315193,loop:!1},SX_KO_Click_Back_Simple:{start:54,end:54.48,loop:!1},SX_KO_Click_Confirm_Simple:{start:56,end:56.48,loop:!1},SX_KO_ConfirmClick_CharacterDetail_noMX:{start:58,end:62.166757369614515,loop:!1},SX_KO_Home_WipeIn_Shing_noMX:{start:64,end:65.70843537414966,loop:!1},SX_KO_LoadEnd:{start:67,end:69.78609977324263,loop:!1},SX_KO_LoadStart:{start:71,end:74.33514739229025,loop:!1},SX_KO_NavHover_LineThru_var1:{start:76,end:76.72539682539683,loop:!1},SX_KO_NavMenu_Click_DropDown:{start:78,end:78.66351473922903,loop:!1},SX_KO_NavMenu_Click_Transition_Wipe:{start:80,end:82.57034013605443,loop:!1},SX_KO_NavSelect_Click_Shing_Wipe:{start:84,end:85.6726530612245,loop:!1}},c=n("../node_modules/howler/dist/howler.js"),d=!1,h=[],p=0,f=null,m=!1,_=!1,g={};for(var v in c.Howler.mobileAutoEnable=!0,g.src=l,g.sprite={},u)g.sprite[v]=[1e3*u[v].start,1e3*(u[v].end-u[v].start)];var y={init:function(){},loadFX:function(){d||(d=!0,h[0]=new Howl(g),h[0].preload=!0)},loadMusic:function(e){(f=new Howl({src:["assets/audio/"+e+".ogg","assets/audio/"+e+".m4a","assets/audio/"+e+".mp3","assets/audio/"+e+".ac3"],preload:!0,loop:!0})).id=e},playFx:function(e){d&&(h[p=(p+1)%5]||(h[p]=new Howl(g)),h[p].play(e))},playMusic:function(e){f&&f.id!==e&&(f.stop(),this.loadMusic(e)),f.play()},stopMusic:function(){f&&f.stop()},mute:function(e){m=e,c.Howler.mute(m||_)},setVolume:function(e,t){h[p=(p+1)%5]||(h[p]=new Howl(g)),h[p].volume(t,e)},pause:function(e){_=e,this.mute(m)}};window.sfx=y;var x=function(){this.id="KnivesLoader",this.elem=document.getElementById("loader_wrapper"),this.tt=document.getElementById("loader_tt"),this.icon=document.getElementById("knife_icon"),this.releaseDate=document.getElementById("loader_releasedate"),this.quotes_wrapper=document.getElementById("loader_quotes"),this.fresh=document.getElementById("loader_fresh"),document.body.appendChild(this.elem),this.loaderText=document.getElementById("loaderText")};function b(){!0===this.quoteTimer&&(Date.now()-this.time>5e3&&(this.time=Date.now(),w.call(this)),window.requestAnimationFrame(b.bind(this)))}function w(){this.quote_elements=document.querySelectorAll("#loader_quotes li"),void 0!==this.quotes&&0!==this.quotes.length||(this.quotes=[].slice.call(this.quote_elements));for(var e=Math.floor(Math.random()*(this.quotes.length-1)),t=this.quotes.splice(e,1)[0],n=0;n<this.quote_elements.length;n++)this.quote_elements[n].style.opacity=0;t.style.opacity=1}function j(e){return this.loaderText.textContent=Math.round(100*e),e>=1}function S(e){return new Promise(function(t,n){var i;(i=document.createElement("script")).src=e,i.onload=t,i.onerror=n,document.head.appendChild(i)})}function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}x.prototype.resize=function(){},x.prototype.onProgress=j,x.prototype.onInitProgress=function(e){return this.loaderText.textContent=e,e>=1},x.prototype.goOut=function(e){this.quoteTimer=!1,e()},x.prototype.bringIn=function(e){var t=this;y.playFx("SX_KO_LoadStart"),j.call(this,0);var n=new TimelineMax({paused:!0,onComplete:function(){oblio.app.mainMenu&&oblio.app.mainMenu.hide(!0),e()}.bind(this)}),i=0;this.elem.style.display="flex",window.requestAnimationFrame(function(){return t.elem.style.opacity=1}),n.fromTo(this.icon,.5,{y:"25%",alpha:0},{y:"0%",alpha:1},i),i+=.1,n.fromTo(this.tt,.5,{y:"25%",alpha:0},{y:"0%",alpha:1},i),i+=.1,n.fromTo(this.releaseDate,.5,{y:"25%",alpha:0},{y:"0%",alpha:1},i),i+=.1,n.fromTo(this.fresh,.5,{y:"15%",alpha:0},{y:"0%",alpha:1},i),i+=.1,n.fromTo(this.quotes_wrapper,.5,{y:"25%",alpha:0},{y:"0%",alpha:1},i),i+=.1,n.fromTo(this.loaderText,.5,{y:"25%",alpha:0},{y:"0%",alpha:1},i),n.play(),this.time=Date.now(),this.quoteTimer=!0,window.requestAnimationFrame(b.bind(this))},x.prototype.hide=function(){var e=this;return new Promise(function(t,n){y.playFx("SX_KO_LoadEnd");var i=new a({paused:!0,onComplete:function(){t()}}),r=0,o=Power2.easeIn,s=e.tt.getBoundingClientRect().height,l=.75*s;i.fromTo(e.loaderText,.5,{y:"0%",alpha:1},{y:"".concat(l/s*100,"%"),alpha:0,ease:o},r),r+=.075,i.fromTo(e.quotes_wrapper,.5,{y:"0%",alpha:1},{y:"".concat(l/s*100,"%"),alpha:0,ease:o},r),r+=.15,i.fromTo(e.fresh,.5,{y:"0%",alpha:1},{y:"".concat(l/s*100,"%"),alpha:0,ease:o},r),r+=.15,i.fromTo(e.releaseDate,.5,{y:"0%",alpha:1},{y:"".concat(l/s*100,"%"),alpha:0,ease:o},r),r+=.15,i.fromTo(e.tt,.5,{y:"0%",alpha:1},{y:"".concat(l/s*100,"%"),alpha:0,ease:o},r),r+=.15,i.fromTo(e.icon,.5,{y:"0%",alpha:1},{y:"".concat(l/s*100,"%"),alpha:0,ease:o},r),i.play()})};var M,T=o(null,"SectionLoader"),P=!0;var L={sections:[],currentlyLoadingIDs:[],filesToLoad:[],filesLoaded:0,loader:null,loadedUrls:{},files:{}};function E(e,t){var n=D(e);if(n.files=n.files||[],"string"==typeof t)n.files.push(t);else for(var i=t.length-1;i>=0;i--)n.files.push(t[i])}function O(e){return L.sections.filter(function(t){return t.id===e}).length>0}function I(e){var t,n=e.widgets,i=[];if(!n||0===n.length)return[];for(var r=n.length-1;r>=0;r--)if(t=R.returnSectionOBJ(n[r])){-1===i.indexOf(n[r])&&i.push(n[r]);for(var o=I(t),s=o.length-1;s>=0;s--)-1===i.indexOf(o[s])&&i.push(o[s])}return i}function C(e,t,n){if(L.files[e])n(L.files[e]);else{if(oblio.settings.useJSONP){var i,r="jsonp_callback_"+Math.round(1e5*Math.random());return window[r]=function(t){delete window[r],document.body.removeChild(i),L.files[e]=t,n(t)},(i=document.createElement("script")).src=oblio.settings.assetsUrl+"php/jsonp.php?filename="+encodeURIComponent("../"+e)+"&type="+t+"&callback="+r,void document.body.appendChild(i)}!function(e,t){var n=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");n.open("GET",e),n.onreadystatechange=function(){n.readyState>3&&200==n.status&&t(n)},n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.send()}(oblio.settings.assetsUrl+e,function(t){switch(t.readyState){case 0:case 1:case 2:case 3:break;case 4:200===t.status&&(L.files[e]=t.responseText,n(t.responseText))}}.bind(this))}}function F(e){return function(t){t&&(L.files[e]=t),L.filesLoaded++,R.checkComplete()}}function N(e,t){if(L.loadedUrls[e])t&&t();else{L.loadedUrls[e]=e;var n=new Image;n.addEventListener("load",function(){this.verbose,t&&t()}.bind(this)),n.addEventListener("error",this.fileError),n.src=e}}function k(e){var t=D(e);return L.sections.filter(function(t){return t.id===e}).reduce(function(t,n){L.files[n.templatePath],n.partials.reduce(function(e,n){var i=D(n);return t.data[n]=i.data,e},{});return t.template=e,t.partials=n.partials,t},t)}function D(e){for(var t=L.sections.length;t--;)if(L.sections[t].id===e)return L.sections[t];throw"No section with id: "+e}var R={verbose:!1,loadJSON:function(e,t){C.call(this,e,"json",function(e){"object"===A(e)&&(e=JSON.stringify(e)),e=(e=e.replace(/(\r\n|\n|\r)/gm,"")).replace(/\t/g,""),oblio.app.dataSrc=this.localizationJSON=JSON.parse(String(e)),this.setupWidgets.call(this),t&&t("Load JSON complete")}.bind(this))},setupWidgets:function(){for(var e in oblio.app.dataSrc.widgets){var t=oblio.app.dataSrc.widgets[e];"false"!==t.visible&&this.addSection(e,t)}},localizationJSON:{},addLoaderUI:function(e){this.verbose,L.loader=e},addSection:function(e,t){if(O(e))throw"SectionLoader | addSection: section id "+e+" already exists";M.verbose,t.data=t.data||{},t.data.base=oblio.settings.assetsUrl||"";var n={id:e,data:t.data,loaded:!1};t.widgets&&(n.widgets=t.widgets),t.files&&(n.files=n.files||[],n.files=n.files.concat(t.files)),L.sections.push(n)},sectionExists:O,addFiles:E,loadSection:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.verbose,t.pop();var i,r=t.pop();if(null==t)throw"SectionLoader | this.loadSection: input not valid";1===t.length&&"all"===t[0]&&(t=L.sections.map(function(e){return e.id})),(i=t.map(function(e){if(O(e))return{scope:this,fn:this.initScrape,vars:[e]}}.bind(this))).push({scope:this,fn:this.loadFiles,vars:null}),r&&i.push({fn:r,vars:null}),T.execute(i)},initScrape:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t.shift(),r=this.returnSectionOBJ(i),o=t.pop(),s=t.pop();if(void 0===r&&o("SectionLoader | this.loadSection: section id "+i+" not found"),!0===r.loaded)return this.verbose,void o(!0);L.currentlyLoadingIDs.push(r.id),r.partials=I(r),r.template=i;var a={};if(r.partials)for(var l=r.partials.length-1;l>=0;l--)a[r.partials[l]]=oblio.templates[r.partials[l]];r=k(i);var u=oblio.templates[i];if(u&&(r.html=u.render(r.data,a)),P){for(var c,d=/<img [^>]*src="([^"]+)"[^>]*>/g,h=[];null!==(c=d.exec(r.html));)h.push(c[1]);E(i,h)}r.files&&(L.filesToLoad=L.filesToLoad.concat(r.files)),s()},isDuplicate:function(e){for(var t=L.imagesToLoad.length;t--;)if(L.imagesToLoad[t].url===e)return!0;for(var n=L.miscToLoad.length;n--;)if(L.miscToLoad[n].url===e)return!0;return!1},loadFiles:function(e,t){if(R.filesLoadedCallback=e,L.filesToLoad.length<1)return this.complete(),void(oblio.settings.prepreloader&&oblio.settings.prepreloader.goOut&&oblio.settings.prepreloader.goOut());var n=L.filesToLoad.length,i=L.filesToLoad;for(L.loader&&L.loader.bringIn();n--;){var r=i[n];if(r.indexOf(".gif")>0||r.indexOf(".jpg")>0||r.indexOf(".jpeg")>0||r.indexOf(".png")>0)N.call(this,r,F(r));else if(r.indexOf(".js")>0){var o=oblio.settings.jsUrl||"";if(L.loadedUrls[r])return void F(r)();L.loadedUrls[r]=r,S(o+r).then(F(r))}else C.call(this,r,"misc",F(r))}},getPerc:function(){var e=L.filesLoaded,t=L.filesToLoad.length;if(this.assetManager){var n=this.assetManager.getLoaded();e+=n.loaded,t+=n.total}return e/t},fileError:function(e){},checkComplete:function(){L.filesLoaded>=L.filesToLoad.length&&this.complete()},complete:function(){this.verbose;for(var e=L.currentlyLoadingIDs.length;e--;){var t=L.currentlyLoadingIDs[e];this.returnSectionOBJ(t).loaded=!0}L.currentlyLoadingIDs=[],L.filesToLoad=[],L.filesLoaded=0,L.loader&&!L.loader.finished?L.loader.complete(R.filesLoadedCallback):R.filesLoadedCallback()},returnSectionOBJ:D,getSectionData:k,getSectionTemplates:function(e){var t=D(e);return L.sections.reduce(function(t,n){if(n.id===e){var i=L.files[n.templatePath],r=n.partials.reduce(function(e,n){var i=D(n);return t.data.data[n]=i.data,e[n]=L.files[i.templatePath],e},{});t.template=i,t.partials=r}return t},{data:t})},getSectionLoaderState:function(){return L},loadImage:N,arrayExecuter:T,getWidgets:I,setPreloadImages:function(e){P=e}},z=function(){return M=M||Object.create(R)};n("../node_modules/OblioUtils/utils/polyfills/matches.js");function U(e,t){for(;e&&!e.matches(t);)e=e.parentElement;return e}var B,G=z(),V=function(){this.shellID="mainContent",this.verbose=!1,this.currentSection="",this.previous_section="",this.forceChange=!1,this.loadlist=[],this.arrayExecuter=o(null,"navigation"),this.active=!0,this.changeOrder=["load","section_add_next","section_init_next","section_hide_prev","section_shutdown_prev","section_startup_next","section_show_next"],window.onpopstate=H.bind(this)};function H(e){e.state&&this.changeSection(e.state.currentSection,e.state.currentSubSection,null,!0)}V.prototype.parseDeepLink=function(){var e,t=oblio.settings.homeSection||"Home",n=(oblio.settings.baseUrl,window.location.href.split("?")[0]);if(oblio.settings.baseUrl&&""!==oblio.settings.baseUrl&&!1!==oblio.settings.htaccess)e=n.replace(oblio.settings.baseUrl,"").split("/"),this.currentSection=""!==e[0]?e[0]:t,this.currentSubsection=e[1];else{var i=window.location.hash;i.match("#/")?(e=i.replace("#/","").split("/"),this.currentSection=e.length>0?e[0]:t,this.currentSubsection=e[1]):this.currentSection=t}},V.prototype.changeSection=function(e,t){var n=window.location.hash;if(e.match(/^#/)&&(e="Home"),this.active&&(this.currentSection!==e||this.forceChange)){if(oblio.app.mainMenu&&oblio.app.mainMenu.selectMenuItem(e),this.currentSection!==e&&(this.previous_section=this.currentSection),this.currentSection=e,this.currentSubsection="",!1!==oblio.settings.deeplinking&&window.history&&window.history.pushState&&""!==this.previous_section){var i={currentSection:this.currentSection,currentSubsection:this.currentSubsection};oblio.settings.baseUrl&&""!==oblio.settings.baseUrl&&!1!==oblio.settings.htaccess?window.innerHeight!==screen.height&&history.pushState(i,"","Home"==this.currentSection?oblio.settings.baseUrl:oblio.settings.baseUrl+this.currentSection+"/"+this.currentSubsection+n):window.innerHeight!==screen.height&&history.pushState(i,"","Home"==this.currentSection?oblio.settings.baseUrl:oblio.settings.baseUrl+"#/"+this.currentSection+"/"+this.currentSubsection)}this.loadQueue(e),this.arrayExecuter.execute(this.assembleChangeFunction(t)),this.forceChange=!1}},V.prototype.assembleChangeFunction=function(e){for(var t=[{fn:this.disable,scope:this,vars:null}],n=0;n<this.changeOrder.length;n++)switch(this.changeOrder[n]){case"load":t.push({fn:this.load,scope:this,vars:null});break;case"section_add_next":t.push({fn:this.section_add,scope:this,vars:[this.currentSection]});break;case"section_init_next":t.push({fn:this.section_init,scope:this,vars:[this.currentSection]});break;case"section_startup_next":t.push({fn:this.section_startup,scope:this,vars:[this.currentSection]});break;case"section_show_next":t.push({fn:this.section_show,scope:this,vars:[this.currentSection]});break;case"section_hide_prev":t.push({fn:this.section_hide,scope:this,vars:[this.previous_section]});break;case"section_shutdown_prev":t.push({fn:this.section_shutdown,scope:this,vars:[this.previous_section]});break;case"section_remove_prev":t.push({fn:this.section_remove,scope:this,vars:[this.previous_section]});break;default:"function"==typeof this.changeOrder[n]&&t.push({fn:this.changeOrder[n],scope:this,vars:[this.currentSection,this.previous_section]})}return t.push({fn:this.enable,scope:this,vars:null}),e&&t.push({fn:function(){e()},vars:null}),t},V.prototype.loadQueue=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var i=0;i<t.length;i++)this.verbose,G.sectionExists(t[i])&&this.loadlist.push(t[i]),oblio.sections[t[i]]&&this.section_prepareLoad(t[i])},V.prototype.load=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length>1&&"function"==typeof t[t.length-2]){t.pop();var i=t.pop()}t.length&&this.loadQueue(t);for(var r=0;r<t.length;r++)oblio.sections[this.currentSection].prepare&&oblio.sections[this.currentSection].prepare();var o=[{fn:G.loadSection,scope:G,vars:this.loadlist},{fn:this.load_done,scope:this,vars:[i]}];this.arrayExecuter.execute(o)},V.prototype.load_done=function(e){this.loadlist=[],e&&e()},V.prototype.section_prepareLoad=function(e){this.verbose,oblio.sections[e].prepare,oblio.sections[e].prepared||(oblio.sections[e].prepareLoad&&oblio.sections[e].prepareLoad(),oblio.sections[e].prepared=!0)},V.prototype.section_add=function(e,t){this.verbose,this.shell=this.shell||document.getElementById(this.shellID),oblio.sections[e]&&!oblio.sections[e].added?(oblio.sections[e].added=!0,oblio.sections[e].insert(this.shell).then(t)):t()},V.prototype.section_init=function(e,t){this.verbose,oblio.sections[e].initialized||(oblio.sections[e].initialized=!0,!oblio.sections[e].init)?t():oblio.sections[e].init(t)},V.prototype.section_startup=function(e,t){if(this.verbose,oblio.sections[e])if(oblio.sections[e].startup)oblio.sections[e].startup(t);else{var n=document.getElementById(e.toLowerCase());n&&(n.style.display="block"),t()}else t()},V.prototype.section_show=function(e,t){if(this.verbose,oblio.sections[e]&&oblio.sections[e].show)oblio.sections[e].show(t);else{var n=document.getElementById(e.toLowerCase());n&&(n.style.opacity=1,n.style.visibility="visible"),t()}},V.prototype.section_hide=function(e,t){if(this.verbose,oblio.sections[e])if(oblio.sections[e].hide)oblio.sections[e].hide(t);else{var n=document.getElementById(e.toLowerCase());n&&(n.style.display="none"),n.style.opacity=0,n.style.visibility="hidden",t()}else t()},V.prototype.section_shutdown=function(e,t){this.verbose,oblio.sections[e]&&oblio.sections[e].shutdown?oblio.sections[e].shutdown(t):t()},V.prototype.section_remove=function(e,t){if(this.verbose,oblio.sections[e]){if(oblio.sections[e].destroy&&(oblio.sections[e].destroy(),oblio.sections[e].initialized=!1),oblio.sections[e].added){oblio.sections[e].added=!1;var n=document.getElementById(e.toLowerCase());n.parentElement.removeChild(n)}t()}else t()},V.prototype.enable=function(e){this.verbose,this.active=!0,this.cover&&(this.cover.style.display="none"),e&&e()},V.prototype.disable=function(e){this.verbose,this.active=!1,this.cover&&(this.cover.style.display="block"),e&&e()},V.prototype.setShell=function(e){if(this.shell)throw"Shell already set!";if(this.shellID=e,this.shell=document.getElementById(e),null===this.shell)throw'Element with id of "'+e+'" does not exist.'};var X=function(){return B=B||new V};n("../node_modules/OblioUtils/classes/MenuPaginator.js");s.g._gsDefine("TweenMax",["core.Animation","core.SimpleTimeline","TweenLite"],function(){var e=function(e){var t,n=[],i=e.length;for(t=0;t!==i;n.push(e[t++]));return n},t=function(e,t,n){var i,r,o=e.cycle;for(i in o)r=o[i],e[i]="function"==typeof r?r(n,t[n],t):r[n%r.length];delete e.cycle},n=function(e){if("function"==typeof e)return e;var t="object"==typeof e?e:{each:e},n=t.ease,i=t.from||0,r=t.base||0,o={},s=isNaN(i),a=t.axis,l={center:.5,end:1}[i]||0;return function(e,u,c){var d,h,p,f,m,_,g,v,y,x=(c||t).length,b=o[x];if(!b){if(!(y="auto"===t.grid?0:(t.grid||[1/0])[0])){for(g=-1/0;g<(g=c[y++].getBoundingClientRect().left)&&y<x;);y--}for(b=o[x]=[],d=s?Math.min(y,x)*l-.5:i%y,h=s?x*l/y-.5:i/y|0,g=0,v=1/0,_=0;_<x;_++)p=_%y-d,f=h-(_/y|0),b[_]=m=a?Math.abs("y"===a?f:p):Math.sqrt(p*p+f*f),m>g&&(g=m),m<v&&(v=m);b.max=g-v,b.min=v,b.v=x=t.amount||t.each*(y>x?x-1:a?"y"===a?x/y:y:Math.max(y,x/y))||0,b.b=x<0?r-x:r}return x=(b[e]-b.min)/b.max,b.b+(n?n.getRatio(x):x)*b.v}},i=function(e,t,n){s.h.call(this,e,t,n),this._cycle=0,this._yoyo=!0===this.vars.yoyo||!!this.vars.yoyoEase,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._repeat&&this._uncache(!0),this.render=i.prototype.render},r=s.h._internals,o=r.isSelector,a=r.isArray,l=i.prototype=s.h.to({},.1,{}),u=[];i.version="2.1.3",l.constructor=i,l.kill()._gc=!1,i.killTweensOf=i.killDelayedCallsTo=s.h.killTweensOf,i.getTweensOf=s.h.getTweensOf,i.lagSmoothing=s.h.lagSmoothing,i.ticker=s.h.ticker,i.render=s.h.render,i.distribute=n,l.invalidate=function(){return this._yoyo=!0===this.vars.yoyo||!!this.vars.yoyoEase,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._yoyoEase=null,this._uncache(!0),s.h.prototype.invalidate.call(this)},l.updateTo=function(e,t){var n,i=this.ratio,r=this.vars.immediateRender||e.immediateRender;for(n in t&&this._startTime<this._timeline._time&&(this._startTime=this._timeline._time,this._uncache(!1),this._gc?this._enabled(!0,!1):this._timeline.insert(this,this._startTime-this._delay)),e)this.vars[n]=e[n];if(this._initted||r)if(t)this._initted=!1,r&&this.render(0,!0,!0);else if(this._gc&&this._enabled(!0,!1),this._notifyPluginsOfEnabled&&this._firstPT&&s.h._onPluginEvent("_onDisable",this),this._time/this._duration>.998){var o=this._totalTime;this.render(0,!0,!1),this._initted=!1,this.render(o,!0,!1)}else if(this._initted=!1,this._init(),this._time>0||r)for(var a,l=1/(1-i),u=this._firstPT;u;)a=u.s+u.c,u.c*=l,u.s=a-u.c,u=u._next;return this},l.render=function(e,t,n){this._initted||0===this._duration&&this.vars.repeat&&this.invalidate();var i,o,a,l,u,c,d,h,p,f=this._dirty?this.totalDuration():this._totalDuration,m=this._time,_=this._totalTime,g=this._cycle,v=this._duration,y=this._rawPrevTime;if(e>=f-1e-8&&e>=0?(this._totalTime=f,this._cycle=this._repeat,this._yoyo&&0!=(1&this._cycle)?(this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0):(this._time=v,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1),this._reversed||(i=!0,o="onComplete",n=n||this._timeline.autoRemoveChildren),0===v&&(this._initted||!this.vars.lazy||n)&&(this._startTime===this._timeline._duration&&(e=0),(y<0||e<=0&&e>=-1e-8||1e-8===y&&"isPause"!==this.data)&&y!==e&&(n=!0,y>1e-8&&(o="onReverseComplete")),this._rawPrevTime=h=!t||e||y===e?e:1e-8)):e<1e-8?(this._totalTime=this._time=this._cycle=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==_||0===v&&y>0)&&(o="onReverseComplete",i=this._reversed),e>-1e-8?e=0:e<0&&(this._active=!1,0===v&&(this._initted||!this.vars.lazy||n)&&(y>=0&&(n=!0),this._rawPrevTime=h=!t||e||y===e?e:1e-8)),this._initted||(n=!0)):(this._totalTime=this._time=e,0!==this._repeat&&(l=v+this._repeatDelay,this._cycle=this._totalTime/l>>0,0!==this._cycle&&this._cycle===this._totalTime/l&&_<=e&&this._cycle--,this._time=this._totalTime-this._cycle*l,this._yoyo&&0!=(1&this._cycle)&&(this._time=v-this._time,(p=this._yoyoEase||this.vars.yoyoEase)&&(this._yoyoEase||(!0!==p||this._initted?this._yoyoEase=p=!0===p?this._ease:p instanceof s.b?p:s.b.map[p]:(p=this.vars.ease,this._yoyoEase=p=p?p instanceof s.b?p:"function"==typeof p?new s.b(p,this.vars.easeParams):s.b.map[p]||s.h.defaultEase:s.h.defaultEase)),this.ratio=p?1-p.getRatio((v-this._time)/v):0)),this._time>v?this._time=v:this._time<0&&(this._time=0)),this._easeType&&!p?(u=this._time/v,(1===(c=this._easeType)||3===c&&u>=.5)&&(u=1-u),3===c&&(u*=2),1===(d=this._easePower)?u*=u:2===d?u*=u*u:3===d?u*=u*u*u:4===d&&(u*=u*u*u*u),this.ratio=1===c?1-u:2===c?u:this._time/v<.5?u/2:1-u/2):p||(this.ratio=this._ease.getRatio(this._time/v))),m!==this._time||n||g!==this._cycle){if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!n&&this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration))return this._time=m,this._totalTime=_,this._rawPrevTime=y,this._cycle=g,r.lazyTweens.push(this),void(this._lazy=[e,t]);!this._time||i||p?i&&this._ease._calcEnd&&!p&&(this.ratio=this._ease.getRatio(0===this._time?0:1)):this.ratio=this._ease.getRatio(this._time/v)}for(!1!==this._lazy&&(this._lazy=!1),this._active||!this._paused&&this._time!==m&&e>=0&&(this._active=!0),0===_&&(2===this._initted&&e>0&&this._init(),this._startAt&&(e>=0?this._startAt.render(e,!0,n):o||(o="_dummyGS")),this.vars.onStart&&(0===this._totalTime&&0!==v||t||this._callback("onStart"))),a=this._firstPT;a;)a.f?a.t[a.p](a.c*this.ratio+a.s):a.t[a.p]=a.c*this.ratio+a.s,a=a._next;this._onUpdate&&(e<0&&this._startAt&&this._startTime&&this._startAt.render(e,!0,n),t||(this._totalTime!==_||o)&&this._callback("onUpdate")),this._cycle!==g&&(t||this._gc||this.vars.onRepeat&&this._callback("onRepeat")),o&&(this._gc&&!n||(e<0&&this._startAt&&!this._onUpdate&&this._startTime&&this._startAt.render(e,!0,n),i&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!t&&this.vars[o]&&this._callback(o),0===v&&1e-8===this._rawPrevTime&&1e-8!==h&&(this._rawPrevTime=0)))}else _!==this._totalTime&&this._onUpdate&&(t||this._callback("onUpdate"))},i.to=function(e,t,n){return new i(e,t,n)},i.from=function(e,t,n){return n.runBackwards=!0,n.immediateRender=0!=n.immediateRender,new i(e,t,n)},i.fromTo=function(e,t,n,r){return r.startAt=n,r.immediateRender=0!=r.immediateRender&&0!=n.immediateRender,new i(e,t,r)},i.staggerTo=i.allTo=function(r,l,c,d,h,p,f){var m,_,g,v,y=[],x=n(c.stagger||d),b=c.cycle,w=(c.startAt||u).cycle;for(a(r)||("string"==typeof r&&(r=s.h.selector(r)||r),o(r)&&(r=e(r))),m=(r=r||[]).length-1,g=0;g<=m;g++){for(v in _={},c)_[v]=c[v];if(b&&(t(_,r,g),null!=_.duration&&(l=_.duration,delete _.duration)),w){for(v in w=_.startAt={},c.startAt)w[v]=c.startAt[v];t(_.startAt,r,g)}_.delay=x(g,r[g],r)+(_.delay||0),g===m&&h&&(_.onComplete=function(){c.onComplete&&c.onComplete.apply(c.onCompleteScope||this,arguments),h.apply(f||c.callbackScope||this,p||u)}),y[g]=new i(r[g],l,_)}return y},i.staggerFrom=i.allFrom=function(e,t,n,r,o,s,a){return n.runBackwards=!0,n.immediateRender=0!=n.immediateRender,i.staggerTo(e,t,n,r,o,s,a)},i.staggerFromTo=i.allFromTo=function(e,t,n,r,o,s,a,l){return r.startAt=n,r.immediateRender=0!=r.immediateRender&&0!=n.immediateRender,i.staggerTo(e,t,r,o,s,a,l)},i.delayedCall=function(e,t,n,r,o){return new i(t,0,{delay:e,onComplete:t,onCompleteParams:n,callbackScope:r,onReverseComplete:t,onReverseCompleteParams:n,immediateRender:!1,useFrames:o,overwrite:0})},i.set=function(e,t){return new i(e,0,t)},i.isTweening=function(e){return s.h.getTweensOf(e,!0).length>0};var c=function(e,t){for(var n=[],i=0,r=e._first;r;)r instanceof s.h?n[i++]=r:(t&&(n[i++]=r),i=(n=n.concat(c(r,t))).length),r=r._next;return n},d=i.getAllTweens=function(e){return c(s.a._rootTimeline,e).concat(c(s.a._rootFramesTimeline,e))};i.killAll=function(e,t,n,i){null==t&&(t=!0),null==n&&(n=!0);var r,o,a,l=d(0!=i),u=l.length,c=t&&n&&i;for(a=0;a<u;a++)o=l[a],(c||o instanceof s.e||(r=o.target===o.vars.onComplete)&&n||t&&!r)&&(e?o.totalTime(o._reversed?0:o.totalDuration()):o._enabled(!1,!1))},i.killChildTweensOf=function(t,n){if(null!=t){var l,u,c,d,h,p=r.tweenLookup;if("string"==typeof t&&(t=s.h.selector(t)||t),o(t)&&(t=e(t)),a(t))for(d=t.length;--d>-1;)i.killChildTweensOf(t[d],n);else{for(c in l=[],p)for(u=p[c].target.parentNode;u;)u===t&&(l=l.concat(p[c].tweens)),u=u.parentNode;for(h=l.length,d=0;d<h;d++)n&&l[d].totalTime(l[d].totalDuration()),l[d]._enabled(!1,!1)}}};var h=function(e,t,n,i){t=!1!==t,n=!1!==n;for(var r,o,a=d(i=!1!==i),l=t&&n&&i,u=a.length;--u>-1;)o=a[u],(l||o instanceof s.e||(r=o.target===o.vars.onComplete)&&n||t&&!r)&&o.paused(e)};return i.pauseAll=function(e,t,n){h(!0,e,t,n)},i.resumeAll=function(e,t,n){h(!1,e,t,n)},i.globalTimeScale=function(e){var t=s.a._rootTimeline,n=s.h.ticker.time;return arguments.length?(e=e||1e-8,t._startTime=n-(n-t._startTime)*t._timeScale/e,t=s.a._rootFramesTimeline,n=s.h.ticker.frame,t._startTime=n-(n-t._startTime)*t._timeScale/e,t._timeScale=s.a._rootTimeline._timeScale=e,e):t._timeScale},l.progress=function(e,t){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!=(1&this._cycle)?1-e:e)+this._cycle*(this._duration+this._repeatDelay),t):this.duration()?this._time/this._duration:this.ratio},l.totalProgress=function(e,t){return arguments.length?this.totalTime(this.totalDuration()*e,t):this._totalTime/this.totalDuration()},l.time=function(e,t){if(!arguments.length)return this._time;this._dirty&&this.totalDuration();var n=this._duration,i=this._cycle,r=i*(n+this._repeatDelay);return e>n&&(e=n),this.totalTime(this._yoyo&&1&i?n-e+r:this._repeat?e+r:e,t)},l.duration=function(e){return arguments.length?s.a.prototype.duration.call(this,e):this._duration},l.totalDuration=function(e){return arguments.length?-1===this._repeat?this:this.duration((e-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat,this._dirty=!1),this._totalDuration)},l.repeat=function(e){return arguments.length?(this._repeat=e,this._uncache(!0)):this._repeat},l.repeatDelay=function(e){return arguments.length?(this._repeatDelay=e,this._uncache(!0)):this._repeatDelay},l.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},i},!0);var W=s.i.TweenMax;s.g._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],function(){var e,t,n,i,r=function(){s.f.call(this,"css"),this._overwriteProps.length=0,this.setRatio=r.prototype.setRatio},o=s.g._gsDefine.globals,a={},l=r.prototype=new s.f("css");l.constructor=r,r.version="2.1.3",r.API=2,r.defaultTransformPerspective=0,r.defaultSkewType="compensated",r.defaultSmoothOrigin=!0,l="px",r.suffixMap={top:l,right:l,bottom:l,left:l,width:l,height:l,fontSize:l,padding:l,margin:l,perspective:l,lineHeight:""};var u,c,d,h,p,f,m,_,g=/(?:\-|\.|\b)(\d|\.|e\-)+/g,v=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,y=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,x=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b),?/gi,b=/(?![+-]?\d*\.?\d+|[+-]|e[+-]\d+)[^0-9]/g,w=/(?:\d|\-|\+|=|#|\.)*/g,j=/opacity *= *([^)]*)/i,S=/opacity:([^;]*)/i,A=/alpha\(opacity *=.+?\)/i,M=/^(rgb|hsl)/,T=/([A-Z])/g,P=/-([a-z])/gi,L=/(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,E=function(e,t){return t.toUpperCase()},O=/(?:Left|Right|Width)/i,I=/(M11|M12|M21|M22)=[\d\-\.e]+/gi,C=/progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,F=/,(?=[^\)]*(?:\(|$))/gi,N=/[\s,\(]/i,k=Math.PI/180,D=180/Math.PI,R={},z={style:{}},U=s.g.document||{createElement:function(){return z}},B=function(e,t){var n=U.createElementNS?U.createElementNS(t||"http://www.w3.org/1999/xhtml",e):U.createElement(e);return n.style?n:U.createElement(e)},G=B("div"),V=B("img"),H=r._internals={_specialProps:a},X=(s.g.navigator||{}).userAgent||"",W=function(){var e=X.indexOf("Android"),t=B("a");return d=-1!==X.indexOf("Safari")&&-1===X.indexOf("Chrome")&&(-1===e||parseFloat(X.substr(e+8,2))>3),p=d&&parseFloat(X.substr(X.indexOf("Version/")+8,2))<6,h=-1!==X.indexOf("Firefox"),(/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(X)||/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(X))&&(f=parseFloat(RegExp.$1)),!!t&&(t.style.cssText="top:1px;opacity:.55;",/^0.55/.test(t.style.opacity))}(),Y=function(e){return j.test("string"==typeof e?e:(e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?parseFloat(RegExp.$1)/100:1},q=function(e){s.g.console},Q="",J="",Z=function(e,t){var n,i,r=(t=t||G).style;if(void 0!==r[e])return e;for(e=e.charAt(0).toUpperCase()+e.substr(1),n=["O","Moz","ms","Ms","Webkit"],i=5;--i>-1&&void 0===r[n[i]+e];);return i>=0?(Q="-"+(J=3===i?"ms":n[i]).toLowerCase()+"-",J+e):null},K="undefined"!=typeof window?window:U.defaultView||{getComputedStyle:function(){}},$=function(e){return K.getComputedStyle(e)},ee=r.getStyle=function(e,t,n,i,r){var o;return W||"opacity"!==t?(!i&&e.style[t]?o=e.style[t]:(n=n||$(e))?o=n[t]||n.getPropertyValue(t)||n.getPropertyValue(t.replace(T,"-$1").toLowerCase()):e.currentStyle&&(o=e.currentStyle[t]),null==r||o&&"none"!==o&&"auto"!==o&&"auto auto"!==o?o:r):Y(e)},te=H.convertToPixels=function(e,t,n,i,o){if("px"===i||!i&&"lineHeight"!==t)return n;if("auto"===i||!n)return 0;var a,l,u,c=O.test(t),d=e,h=G.style,p=n<0,f=1===n;if(p&&(n=-n),f&&(n*=100),"lineHeight"!==t||i)if("%"===i&&-1!==t.indexOf("border"))a=n/100*(c?e.clientWidth:e.clientHeight);else{if(h.cssText="border:0 solid red;position:"+ee(e,"position")+";line-height:0;","%"!==i&&d.appendChild&&"v"!==i.charAt(0)&&"rem"!==i)h[c?"borderLeftWidth":"borderTopWidth"]=n+i;else{if(d=e.parentNode||U.body,-1!==ee(d,"display").indexOf("flex")&&(h.position="absolute"),l=d._gsCache,u=s.h.ticker.frame,l&&c&&l.time===u)return l.width*n/100;h[c?"width":"height"]=n+i}d.appendChild(G),a=parseFloat(G[c?"offsetWidth":"offsetHeight"]),d.removeChild(G),c&&"%"===i&&!1!==r.cacheWidths&&((l=d._gsCache=d._gsCache||{}).time=u,l.width=a/n*100),0!==a||o||(a=te(e,t,n,i,!0))}else l=$(e).lineHeight,e.style.lineHeight=n,a=parseFloat($(e).lineHeight),e.style.lineHeight=l;return f&&(a/=100),p?-a:a},ne=H.calculateOffset=function(e,t,n){if("absolute"!==ee(e,"position",n))return 0;var i="left"===t?"Left":"Top",r=ee(e,"margin"+i,n);return e["offset"+i]-(te(e,t,parseFloat(r),r.replace(w,""))||0)},ie=function(e,t){var n,i,r,o={};if(t=t||$(e))if(n=t.length)for(;--n>-1;)-1!==(r=t[n]).indexOf("-transform")&&Fe!==r||(o[r.replace(P,E)]=t.getPropertyValue(r));else for(n in t)-1!==n.indexOf("Transform")&&Ce!==n||(o[n]=t[n]);else if(t=e.currentStyle||e.style)for(n in t)"string"==typeof n&&void 0===o[n]&&(o[n.replace(P,E)]=t[n]);return W||(o.opacity=Y(e)),i=Ye(e,t,!1),o.rotation=i.rotation,o.skewX=i.skewX,o.scaleX=i.scaleX,o.scaleY=i.scaleY,o.x=i.x,o.y=i.y,ke&&(o.z=i.z,o.rotationX=i.rotationX,o.rotationY=i.rotationY,o.scaleZ=i.scaleZ),o.filters&&delete o.filters,o},re=function(e,t,n,i,r){var o,s,a,l={},u=e.style;for(s in n)"cssText"!==s&&"length"!==s&&isNaN(s)&&(t[s]!==(o=n[s])||r&&r[s])&&-1===s.indexOf("Origin")&&("number"!=typeof o&&"string"!=typeof o||(l[s]="auto"!==o||"left"!==s&&"top"!==s?""!==o&&"auto"!==o&&"none"!==o||"string"!=typeof t[s]||""===t[s].replace(b,"")?o:0:ne(e,s),void 0!==u[s]&&(a=new ye(u,s,u[s],a))));if(i)for(s in i)"className"!==s&&(l[s]=i[s]);return{difs:l,firstMPT:a}},oe={width:["Left","Right"],height:["Top","Bottom"]},se=["marginLeft","marginRight","marginTop","marginBottom"],ae=function(e,t,n){if("svg"===(e.nodeName+"").toLowerCase())return(n||$(e))[t]||0;if(e.getCTM&&He(e))return e.getBBox()[t]||0;var i=parseFloat("width"===t?e.offsetWidth:e.offsetHeight),r=oe[t],o=r.length;for(n=n||$(e);--o>-1;)i-=parseFloat(ee(e,"padding"+r[o],n,!0))||0,i-=parseFloat(ee(e,"border"+r[o]+"Width",n,!0))||0;return i},le=function(e,t){if("contain"===e||"auto"===e||"auto auto"===e)return e+" ";null!=e&&""!==e||(e="0 0");var n,i=e.split(" "),r=-1!==e.indexOf("left")?"0%":-1!==e.indexOf("right")?"100%":i[0],o=-1!==e.indexOf("top")?"0%":-1!==e.indexOf("bottom")?"100%":i[1];if(i.length>3&&!t){for(i=e.split(", ").join(",").split(","),e=[],n=0;n<i.length;n++)e.push(le(i[n]));return e.join(",")}return null==o?o="center"===r?"50%":"0":"center"===o&&(o="50%"),("center"===r||isNaN(parseFloat(r))&&-1===(r+"").indexOf("="))&&(r="50%"),e=r+" "+o+(i.length>2?" "+i[2]:""),t&&(t.oxp=-1!==r.indexOf("%"),t.oyp=-1!==o.indexOf("%"),t.oxr="="===r.charAt(1),t.oyr="="===o.charAt(1),t.ox=parseFloat(r.replace(b,"")),t.oy=parseFloat(o.replace(b,"")),t.v=e),t||e},ue=function(e,t){return"function"==typeof e&&(e=e(_,m)),"string"==typeof e&&"="===e.charAt(1)?parseInt(e.charAt(0)+"1",10)*parseFloat(e.substr(2)):parseFloat(e)-parseFloat(t)||0},ce=function(e,t){"function"==typeof e&&(e=e(_,m));var n="string"==typeof e&&"="===e.charAt(1);return"string"==typeof e&&"v"===e.charAt(e.length-2)&&(e=(n?e.substr(0,2):0)+window["inner"+("vh"===e.substr(-2)?"Height":"Width")]*(parseFloat(n?e.substr(2):e)/100)),null==e?t:n?parseInt(e.charAt(0)+"1",10)*parseFloat(e.substr(2))+t:parseFloat(e)||0},de=function(e,t,n,i){var r,o,s,a;return"function"==typeof e&&(e=e(_,m)),null==e?s=t:"number"==typeof e?s=e:(360,r=e.split("_"),o=((a="="===e.charAt(1))?parseInt(e.charAt(0)+"1",10)*parseFloat(r[0].substr(2)):parseFloat(r[0]))*(-1===e.indexOf("rad")?1:D)-(a?0:t),r.length&&(i&&(i[n]=t+o),-1!==e.indexOf("short")&&(o%=360)!==o%180&&(o=o<0?o+360:o-360),-1!==e.indexOf("_cw")&&o<0?o=(o+3599999999640)%360-360*(o/360|0):-1!==e.indexOf("ccw")&&o>0&&(o=(o-3599999999640)%360-360*(o/360|0))),s=t+o),s<1e-6&&s>-1e-6&&(s=0),s},he={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},pe=function(e,t,n){return 255*(6*(e=e<0?e+1:e>1?e-1:e)<1?t+(n-t)*e*6:e<.5?n:3*e<2?t+(n-t)*(2/3-e)*6:t)+.5|0},fe=r.parseColor=function(e,t){var n,i,r,o,s,a,l,u,c,d,h;if(e)if("number"==typeof e)n=[e>>16,e>>8&255,255&e];else{if(","===e.charAt(e.length-1)&&(e=e.substr(0,e.length-1)),he[e])n=he[e];else if("#"===e.charAt(0))4===e.length&&(i=e.charAt(1),r=e.charAt(2),o=e.charAt(3),e="#"+i+i+r+r+o+o),n=[(e=parseInt(e.substr(1),16))>>16,e>>8&255,255&e];else if("hsl"===e.substr(0,3))if(n=h=e.match(g),t){if(-1!==e.indexOf("="))return e.match(v)}else s=Number(n[0])%360/360,a=Number(n[1])/100,i=2*(l=Number(n[2])/100)-(r=l<=.5?l*(a+1):l+a-l*a),n.length>3&&(n[3]=Number(n[3])),n[0]=pe(s+1/3,i,r),n[1]=pe(s,i,r),n[2]=pe(s-1/3,i,r);else n=e.match(g)||he.transparent;n[0]=Number(n[0]),n[1]=Number(n[1]),n[2]=Number(n[2]),n.length>3&&(n[3]=Number(n[3]))}else n=he.black;return t&&!h&&(i=n[0]/255,r=n[1]/255,o=n[2]/255,l=((u=Math.max(i,r,o))+(c=Math.min(i,r,o)))/2,u===c?s=a=0:(d=u-c,a=l>.5?d/(2-u-c):d/(u+c),s=u===i?(r-o)/d+(r<o?6:0):u===r?(o-i)/d+2:(i-r)/d+4,s*=60),n[0]=s+.5|0,n[1]=100*a+.5|0,n[2]=100*l+.5|0),n},me=function(e,t){var n,i,r,o=e.match(_e)||[],s=0,a="";if(!o.length)return e;for(n=0;n<o.length;n++)i=o[n],s+=(r=e.substr(s,e.indexOf(i,s)-s)).length+i.length,3===(i=fe(i,t)).length&&i.push(1),a+=r+(t?"hsla("+i[0]+","+i[1]+"%,"+i[2]+"%,"+i[3]:"rgba("+i.join(","))+")";return a+e.substr(s)},_e="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3}){1,2}\\b";for(l in he)_e+="|"+l+"\\b";_e=new RegExp(_e+")","gi"),r.colorStringFilter=function(e){var t,n=e[0]+" "+e[1];_e.test(n)&&(t=-1!==n.indexOf("hsl(")||-1!==n.indexOf("hsla("),e[0]=me(e[0],t),e[1]=me(e[1],t)),_e.lastIndex=0},s.h.defaultStringFilter||(s.h.defaultStringFilter=r.colorStringFilter);var ge=function(e,t,n,i){if(null==e)return function(e){return e};var r,o=t?(e.match(_e)||[""])[0]:"",s=e.split(o).join("").match(y)||[],a=e.substr(0,e.indexOf(s[0])),l=")"===e.charAt(e.length-1)?")":"",u=-1!==e.indexOf(" ")?" ":",",c=s.length,d=c>0?s[0].replace(g,""):"";return c?r=t?function(e){var t,h,p,f;if("number"==typeof e)e+=d;else if(i&&F.test(e)){for(f=e.replace(F,"|").split("|"),p=0;p<f.length;p++)f[p]=r(f[p]);return f.join(",")}if(t=(e.match(_e)||[o])[0],p=(h=e.split(t).join("").match(y)||[]).length,c>p--)for(;++p<c;)h[p]=n?h[(p-1)/2|0]:s[p];return a+h.join(u)+u+t+l+(-1!==e.indexOf("inset")?" inset":"")}:function(e){var t,o,h;if("number"==typeof e)e+=d;else if(i&&F.test(e)){for(o=e.replace(F,"|").split("|"),h=0;h<o.length;h++)o[h]=r(o[h]);return o.join(",")}if(h=(t=e.match(","===u?y:x)||[]).length,c>h--)for(;++h<c;)t[h]=n?t[(h-1)/2|0]:s[h];return(a&&"none"!==e&&e.substr(0,e.indexOf(t[0]))||a)+t.join(u)+l}:function(e){return e}},ve=function(e){return e=e.split(","),function(t,n,i,r,o,s,a){var l,u=(n+"").split(" ");for(a={},l=0;l<4;l++)a[e[l]]=u[l]=u[l]||u[(l-1)/2>>0];return r.parse(t,a,o,s)}},ye=(H._setPluginRatio=function(e){this.plugin.setRatio(e);for(var t,n,i,r,o,s=this.data,a=s.proxy,l=s.firstMPT;l;)t=a[l.v],l.r?t=l.r(t):t<1e-6&&t>-1e-6&&(t=0),l.t[l.p]=t,l=l._next;if(s.autoRotate&&(s.autoRotate.rotation=s.mod?s.mod.call(this._tween,a.rotation,this.t,this._tween):a.rotation),1===e||0===e)for(l=s.firstMPT,o=1===e?"e":"b";l;){if((n=l.t).type){if(1===n.type){for(r=n.xs0+n.s+n.xs1,i=1;i<n.l;i++)r+=n["xn"+i]+n["xs"+(i+1)];n[o]=r}}else n[o]=n.s+n.xs0;l=l._next}},function(e,t,n,i,r){this.t=e,this.p=t,this.v=n,this.r=r,i&&(i._prev=this,this._next=i)}),xe=(H._parseToProxy=function(e,t,n,i,r,o){var s,a,l,u,c,d=i,h={},p={},f=n._transform,m=R;for(n._transform=null,R=t,i=c=n.parse(e,t,i,r),R=m,o&&(n._transform=f,d&&(d._prev=null,d._prev&&(d._prev._next=null)));i&&i!==d;){if(i.type<=1&&(p[a=i.p]=i.s+i.c,h[a]=i.s,o||(u=new ye(i,"s",a,u,i.r),i.c=0),1===i.type))for(s=i.l;--s>0;)l="xn"+s,p[a=i.p+"_"+l]=i.data[l],h[a]=i[l],o||(u=new ye(i,l,a,u,i.rxp[l]));i=i._next}return{proxy:h,end:p,firstMPT:u,pt:c}},H.CSSPropTween=function(t,n,r,o,s,a,l,u,c,d,h){this.t=t,this.p=n,this.s=r,this.c=o,this.n=l||n,t instanceof xe||i.push(this.n),this.r=u?"function"==typeof u?u:Math.round:u,this.type=a||0,c&&(this.pr=c,e=!0),this.b=void 0===d?r:d,this.e=void 0===h?r+o:h,s&&(this._next=s,s._prev=this)}),be=function(e,t,n,i,r,o){var s=new xe(e,t,n,i-n,r,-1,o);return s.b=n,s.e=s.xs0=i,s},we=r.parseComplex=function(e,t,n,i,o,s,a,l,c,d){n=n||s||"","function"==typeof i&&(i=i(_,m)),a=new xe(e,t,0,0,a,d?2:1,null,!1,l,n,i),i+="",o&&_e.test(i+n)&&(i=[n,i],r.colorStringFilter(i),n=i[0],i=i[1]);var h,p,f,y,x,b,w,j,S,A,M,T,P,L=n.split(", ").join(",").split(" "),E=i.split(", ").join(",").split(" "),O=L.length,I=!1!==u;for(-1===i.indexOf(",")&&-1===n.indexOf(",")||(-1!==(i+n).indexOf("rgb")||-1!==(i+n).indexOf("hsl")?(L=L.join(" ").replace(F,", ").split(" "),E=E.join(" ").replace(F,", ").split(" ")):(L=L.join(" ").split(",").join(", ").split(" "),E=E.join(" ").split(",").join(", ").split(" ")),O=L.length),O!==E.length&&(O=(L=(s||"").split(" ")).length),a.plugin=c,a.setRatio=d,_e.lastIndex=0,h=0;h<O;h++)if(y=L[h],x=E[h]+"",(j=parseFloat(y))||0===j)a.appendXtra("",j,ue(x,j),x.replace(v,""),!(!I||-1===x.indexOf("px"))&&Math.round,!0);else if(o&&_e.test(y))T=")"+((T=x.indexOf(")")+1)?x.substr(T):""),P=-1!==x.indexOf("hsl")&&W,A=x,y=fe(y,P),x=fe(x,P),(S=y.length+x.length>6)&&!W&&0===x[3]?(a["xs"+a.l]+=a.l?" transparent":"transparent",a.e=a.e.split(E[h]).join("transparent")):(W||(S=!1),P?a.appendXtra(A.substr(0,A.indexOf("hsl"))+(S?"hsla(":"hsl("),y[0],ue(x[0],y[0]),",",!1,!0).appendXtra("",y[1],ue(x[1],y[1]),"%,",!1).appendXtra("",y[2],ue(x[2],y[2]),S?"%,":"%"+T,!1):a.appendXtra(A.substr(0,A.indexOf("rgb"))+(S?"rgba(":"rgb("),y[0],x[0]-y[0],",",Math.round,!0).appendXtra("",y[1],x[1]-y[1],",",Math.round).appendXtra("",y[2],x[2]-y[2],S?",":T,Math.round),S&&(y=y.length<4?1:y[3],a.appendXtra("",y,(x.length<4?1:x[3])-y,T,!1))),_e.lastIndex=0;else if(b=y.match(g)){if(!(w=x.match(v))||w.length!==b.length)return a;for(f=0,p=0;p<b.length;p++)M=b[p],A=y.indexOf(M,f),a.appendXtra(y.substr(f,A-f),Number(M),ue(w[p],M),"",!(!I||"px"!==y.substr(A+M.length,2))&&Math.round,0===p),f=A+M.length;a["xs"+a.l]+=y.substr(f)}else a["xs"+a.l]+=a.l||a["xs"+a.l]?" "+x:x;if(-1!==i.indexOf("=")&&a.data){for(T=a.xs0+a.data.s,h=1;h<a.l;h++)T+=a["xs"+h]+a.data["xn"+h];a.e=T+a["xs"+h]}return a.l||(a.type=-1,a.xs0=a.e),a.xfirst||a},je=9;for((l=xe.prototype).l=l.pr=0;--je>0;)l["xn"+je]=0,l["xs"+je]="";l.xs0="",l._next=l._prev=l.xfirst=l.data=l.plugin=l.setRatio=l.rxp=null,l.appendXtra=function(e,t,n,i,r,o){var s=this,a=s.l;return s["xs"+a]+=o&&(a||s["xs"+a])?" "+e:e||"",n||0===a||s.plugin?(s.l++,s.type=s.setRatio?2:1,s["xs"+s.l]=i||"",a>0?(s.data["xn"+a]=t+n,s.rxp["xn"+a]=r,s["xn"+a]=t,s.plugin||(s.xfirst=new xe(s,"xn"+a,t,n,s.xfirst||s,0,s.n,r,s.pr),s.xfirst.xs0=0),s):(s.data={s:t+n},s.rxp={},s.s=t,s.c=n,s.r=r,s)):(s["xs"+a]+=t+(i||""),s)};var Se=function(e,t){t=t||{},this.p=t.prefix&&Z(e)||e,a[e]=a[this.p]=this,this.format=t.formatter||ge(t.defaultValue,t.color,t.collapsible,t.multi),t.parser&&(this.parse=t.parser),this.clrs=t.color,this.multi=t.multi,this.keyword=t.keyword,this.dflt=t.defaultValue,this.allowFunc=t.allowFunc,this.pr=t.priority||0},Ae=H._registerComplexSpecialProp=function(e,t,n){"object"!=typeof t&&(t={parser:n});var i,r=e.split(","),o=t.defaultValue;for(n=n||[o],i=0;i<r.length;i++)t.prefix=0===i&&t.prefix,t.defaultValue=n[i]||o,new Se(r[i],t)},Me=H._registerPluginProp=function(e){if(!a[e]){var t=e.charAt(0).toUpperCase()+e.substr(1)+"Plugin";Ae(e,{parser:function(e,n,i,r,s,l,u){var c=o.com.greensock.plugins[t];return c?(c._cssRegister(),a[i].parse(e,n,i,r,s,l,u)):(q(),s)}})}};(l=Se.prototype).parseComplex=function(e,t,n,i,r,o){var s,a,l,u,c,d,h=this.keyword;if(this.multi&&(F.test(n)||F.test(t)?(a=t.replace(F,"|").split("|"),l=n.replace(F,"|").split("|")):h&&(a=[t],l=[n])),l){for(u=l.length>a.length?l.length:a.length,s=0;s<u;s++)t=a[s]=a[s]||this.dflt,n=l[s]=l[s]||this.dflt,h&&(c=t.indexOf(h))!==(d=n.indexOf(h))&&(-1===d?a[s]=a[s].split(h).join(""):-1===c&&(a[s]+=" "+h));t=a.join(", "),n=l.join(", ")}return we(e,this.p,t,n,this.clrs,this.dflt,i,this.pr,r,o)},l.parse=function(e,t,i,r,o,s,a){return this.parseComplex(e.style,this.format(ee(e,this.p,n,!1,this.dflt)),this.format(t),o,s)},r.registerSpecialProp=function(e,t,n){Ae(e,{parser:function(e,i,r,o,s,a,l){var u=new xe(e,r,0,0,s,2,r,!1,n);return u.plugin=a,u.setRatio=t(e,i,o._tween,r),u},priority:n})},r.useSVGTransformAttr=!0;var Te,Pe,Le,Ee,Oe,Ie="scaleX,scaleY,scaleZ,x,y,z,skewX,skewY,rotation,rotationX,rotationY,perspective,xPercent,yPercent".split(","),Ce=Z("transform"),Fe=Q+"transform",Ne=Z("transformOrigin"),ke=null!==Z("perspective"),De=H.Transform=function(){this.perspective=parseFloat(r.defaultTransformPerspective)||0,this.force3D=!(!1===r.defaultForce3D||!ke)&&(r.defaultForce3D||"auto")},Re=s.g.SVGElement,ze=function(e,t,n){var i,r=U.createElementNS("http://www.w3.org/2000/svg",e),o=/([a-z])([A-Z])/g;for(i in n)r.setAttributeNS(null,i.replace(o,"$1-$2").toLowerCase(),n[i]);return t.appendChild(r),r},Ue=U.documentElement||{},Be=(Oe=f||/Android/i.test(X)&&!s.g.chrome,U.createElementNS&&Ue.appendChild&&!Oe&&(Pe=ze("svg",Ue),Ee=(Le=ze("rect",Pe,{width:100,height:50,x:100})).getBoundingClientRect().width,Le.style[Ne]="50% 50%",Le.style[Ce]="scaleX(0.5)",Oe=Ee===Le.getBoundingClientRect().width&&!(h&&ke),Ue.removeChild(Pe)),Oe),Ge=function(e,t,n,i,o,s){var a,l,u,c,d,h,p,f,m,_,g,v,y,x,b=e._gsTransform,w=We(e,!0);b&&(y=b.xOrigin,x=b.yOrigin),(!i||(a=i.split(" ")).length<2)&&(0===(p=e.getBBox()).x&&0===p.y&&p.width+p.height===0&&(p={x:parseFloat(e.hasAttribute("x")?e.getAttribute("x"):e.hasAttribute("cx")?e.getAttribute("cx"):0)||0,y:parseFloat(e.hasAttribute("y")?e.getAttribute("y"):e.hasAttribute("cy")?e.getAttribute("cy"):0)||0,width:0,height:0}),a=[(-1!==(t=le(t).split(" "))[0].indexOf("%")?parseFloat(t[0])/100*p.width:parseFloat(t[0]))+p.x,(-1!==t[1].indexOf("%")?parseFloat(t[1])/100*p.height:parseFloat(t[1]))+p.y]),n.xOrigin=c=parseFloat(a[0]),n.yOrigin=d=parseFloat(a[1]),i&&w!==Xe&&(h=w[0],p=w[1],f=w[2],m=w[3],_=w[4],g=w[5],(v=h*m-p*f)&&(l=c*(m/v)+d*(-f/v)+(f*g-m*_)/v,u=c*(-p/v)+d*(h/v)-(h*g-p*_)/v,c=n.xOrigin=a[0]=l,d=n.yOrigin=a[1]=u)),b&&(s&&(n.xOffset=b.xOffset,n.yOffset=b.yOffset,b=n),o||!1!==o&&!1!==r.defaultSmoothOrigin?(l=c-y,u=d-x,b.xOffset+=l*w[0]+u*w[2]-l,b.yOffset+=l*w[1]+u*w[3]-u):b.xOffset=b.yOffset=0),s||e.setAttribute("data-svg-origin",a.join(" "))},Ve=function(e){var t,n=B("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=this.parentNode,r=this.nextSibling,o=this.style.cssText;if(Ue.appendChild(n),n.appendChild(this),this.style.display="block",e)try{t=this.getBBox(),this._originalGetBBox=this.getBBox,this.getBBox=Ve}catch(e){}else this._originalGetBBox&&(t=this._originalGetBBox());return r?i.insertBefore(this,r):i.appendChild(this),Ue.removeChild(n),this.style.cssText=o,t},He=function(e){return!(!Re||!e.getCTM||e.parentNode&&!e.ownerSVGElement||!function(e){try{return e.getBBox()}catch(t){return Ve.call(e,!0)}}(e))},Xe=[1,0,0,1,0,0],We=function(e,t){var n,i,r,o,s,a,l,u=e._gsTransform||new De,c=e.style;if(Ce?i=ee(e,Fe,null,!0):e.currentStyle&&(i=(i=e.currentStyle.filter.match(I))&&4===i.length?[i[0].substr(4),Number(i[2].substr(4)),Number(i[1].substr(4)),i[3].substr(4),u.x||0,u.y||0].join(","):""),n=!i||"none"===i||"matrix(1, 0, 0, 1, 0, 0)"===i,Ce&&n&&!e.offsetParent&&e!==Ue&&(o=c.display,c.display="block",(l=e.parentNode)&&e.offsetParent||(s=1,a=e.nextSibling,Ue.appendChild(e)),n=!(i=ee(e,Fe,null,!0))||"none"===i||"matrix(1, 0, 0, 1, 0, 0)"===i,o?c.display=o:Ze(c,"display"),s&&(a?l.insertBefore(e,a):l?l.appendChild(e):Ue.removeChild(e))),(u.svg||e.getCTM&&He(e))&&(n&&-1!==(c[Ce]+"").indexOf("matrix")&&(i=c[Ce],n=0),r=e.getAttribute("transform"),n&&r&&(i="matrix("+(r=e.transform.baseVal.consolidate().matrix).a+","+r.b+","+r.c+","+r.d+","+r.e+","+r.f+")",n=0)),n)return Xe;for(r=(i||"").match(g)||[],je=r.length;--je>-1;)o=Number(r[je]),r[je]=(s=o-(o|=0))?(1e5*s+(s<0?-.5:.5)|0)/1e5+o:o;return t&&r.length>6?[r[0],r[1],r[4],r[5],r[12],r[13]]:r},Ye=H.getTransform=function(e,t,n,i){if(e._gsTransform&&n&&!i)return e._gsTransform;var o,a,l,u,c,d,h=n&&e._gsTransform||new De,p=h.scaleX<0,f=ke&&(parseFloat(ee(e,Ne,t,!1,"0 0 0").split(" ")[2])||h.zOrigin)||0,m=parseFloat(r.defaultTransformPerspective)||0;if(h.svg=!(!e.getCTM||!He(e)),h.svg&&(Ge(e,ee(e,Ne,t,!1,"50% 50%")+"",h,e.getAttribute("data-svg-origin")),Te=r.useSVGTransformAttr||Be),(o=We(e))!==Xe){if(16===o.length){var _,g,v,y,x,b=o[0],w=o[1],j=o[2],S=o[3],A=o[4],M=o[5],T=o[6],P=o[7],L=o[8],E=o[9],O=o[10],I=o[12],C=o[13],F=o[14],N=o[11],k=Math.atan2(T,O);h.zOrigin&&(I=L*(F=-h.zOrigin)-o[12],C=E*F-o[13],F=O*F+h.zOrigin-o[14]),h.rotationX=k*D,k&&(_=A*(y=Math.cos(-k))+L*(x=Math.sin(-k)),g=M*y+E*x,v=T*y+O*x,L=A*-x+L*y,E=M*-x+E*y,O=T*-x+O*y,N=P*-x+N*y,A=_,M=g,T=v),k=Math.atan2(-j,O),h.rotationY=k*D,k&&(g=w*(y=Math.cos(-k))-E*(x=Math.sin(-k)),v=j*y-O*x,E=w*x+E*y,O=j*x+O*y,N=S*x+N*y,b=_=b*y-L*x,w=g,j=v),k=Math.atan2(w,b),h.rotation=k*D,k&&(_=b*(y=Math.cos(k))+w*(x=Math.sin(k)),g=A*y+M*x,v=L*y+E*x,w=w*y-b*x,M=M*y-A*x,E=E*y-L*x,b=_,A=g,L=v),h.rotationX&&Math.abs(h.rotationX)+Math.abs(h.rotation)>359.9&&(h.rotationX=h.rotation=0,h.rotationY=180-h.rotationY),k=Math.atan2(A,M),h.scaleX=(1e5*Math.sqrt(b*b+w*w+j*j)+.5|0)/1e5,h.scaleY=(1e5*Math.sqrt(M*M+T*T)+.5|0)/1e5,h.scaleZ=(1e5*Math.sqrt(L*L+E*E+O*O)+.5|0)/1e5,b/=h.scaleX,A/=h.scaleY,w/=h.scaleX,M/=h.scaleY,Math.abs(k)>2e-5?(h.skewX=k*D,A=0,"simple"!==h.skewType&&(h.scaleY*=1/Math.cos(k))):h.skewX=0,h.perspective=N?1/(N<0?-N:N):0,h.x=I,h.y=C,h.z=F,h.svg&&(h.x-=h.xOrigin-(h.xOrigin*b-h.yOrigin*A),h.y-=h.yOrigin-(h.yOrigin*w-h.xOrigin*M))}else if(!ke||i||!o.length||h.x!==o[4]||h.y!==o[5]||!h.rotationX&&!h.rotationY){var R=o.length>=6,z=R?o[0]:1,U=o[1]||0,B=o[2]||0,G=R?o[3]:1;h.x=o[4]||0,h.y=o[5]||0,l=Math.sqrt(z*z+U*U),u=Math.sqrt(G*G+B*B),c=z||U?Math.atan2(U,z)*D:h.rotation||0,d=B||G?Math.atan2(B,G)*D+c:h.skewX||0,h.scaleX=l,h.scaleY=u,h.rotation=c,h.skewX=d,ke&&(h.rotationX=h.rotationY=h.z=0,h.perspective=m,h.scaleZ=1),h.svg&&(h.x-=h.xOrigin-(h.xOrigin*z+h.yOrigin*B),h.y-=h.yOrigin-(h.xOrigin*U+h.yOrigin*G))}for(a in Math.abs(h.skewX)>90&&Math.abs(h.skewX)<270&&(p?(h.scaleX*=-1,h.skewX+=h.rotation<=0?180:-180,h.rotation+=h.rotation<=0?180:-180):(h.scaleY*=-1,h.skewX+=h.skewX<=0?180:-180)),h.zOrigin=f,h)h[a]<2e-5&&h[a]>-2e-5&&(h[a]=0)}return n&&(e._gsTransform=h,h.svg&&(Te&&e.style[Ce]?s.h.delayedCall(.001,function(){Ze(e.style,Ce)}):!Te&&e.getAttribute("transform")&&s.h.delayedCall(.001,function(){e.removeAttribute("transform")}))),h},qe=function(e){var t,n,i=this.data,r=-i.rotation*k,o=r+i.skewX*k,s=(Math.cos(r)*i.scaleX*1e5|0)/1e5,a=(Math.sin(r)*i.scaleX*1e5|0)/1e5,l=(Math.sin(o)*-i.scaleY*1e5|0)/1e5,u=(Math.cos(o)*i.scaleY*1e5|0)/1e5,c=this.t.style,d=this.t.currentStyle;if(d){n=a,a=-l,l=-n,t=d.filter,c.filter="";var h,p,m=this.t.offsetWidth,_=this.t.offsetHeight,g="absolute"!==d.position,v="progid:DXImageTransform.Microsoft.Matrix(M11="+s+", M12="+a+", M21="+l+", M22="+u,y=i.x+m*i.xPercent/100,x=i.y+_*i.yPercent/100;if(null!=i.ox&&(y+=(h=(i.oxp?m*i.ox*.01:i.ox)-m/2)-(h*s+(p=(i.oyp?_*i.oy*.01:i.oy)-_/2)*a),x+=p-(h*l+p*u)),v+=g?", Dx="+((h=m/2)-(h*s+(p=_/2)*a)+y)+", Dy="+(p-(h*l+p*u)+x)+")":", sizingMethod='auto expand')",-1!==t.indexOf("DXImageTransform.Microsoft.Matrix(")?c.filter=t.replace(C,v):c.filter=v+" "+t,0!==e&&1!==e||1===s&&0===a&&0===l&&1===u&&(g&&-1===v.indexOf("Dx=0, Dy=0")||j.test(t)&&100!==parseFloat(RegExp.$1)||-1===t.indexOf(t.indexOf("Alpha"))&&c.removeAttribute("filter")),!g){var b,S,A,M=f<8?1:-1;for(h=i.ieOffsetX||0,p=i.ieOffsetY||0,i.ieOffsetX=Math.round((m-((s<0?-s:s)*m+(a<0?-a:a)*_))/2+y),i.ieOffsetY=Math.round((_-((u<0?-u:u)*_+(l<0?-l:l)*m))/2+x),je=0;je<4;je++)A=(n=-1!==(b=d[S=se[je]]).indexOf("px")?parseFloat(b):te(this.t,S,parseFloat(b),b.replace(w,""))||0)!==i[S]?je<2?-i.ieOffsetX:-i.ieOffsetY:je<2?h-i.ieOffsetX:p-i.ieOffsetY,c[S]=(i[S]=Math.round(n-A*(0===je||2===je?1:M)))+"px"}}},Qe=H.set3DTransformRatio=H.setTransformRatio=function(e){var t,n,i,r,o,s,a,l,u,c,d,p,f,m,_,g,v,y,x,b,w=this.data,j=this.t.style,S=w.rotation,A=w.rotationX,M=w.rotationY,T=w.scaleX,P=w.scaleY,L=w.scaleZ,E=w.x,O=w.y,I=w.z,C=w.svg,F=w.perspective,N=w.force3D,D=w.skewY,R=w.skewX;if(D&&(R+=D,S+=D),!((1!==e&&0!==e||"auto"!==N||this.tween._totalTime!==this.tween._totalDuration&&this.tween._totalTime)&&N||I||F||M||A||1!==L)||Te&&C||!ke)S||R||C?(S*=k,b=R*k,1e5,n=Math.cos(S)*T,o=Math.sin(S)*T,i=Math.sin(S-b)*-P,s=Math.cos(S-b)*P,b&&"simple"===w.skewType&&(t=Math.tan(b-D*k),i*=t=Math.sqrt(1+t*t),s*=t,D&&(t=Math.tan(D*k),n*=t=Math.sqrt(1+t*t),o*=t)),C&&(E+=w.xOrigin-(w.xOrigin*n+w.yOrigin*i)+w.xOffset,O+=w.yOrigin-(w.xOrigin*o+w.yOrigin*s)+w.yOffset,Te&&(w.xPercent||w.yPercent)&&(_=this.t.getBBox(),E+=.01*w.xPercent*_.width,O+=.01*w.yPercent*_.height),E<(_=1e-6)&&E>-_&&(E=0),O<_&&O>-_&&(O=0)),x=(1e5*n|0)/1e5+","+(1e5*o|0)/1e5+","+(1e5*i|0)/1e5+","+(1e5*s|0)/1e5+","+E+","+O+")",C&&Te?this.t.setAttribute("transform","matrix("+x):j[Ce]=(w.xPercent||w.yPercent?"translate("+w.xPercent+"%,"+w.yPercent+"%) matrix(":"matrix(")+x):j[Ce]=(w.xPercent||w.yPercent?"translate("+w.xPercent+"%,"+w.yPercent+"%) matrix(":"matrix(")+T+",0,0,"+P+","+E+","+O+")";else{if(h&&(T<(_=1e-4)&&T>-_&&(T=L=2e-5),P<_&&P>-_&&(P=L=2e-5),!F||w.z||w.rotationX||w.rotationY||(F=0)),S||R)S*=k,g=n=Math.cos(S),v=o=Math.sin(S),R&&(S-=R*k,g=Math.cos(S),v=Math.sin(S),"simple"===w.skewType&&(t=Math.tan((R-D)*k),g*=t=Math.sqrt(1+t*t),v*=t,w.skewY&&(t=Math.tan(D*k),n*=t=Math.sqrt(1+t*t),o*=t))),i=-v,s=g;else{if(!(M||A||1!==L||F||C))return void(j[Ce]=(w.xPercent||w.yPercent?"translate("+w.xPercent+"%,"+w.yPercent+"%) translate3d(":"translate3d(")+E+"px,"+O+"px,"+I+"px)"+(1!==T||1!==P?" scale("+T+","+P+")":""));n=s=1,i=o=0}c=1,r=a=l=u=d=p=0,f=F?-1/F:0,m=w.zOrigin,_=1e-6,",","0",(S=M*k)&&(g=Math.cos(S),l=-(v=Math.sin(S)),d=f*-v,r=n*v,a=o*v,c=g,f*=g,n*=g,o*=g),(S=A*k)&&(t=i*(g=Math.cos(S))+r*(v=Math.sin(S)),y=s*g+a*v,u=c*v,p=f*v,r=i*-v+r*g,a=s*-v+a*g,c*=g,f*=g,i=t,s=y),1!==L&&(r*=L,a*=L,c*=L,f*=L),1!==P&&(i*=P,s*=P,u*=P,p*=P),1!==T&&(n*=T,o*=T,l*=T,d*=T),(m||C)&&(m&&(E+=r*-m,O+=a*-m,I+=c*-m+m),C&&(E+=w.xOrigin-(w.xOrigin*n+w.yOrigin*i)+w.xOffset,O+=w.yOrigin-(w.xOrigin*o+w.yOrigin*s)+w.yOffset),E<_&&E>-_&&(E="0"),O<_&&O>-_&&(O="0"),I<_&&I>-_&&(I=0)),x=w.xPercent||w.yPercent?"translate("+w.xPercent+"%,"+w.yPercent+"%) matrix3d(":"matrix3d(",x+=(n<_&&n>-_?"0":n)+","+(o<_&&o>-_?"0":o)+","+(l<_&&l>-_?"0":l),x+=","+(d<_&&d>-_?"0":d)+","+(i<_&&i>-_?"0":i)+","+(s<_&&s>-_?"0":s),A||M||1!==L?(x+=","+(u<_&&u>-_?"0":u)+","+(p<_&&p>-_?"0":p)+","+(r<_&&r>-_?"0":r),x+=","+(a<_&&a>-_?"0":a)+","+(c<_&&c>-_?"0":c)+","+(f<_&&f>-_?"0":f)+","):x+=",0,0,0,0,1,0,",x+=E+","+O+","+I+","+(F?1+-I/F:1)+")",j[Ce]=x}};(l=De.prototype).x=l.y=l.z=l.skewX=l.skewY=l.rotation=l.rotationX=l.rotationY=l.zOrigin=l.xPercent=l.yPercent=l.xOffset=l.yOffset=0,l.scaleX=l.scaleY=l.scaleZ=1,Ae("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,svgOrigin,transformPerspective,directionalRotation,parseTransform,force3D,skewType,xPercent,yPercent,smoothOrigin",{parser:function(e,t,i,o,s,a,l){if(o._lastParsedTransform===l)return s;o._lastParsedTransform=l;var u=l.scale&&"function"==typeof l.scale?l.scale:0;u&&(l.scale=u(_,e));var c,d,h,p,f,g,v,y,x,b=e._gsTransform,w=e.style,j=Ie.length,S=l,A={},M=Ye(e,n,!0,S.parseTransform),T=S.transform&&("function"==typeof S.transform?S.transform(_,m):S.transform);if(M.skewType=S.skewType||M.skewType||r.defaultSkewType,o._transform=M,"rotationZ"in S&&(S.rotation=S.rotationZ),T&&"string"==typeof T&&Ce)(d=G.style)[Ce]=T,d.display="block",d.position="absolute",-1!==T.indexOf("%")&&(d.width=ee(e,"width"),d.height=ee(e,"height")),U.body.appendChild(G),c=Ye(G,null,!1),"simple"===M.skewType&&(c.scaleY*=Math.cos(c.skewX*k)),M.svg&&(g=M.xOrigin,v=M.yOrigin,c.x-=M.xOffset,c.y-=M.yOffset,(S.transformOrigin||S.svgOrigin)&&(T={},Ge(e,le(S.transformOrigin),T,S.svgOrigin,S.smoothOrigin,!0),g=T.xOrigin,v=T.yOrigin,c.x-=T.xOffset-M.xOffset,c.y-=T.yOffset-M.yOffset),(g||v)&&(y=We(G,!0),c.x-=g-(g*y[0]+v*y[2]),c.y-=v-(g*y[1]+v*y[3]))),U.body.removeChild(G),c.perspective||(c.perspective=M.perspective),null!=S.xPercent&&(c.xPercent=ce(S.xPercent,M.xPercent)),null!=S.yPercent&&(c.yPercent=ce(S.yPercent,M.yPercent));else if("object"==typeof S){if(c={scaleX:ce(null!=S.scaleX?S.scaleX:S.scale,M.scaleX),scaleY:ce(null!=S.scaleY?S.scaleY:S.scale,M.scaleY),scaleZ:ce(S.scaleZ,M.scaleZ),x:ce(S.x,M.x),y:ce(S.y,M.y),z:ce(S.z,M.z),xPercent:ce(S.xPercent,M.xPercent),yPercent:ce(S.yPercent,M.yPercent),perspective:ce(S.transformPerspective,M.perspective)},null!=(f=S.directionalRotation))if("object"==typeof f)for(d in f)S[d]=f[d];else S.rotation=f;"string"==typeof S.x&&-1!==S.x.indexOf("%")&&(c.x=0,c.xPercent=ce(S.x,M.xPercent)),"string"==typeof S.y&&-1!==S.y.indexOf("%")&&(c.y=0,c.yPercent=ce(S.y,M.yPercent)),c.rotation=de("rotation"in S?S.rotation:"shortRotation"in S?S.shortRotation+"_short":M.rotation,M.rotation,"rotation",A),ke&&(c.rotationX=de("rotationX"in S?S.rotationX:"shortRotationX"in S?S.shortRotationX+"_short":M.rotationX||0,M.rotationX,"rotationX",A),c.rotationY=de("rotationY"in S?S.rotationY:"shortRotationY"in S?S.shortRotationY+"_short":M.rotationY||0,M.rotationY,"rotationY",A)),c.skewX=de(S.skewX,M.skewX),c.skewY=de(S.skewY,M.skewY)}for(ke&&null!=S.force3D&&(M.force3D=S.force3D,p=!0),(h=M.force3D||M.z||M.rotationX||M.rotationY||c.z||c.rotationX||c.rotationY||c.perspective)||null==S.scale||(c.scaleZ=1);--j>-1;)((T=c[x=Ie[j]]-M[x])>1e-6||T<-1e-6||null!=S[x]||null!=R[x])&&(p=!0,s=new xe(M,x,M[x],T,s),x in A&&(s.e=A[x]),s.xs0=0,s.plugin=a,o._overwriteProps.push(s.n));return T="function"==typeof S.transformOrigin?S.transformOrigin(_,m):S.transformOrigin,M.svg&&(T||S.svgOrigin)&&(g=M.xOffset,v=M.yOffset,Ge(e,le(T),c,S.svgOrigin,S.smoothOrigin),s=be(M,"xOrigin",(b?M:c).xOrigin,c.xOrigin,s,"transformOrigin"),s=be(M,"yOrigin",(b?M:c).yOrigin,c.yOrigin,s,"transformOrigin"),g===M.xOffset&&v===M.yOffset||(s=be(M,"xOffset",b?g:M.xOffset,M.xOffset,s,"transformOrigin"),s=be(M,"yOffset",b?v:M.yOffset,M.yOffset,s,"transformOrigin")),T="0px 0px"),(T||ke&&h&&M.zOrigin)&&(Ce?(p=!0,x=Ne,T||(T=(T=(ee(e,x,n,!1,"50% 50%")+"").split(" "))[0]+" "+T[1]+" "+M.zOrigin+"px"),T+="",(s=new xe(w,x,0,0,s,-1,"transformOrigin")).b=w[x],s.plugin=a,ke?(d=M.zOrigin,T=T.split(" "),M.zOrigin=(T.length>2?parseFloat(T[2]):d)||0,s.xs0=s.e=T[0]+" "+(T[1]||"50%")+" 0px",(s=new xe(M,"zOrigin",0,0,s,-1,s.n)).b=d,s.xs0=s.e=M.zOrigin):s.xs0=s.e=T):le(T+"",M)),p&&(o._transformType=M.svg&&Te||!h&&3!==this._transformType?2:3),u&&(l.scale=u),s},allowFunc:!0,prefix:!0}),Ae("boxShadow",{defaultValue:"0px 0px 0px 0px #999",prefix:!0,color:!0,multi:!0,keyword:"inset"}),Ae("clipPath",{defaultValue:"inset(0%)",prefix:!0,multi:!0,formatter:ge("inset(0% 0% 0% 0%)",!1,!0)}),Ae("borderRadius",{defaultValue:"0px",parser:function(e,i,r,o,s,a){i=this.format(i);var l,u,c,d,h,p,f,m,_,g,v,y,x,b,w,j,S=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],A=e.style;for(_=parseFloat(e.offsetWidth),g=parseFloat(e.offsetHeight),l=i.split(" "),u=0;u<S.length;u++)this.p.indexOf("border")&&(S[u]=Z(S[u])),-1!==(h=d=ee(e,S[u],n,!1,"0px")).indexOf(" ")&&(d=h.split(" "),h=d[0],d=d[1]),p=c=l[u],f=parseFloat(h),y=h.substr((f+"").length),(x="="===p.charAt(1))?(m=parseInt(p.charAt(0)+"1",10),p=p.substr(2),m*=parseFloat(p),v=p.substr((m+"").length-(m<0?1:0))||""):(m=parseFloat(p),v=p.substr((m+"").length)),""===v&&(v=t[r]||y),v!==y&&(b=te(e,"borderLeft",f,y),w=te(e,"borderTop",f,y),"%"===v?(h=b/_*100+"%",d=w/g*100+"%"):"em"===v?(h=b/(j=te(e,"borderLeft",1,"em"))+"em",d=w/j+"em"):(h=b+"px",d=w+"px"),x&&(p=parseFloat(h)+m+v,c=parseFloat(d)+m+v)),s=we(A,S[u],h+" "+d,p+" "+c,!1,"0px",s);return s},prefix:!0,formatter:ge("0px 0px 0px 0px",!1,!0)}),Ae("borderBottomLeftRadius,borderBottomRightRadius,borderTopLeftRadius,borderTopRightRadius",{defaultValue:"0px",parser:function(e,t,i,r,o,s){return we(e.style,i,this.format(ee(e,i,n,!1,"0px 0px")),this.format(t),!1,"0px",o)},prefix:!0,formatter:ge("0px 0px",!1,!0)}),Ae("backgroundPosition",{defaultValue:"0 0",parser:function(e,t,i,r,o,s){var a,l,u,c,d,h,p="background-position",m=n||$(e),_=this.format((m?f?m.getPropertyValue(p+"-x")+" "+m.getPropertyValue(p+"-y"):m.getPropertyValue(p):e.currentStyle.backgroundPositionX+" "+e.currentStyle.backgroundPositionY)||"0 0"),g=this.format(t);if(-1!==_.indexOf("%")!=(-1!==g.indexOf("%"))&&g.split(",").length<2&&(h=ee(e,"backgroundImage").replace(L,""))&&"none"!==h){for(a=_.split(" "),l=g.split(" "),V.setAttribute("src",h),u=2;--u>-1;)(c=-1!==(_=a[u]).indexOf("%"))!==(-1!==l[u].indexOf("%"))&&(d=0===u?e.offsetWidth-V.width:e.offsetHeight-V.height,a[u]=c?parseFloat(_)/100*d+"px":parseFloat(_)/d*100+"%");_=a.join(" ")}return this.parseComplex(e.style,_,g,o,s)},formatter:le}),Ae("backgroundSize",{defaultValue:"0 0",formatter:function(e){return"co"===(e+="").substr(0,2)?e:le(-1===e.indexOf(" ")?e+" "+e:e)}}),Ae("perspective",{defaultValue:"0px",prefix:!0}),Ae("perspectiveOrigin",{defaultValue:"50% 50%",prefix:!0}),Ae("transformStyle",{prefix:!0}),Ae("backfaceVisibility",{prefix:!0}),Ae("userSelect",{prefix:!0}),Ae("margin",{parser:ve("marginTop,marginRight,marginBottom,marginLeft")}),Ae("padding",{parser:ve("paddingTop,paddingRight,paddingBottom,paddingLeft")}),Ae("clip",{defaultValue:"rect(0px,0px,0px,0px)",parser:function(e,t,i,r,o,s){var a,l,u;return f<9?(l=e.currentStyle,u=f<8?" ":",",a="rect("+l.clipTop+u+l.clipRight+u+l.clipBottom+u+l.clipLeft+")",t=this.format(t).split(",").join(u)):(a=this.format(ee(e,this.p,n,!1,this.dflt)),t=this.format(t)),this.parseComplex(e.style,a,t,o,s)}}),Ae("textShadow",{defaultValue:"0px 0px 0px #999",color:!0,multi:!0}),Ae("autoRound,strictUnits",{parser:function(e,t,n,i,r){return r}}),Ae("border",{defaultValue:"0px solid #000",parser:function(e,t,i,r,o,s){var a=ee(e,"borderTopWidth",n,!1,"0px"),l=this.format(t).split(" "),u=l[0].replace(w,"");return"px"!==u&&(a=parseFloat(a)/te(e,"borderTopWidth",1,u)+u),this.parseComplex(e.style,this.format(a+" "+ee(e,"borderTopStyle",n,!1,"solid")+" "+ee(e,"borderTopColor",n,!1,"#000")),l.join(" "),o,s)},color:!0,formatter:function(e){var t=e.split(" ");return t[0]+" "+(t[1]||"solid")+" "+(e.match(_e)||["#000"])[0]}}),Ae("borderWidth",{parser:ve("borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth")}),Ae("float,cssFloat,styleFloat",{parser:function(e,t,n,i,r,o){var s=e.style,a="cssFloat"in s?"cssFloat":"styleFloat";return new xe(s,a,0,0,r,-1,n,!1,0,s[a],t)}});var Je=function(e){var t,n=this.t,i=n.filter||ee(this.data,"filter")||"",r=this.s+this.c*e|0;100===r&&(-1===i.indexOf("atrix(")&&-1===i.indexOf("radient(")&&-1===i.indexOf("oader(")?(n.removeAttribute("filter"),t=!ee(this.data,"filter")):(n.filter=i.replace(A,""),t=!0)),t||(this.xn1&&(n.filter=i=i||"alpha(opacity="+r+")"),-1===i.indexOf("pacity")?0===r&&this.xn1||(n.filter=i+" alpha(opacity="+r+")"):n.filter=i.replace(j,"opacity="+r))};Ae("opacity,alpha,autoAlpha",{defaultValue:"1",parser:function(e,t,i,r,o,s){var a=parseFloat(ee(e,"opacity",n,!1,"1")),l=e.style,u="autoAlpha"===i;return"string"==typeof t&&"="===t.charAt(1)&&(t=("-"===t.charAt(0)?-1:1)*parseFloat(t.substr(2))+a),u&&1===a&&"hidden"===ee(e,"visibility",n)&&0!==t&&(a=0),W?o=new xe(l,"opacity",a,t-a,o):((o=new xe(l,"opacity",100*a,100*(t-a),o)).xn1=u?1:0,l.zoom=1,o.type=2,o.b="alpha(opacity="+o.s+")",o.e="alpha(opacity="+(o.s+o.c)+")",o.data=e,o.plugin=s,o.setRatio=Je),u&&((o=new xe(l,"visibility",0,0,o,-1,null,!1,0,0!==a?"inherit":"hidden",0===t?"hidden":"inherit")).xs0="inherit",r._overwriteProps.push(o.n),r._overwriteProps.push(i)),o}});var Ze=function(e,t){t&&(e.removeProperty?("ms"!==t.substr(0,2)&&"webkit"!==t.substr(0,6)||(t="-"+t),e.removeProperty(t.replace(T,"-$1").toLowerCase())):e.removeAttribute(t))},Ke=function(e){if(this.t._gsClassPT=this,1===e||0===e){this.t.setAttribute("class",0===e?this.b:this.e);for(var t=this.data,n=this.t.style;t;)t.v?n[t.p]=t.v:Ze(n,t.p),t=t._next;1===e&&this.t._gsClassPT===this&&(this.t._gsClassPT=null)}else this.t.getAttribute("class")!==this.e&&this.t.setAttribute("class",this.e)};Ae("className",{parser:function(t,i,r,o,s,a,l){var u,c,d,h,p,f=t.getAttribute("class")||"",m=t.style.cssText;if((s=o._classNamePT=new xe(t,r,0,0,s,2)).setRatio=Ke,s.pr=-11,e=!0,s.b=f,c=ie(t,n),d=t._gsClassPT){for(h={},p=d.data;p;)h[p.p]=1,p=p._next;d.setRatio(1)}return t._gsClassPT=s,s.e="="!==i.charAt(1)?i:f.replace(new RegExp("(?:\\s|^)"+i.substr(2)+"(?![\\w-])"),"")+("+"===i.charAt(0)?" "+i.substr(2):""),t.setAttribute("class",s.e),u=re(t,c,ie(t),l,h),t.setAttribute("class",f),s.data=u.firstMPT,t.style.cssText!==m&&(t.style.cssText=m),s=s.xfirst=o.parse(t,u.difs,s,a)}});var $e=function(e){if((1===e||0===e)&&this.data._totalTime===this.data._totalDuration&&"isFromStart"!==this.data.data){var t,n,i,r,o,s=this.t.style,l=a.transform.parse;if("all"===this.e)s.cssText="",r=!0;else for(i=(t=this.e.split(" ").join("").split(",")).length;--i>-1;)n=t[i],a[n]&&(a[n].parse===l?r=!0:n="transformOrigin"===n?Ne:a[n].p),Ze(s,n);r&&(Ze(s,Ce),(o=this.t._gsTransform)&&(o.svg&&(this.t.removeAttribute("data-svg-origin"),this.t.removeAttribute("transform")),delete this.t._gsTransform))}};for(Ae("clearProps",{parser:function(t,n,i,r,o){return(o=new xe(t,i,0,0,o,2)).setRatio=$e,o.e=n,o.pr=-10,o.data=r._tween,e=!0,o}}),l="bezier,throwProps,physicsProps,physics2D".split(","),je=l.length;je--;)Me(l[je]);(l=r.prototype)._firstPT=l._lastParsedTransform=l._transform=null,l._onInitTween=function(o,s,l,h){if(!o.nodeType)return!1;this._target=m=o,this._tween=l,this._vars=s,_=h,u=s.autoRound,e=!1,t=s.suffixMap||r.suffixMap,n=$(o),i=this._overwriteProps;var f,g,v,y,x,b,w,j,A,M=o.style;if(c&&""===M.zIndex&&("auto"!==(f=ee(o,"zIndex",n))&&""!==f||this._addLazySet(M,"zIndex",0)),"string"==typeof s&&(y=M.cssText,f=ie(o,n),M.cssText=y+";"+s,f=re(o,f,ie(o)).difs,!W&&S.test(s)&&(f.opacity=parseFloat(RegExp.$1)),s=f,M.cssText=y),s.className?this._firstPT=g=a.className.parse(o,s.className,"className",this,null,null,s):this._firstPT=g=this.parse(o,s,null),this._transformType){for(A=3===this._transformType,Ce?d&&(c=!0,""===M.zIndex&&("auto"!==(w=ee(o,"zIndex",n))&&""!==w||this._addLazySet(M,"zIndex",0)),p&&this._addLazySet(M,"WebkitBackfaceVisibility",this._vars.WebkitBackfaceVisibility||(A?"visible":"hidden"))):M.zoom=1,v=g;v&&v._next;)v=v._next;j=new xe(o,"transform",0,0,null,2),this._linkCSSP(j,null,v),j.setRatio=Ce?Qe:qe,j.data=this._transform||Ye(o,n,!0),j.tween=l,j.pr=-1,i.pop()}if(e){for(;g;){for(b=g._next,v=y;v&&v.pr>g.pr;)v=v._next;(g._prev=v?v._prev:x)?g._prev._next=g:y=g,(g._next=v)?v._prev=g:x=g,g=b}this._firstPT=y}return!0},l.parse=function(e,i,r,o){var s,l,c,d,h,p,f,g,v,y,x=e.style;for(s in i){if(p=i[s],l=a[s],"function"!=typeof p||l&&l.allowFunc||(p=p(_,m)),l)r=l.parse(e,p,s,this,r,o,i);else{if("--"===s.substr(0,2)){this._tween._propLookup[s]=this._addTween.call(this._tween,e.style,"setProperty",$(e).getPropertyValue(s)+"",p+"",s,!1,s);continue}h=ee(e,s,n)+"",v="string"==typeof p,"color"===s||"fill"===s||"stroke"===s||-1!==s.indexOf("Color")||v&&M.test(p)?(v||(p=((p=fe(p)).length>3?"rgba(":"rgb(")+p.join(",")+")"),r=we(x,s,h,p,!0,"transparent",r,0,o)):v&&N.test(p)?r=we(x,s,h,p,!0,null,r,0,o):(f=(c=parseFloat(h))||0===c?h.substr((c+"").length):"",""!==h&&"auto"!==h||("width"===s||"height"===s?(c=ae(e,s,n),f="px"):"left"===s||"top"===s?(c=ne(e,s,n),f="px"):(c="opacity"!==s?0:1,f="")),(y=v&&"="===p.charAt(1))?(d=parseInt(p.charAt(0)+"1",10),p=p.substr(2),d*=parseFloat(p),g=p.replace(w,"")):(d=parseFloat(p),g=v?p.replace(w,""):""),""===g&&(g=s in t?t[s]:f),p=d||0===d?(y?d+c:d)+g:i[s],f!==g&&(""===g&&"lineHeight"!==s||(d||0===d)&&c&&(c=te(e,s,c,f),"%"===g?(c/=te(e,s,100,"%")/100,!0!==i.strictUnits&&(h=c+"%")):"em"===g||"rem"===g||"vw"===g||"vh"===g?c/=te(e,s,1,g):"px"!==g&&(d=te(e,s,d,g),g="px"),y&&(d||0===d)&&(p=d+c+g))),y&&(d+=c),!c&&0!==c||!d&&0!==d?void 0!==x[s]&&(p||p+""!="NaN"&&null!=p)?(r=new xe(x,s,d||c||0,0,r,-1,s,!1,0,h,p)).xs0="none"!==p||"display"!==s&&-1===s.indexOf("Style")?p:h:q(i[s]):(r=new xe(x,s,c,d-c,r,0,s,!1!==u&&("px"===g||"zIndex"===s),0,h,p)).xs0=g)}o&&r&&!r.plugin&&(r.plugin=o)}return r},l.setRatio=function(e){var t,n,i,r=this._firstPT;if(1!==e||this._tween._time!==this._tween._duration&&0!==this._tween._time)if(e||this._tween._time!==this._tween._duration&&0!==this._tween._time||-1e-6===this._tween._rawPrevTime)for(;r;){if(t=r.c*e+r.s,r.r?t=r.r(t):t<1e-6&&t>-1e-6&&(t=0),r.type)if(1===r.type)if(2===(i=r.l))r.t[r.p]=r.xs0+t+r.xs1+r.xn1+r.xs2;else if(3===i)r.t[r.p]=r.xs0+t+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3;else if(4===i)r.t[r.p]=r.xs0+t+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3+r.xn3+r.xs4;else if(5===i)r.t[r.p]=r.xs0+t+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3+r.xn3+r.xs4+r.xn4+r.xs5;else{for(n=r.xs0+t+r.xs1,i=1;i<r.l;i++)n+=r["xn"+i]+r["xs"+(i+1)];r.t[r.p]=n}else-1===r.type?r.t[r.p]=r.xs0:r.setRatio&&r.setRatio(e);else r.t[r.p]=t+r.xs0;r=r._next}else for(;r;)2!==r.type?r.t[r.p]=r.b:r.setRatio(e),r=r._next;else for(;r;){if(2!==r.type)if(r.r&&-1!==r.type)if(t=r.r(r.s+r.c),r.type){if(1===r.type){for(i=r.l,n=r.xs0+t+r.xs1,i=1;i<r.l;i++)n+=r["xn"+i]+r["xs"+(i+1)];r.t[r.p]=n}}else r.t[r.p]=t+r.xs0;else r.t[r.p]=r.e;else r.setRatio(e);r=r._next}},l._enableTransforms=function(e){this._transform=this._transform||Ye(this._target,n,!0),this._transformType=this._transform.svg&&Te||!e&&3!==this._transformType?2:3};var et=function(e){this.t[this.p]=this.e,this.data._linkCSSP(this,this._next,null,!0)};l._addLazySet=function(e,t,n){var i=this._firstPT=new xe(e,t,0,0,this._firstPT,2);i.e=n,i.setRatio=et,i.data=this},l._linkCSSP=function(e,t,n,i){return e&&(t&&(t._prev=e),e._next&&(e._next._prev=e._prev),e._prev?e._prev._next=e._next:this._firstPT===e&&(this._firstPT=e._next,i=!0),n?n._next=e:i||null!==this._firstPT||(this._firstPT=e),e._next=t,e._prev=n),e},l._mod=function(e){for(var t=this._firstPT;t;)"function"==typeof e[t.p]&&(t.r=e[t.p]),t=t._next},l._kill=function(e){var t,n,i,r=e;if(e.autoAlpha||e.alpha){for(n in r={},e)r[n]=e[n];r.opacity=1,r.autoAlpha&&(r.visibility=1)}for(e.className&&(t=this._classNamePT)&&((i=t.xfirst)&&i._prev?this._linkCSSP(i._prev,t._next,i._prev._prev):i===this._firstPT&&(this._firstPT=t._next),t._next&&this._linkCSSP(t._next,t._next._next,i._prev),this._classNamePT=null),t=this._firstPT;t;)t.plugin&&t.plugin!==n&&t.plugin._kill&&(t.plugin._kill(e),n=t.plugin),t=t._next;return s.f.prototype._kill.call(this,r)};var tt=function(e,t,n){var i,r,o,s;if(e.slice)for(r=e.length;--r>-1;)tt(e[r],t,n);else for(r=(i=e.childNodes).length;--r>-1;)s=(o=i[r]).type,o.style&&(t.push(ie(o)),n&&n.push(o)),1!==s&&9!==s&&11!==s||!o.childNodes.length||tt(o,t,n)};return r.cascadeTo=function(e,t,n){var i,r,o,a,l=s.h.to(e,t,n),u=[l],c=[],d=[],h=[],p=s.h._internals.reservedProps;for(e=l._targets||l.target,tt(e,c,h),l.render(t,!0,!0),tt(e,d),l.render(0,!0,!0),l._enabled(!0),i=h.length;--i>-1;)if((r=re(h[i],c[i],d[i])).firstMPT){for(o in r=r.difs,n)p[o]&&(r[o]=n[o]);for(o in a={},r)a[o]=c[i][o];u.push(s.h.fromTo(h[i],t,a,r))}return u},s.f.activate([r]),r},!0);var Y=s.i.CSSPlugin,q=s.g._gsDefine.plugin({propName:"attr",API:2,version:"0.6.1",init:function(e,t,n,i){var r,o;if("function"!=typeof e.setAttribute)return!1;for(r in t)"function"==typeof(o=t[r])&&(o=o(i,e)),this._addTween(e,"setAttribute",e.getAttribute(r)+"",o+"",r,!1,r),this._overwriteProps.push(r);return!0}}),Q=s.g._gsDefine.plugin({propName:"roundProps",version:"1.7.0",priority:-1,API:2,init:function(e,t,n){return this._tween=n,!0}}),J=function(e){var t=e<1?Math.pow(10,(e+"").length-2):1;return function(n){return(Math.round(n/e)*e*t|0)/t}},Z=function(e,t){for(;e;)e.f||e.blob||(e.m=t||Math.round),e=e._next},K=Q.prototype;K._onInitAllProps=function(){var e,t,n,i,r=this._tween,o=r.vars.roundProps,s={},a=r._propLookup.roundProps;if("object"!=typeof o||o.push)for("string"==typeof o&&(o=o.split(",")),n=o.length;--n>-1;)s[o[n]]=Math.round;else for(i in o)s[i]=J(o[i]);for(i in s)for(e=r._firstPT;e;)t=e._next,e.pg?e.t._mod(s):e.n===i&&(2===e.f&&e.t?Z(e.t._firstPT,s[i]):(this._add(e.t,i,e.s,e.c,s[i]),t&&(t._prev=e._prev),e._prev?e._prev._next=t:r._firstPT===e&&(r._firstPT=t),e._next=e._prev=null,r._propLookup[i]=a)),e=t;return!1},K._add=function(e,t,n,i,r){this._addTween(e,t,n,n+i,t,r||Math.round),this._overwriteProps.push(t)};var $=s.g._gsDefine.plugin({propName:"directionalRotation",version:"0.3.1",API:2,init:function(e,t,n,i){"object"!=typeof t&&(t={rotation:t}),this.finals={};var r,o,s,a,l,u,c=!0===t.useRadians?2*Math.PI:360;for(r in t)"useRadians"!==r&&("function"==typeof(a=t[r])&&(a=a(i,e)),o=(u=(a+"").split("_"))[0],s=parseFloat("function"!=typeof e[r]?e[r]:e[r.indexOf("set")||"function"!=typeof e["get"+r.substr(3)]?r:"get"+r.substr(3)]()),l=(a=this.finals[r]="string"==typeof o&&"="===o.charAt(1)?s+parseInt(o.charAt(0)+"1",10)*Number(o.substr(2)):Number(o)||0)-s,u.length&&(-1!==(o=u.join("_")).indexOf("short")&&(l%=c)!==l%(c/2)&&(l=l<0?l+c:l-c),-1!==o.indexOf("_cw")&&l<0?l=(l+9999999999*c)%c-(l/c|0)*c:-1!==o.indexOf("ccw")&&l>0&&(l=(l-9999999999*c)%c-(l/c|0)*c)),(l>1e-6||l<-1e-6)&&(this._addTween(e,r,s,s+l,r),this._overwriteProps.push(r)));return!0},set:function(e){var t;if(1!==e)this._super.setRatio.call(this,e);else for(t=this._firstPT;t;)t.f?t.t[t.p](this.finals[t.p]):t.t[t.p]=this.finals[t.p],t=t._next}});$._autoCSS=!0,s.g._gsDefine("TimelineMax",["TimelineLite","TweenLite","easing.Ease"],function(){var e=function(e){a.call(this,e),this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._cycle=0,this._yoyo=!!this.vars.yoyo,this._dirty=!0},t=s.h._internals,n=t.lazyTweens,i=t.lazyRender,r=s.g._gsDefine.globals,o=new s.b(null,null,1,0),l=e.prototype=new a;return l.constructor=e,l.kill()._gc=!1,e.version="2.1.3",l.invalidate=function(){return this._yoyo=!!this.vars.yoyo,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),a.prototype.invalidate.call(this)},l.addCallback=function(e,t,n,i){return this.add(s.h.delayedCall(0,e,n,i),t)},l.removeCallback=function(e,t){if(e)if(null==t)this._kill(null,e);else for(var n=this.getTweensOf(e,!1),i=n.length,r=this._parseTimeOrLabel(t);--i>-1;)n[i]._startTime===r&&n[i]._enabled(!1,!1);return this},l.removePause=function(e){return this.removeCallback(a._internals.pauseCallback,e)},l.tweenTo=function(e,t){t=t||{};var n,i,a,l={ease:o,useFrames:this.usesFrames(),immediateRender:!1,lazy:!1},u=t.repeat&&r.TweenMax||s.h;for(i in t)l[i]=t[i];return l.time=this._parseTimeOrLabel(e),n=Math.abs(Number(l.time)-this._time)/this._timeScale||.001,a=new u(this,n,l),l.onStart=function(){a.target.paused(!0),a.vars.time===a.target.time()||n!==a.duration()||a.isFromTo||a.duration(Math.abs(a.vars.time-a.target.time())/a.target._timeScale).render(a.time(),!0,!0),t.onStart&&t.onStart.apply(t.onStartScope||t.callbackScope||a,t.onStartParams||[])},a},l.tweenFromTo=function(e,t,n){n=n||{},e=this._parseTimeOrLabel(e),n.startAt={onComplete:this.seek,onCompleteParams:[e],callbackScope:this},n.immediateRender=!1!==n.immediateRender;var i=this.tweenTo(t,n);return i.isFromTo=1,i.duration(Math.abs(i.vars.time-e)/this._timeScale||.001)},l.render=function(e,t,r){this._gc&&this._enabled(!0,!1);var o,s,a,l,u,c,d,h,p,f=this._time,m=this._dirty?this.totalDuration():this._totalDuration,_=this._duration,g=this._totalTime,v=this._startTime,y=this._timeScale,x=this._rawPrevTime,b=this._paused,w=this._cycle;if(f!==this._time&&(e+=this._time-f),e>=m-1e-8&&e>=0)this._locked||(this._totalTime=m,this._cycle=this._repeat),this._reversed||this._hasPausedChild()||(s=!0,l="onComplete",u=!!this._timeline.autoRemoveChildren,0===this._duration&&(e<=0&&e>=-1e-8||x<0||1e-8===x)&&x!==e&&this._first&&(u=!0,x>1e-8&&(l="onReverseComplete"))),this._rawPrevTime=this._duration||!t||e||this._rawPrevTime===e?e:1e-8,this._yoyo&&1&this._cycle?this._time=e=0:(this._time=_,e=_+1e-4);else if(e<1e-8)if(this._locked||(this._totalTime=this._cycle=0),this._time=0,e>-1e-8&&(e=0),(0!==f||0===_&&1e-8!==x&&(x>0||e<0&&x>=0)&&!this._locked)&&(l="onReverseComplete",s=this._reversed),e<0)this._active=!1,this._timeline.autoRemoveChildren&&this._reversed?(u=s=!0,l="onReverseComplete"):x>=0&&this._first&&(u=!0),this._rawPrevTime=e;else{if(this._rawPrevTime=_||!t||e||this._rawPrevTime===e?e:1e-8,0===e&&s)for(o=this._first;o&&0===o._startTime;)o._duration||(s=!1),o=o._next;e=0,this._initted||(u=!0)}else 0===_&&x<0&&(u=!0),this._time=this._rawPrevTime=e,this._locked||(this._totalTime=e,0!==this._repeat&&(c=_+this._repeatDelay,this._cycle=this._totalTime/c>>0,this._cycle&&this._cycle===this._totalTime/c&&g<=e&&this._cycle--,this._time=this._totalTime-this._cycle*c,this._yoyo&&1&this._cycle&&(this._time=_-this._time),this._time>_?(this._time=_,e=_+1e-4):this._time<0?this._time=e=0:e=this._time));if(this._hasPause&&!this._forcingPlayhead&&!t){if((e=this._time)>f||this._repeat&&w!==this._cycle)for(o=this._first;o&&o._startTime<=e&&!d;)o._duration||"isPause"!==o.data||o.ratio||0===o._startTime&&0===this._rawPrevTime||(d=o),o=o._next;else for(o=this._last;o&&o._startTime>=e&&!d;)o._duration||"isPause"===o.data&&o._rawPrevTime>0&&(d=o),o=o._prev;d&&(p=this._startTime+(this._reversed?this._duration-d._startTime:d._startTime)/this._timeScale,d._startTime<_&&(this._time=this._rawPrevTime=e=d._startTime,this._totalTime=e+this._cycle*(this._totalDuration+this._repeatDelay)))}if(this._cycle!==w&&!this._locked){var j=this._yoyo&&0!=(1&w),S=j===(this._yoyo&&0!=(1&this._cycle)),A=this._totalTime,M=this._cycle,T=this._rawPrevTime,P=this._time;if(this._totalTime=w*_,this._cycle<w?j=!j:this._totalTime+=_,this._time=f,this._rawPrevTime=0===_?x-1e-4:x,this._cycle=w,this._locked=!0,f=j?0:_,this.render(f,t,0===_),t||this._gc||this.vars.onRepeat&&(this._cycle=M,this._locked=!1,this._callback("onRepeat")),f!==this._time)return;if(S&&(this._cycle=w,this._locked=!0,f=j?_+1e-4:-1e-4,this.render(f,!0,!1)),this._locked=!1,this._paused&&!b)return;this._time=P,this._totalTime=A,this._cycle=M,this._rawPrevTime=T}if(this._time!==f&&this._first||r||u||d){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._totalTime!==g&&e>0&&(this._active=!0),0===g&&this.vars.onStart&&(0===this._totalTime&&this._totalDuration||t||this._callback("onStart")),(h=this._time)>=f)for(o=this._first;o&&(a=o._next,h===this._time&&(!this._paused||b));)(o._active||o._startTime<=this._time&&!o._paused&&!o._gc)&&(d===o&&(this.pause(),this._pauseTime=p),o._reversed?o.render((o._dirty?o.totalDuration():o._totalDuration)-(e-o._startTime)*o._timeScale,t,r):o.render((e-o._startTime)*o._timeScale,t,r)),o=a;else for(o=this._last;o&&(a=o._prev,h===this._time&&(!this._paused||b));){if(o._active||o._startTime<=f&&!o._paused&&!o._gc){if(d===o){for(d=o._prev;d&&d.endTime()>this._time;)d.render(d._reversed?d.totalDuration()-(e-d._startTime)*d._timeScale:(e-d._startTime)*d._timeScale,t,r),d=d._prev;d=null,this.pause(),this._pauseTime=p}o._reversed?o.render((o._dirty?o.totalDuration():o._totalDuration)-(e-o._startTime)*o._timeScale,t,r):o.render((e-o._startTime)*o._timeScale,t,r)}o=a}this._onUpdate&&(t||(n.length&&i(),this._callback("onUpdate"))),l&&(this._locked||this._gc||v!==this._startTime&&y===this._timeScale||(0===this._time||m>=this.totalDuration())&&(s&&(n.length&&i(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!t&&this.vars[l]&&this._callback(l)))}else g!==this._totalTime&&this._onUpdate&&(t||this._callback("onUpdate"))},l.getActive=function(e,t,n){var i,r,o=[],s=this.getChildren(e||null==e,t||null==e,!!n),a=0,l=s.length;for(i=0;i<l;i++)(r=s[i]).isActive()&&(o[a++]=r);return o},l.getLabelAfter=function(e){e||0!==e&&(e=this._time);var t,n=this.getLabelsArray(),i=n.length;for(t=0;t<i;t++)if(n[t].time>e)return n[t].name;return null},l.getLabelBefore=function(e){null==e&&(e=this._time);for(var t=this.getLabelsArray(),n=t.length;--n>-1;)if(t[n].time<e)return t[n].name;return null},l.getLabelsArray=function(){var e,t=[],n=0;for(e in this._labels)t[n++]={time:this._labels[e],name:e};return t.sort(function(e,t){return e.time-t.time}),t},l.invalidate=function(){return this._locked=!1,a.prototype.invalidate.call(this)},l.progress=function(e,t){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!=(1&this._cycle)?1-e:e)+this._cycle*(this._duration+this._repeatDelay),t):this._time/this.duration()||0},l.totalProgress=function(e,t){return arguments.length?this.totalTime(this.totalDuration()*e,t):this._totalTime/this.totalDuration()||0},l.totalDuration=function(e){return arguments.length?-1!==this._repeat&&e?this.timeScale(this.totalDuration()/e):this:(this._dirty&&(a.prototype.totalDuration.call(this),this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat),this._totalDuration)},l.time=function(e,t){if(!arguments.length)return this._time;this._dirty&&this.totalDuration();var n=this._duration,i=this._cycle,r=i*(n+this._repeatDelay);return e>n&&(e=n),this.totalTime(this._yoyo&&1&i?n-e+r:this._repeat?e+r:e,t)},l.repeat=function(e){return arguments.length?(this._repeat=e,this._uncache(!0)):this._repeat},l.repeatDelay=function(e){return arguments.length?(this._repeatDelay=e,this._uncache(!0)):this._repeatDelay},l.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},l.currentLabel=function(e){return arguments.length?this.seek(e,!0):this.getLabelBefore(this._time+1e-8)},e},!0);var ee=s.i.TimelineMax,te=180/Math.PI,ne=[],ie=[],re=[],oe={},se=s.g._gsDefine.globals,ae=function(e,t,n,i){n===i&&(n=i-(i-t)/1e6),e===t&&(t=e+(n-e)/1e6),this.a=e,this.b=t,this.c=n,this.d=i,this.da=i-e,this.ca=n-e,this.ba=t-e},le=function(e,t,n,i){var r={a:e},o={},s={},a={c:i},l=(e+t)/2,u=(t+n)/2,c=(n+i)/2,d=(l+u)/2,h=(u+c)/2,p=(h-d)/8;return r.b=l+(e-l)/4,o.b=d+p,r.c=o.a=(r.b+o.b)/2,o.c=s.a=(d+h)/2,s.b=h-p,a.b=c+(i-c)/4,s.c=a.a=(s.b+a.b)/2,[r,o,s,a]},ue=function(e,t,n,i,r){var o,s,a,l,u,c,d,h,p,f,m,_,g,v=e.length-1,y=0,x=e[0].a;for(o=0;o<v;o++)s=(u=e[y]).a,a=u.d,l=e[y+1].d,r?(m=ne[o],g=((_=ie[o])+m)*t*.25/(i?.5:re[o]||.5),h=a-((c=a-(a-s)*(i?.5*t:0!==m?g/m:0))+(((d=a+(l-a)*(i?.5*t:0!==_?g/_:0))-c)*(3*m/(m+_)+.5)/4||0))):h=a-((c=a-(a-s)*t*.5)+(d=a+(l-a)*t*.5))/2,c+=h,d+=h,u.c=p=c,u.b=0!==o?x:x=u.a+.6*(u.c-u.a),u.da=a-s,u.ca=p-s,u.ba=x-s,n?(f=le(s,x,p,a),e.splice(y,1,f[0],f[1],f[2],f[3]),y+=4):y++,x=d;(u=e[y]).b=x,u.c=x+.4*(u.d-x),u.da=u.d-u.a,u.ca=u.c-u.a,u.ba=x-u.a,n&&(f=le(u.a,x,u.c,u.d),e.splice(y,1,f[0],f[1],f[2],f[3]))},ce=function(e,t,n,i){var r,o,s,a,l,u,c=[];if(i)for(o=(e=[i].concat(e)).length;--o>-1;)"string"==typeof(u=e[o][t])&&"="===u.charAt(1)&&(e[o][t]=i[t]+Number(u.charAt(0)+u.substr(2)));if((r=e.length-2)<0)return c[0]=new ae(e[0][t],0,0,e[0][t]),c;for(o=0;o<r;o++)s=e[o][t],a=e[o+1][t],c[o]=new ae(s,0,0,a),n&&(l=e[o+2][t],ne[o]=(ne[o]||0)+(a-s)*(a-s),ie[o]=(ie[o]||0)+(l-a)*(l-a));return c[o]=new ae(e[o][t],0,0,e[o+1][t]),c},de=function(e,t,n,i,r,o){var s,a,l,u,c,d,h,p,f={},m=[],_=o||e[0];for(a in r="string"==typeof r?","+r+",":",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,",null==t&&(t=1),e[0])m.push(a);if(e.length>1){for(p=e[e.length-1],h=!0,s=m.length;--s>-1;)if(a=m[s],Math.abs(_[a]-p[a])>.05){h=!1;break}h&&(e=e.concat(),o&&e.unshift(o),e.push(e[1]),o=e[e.length-3])}for(ne.length=ie.length=re.length=0,s=m.length;--s>-1;)a=m[s],oe[a]=-1!==r.indexOf(","+a+","),f[a]=ce(e,a,oe[a],o);for(s=ne.length;--s>-1;)ne[s]=Math.sqrt(ne[s]),ie[s]=Math.sqrt(ie[s]);if(!i){for(s=m.length;--s>-1;)if(oe[a])for(d=(l=f[m[s]]).length-1,u=0;u<d;u++)c=l[u+1].da/ie[u]+l[u].da/ne[u]||0,re[u]=(re[u]||0)+c*c;for(s=re.length;--s>-1;)re[s]=Math.sqrt(re[s])}for(s=m.length,u=n?4:1;--s>-1;)l=f[a=m[s]],ue(l,t,n,i,oe[a]),h&&(l.splice(0,u),l.splice(l.length-u,u));return f},he=function(e,t,n){for(var i,r,o,s,a,l,u,c,d,h,p,f=1/n,m=e.length;--m>-1;)for(o=(h=e[m]).a,s=h.d-o,a=h.c-o,l=h.b-o,i=r=0,c=1;c<=n;c++)i=r-(r=((u=f*c)*u*s+3*(d=1-u)*(u*a+d*l))*u),t[p=m*n+c-1]=(t[p]||0)+i*i},pe=s.g._gsDefine.plugin({propName:"bezier",priority:-1,version:"1.3.9",API:2,global:!0,init:function(e,t,n){this._target=e,t instanceof Array&&(t={values:t}),this._func={},this._mod={},this._props=[],this._timeRes=null==t.timeResolution?6:parseInt(t.timeResolution,10);var i,r,o,s,a,l=t.values||[],u={},c=l[0],d=t.autoRotate||n.vars.orientToBezier;for(i in this._autoRotate=d?d instanceof Array?d:[["x","y","rotation",!0===d?0:Number(d)||0]]:null,c)this._props.push(i);for(o=this._props.length;--o>-1;)i=this._props[o],this._overwriteProps.push(i),r=this._func[i]="function"==typeof e[i],u[i]=r?e[i.indexOf("set")||"function"!=typeof e["get"+i.substr(3)]?i:"get"+i.substr(3)]():parseFloat(e[i]),a||u[i]!==l[0][i]&&(a=u);if(this._beziers="cubic"!==t.type&&"quadratic"!==t.type&&"soft"!==t.type?de(l,isNaN(t.curviness)?1:t.curviness,!1,"thruBasic"===t.type,t.correlate,a):function(e,t,n){var i,r,o,s,a,l,u,c,d,h,p,f={},m="cubic"===(t=t||"soft")?3:2,_="soft"===t,g=[];if(_&&n&&(e=[n].concat(e)),null==e||e.length<m+1)throw"invalid Bezier data";for(d in e[0])g.push(d);for(l=g.length;--l>-1;){for(f[d=g[l]]=a=[],h=0,c=e.length,u=0;u<c;u++)i=null==n?e[u][d]:"string"==typeof(p=e[u][d])&&"="===p.charAt(1)?n[d]+Number(p.charAt(0)+p.substr(2)):Number(p),_&&u>1&&u<c-1&&(a[h++]=(i+a[h-2])/2),a[h++]=i;for(c=h-m+1,h=0,u=0;u<c;u+=m)i=a[u],r=a[u+1],o=a[u+2],s=2===m?0:a[u+3],a[h++]=p=3===m?new ae(i,r,o,s):new ae(i,(2*r+i)/3,(2*r+o)/3,o);a.length=h}return f}(l,t.type,u),this._segCount=this._beziers[i].length,this._timeRes){var h=function(e,t){var n,i,r,o,s=[],a=[],l=0,u=0,c=(t=t>>0||6)-1,d=[],h=[];for(n in e)he(e[n],s,t);for(r=s.length,i=0;i<r;i++)l+=Math.sqrt(s[i]),h[o=i%t]=l,o===c&&(u+=l,d[o=i/t>>0]=h,a[o]=u,l=0,h=[]);return{length:u,lengths:a,segments:d}}(this._beziers,this._timeRes);this._length=h.length,this._lengths=h.lengths,this._segments=h.segments,this._l1=this._li=this._s1=this._si=0,this._l2=this._lengths[0],this._curSeg=this._segments[0],this._s2=this._curSeg[0],this._prec=1/this._curSeg.length}if(d=this._autoRotate)for(this._initialRotations=[],d[0]instanceof Array||(this._autoRotate=d=[d]),o=d.length;--o>-1;){for(s=0;s<3;s++)i=d[o][s],this._func[i]="function"==typeof e[i]&&e[i.indexOf("set")||"function"!=typeof e["get"+i.substr(3)]?i:"get"+i.substr(3)];i=d[o][2],this._initialRotations[o]=(this._func[i]?this._func[i].call(this._target):this._target[i])||0,this._overwriteProps.push(i)}return this._startRatio=n.vars.runBackwards?1:0,!0},set:function(e){var t,n,i,r,o,s,a,l,u,c,d,h=this._segCount,p=this._func,f=this._target,m=e!==this._startRatio;if(this._timeRes){if(u=this._lengths,c=this._curSeg,d=e*this._length,i=this._li,d>this._l2&&i<h-1){for(l=h-1;i<l&&(this._l2=u[++i])<=d;);this._l1=u[i-1],this._li=i,this._curSeg=c=this._segments[i],this._s2=c[this._s1=this._si=0]}else if(d<this._l1&&i>0){for(;i>0&&(this._l1=u[--i])>=d;);0===i&&d<this._l1?this._l1=0:i++,this._l2=u[i],this._li=i,this._curSeg=c=this._segments[i],this._s1=c[(this._si=c.length-1)-1]||0,this._s2=c[this._si]}if(t=i,d-=this._l1,i=this._si,d>this._s2&&i<c.length-1){for(l=c.length-1;i<l&&(this._s2=c[++i])<=d;);this._s1=c[i-1],this._si=i}else if(d<this._s1&&i>0){for(;i>0&&(this._s1=c[--i])>=d;);0===i&&d<this._s1?this._s1=0:i++,this._s2=c[i],this._si=i}s=1===e?1:(i+(d-this._s1)/(this._s2-this._s1))*this._prec||0}else s=(e-(t=e<0?0:e>=1?h-1:h*e>>0)*(1/h))*h;for(n=1-s,i=this._props.length;--i>-1;)r=this._props[i],a=(s*s*(o=this._beziers[r][t]).da+3*n*(s*o.ca+n*o.ba))*s+o.a,this._mod[r]&&(a=this._mod[r](a,f)),p[r]?f[r](a):f[r]=a;if(this._autoRotate){var _,g,v,y,x,b,w,j=this._autoRotate;for(i=j.length;--i>-1;)r=j[i][2],b=j[i][3]||0,w=!0===j[i][4]?1:te,o=this._beziers[j[i][0]],_=this._beziers[j[i][1]],o&&_&&(o=o[t],_=_[t],g=o.a+(o.b-o.a)*s,g+=((y=o.b+(o.c-o.b)*s)-g)*s,y+=(o.c+(o.d-o.c)*s-y)*s,v=_.a+(_.b-_.a)*s,v+=((x=_.b+(_.c-_.b)*s)-v)*s,x+=(_.c+(_.d-_.c)*s-x)*s,a=m?Math.atan2(x-v,y-g)*w+b:this._initialRotations[i],this._mod[r]&&(a=this._mod[r](a,f)),p[r]?f[r](a):f[r]=a)}}}),fe=pe.prototype;pe.bezierThrough=de,pe.cubicToQuadratic=le,pe._autoCSS=!0,pe.quadraticToCubic=function(e,t,n){return new ae(e,(2*t+e)/3,(2*t+n)/3,n)},pe._cssRegister=function(){var e=se.CSSPlugin;if(e){var t=e._internals,n=t._parseToProxy,i=t._setPluginRatio,r=t.CSSPropTween;t._registerComplexSpecialProp("bezier",{parser:function(e,t,o,s,a,l){t instanceof Array&&(t={values:t}),l=new pe;var u,c,d,h=t.values,p=h.length-1,f=[],m={};if(p<0)return a;for(u=0;u<=p;u++)d=n(e,h[u],s,a,l,p!==u),f[u]=d.end;for(c in t)m[c]=t[c];return m.values=f,(a=new r(e,"bezier",0,0,d.pt,2)).data=d,a.plugin=l,a.setRatio=i,0===m.autoRotate&&(m.autoRotate=!0),!m.autoRotate||m.autoRotate instanceof Array||(u=!0===m.autoRotate?0:Number(m.autoRotate),m.autoRotate=null!=d.end.left?[["left","top","rotation",u,!1]]:null!=d.end.x&&[["x","y","rotation",u,!1]]),m.autoRotate&&(s._transform||s._enableTransforms(!1),d.autoRotate=s._target._gsTransform,d.proxy.rotation=d.autoRotate.rotation||0,s._overwriteProps.push("rotation")),l._onInitTween(d.proxy,m,s._tween),a}})}},fe._mod=function(e){for(var t,n=this._overwriteProps,i=n.length;--i>-1;)(t=e[n[i]])&&"function"==typeof t&&(this._mod[n[i]]=t)},fe._kill=function(e){var t,n,i=this._props;for(t in this._beziers)if(t in e)for(delete this._beziers[t],delete this._func[t],n=i.length;--n>-1;)i[n]===t&&i.splice(n,1);if(i=this._autoRotate)for(n=i.length;--n>-1;)e[i[n][2]]&&i.splice(n,1);return this._super._kill.call(this,e)},s.g._gsDefine("easing.Back",["easing.Ease"],function(){var e,t,n,i,r=s.g.GreenSockGlobals||s.g,o=r.com.greensock,a=2*Math.PI,l=Math.PI/2,u=o._class,c=function(e,t){var n=u("easing."+e,function(){},!0),i=n.prototype=new s.b;return i.constructor=n,i.getRatio=t,n},d=s.b.register||function(){},h=function(e,t,n,i,r){var o=u("easing."+e,{easeOut:new t,easeIn:new n,easeInOut:new i},!0);return d(o,e),o},p=function(e,t,n){this.t=e,this.v=t,n&&(this.next=n,n.prev=this,this.c=n.v-t,this.gap=n.t-e)},f=function(e,t){var n=u("easing."+e,function(e){this._p1=e||0===e?e:1.70158,this._p2=1.525*this._p1},!0),i=n.prototype=new s.b;return i.constructor=n,i.getRatio=t,i.config=function(e){return new n(e)},n},m=h("Back",f("BackOut",function(e){return(e-=1)*e*((this._p1+1)*e+this._p1)+1}),f("BackIn",function(e){return e*e*((this._p1+1)*e-this._p1)}),f("BackInOut",function(e){return(e*=2)<1?.5*e*e*((this._p2+1)*e-this._p2):.5*((e-=2)*e*((this._p2+1)*e+this._p2)+2)})),_=u("easing.SlowMo",function(e,t,n){t=t||0===t?t:.7,null==e?e=.7:e>1&&(e=1),this._p=1!==e?t:0,this._p1=(1-e)/2,this._p2=e,this._p3=this._p1+this._p2,this._calcEnd=!0===n},!0),g=_.prototype=new s.b;return g.constructor=_,g.getRatio=function(e){var t=e+(.5-e)*this._p;return e<this._p1?this._calcEnd?1-(e=1-e/this._p1)*e:t-(e=1-e/this._p1)*e*e*e*t:e>this._p3?this._calcEnd?1===e?0:1-(e=(e-this._p3)/this._p1)*e:t+(e-t)*(e=(e-this._p3)/this._p1)*e*e*e:this._calcEnd?1:t},_.ease=new _(.7,.7),g.config=_.config=function(e,t,n){return new _(e,t,n)},(g=(e=u("easing.SteppedEase",function(e,t){e=e||1,this._p1=1/e,this._p2=e+(t?0:1),this._p3=t?1:0},!0)).prototype=new s.b).constructor=e,g.getRatio=function(e){return e<0?e=0:e>=1&&(e=.999999999),((this._p2*e|0)+this._p3)*this._p1},g.config=e.config=function(t,n){return new e(t,n)},(g=(t=u("easing.ExpoScaleEase",function(e,t,n){this._p1=Math.log(t/e),this._p2=t-e,this._p3=e,this._ease=n},!0)).prototype=new s.b).constructor=t,g.getRatio=function(e){return this._ease&&(e=this._ease.getRatio(e)),(this._p3*Math.exp(this._p1*e)-this._p3)/this._p2},g.config=t.config=function(e,n,i){return new t(e,n,i)},(g=(n=u("easing.RoughEase",function(e){for(var t,n,i,r,o,a,l=(e=e||{}).taper||"none",u=[],c=0,d=0|(e.points||20),h=d,f=!1!==e.randomize,m=!0===e.clamp,_=e.template instanceof s.b?e.template:null,g="number"==typeof e.strength?.4*e.strength:.4;--h>-1;)t=f?Math.random():1/d*h,n=_?_.getRatio(t):t,i="none"===l?g:"out"===l?(r=1-t)*r*g:"in"===l?t*t*g:t<.5?(r=2*t)*r*.5*g:(r=2*(1-t))*r*.5*g,f?n+=Math.random()*i-.5*i:h%2?n+=.5*i:n-=.5*i,m&&(n>1?n=1:n<0&&(n=0)),u[c++]={x:t,y:n};for(u.sort(function(e,t){return e.x-t.x}),a=new p(1,1,null),h=d;--h>-1;)o=u[h],a=new p(o.x,o.y,a);this._prev=new p(0,0,0!==a.t?a:a.next)},!0)).prototype=new s.b).constructor=n,g.getRatio=function(e){var t=this._prev;if(e>t.t){for(;t.next&&e>=t.t;)t=t.next;t=t.prev}else for(;t.prev&&e<=t.t;)t=t.prev;return this._prev=t,t.v+(e-t.t)/t.gap*t.c},g.config=function(e){return new n(e)},n.ease=new n,h("Bounce",c("BounceOut",function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}),c("BounceIn",function(e){return(e=1-e)<1/2.75?1-7.5625*e*e:e<2/2.75?1-(7.5625*(e-=1.5/2.75)*e+.75):e<2.5/2.75?1-(7.5625*(e-=2.25/2.75)*e+.9375):1-(7.5625*(e-=2.625/2.75)*e+.984375)}),c("BounceInOut",function(e){var t=e<.5;return(e=t?1-2*e:2*e-1)<1/2.75?e*=7.5625*e:e=e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375,t?.5*(1-e):.5*e+.5})),h("Circ",c("CircOut",function(e){return Math.sqrt(1-(e-=1)*e)}),c("CircIn",function(e){return-(Math.sqrt(1-e*e)-1)}),c("CircInOut",function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)})),h("Elastic",(i=function(e,t,n){var i=u("easing."+e,function(e,t){this._p1=e>=1?e:1,this._p2=(t||n)/(e<1?e:1),this._p3=this._p2/a*(Math.asin(1/this._p1)||0),this._p2=a/this._p2},!0),r=i.prototype=new s.b;return r.constructor=i,r.getRatio=t,r.config=function(e,t){return new i(e,t)},i})("ElasticOut",function(e){return this._p1*Math.pow(2,-10*e)*Math.sin((e-this._p3)*this._p2)+1},.3),i("ElasticIn",function(e){return-this._p1*Math.pow(2,10*(e-=1))*Math.sin((e-this._p3)*this._p2)},.3),i("ElasticInOut",function(e){return(e*=2)<1?this._p1*Math.pow(2,10*(e-=1))*Math.sin((e-this._p3)*this._p2)*-.5:this._p1*Math.pow(2,-10*(e-=1))*Math.sin((e-this._p3)*this._p2)*.5+1},.45)),h("Expo",c("ExpoOut",function(e){return 1-Math.pow(2,-10*e)}),c("ExpoIn",function(e){return Math.pow(2,10*(e-1))-.001}),c("ExpoInOut",function(e){return(e*=2)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*(e-1)))})),h("Sine",c("SineOut",function(e){return Math.sin(e*l)}),c("SineIn",function(e){return 1-Math.cos(e*l)}),c("SineInOut",function(e){return-.5*(Math.cos(Math.PI*e)-1)})),u("easing.EaseLookup",{find:function(e){return s.b.map[e]}},!0),d(r.SlowMo,"SlowMo","ease,"),d(n,"RoughEase","ease,"),d(e,"SteppedEase","ease,"),m},!0);var me=s.i.Back,_e=s.i.Elastic,ge=s.i.Bounce,ve=s.i.RoughEase,ye=s.i.SlowMo,xe=s.i.SteppedEase,be=s.i.Circ,we=s.i.Expo,je=s.i.Sine,Se=s.i.ExpoScaleEase;W._autoActivated=[a,ee,Y,q,pe,Q,$,me,_e,ge,ve,ye,xe,be,we,je,Se];null!=navigator.xr&&null!=self.XRSession&&null!=self.XRDevice&&null!=self.XRDevice.prototype.supportsSession&&self.XRSession.prototype.requestHitTest,null!=document.documentElement&&document.documentElement.requestFullscreen,self.ResizeObserver,self.IntersectionObserver;var Ae,Me,Te,Pe=(Ae=navigator.userAgent||navigator.vendor||self.opera,Me=!1,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(Ae)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(Ae.substr(0,4)))&&(Me=!0),Me),Le=(Boolean(self.OffscreenCanvas),Boolean(self.OffscreenCanvas)&&Boolean(self.OffscreenCanvas.prototype.transferToImageBitmap),/android/i.test(navigator.userAgent)),Ee=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!self.MSStream||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,Oe=(Te=document.createElement("a"),Boolean(Te.relList&&Te.relList.supports&&Te.relList.supports("ar")),Ee&&/CriOS\//.test(navigator.userAgent)),Ie=(Ee&&/Safari\//.test(navigator.userAgent),!window.ActiveXObject&&window,X()),Ce=function(e){this.menuID=e.menuID||"",this.verbose=!1,this.open=!1,this.elements={el:document.getElementById(e.menuID),wrapper:document.getElementById(e.wrapperID),paginatorEl:document.getElementById(e.paginatorElID),bg:document.getElementById("menu_bg"),download_overlay:document.getElementById("download_overlay"),arButtons:[]},this.elements.tt=this.elements.wrapper.querySelector(".tt"),this.elements.el.addEventListener("mouseover",function(){y.playFx("SX_KO_NavHover_LineThru_var1")}),this.elements.updates=this.elements.wrapper.querySelector("#updates"),this.elements.burger=this.elements.wrapper.querySelector(".burger"),this.elements.watchTrailerButton=this.elements.wrapper.querySelector(".watchtrailer"),Pe&&(Ge.call(this),Ee?this.elements.arButtons.forEach(function(e){e.addEventListener("touchstart",Ve)}):Le&&this.elements.arButtons.forEach(function(e){e.setAttribute("href",Xe("".concat(window.location.origin,"/assets/ar/knife_letters_android.glb"),"title")),e.addEventListener("touchstart",He)})),this.elements.updates&&(this.updates=getupdates.getInstance()),this.elements.watchTrailerButton&&(this.trailerClickListener=De.call(this),this.initTouchTrailerListener=ke.call(this),this.elements.watchTrailerButton.addEventListener("click",this.trailerClickListener),this.elements.watchTrailerButton.addEventListener("touchstart",this.initTouchTrailerListener)),this.elements.burger&&(this.burgerClickListener=ze.call(this),this.initTouchListener=Re.call(this),this.elements.burger.addEventListener("click",this.burgerClickListener),this.elements.burger.addEventListener("touchstart",this.initTouchListener)),this.elements.tt.addEventListener("click",function(){"Home"===Ie.currentSection?oblio.sections.Home.closeCharacters():Ie.changeSection("Home")}),this.menuList=e.menuList,this.menuStyle=e.menuStyle,this.elements.wrapper.querySelector(".commentary").addEventListener("click",Fe),this.elements.download_overlay.addEventListener("click",Ne),Ue.call(this,!0)};function Fe(e){e&&e.preventDefault(),oblio.app.family_tree.disablePointer(),s.h.to("#download_overlay",.5,{autoAlpha:1})}function Ne(e){("download_overlay"===e.target.id||e.target.classList.contains("close_btn"))&&(e.preventDefault(),window.isMobile||oblio.app.family_tree.enablePointer(),s.h.to("#download_overlay",.5,{autoAlpha:0}))}function ke(){var e=this;return function(t){e.elements.watchTrailerButton.removeEventListener("touchstart",e.initTouchTrailerListener),e.elements.watchTrailerButton.removeEventListener("click",e.trailerClickListener),e.elements.watchTrailerButton.addEventListener("touchstart",e.trailerClickListener),e.trailerClickListener()}}function De(e){return function(e){Ie.changeSection("Videos"),e.preventDefault(),e.stopPropagation()}}function Re(){var e=this;return function(t){e.elements.burger.removeEventListener("touchstart",e.initTouchListener),e.initTouchListener=null,e.elements.burger.removeEventListener("click",e.burgerClickListener),e.elements.burger.addEventListener("touchstart",e.burgerClickListener),e.burgerClickListener()}}function ze(e){var t=this;return function(e){t.open=!t.open,t.open?t.openMenu():t.closeMenu(),y.playFx("SX_KO_NavMenu_Click_DropDown"),e&&(e.preventDefault(),e.stopPropagation())}}function Ue(e){var t=this;if(!this.transitioning)return new Promise(function(n,i){t.open=!1,t.transitioning=!0,window.setTimeout(function(){t.transitioning=!1},500);window.innerWidth;var r=e?0:.35;t.elements.el.classList.remove("open");var o=new ee({paused:!1,onComplete:function(){t.elements.wrapper.classList.remove("open"),n()}}),a=t.elements.el.querySelectorAll("li");o.fromTo(a[a.length-1],r,{alpha:1,y:"0%"},{alpha:0,y:"15%",ease:s.d.easeInOut},0);for(var l=a.length-2;l>=0;l--){var u=a[l];o.fromTo(u,r,{alpha:1,y:"0%"},{alpha:0,y:"15%",ease:s.d.easeInOut},"-=".concat(.85*r))}o.to(t.elements.bg,r,{scaleX:0,ease:s.d.easeOut},"-=".concat(.5*r)),o.set(t.elements.el,{visibility:"hidden"})})}function Be(){document.getElementById("loader_wrapper").style.display="none",document.getElementById("loader_wrapper").style.opacity=0,document.removeEventListener("visibilitychange",Be),document.getElementById("loader_close").removeEventListener("click",Be)}function Ge(){if(Ee||Le){var e=document.createElement("a");e.href="#";var t=new Image;t.src="assets/images/home/ar.svg",e.innerHTML=oblio.app.dataSrc.widgets.Home.data.ar_button,e.appendChild(t),this.elements.wrapper.appendChild(e);var n=document.createElement("li"),i=e.cloneNode(!0);e.id="view_in_ar",n.classList.add("arbutton"),n.appendChild(i),this.elements.el.appendChild(n),this.elements.arButtons.push(e,i)}}function Ve(e){e.preventDefault(),document.addEventListener("visibilitychange",Be),document.getElementById("loader_close").addEventListener("click",Be),Oe&&(document.getElementById("loader_close").style.display="block"),document.getElementById("loader_wrapper").style.display="flex",document.getElementById("loader_wrapper").classList.add("loading_ar"),document.getElementById("knife_icon").style.opacity=1,document.getElementById("loader_tt").style.opacity=1,document.getElementById("knife_icon").style.transform="none",document.getElementById("loader_tt").style.transform="none",document.getElementById("loader_loading").style.display="block",document.getElementById("loader_releasedate").style.display="none",document.getElementById("loader_quotes").style.display="none",s.h.fromTo("#loader_wrapper",.5,{alpha:0},{alpha:1});var t,n=document.createElement("a");if(Ee)(t=n).setAttribute("rel","ar"),t.appendChild(document.createElement("img")),t.setAttribute("href","assets/ar/knife_letters.usdz"),n=t;else if(Le){var i=self.location.toString(),r=new URL(i),o="testing",a="".concat(window.location.origin,"/assets/ar/knife_letters_android.glb"),l=new URL(a),u=encodeURIComponent(i),c=l.protocol.replace(":","");r.hash="#model-viewer-no-ar-fallback",o=encodeURIComponent(o),l.protocol="intent://";var d="".concat(l.toString(),"?link=").concat(u,"&title=").concat(o,"#Intent;scheme=").concat(c,";package=com.google.ar.core;action=android.intent.action.VIEW;S.browser_fallback_url=").concat(encodeURIComponent(r.toString()),";end;"),h=!1;self.addEventListener("hashchange",function(){"#model-viewer-no-ar-fallback"!==self.location.hash||h||(h=!0,self.history.back())},{once:!0}),n.setAttribute("href",d)}n.click()}function He(e){document.addEventListener("visibilitychange",Be),document.getElementById("loader_close").addEventListener("click",Be)}var Xe=function(){document.createElement("a");return function(e,t){var n=self.location.toString(),i=new URL(n),r=new URL(e),o=encodeURIComponent(n),s=r.protocol.replace(":","");i.hash="#model-viewer-no-ar-fallback",t=encodeURIComponent(t),r.protocol="intent://";var a="".concat(r.toString(),"?link=").concat(o,"&title=").concat(t,"#Intent;scheme=").concat(s,";package=com.google.ar.core;action=android.intent.action.VIEW;S.browser_fallback_url=").concat(encodeURIComponent(i.toString()),";end;");return self.addEventListener("hashchange",function(){"#model-viewer-no-ar-fallback"===self.location.hash&&(self.history.back(),Xe(e,t))},{once:!0}),a}}();Ce.prototype.init=function(e){this.verbose,this.isHidden=!1,this.elements.listItems=this.elements.el.getElementsByTagName("li"),this.elements.wrapper.classList.add(this.menuStyle),this.selectMenuItem(e),this.hide(!0),this.resize(),oblio.show_commentary&&Fe()},Ce.prototype.getHeight=function(){return"horizontal"===this.menuStyle?this.elements.wrapper.offsetHeight:0},Ce.prototype.openPopUp=function(e){e.preventDefault();var t=e.target,n=t.getAttribute("data-popup");return String(e.target.rel).split(","),window.open(t.getAttribute("href"),"_blank",n),!1},Ce.prototype.hide=function(e){if(this.verbose,!0!==this.isHidden){var t=.5;e&&(t=0),this.isHidden=!0,s.h.to(this.elements.wrapper,t,{alpha:0,ease:Power4.easeInOut})}},Ce.prototype.show=function(e){if(this.verbose,!1!==this.isHidden){var t=.75;e&&(t=0),this.isHidden=!1,document.getElementById("mainHeader").style.visibility="visible",s.h.fromTo(this.elements.wrapper,t,{alpha:0,y:"2%"},{alpha:1,y:"0%",ease:Power4.easeInOut})}},Ce.prototype.resize=function(){this.menuPaginator&&this.menuPaginator.resize(oblio.settings.windowDimensions.width,oblio.settings.windowDimensions.height),window.innerWidth,this.open,this.elements},Ce.prototype.openMenu=function(){var e=this;if(!this.transitioning){this.elements.wrapper.classList.add("open"),this.open=!0,this.transitioning=!0,window.setTimeout(function(){e.transitioning=!1},500);window.innerWidth;var t=new ee({paused:!1,onComplete:function(){e.elements.el.classList.add("open")}}),n=this.elements.el.querySelectorAll("li");t.set(this.elements.el,{visibility:"visible"}),t.fromTo(this.elements.bg,.5,{scaleX:0},{scaleX:1,ease:s.d.easeOut},0),t.fromTo(n[0],.5,{alpha:0,y:"15%"},{alpha:1,y:"0%",ease:s.d.easeInOut},0);for(var i=1;i<n.length;i++){var r=n[i];t.fromTo(r,.5,{alpha:0,y:"15%"},{alpha:1,y:"0%",ease:s.d.easeInOut},"-=".concat(.4125))}}},Ce.prototype.closeMenu=Ue,Ce.prototype.selectMenuItem=function(e){this.verbose,y.playFx("SX_KO_NavMenu_Click_Transition_Wipe");var t=this.elements.el.querySelector('a[data-section="'+e+'"]');t&&(this.elements.selected&&(this.elements.selected.className=this.elements.selected.className.replace(/\s?selected/gi,"")),t.className=t.className+" selected",this.elements.selected=t,this.elements.wrapper.classList.remove("open"))},Ce.prototype.setState=function(e,t){},Ce.prototype.showTT=function(){this.elements.tt.style.display="block",s.h.fromTo(this.elements.tt,.5,{y:"25%",alpha:0},{y:"0%",alpha:1,ease:s.d.easeInIout}),"Home"!==Ie.currentSection&&this.elements.arButtons.forEach(function(e){s.h.to(e,.5,{alpha:0,ease:s.d.easeInIout,onComplete:function(){e.style.display="none"}})})},Ce.prototype.hideTT=function(){var e=this;s.h.to(this.elements.tt,.5,{y:"25%",alpha:0,ease:s.d.easeInIout,onComplete:function(){e.elements.tt.style.display="none"}}),"Home"===Ie.currentSection&&this.elements.arButtons.forEach(function(e){"view_in_ar"===e.id&&(e.style.display="block",s.h.to(e,.5,{alpha:1,ease:s.d.easeInIout}))})},Ce.prototype.destroy=function(){for(var e in this.elements)this.elements.hasOwnProperty(e)&&delete this.elements[e];this.elements=null};var We,Ye,qe,Qe,Je,Ze={getNew:function(e){return new Ce(e)}},Ke={init:function(e,t){this.el=e,this.firstClick=!0,this.touch=!1;var n=function(){this.touch=!0,window.removeEventListener("touchstart",n)}.bind(this);window.addEventListener("touchstart",n),this.isOpen=!0,this.close(!0),t()},open:function(){if(!this.isOpen){var e=this,t=this.el;this.isOpen=!0,t.style.zIndex=9,t.style.opacity=1,TweenLite.to(t,.5,{y:"0px",ease:Power4.easeInOut});var n=function t(n){return e.close(),e.touch?window.removeEventListener("touchstart",t):(window.removeEventListener("mousedown",t),window.removeEventListener("touchstart",t)),!0};window.requestAnimationFrame(function(){this.touch?window.addEventListener("touchstart",n):(window.addEventListener("mousedown",n),window.addEventListener("touchstart",n))}.bind(this))}},close:function(e){if(this.isOpen){var t=this.el,n=1.25*t.offsetHeight;this.isOpen=!1;var i=e?0:.5;TweenLite.to(t,i,{y:n+"px",ease:Power4.easeInOut,onComplete:function(){t.style.zIndex=0,t.style.opacity=0}.bind(this)})}},resize:function(){var e=this.el,t=this.isOpen?0:1.25*e.offsetHeight;TweenLite.set(e,{y:t+"px"})}},$e={getNew:function(){return Object.assign(Object.create(Ke),{isOpen:!1})}},et=o(null,"Footer"),tt=null,nt=!0,it=function(){};function rt(e){var t;switch(e.touches?(t=e.touches[0].target,nt&&(this.elements.el.removeEventListener("click",tt,!0),nt=!1)):t=e.target,"A"===t.tagName&&"_blank"!==t.getAttribute("target")&&e.preventDefault(),t.id){case"credits-button":Ye&&Ye.open();break;case"sharelabel":qe&&qe.open();break;case"share-facebook":window.open("http://www.facebook.com/share.php?u="+encodeURIComponent(t.getAttribute("href"),"_blank"))}}function ot(e){Ye=void 0!==$e&&$e.getNew(),qe="undefined"!=typeof ShareShelf&&ShareShelf.getNew(),Je="undefined"!=typeof MpaaPopup&&MpaaPopup.getNew(),Qe="undefined"!=typeof SoundButton&&SoundButton.getNew();var t=[];Je&&t.push({fn:Je.init,scope:Je,vars:[document.getElementById("MPAA_requirements")]}),Ye&&t.push({fn:Ye.init,scope:Ye,vars:[document.getElementById("credits")]}),qe&&t.push({fn:qe.init,scope:qe,vars:[document.getElementById("shareShelf")]}),Qe&&t.push({fn:Qe.init,scope:Qe,vars:[document.getElementById("soundButton")]}),t.push({fn:e,vars:null}),et.execute(t)}it.prototype.init=function(e){this.elements={el:document.getElementById("footer")},tt=rt.bind(this),this.elements.el.addEventListener("touchstart",tt,!1),this.elements.el.addEventListener("click",tt,!0);var t=[{fn:ot,scope:this,vars:null}];e&&t.push({fn:e,vars:null}),et.execute(t)},it.prototype.getHeight=function(){return this.elements.el.offsetHeight},it.prototype.hide=function(){TweenLite.to(this.elements.el,.25,{y:this.elements.el.offsetHeight+"px",ease:Power2.easeInOut})},it.prototype.show=function(e){this.elements.el.style.display="flex",TweenLite.set(this.elements.el,{y:0}),TweenLite.fromTo(this.elements.el,1,{alpha:0},{alpha:1,ease:Power2.easeInOut,onComplete:function(){e&&e()}}),Je&&Je.open()},it.prototype.resize=function(e,t){};var st,at={getInstance:function(){return We=We||new it}},lt=void 0!==at&&at.getInstance(),ut=X(),ct=z(),dt=function(e){this.elements={shell:document.getElementById("shell")}};function ht(){return new Promise(function(e,t){var n=document.getElementById("shell"),i=ct.getSectionData("main"),r=i.data;r.slugify=function(){return function(e,t){return t(e).toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"_")}};for(var o={},s=i.partials.length-1;s>=0;s--)o[i.partials[s]]=oblio.templates[i.partials[s]];var a=oblio.templates[i.template].render(r,o);n.innerHTML=a,n.insertAdjacentHTML("beforebegin",oblio.templates.Menu.render(r,o)),n.insertAdjacentHTML("afterend",oblio.templates.Footer.render(r,o)),window.requestAnimationFrame(function(){e()}.bind(this))})}function pt(){var e={menuID:"menu",wrapperID:"mainHeader",paginatorElID:"mainNav",menuStyle:oblio.app.dataSrc.widgets.main.data.menu.style,menuAlignment:oblio.app.dataSrc.widgets.main.data.menu.alignment,menuList:oblio.app.dataSrc.widgets.main.data.menu.links},t=document.getElementById("menuTemplate");t&&(e.template=t.innerHTML),oblio.app.mainMenu=void 0!==Ze&&Ze.getNew(e),oblio.app.mainMenu&&(oblio.app.mainMenu.init(ut.currentSection),document.getElementById("menu").addEventListener("click",function(e){var t=U(e.target,"a");if(t&&"_blank"!==t.getAttribute("target"))if(t.getAttribute("data-popup"))oblio.app.mainMenu.openPopUp(e);else{e.preventDefault(),e.stopPropagation();var n=t.getAttribute("data-section");"overlay"===t.getAttribute("data-type")?oblio.functions.showOverlay(n):ut.changeSection(n)}},!1))}dt.prototype.init=function(e){ct.returnSectionOBJ("main"),ht.call(this).then(function(){this.ready(e)}.bind(this))},dt.prototype.setLayout=function(){var e=oblio.settings.windowDimensions.width,t=oblio.settings.windowDimensions.height;oblio.settings.layout=e<=414&&t>=e?"narrow":t<=414&&e>=t?"short":"desktop"},dt.prototype.ready=function(e){this.initialized=!0,oblio.app.footer=lt,lt?lt.init(function(){e()}):e(),oblio.app.dataSrc.widgets.main&&oblio.app.dataSrc.widgets.main.data.menu&&pt()},dt.prototype.setupMenu=pt,dt.prototype.resize=function(e,t){oblio.app.mainMenu?(oblio.settings.menuWidth=oblio.app.mainMenu.resize(),oblio.settings.headerHeight=oblio.app.mainMenu.getHeight()):oblio.settings.headerHeight=0,oblio.sections[ut.currentSection]&&oblio.sections[ut.currentSection].initialized&&oblio.sections[ut.currentSection].resize&&oblio.sections[ut.currentSection].resize(e,t)};var ft,mt,_t=function(){return st=st||new dt},gt=z(),vt=!1,yt={},xt=0,bt=!1,wt=function(){oblio.settings.instaLoad||gt.addLoaderUI(this),this.finished=!0};function jt(){Mt.apply(this)}var St=!1;function At(){Tt.call(this),St||window.requestAnimationFrame(ft)}function Mt(e){ft=At.bind(this),St=!1,window.requestAnimationFrame(ft)}function Tt(e){var t=gt.getPerc();if(!isNaN(t)&&isFinite(t)||(t=1),t=xt+Math.ceil(10*(t-xt)/.2)/1e3,xt=Math.max(xt,t),vt&&void 0!==yt[vt].onProgress){var n=yt[vt].onProgress(xt);xt>=1&&this.finished&&!0===n&&(St=!0,Pt())}else{if(vt&&void 0!==yt[vt].updateBar?yt[vt].updateBar(xt):vt&&void 0!==yt[vt].progressBar&&(yt[vt].progressBar.style.width=100*xt+"%"),vt&&void 0!==yt[vt].updateLabel)yt[vt].updateText(xt);else if(vt&&void 0!==yt[vt].loaderText){var i="";vt&&void 0!==yt[vt].loaderText_before&&(i+=yt[vt].loaderText_before),i+=Math.round(100*xt),vt&&void 0!==yt[vt].loaderText_after&&(i+=yt[vt].loaderText_after),yt[vt].loaderText.innerHTML=i}xt>=1&&this.finished&&(St=!0,Pt())}}function Pt(){vt&&void 0!==yt[vt].goOut?yt[vt].goOut(Lt.bind(this)):vt&&void 0!==yt[vt].elem?TweenLite.to(yt[vt].elem,.5,{autoAlpha:0,onComplete:Lt.bind(this)}):Lt()}function Lt(e){bt&&bt()}wt.prototype.switchLoader=function(e){yt[e]&&(vt=e)},wt.prototype.addLoader=function(e,t){yt[e.id]=e,vt||(vt=e.id),t&&t()},wt.prototype.bringIn=function(){vt&&(this.finished=!1,xt=0,oblio.settings.prepreloader&&oblio.settings.prepreloader.goOut&&oblio.settings.prepreloader.goOut(),vt&&void 0!==yt[vt].bringIn?yt[vt].bringIn(jt.bind(this)):vt&&void 0!==yt[vt].elem?(yt[vt].elem.style.display="block",TweenLite.to(yt[vt].elem,.5,{autoAlpha:1,onComplete:jt.bind(this)}),Tt.apply(this)):jt.call(this))},wt.prototype.complete=function(e){bt=e||!1,vt||Lt(),this.finished=!0};var Et=function(){return mt=mt||new wt},Ot={};var It=null,Ct=function(){if(null!==It)throw new Error("Cannot instantiate more than one MasterClock");Ft.call(this)};function Ft(){It=this,this._started=Date.now(),this._timeScale=1,this.time=this._started,this._desiredFps=60,this._desiredFrameDurationMS=1e3/this._desiredFps,this._updates={},this.eventObj={},Nt.call(this)}Date.now();function Nt(){if(window.requestAnimationFrame(Nt.bind(this)),this.lastTime=this.time,this.time=Date.now(),this.elapsedMS=this.time-this.lastTime,this.now=this.time,this.playing){this.eventObj.now=this.now,this.eventObj.elapsed=this.elapsedMS;for(var e=Object.keys(this._updates),t=e.length-1;t>=0;t--)"function"==typeof this._updates[e[t]]&&this._updates[e[t]](this.eventObj,e[t])}}Ct.prototype.initialize=Ft,Ct.prototype.pause=function(){this.playing=!1},Ct.prototype.play=function(){this.playing=!0},Ct.prototype.timeScale=function(e){return e&&(this._timeScale=e),this._timeScale},Ct.prototype.registerCallback=function(e){var t=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}for(var t=e();!0===Ot[t];)t=e();return Ot[t]=!0,t}();return this._updates[t]=e,t},Ct.prototype.unregisterCallback=function(e){if(!this._updates[e])throw new Error("Cannot get location of given callback ID.");delete this._updates[e]};var kt={getInstance:function(){return It||new Ct}};function Dt(){}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}),void 0===Math.sign&&(Math.sign=function(e){return e<0?-1:e>0?1:+e}),"name"in Function.prototype==!1&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t}),Object.assign(Dt.prototype,{addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)},removeEventListener:function(e,t){if(void 0!==this._listeners){var n=this._listeners[e];if(void 0!==n){var i=n.indexOf(t);-1!==i&&n.splice(i,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var n=t.slice(0),i=0,r=n.length;i<r;i++)n[i].call(this,e)}}}});for(var Rt=0,zt=1,Ut=2,Bt=1,Gt=2,Vt=3,Ht=0,Xt=1,Wt=2,Yt=0,qt=1,Qt=2,Jt=0,Zt=1,Kt=2,$t=3,en=4,tn=5,nn=100,rn=101,on=102,sn=103,an=104,ln=200,un=201,cn=202,dn=203,hn=204,pn=205,fn=206,mn=207,_n=208,gn=209,vn=210,yn=0,xn=1,bn=2,wn=3,jn=4,Sn=5,An=6,Mn=7,Tn=0,Pn=1,Ln=2,En=0,On=1,In=2,Cn=3,Fn=4,Nn=5,kn=301,Dn=302,Rn=303,zn=304,Un=305,Bn=306,Gn=307,Vn=1e3,Hn=1001,Xn=1002,Wn=1003,Yn=1004,qn=1005,Qn=1006,Jn=1007,Zn=1008,Kn=1009,$n=1010,ei=1011,ti=1012,ni=1013,ii=1014,ri=1015,oi=1016,si=1017,ai=1018,li=1019,ui=1020,ci=1021,di=1022,hi=1023,pi=1024,fi=1025,mi=1026,_i=1027,gi=1028,vi=33776,yi=33777,xi=33778,bi=33779,wi=35840,ji=35841,Si=35842,Ai=35843,Mi=36196,Ti=37808,Pi=37809,Li=37810,Ei=37811,Oi=37812,Ii=37813,Ci=37814,Fi=37815,Ni=37816,ki=37817,Di=37818,Ri=37819,zi=37820,Ui=37821,Bi=2201,Gi=2400,Vi=0,Hi=1,Xi=2,Wi=3e3,Yi=3001,qi=3007,Qi=3002,Ji=3003,Zi=3004,Ki=3005,$i=3006,er=3200,tr=3201,nr=0,ir=1,rr=7680,or=519,sr=[],ar=0;ar<256;ar++)sr[ar]=(ar<16?"0":"")+ar.toString(16);var lr={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(sr[255&e]+sr[e>>8&255]+sr[e>>16&255]+sr[e>>24&255]+"-"+sr[255&t]+sr[t>>8&255]+"-"+sr[t>>16&15|64]+sr[t>>24&255]+"-"+sr[63&n|128]+sr[n>>8&255]+"-"+sr[n>>16&255]+sr[n>>24&255]+sr[255&i]+sr[i>>8&255]+sr[i>>16&255]+sr[i>>24&255]).toUpperCase()},clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,n,i,r){return i+(e-t)*(r-i)/(n-t)},lerp:function(e,t,n){return(1-n)*e+n*t},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*lr.DEG2RAD},radToDeg:function(e){return e*lr.RAD2DEG},isPowerOfTwo:function(e){return 0==(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}};function ur(e,t){this.x=e||0,this.y=t||0}function cr(e,t,n,i){this._x=e||0,this._y=t||0,this._z=n||0,this._w=void 0!==i?i:1}Object.defineProperties(ur.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}}),Object.assign(ur.prototype,{isVector2:!0,set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.x=e,this.y=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?this.addVectors(e,t):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return void 0!==t?this.subVectors(e,t):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},applyMatrix3:function(e){var t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this},clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},cross:function(e){return this.x*e.y-this.y*e.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var e=Math.atan2(this.y,this.x);return e<0&&(e+=2*Math.PI),e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromBufferAttribute:function(e,t,n){return this.x=e.getX(t),this.y=e.getY(t),this},rotateAround:function(e,t){var n=Math.cos(t),i=Math.sin(t),r=this.x-e.x,o=this.y-e.y;return this.x=r*n-o*i+e.x,this.y=r*i+o*n+e.y,this}}),Object.assign(cr,{slerp:function(e,t,n,i){return n.copy(e).slerp(t,i)},slerpFlat:function(e,t,n,i,r,o,s){var a=n[i+0],l=n[i+1],u=n[i+2],c=n[i+3],d=r[o+0],h=r[o+1],p=r[o+2],f=r[o+3];if(c!==f||a!==d||l!==h||u!==p){var m=1-s,_=a*d+l*h+u*p+c*f,g=_>=0?1:-1,v=1-_*_;if(v>Number.EPSILON){var y=Math.sqrt(v),x=Math.atan2(y,_*g);m=Math.sin(m*x)/y,s=Math.sin(s*x)/y}var b=s*g;if(a=a*m+d*b,l=l*m+h*b,u=u*m+p*b,c=c*m+f*b,m===1-s){var w=1/Math.sqrt(a*a+l*l+u*u+c*c);a*=w,l*=w,u*=w,c*=w}}e[t]=a,e[t+1]=l,e[t+2]=u,e[t+3]=c}}),Object.defineProperties(cr.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e,this._onChangeCallback()}}}),Object.assign(cr.prototype,{isQuaternion:!0,set:function(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this},setFromEuler:function(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=e._x,i=e._y,r=e._z,o=e.order,s=Math.cos,a=Math.sin,l=s(n/2),u=s(i/2),c=s(r/2),d=a(n/2),h=a(i/2),p=a(r/2);return"XYZ"===o?(this._x=d*u*c+l*h*p,this._y=l*h*c-d*u*p,this._z=l*u*p+d*h*c,this._w=l*u*c-d*h*p):"YXZ"===o?(this._x=d*u*c+l*h*p,this._y=l*h*c-d*u*p,this._z=l*u*p-d*h*c,this._w=l*u*c+d*h*p):"ZXY"===o?(this._x=d*u*c-l*h*p,this._y=l*h*c+d*u*p,this._z=l*u*p+d*h*c,this._w=l*u*c-d*h*p):"ZYX"===o?(this._x=d*u*c-l*h*p,this._y=l*h*c+d*u*p,this._z=l*u*p-d*h*c,this._w=l*u*c+d*h*p):"YZX"===o?(this._x=d*u*c+l*h*p,this._y=l*h*c+d*u*p,this._z=l*u*p-d*h*c,this._w=l*u*c-d*h*p):"XZY"===o&&(this._x=d*u*c-l*h*p,this._y=l*h*c-d*u*p,this._z=l*u*p+d*h*c,this._w=l*u*c+d*h*p),!1!==t&&this._onChangeCallback(),this},setFromAxisAngle:function(e,t){var n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this._onChangeCallback(),this},setFromRotationMatrix:function(e){var t,n=e.elements,i=n[0],r=n[4],o=n[8],s=n[1],a=n[5],l=n[9],u=n[2],c=n[6],d=n[10],h=i+a+d;return h>0?(t=.5/Math.sqrt(h+1),this._w=.25/t,this._x=(c-l)*t,this._y=(o-u)*t,this._z=(s-r)*t):i>a&&i>d?(t=2*Math.sqrt(1+i-a-d),this._w=(c-l)/t,this._x=.25*t,this._y=(r+s)/t,this._z=(o+u)/t):a>d?(t=2*Math.sqrt(1+a-i-d),this._w=(o-u)/t,this._x=(r+s)/t,this._y=.25*t,this._z=(l+c)/t):(t=2*Math.sqrt(1+d-i-a),this._w=(s-r)/t,this._x=(o+u)/t,this._y=(l+c)/t,this._z=.25*t),this._onChangeCallback(),this},setFromUnitVectors:function(e,t){var n=e.dot(t)+1;return n<1e-6?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()},angleTo:function(e){return 2*Math.acos(Math.abs(lr.clamp(this.dot(e),-1,1)))},rotateTowards:function(e,t){var n=this.angleTo(e);if(0===n)return this;var i=Math.min(1,t/n);return this.slerp(e,i),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this},multiply:function(e,t){return void 0!==t?this.multiplyQuaternions(e,t):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var n=e._x,i=e._y,r=e._z,o=e._w,s=t._x,a=t._y,l=t._z,u=t._w;return this._x=n*u+o*s+i*l-r*a,this._y=i*u+o*a+r*s-n*l,this._z=r*u+o*l+n*a-i*s,this._w=o*u-n*s-i*a-r*l,this._onChangeCallback(),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,i=this._y,r=this._z,o=this._w,s=o*e._w+n*e._x+i*e._y+r*e._z;if(s<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,s=-s):this.copy(e),s>=1)return this._w=o,this._x=n,this._y=i,this._z=r,this;var a=1-s*s;if(a<=Number.EPSILON){var l=1-t;return this._w=l*o+t*this._w,this._x=l*n+t*this._x,this._y=l*i+t*this._y,this._z=l*r+t*this._z,this.normalize(),this._onChangeCallback(),this}var u=Math.sqrt(a),c=Math.atan2(u,s),d=Math.sin((1-t)*c)/u,h=Math.sin(t*c)/u;return this._w=o*d+this._w*h,this._x=n*d+this._x*h,this._y=i*d+this._y*h,this._z=r*d+this._z*h,this._onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},_onChange:function(e){return this._onChangeCallback=e,this},_onChangeCallback:function(){}});var dr=new pr,hr=new cr;function pr(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0}Object.assign(pr.prototype,{isVector3:!0,set:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?this.addVectors(e,t):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return void 0!==t?this.subVectors(e,t):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?this.multiplyVectors(e,t):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:function(e){return!e||e.isEuler,this.applyQuaternion(hr.setFromEuler(e))},applyAxisAngle:function(e,t){return this.applyQuaternion(hr.setFromAxisAngle(e,t))},applyMatrix3:function(e){var t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6]*i,this.y=r[1]*t+r[4]*n+r[7]*i,this.z=r[2]*t+r[5]*n+r[8]*i,this},applyMatrix4:function(e){var t=this.x,n=this.y,i=this.z,r=e.elements,o=1/(r[3]*t+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*t+r[4]*n+r[8]*i+r[12])*o,this.y=(r[1]*t+r[5]*n+r[9]*i+r[13])*o,this.z=(r[2]*t+r[6]*n+r[10]*i+r[14])*o,this},applyQuaternion:function(e){var t=this.x,n=this.y,i=this.z,r=e.x,o=e.y,s=e.z,a=e.w,l=a*t+o*i-s*n,u=a*n+s*t-r*i,c=a*i+r*n-o*t,d=-r*t-o*n-s*i;return this.x=l*a+d*-r+u*-s-c*-o,this.y=u*a+d*-o+c*-r-l*-s,this.z=c*a+d*-s+l*-o-u*-r,this},project:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)},unproject:function(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)},transformDirection:function(e){var t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[4]*n+r[8]*i,this.y=r[1]*t+r[5]*n+r[9]*i,this.z=r[2]*t+r[6]*n+r[10]*i,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this},clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},cross:function(e,t){return void 0!==t?this.crossVectors(e,t):this.crossVectors(this,e)},crossVectors:function(e,t){var n=e.x,i=e.y,r=e.z,o=t.x,s=t.y,a=t.z;return this.x=i*a-r*s,this.y=r*o-n*a,this.z=n*s-i*o,this},projectOnVector:function(e){var t=e.dot(this)/e.lengthSq();return this.copy(e).multiplyScalar(t)},projectOnPlane:function(e){return dr.copy(this).projectOnVector(e),this.sub(dr)},reflect:function(e){return this.sub(dr.copy(e).multiplyScalar(2*this.dot(e)))},angleTo:function(e){var t=this.dot(e)/Math.sqrt(this.lengthSq()*e.lengthSq());return Math.acos(lr.clamp(t,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)},setFromSphericalCoords:function(e,t,n){var i=Math.sin(t)*e;return this.x=i*Math.sin(n),this.y=Math.cos(t)*e,this.z=i*Math.cos(n),this},setFromCylindrical:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)},setFromCylindricalCoords:function(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this},setFromMatrixPosition:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this},setFromMatrixColumn:function(e,t){return this.fromArray(e.elements,4*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromBufferAttribute:function(e,t,n){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}});var fr,mr=new pr;function _r(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length}Object.assign(_r.prototype,{isMatrix3:!0,set:function(e,t,n,i,r,o,s,a,l){var u=this.elements;return u[0]=e,u[1]=i,u[2]=s,u[3]=t,u[4]=r,u[5]=a,u[6]=n,u[7]=o,u[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this},setFromMatrix4:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},applyToBufferAttribute:function(e){for(var t=0,n=e.count;t<n;t++)mr.x=e.getX(t),mr.y=e.getY(t),mr.z=e.getZ(t),mr.applyMatrix3(this),e.setXYZ(t,mr.x,mr.y,mr.z);return e},multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,i=t.elements,r=this.elements,o=n[0],s=n[3],a=n[6],l=n[1],u=n[4],c=n[7],d=n[2],h=n[5],p=n[8],f=i[0],m=i[3],_=i[6],g=i[1],v=i[4],y=i[7],x=i[2],b=i[5],w=i[8];return r[0]=o*f+s*g+a*x,r[3]=o*m+s*v+a*b,r[6]=o*_+s*y+a*w,r[1]=l*f+u*g+c*x,r[4]=l*m+u*v+c*b,r[7]=l*_+u*y+c*w,r[2]=d*f+h*g+p*x,r[5]=d*m+h*v+p*b,r[8]=d*_+h*y+p*w,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],o=e[4],s=e[5],a=e[6],l=e[7],u=e[8];return t*o*u-t*s*l-n*r*u+n*s*a+i*r*l-i*o*a},getInverse:function(e,t){e&&e.isMatrix4;var n=e.elements,i=this.elements,r=n[0],o=n[1],s=n[2],a=n[3],l=n[4],u=n[5],c=n[6],d=n[7],h=n[8],p=h*l-u*d,f=u*c-h*a,m=d*a-l*c,_=r*p+o*f+s*m;if(0===_){if(!0===t)throw new Error("THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0");return this.identity()}var g=1/_;return i[0]=p*g,i[1]=(s*d-h*o)*g,i[2]=(u*o-s*l)*g,i[3]=f*g,i[4]=(h*r-s*c)*g,i[5]=(s*a-u*r)*g,i[6]=m*g,i[7]=(o*c-d*r)*g,i[8]=(l*r-o*a)*g,this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},setUvTransform:function(e,t,n,i,r,o,s){var a=Math.cos(r),l=Math.sin(r);this.set(n*a,n*l,-n*(a*o+l*s)+o+e,-i*l,i*a,-i*(-l*o+a*s)+s+t,0,0,1)},scale:function(e,t){var n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this},rotate:function(e){var t=Math.cos(e),n=Math.sin(e),i=this.elements,r=i[0],o=i[3],s=i[6],a=i[1],l=i[4],u=i[7];return i[0]=t*r+n*a,i[3]=t*o+n*l,i[6]=t*s+n*u,i[1]=-n*r+t*a,i[4]=-n*o+t*l,i[7]=-n*s+t*u,this},translate:function(e,t){var n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this},equals:function(e){for(var t=this.elements,n=e.elements,i=0;i<9;i++)if(t[i]!==n[i])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<9;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}});var gr={getDataURL:function(e){var t;if("undefined"==typeof HTMLCanvasElement)return e.src;if(e instanceof HTMLCanvasElement)t=e;else{void 0===fr&&(fr=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),fr.width=e.width,fr.height=e.height;var n=fr.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=fr}return t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}},vr=0;function yr(e,t,n,i,r,o,s,a,l,u){Object.defineProperty(this,"id",{value:vr++}),this.uuid=lr.generateUUID(),this.name="",this.image=void 0!==e?e:yr.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:yr.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:Hn,this.wrapT=void 0!==i?i:Hn,this.magFilter=void 0!==r?r:Qn,this.minFilter=void 0!==o?o:Zn,this.anisotropy=void 0!==l?l:1,this.format=void 0!==s?s:hi,this.type=void 0!==a?a:Kn,this.offset=new ur(0,0),this.repeat=new ur(1,1),this.center=new ur(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new _r,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==u?u:Wi,this.version=0,this.onUpdate=null}function xr(e,t,n,i){this.x=e||0,this.y=t||0,this.z=n||0,this.w=void 0!==i?i:1}function br(e,t,n){this.width=e,this.height=t,this.scissor=new xr(0,0,e,t),this.scissorTest=!1,this.viewport=new xr(0,0,e,t),n=n||{},this.texture=new yr(void 0,void 0,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.image={},this.texture.image.width=e,this.texture.image.height=t,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:Qn,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function wr(e,t,n){br.call(this,e,t,n),this.samples=4}yr.DEFAULT_IMAGE=void 0,yr.DEFAULT_MAPPING=300,yr.prototype=Object.assign(Object.create(Dt.prototype),{constructor:yr,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){var t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var i=this.image;if(void 0===i.uuid&&(i.uuid=lr.generateUUID()),!t&&void 0===e.images[i.uuid]){var r;if(Array.isArray(i)){r=[];for(var o=0,s=i.length;o<s;o++)r.push(gr.getDataURL(i[o]))}else r=gr.getDataURL(i);e.images[i.uuid]={uuid:i.uuid,url:r}}n.image=i.uuid}return t||(e.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Vn:e.x=e.x-Math.floor(e.x);break;case Hn:e.x=e.x<0?0:1;break;case Xn:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case Vn:e.y=e.y-Math.floor(e.y);break;case Hn:e.y=e.y<0?0:1;break;case Xn:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}}),Object.defineProperty(yr.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.defineProperties(xr.prototype,{width:{get:function(){return this.z},set:function(e){this.z=e}},height:{get:function(){return this.w},set:function(e){this.w=e}}}),Object.assign(xr.prototype,{isVector4:!0,set:function(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?this.addVectors(e,t):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return void 0!==t?this.subVectors(e,t):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var t=this.x,n=this.y,i=this.z,r=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*i+o[12]*r,this.y=o[1]*t+o[5]*n+o[9]*i+o[13]*r,this.z=o[2]*t+o[6]*n+o[10]*i+o[14]*r,this.w=o[3]*t+o[7]*n+o[11]*i+o[15]*r,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,n,i,r,o=e.elements,s=o[0],a=o[4],l=o[8],u=o[1],c=o[5],d=o[9],h=o[2],p=o[6],f=o[10];if(Math.abs(a-u)<.01&&Math.abs(l-h)<.01&&Math.abs(d-p)<.01){if(Math.abs(a+u)<.1&&Math.abs(l+h)<.1&&Math.abs(d+p)<.1&&Math.abs(s+c+f-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;var m=(s+1)/2,_=(c+1)/2,g=(f+1)/2,v=(a+u)/4,y=(l+h)/4,x=(d+p)/4;return m>_&&m>g?m<.01?(n=0,i=.707106781,r=.707106781):(i=v/(n=Math.sqrt(m)),r=y/n):_>g?_<.01?(n=.707106781,i=0,r=.707106781):(n=v/(i=Math.sqrt(_)),r=x/i):g<.01?(n=.707106781,i=.707106781,r=0):(n=y/(r=Math.sqrt(g)),i=x/r),this.set(n,i,r,t),this}var b=Math.sqrt((p-d)*(p-d)+(l-h)*(l-h)+(u-a)*(u-a));return Math.abs(b)<.001&&(b=1),this.x=(p-d)/b,this.y=(l-h)/b,this.z=(u-a)/b,this.w=Math.acos((s+c+f-1)/2),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this},clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromBufferAttribute:function(e,t,n){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}}),br.prototype=Object.assign(Object.create(Dt.prototype),{constructor:br,isWebGLRenderTarget:!0,setSize:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.texture.image.width=e,this.texture.image.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),wr.prototype=Object.assign(Object.create(br.prototype),{constructor:wr,isWebGLMultisampleRenderTarget:!0,copy:function(e){return br.prototype.copy.call(this,e),this.samples=e.samples,this}});var jr=new pr,Sr=new Er,Ar=new pr(0,0,0),Mr=new pr(1,1,1),Tr=new pr,Pr=new pr,Lr=new pr;function Er(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length}Object.assign(Er.prototype,{isMatrix4:!0,set:function(e,t,n,i,r,o,s,a,l,u,c,d,h,p,f,m){var _=this.elements;return _[0]=e,_[4]=t,_[8]=n,_[12]=i,_[1]=r,_[5]=o,_[9]=s,_[13]=a,_[2]=l,_[6]=u,_[10]=c,_[14]=d,_[3]=h,_[7]=p,_[11]=f,_[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new Er).fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this},copyPosition:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this},extractBasis:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this},extractRotation:function(e){var t=this.elements,n=e.elements,i=1/jr.setFromMatrixColumn(e,0).length(),r=1/jr.setFromMatrixColumn(e,1).length(),o=1/jr.setFromMatrixColumn(e,2).length();return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[3]=0,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromEuler:function(e){!e||e.isEuler;var t=this.elements,n=e.x,i=e.y,r=e.z,o=Math.cos(n),s=Math.sin(n),a=Math.cos(i),l=Math.sin(i),u=Math.cos(r),c=Math.sin(r);if("XYZ"===e.order){var d=o*u,h=o*c,p=s*u,f=s*c;t[0]=a*u,t[4]=-a*c,t[8]=l,t[1]=h+p*l,t[5]=d-f*l,t[9]=-s*a,t[2]=f-d*l,t[6]=p+h*l,t[10]=o*a}else if("YXZ"===e.order){var m=a*u,_=a*c,g=l*u,v=l*c;t[0]=m+v*s,t[4]=g*s-_,t[8]=o*l,t[1]=o*c,t[5]=o*u,t[9]=-s,t[2]=_*s-g,t[6]=v+m*s,t[10]=o*a}else if("ZXY"===e.order){m=a*u,_=a*c,g=l*u,v=l*c;t[0]=m-v*s,t[4]=-o*c,t[8]=g+_*s,t[1]=_+g*s,t[5]=o*u,t[9]=v-m*s,t[2]=-o*l,t[6]=s,t[10]=o*a}else if("ZYX"===e.order){d=o*u,h=o*c,p=s*u,f=s*c;t[0]=a*u,t[4]=p*l-h,t[8]=d*l+f,t[1]=a*c,t[5]=f*l+d,t[9]=h*l-p,t[2]=-l,t[6]=s*a,t[10]=o*a}else if("YZX"===e.order){var y=o*a,x=o*l,b=s*a,w=s*l;t[0]=a*u,t[4]=w-y*c,t[8]=b*c+x,t[1]=c,t[5]=o*u,t[9]=-s*u,t[2]=-l*u,t[6]=x*c+b,t[10]=y-w*c}else if("XZY"===e.order){y=o*a,x=o*l,b=s*a,w=s*l;t[0]=a*u,t[4]=-c,t[8]=l*u,t[1]=y*c+w,t[5]=o*u,t[9]=x*c-b,t[2]=b*c-x,t[6]=s*u,t[10]=w*c+y}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:function(e){return this.compose(Ar,e,Mr)},lookAt:function(e,t,n){var i=this.elements;return Lr.subVectors(e,t),0===Lr.lengthSq()&&(Lr.z=1),Lr.normalize(),Tr.crossVectors(n,Lr),0===Tr.lengthSq()&&(1===Math.abs(n.z)?Lr.x+=1e-4:Lr.z+=1e-4,Lr.normalize(),Tr.crossVectors(n,Lr)),Tr.normalize(),Pr.crossVectors(Lr,Tr),i[0]=Tr.x,i[4]=Pr.x,i[8]=Lr.x,i[1]=Tr.y,i[5]=Pr.y,i[9]=Lr.y,i[2]=Tr.z,i[6]=Pr.z,i[10]=Lr.z,this},multiply:function(e,t){return void 0!==t?this.multiplyMatrices(e,t):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,i=t.elements,r=this.elements,o=n[0],s=n[4],a=n[8],l=n[12],u=n[1],c=n[5],d=n[9],h=n[13],p=n[2],f=n[6],m=n[10],_=n[14],g=n[3],v=n[7],y=n[11],x=n[15],b=i[0],w=i[4],j=i[8],S=i[12],A=i[1],M=i[5],T=i[9],P=i[13],L=i[2],E=i[6],O=i[10],I=i[14],C=i[3],F=i[7],N=i[11],k=i[15];return r[0]=o*b+s*A+a*L+l*C,r[4]=o*w+s*M+a*E+l*F,r[8]=o*j+s*T+a*O+l*N,r[12]=o*S+s*P+a*I+l*k,r[1]=u*b+c*A+d*L+h*C,r[5]=u*w+c*M+d*E+h*F,r[9]=u*j+c*T+d*O+h*N,r[13]=u*S+c*P+d*I+h*k,r[2]=p*b+f*A+m*L+_*C,r[6]=p*w+f*M+m*E+_*F,r[10]=p*j+f*T+m*O+_*N,r[14]=p*S+f*P+m*I+_*k,r[3]=g*b+v*A+y*L+x*C,r[7]=g*w+v*M+y*E+x*F,r[11]=g*j+v*T+y*O+x*N,r[15]=g*S+v*P+y*I+x*k,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},applyToBufferAttribute:function(e){for(var t=0,n=e.count;t<n;t++)jr.x=e.getX(t),jr.y=e.getY(t),jr.z=e.getZ(t),jr.applyMatrix4(this),e.setXYZ(t,jr.x,jr.y,jr.z);return e},determinant:function(){var e=this.elements,t=e[0],n=e[4],i=e[8],r=e[12],o=e[1],s=e[5],a=e[9],l=e[13],u=e[2],c=e[6],d=e[10],h=e[14];return e[3]*(+r*a*c-i*l*c-r*s*d+n*l*d+i*s*h-n*a*h)+e[7]*(+t*a*h-t*l*d+r*o*d-i*o*h+i*l*u-r*a*u)+e[11]*(+t*l*c-t*s*h-r*o*c+n*o*h+r*s*u-n*l*u)+e[15]*(-i*s*u-t*a*c+t*s*d+i*o*c-n*o*d+n*a*u)},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},setPosition:function(e,t,n){var i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=n),this},getInverse:function(e,t){var n=this.elements,i=e.elements,r=i[0],o=i[1],s=i[2],a=i[3],l=i[4],u=i[5],c=i[6],d=i[7],h=i[8],p=i[9],f=i[10],m=i[11],_=i[12],g=i[13],v=i[14],y=i[15],x=p*v*d-g*f*d+g*c*m-u*v*m-p*c*y+u*f*y,b=_*f*d-h*v*d-_*c*m+l*v*m+h*c*y-l*f*y,w=h*g*d-_*p*d+_*u*m-l*g*m-h*u*y+l*p*y,j=_*p*c-h*g*c-_*u*f+l*g*f+h*u*v-l*p*v,S=r*x+o*b+s*w+a*j;if(0===S){if(!0===t)throw new Error("THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0");return this.identity()}var A=1/S;return n[0]=x*A,n[1]=(g*f*a-p*v*a-g*s*m+o*v*m+p*s*y-o*f*y)*A,n[2]=(u*v*a-g*c*a+g*s*d-o*v*d-u*s*y+o*c*y)*A,n[3]=(p*c*a-u*f*a-p*s*d+o*f*d+u*s*m-o*c*m)*A,n[4]=b*A,n[5]=(h*v*a-_*f*a+_*s*m-r*v*m-h*s*y+r*f*y)*A,n[6]=(_*c*a-l*v*a-_*s*d+r*v*d+l*s*y-r*c*y)*A,n[7]=(l*f*a-h*c*a+h*s*d-r*f*d-l*s*m+r*c*m)*A,n[8]=w*A,n[9]=(_*p*a-h*g*a-_*o*m+r*g*m+h*o*y-r*p*y)*A,n[10]=(l*g*a-_*u*a+_*o*d-r*g*d-l*o*y+r*u*y)*A,n[11]=(h*u*a-l*p*a-h*o*d+r*p*d+l*o*m-r*u*m)*A,n[12]=j*A,n[13]=(h*g*s-_*p*s+_*o*f-r*g*f-h*o*v+r*p*v)*A,n[14]=(_*u*s-l*g*s-_*o*c+r*g*c+l*o*v-r*u*v)*A,n[15]=(l*p*s-h*u*s+h*o*c-r*p*c-l*o*f+r*u*f)*A,this},scale:function(e){var t=this.elements,n=e.x,i=e.y,r=e.z;return t[0]*=n,t[4]*=i,t[8]*=r,t[1]*=n,t[5]*=i,t[9]*=r,t[2]*=n,t[6]*=i,t[10]*=r,t[3]*=n,t[7]*=i,t[11]*=r,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,i))},makeTranslation:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var n=Math.cos(t),i=Math.sin(t),r=1-n,o=e.x,s=e.y,a=e.z,l=r*o,u=r*s;return this.set(l*o+n,l*s-i*a,l*a+i*s,0,l*s+i*a,u*s+n,u*a-i*o,0,l*a-i*s,u*a+i*o,r*a*a+n,0,0,0,0,1),this},makeScale:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(e,t,n){return this.set(1,t,n,0,e,1,n,0,e,t,1,0,0,0,0,1),this},compose:function(e,t,n){var i=this.elements,r=t._x,o=t._y,s=t._z,a=t._w,l=r+r,u=o+o,c=s+s,d=r*l,h=r*u,p=r*c,f=o*u,m=o*c,_=s*c,g=a*l,v=a*u,y=a*c,x=n.x,b=n.y,w=n.z;return i[0]=(1-(f+_))*x,i[1]=(h+y)*x,i[2]=(p-v)*x,i[3]=0,i[4]=(h-y)*b,i[5]=(1-(d+_))*b,i[6]=(m+g)*b,i[7]=0,i[8]=(p+v)*w,i[9]=(m-g)*w,i[10]=(1-(d+f))*w,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this},decompose:function(e,t,n){var i=this.elements,r=jr.set(i[0],i[1],i[2]).length(),o=jr.set(i[4],i[5],i[6]).length(),s=jr.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),e.x=i[12],e.y=i[13],e.z=i[14],Sr.copy(this);var a=1/r,l=1/o,u=1/s;return Sr.elements[0]*=a,Sr.elements[1]*=a,Sr.elements[2]*=a,Sr.elements[4]*=l,Sr.elements[5]*=l,Sr.elements[6]*=l,Sr.elements[8]*=u,Sr.elements[9]*=u,Sr.elements[10]*=u,t.setFromRotationMatrix(Sr),n.x=r,n.y=o,n.z=s,this},makePerspective:function(e,t,n,i,r,o){var s=this.elements,a=2*r/(t-e),l=2*r/(n-i),u=(t+e)/(t-e),c=(n+i)/(n-i),d=-(o+r)/(o-r),h=-2*o*r/(o-r);return s[0]=a,s[4]=0,s[8]=u,s[12]=0,s[1]=0,s[5]=l,s[9]=c,s[13]=0,s[2]=0,s[6]=0,s[10]=d,s[14]=h,s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this},makeOrthographic:function(e,t,n,i,r,o){var s=this.elements,a=1/(t-e),l=1/(n-i),u=1/(o-r),c=(t+e)*a,d=(n+i)*l,h=(o+r)*u;return s[0]=2*a,s[4]=0,s[8]=0,s[12]=-c,s[1]=0,s[5]=2*l,s[9]=0,s[13]=-d,s[2]=0,s[6]=0,s[10]=-2*u,s[14]=-h,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this},equals:function(e){for(var t=this.elements,n=e.elements,i=0;i<16;i++)if(t[i]!==n[i])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<16;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}});var Or=new Er,Ir=new cr;function Cr(e,t,n,i){this._x=e||0,this._y=t||0,this._z=n||0,this._order=i||Cr.DefaultOrder}function Fr(){this.mask=1}Cr.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],Cr.DefaultOrder="XYZ",Object.defineProperties(Cr.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e,this._onChangeCallback()}}}),Object.assign(Cr.prototype,{isEuler:!0,set:function(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._order=i||this._order,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this},setFromRotationMatrix:function(e,t,n){var i=lr.clamp,r=e.elements,o=r[0],s=r[4],a=r[8],l=r[1],u=r[5],c=r[9],d=r[2],h=r[6],p=r[10];return"XYZ"===(t=t||this._order)?(this._y=Math.asin(i(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,p),this._z=Math.atan2(-s,o)):(this._x=Math.atan2(h,u),this._z=0)):"YXZ"===t?(this._x=Math.asin(-i(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(a,p),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-d,o),this._z=0)):"ZXY"===t?(this._x=Math.asin(i(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-d,p),this._z=Math.atan2(-s,u)):(this._y=0,this._z=Math.atan2(l,o))):"ZYX"===t?(this._y=Math.asin(-i(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(h,p),this._z=Math.atan2(l,o)):(this._x=0,this._z=Math.atan2(-s,u))):"YZX"===t?(this._z=Math.asin(i(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-d,o)):(this._x=0,this._y=Math.atan2(a,p))):"XZY"===t&&(this._z=Math.asin(-i(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(h,u),this._y=Math.atan2(a,o)):(this._x=Math.atan2(-c,p),this._y=0)),this._order=t,!1!==n&&this._onChangeCallback(),this},setFromQuaternion:function(e,t,n){return Or.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Or,t,n)},setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:function(e){return Ir.setFromEuler(this),this.setFromQuaternion(Ir,e)},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new pr(this._x,this._y,this._z)},_onChange:function(e){return this._onChangeCallback=e,this},_onChangeCallback:function(){}}),Object.assign(Fr.prototype,{set:function(e){this.mask=1<<e|0},enable:function(e){this.mask|=1<<e|0},enableAll:function(){this.mask=-1},toggle:function(e){this.mask^=1<<e|0},disable:function(e){this.mask&=~(1<<e|0)},disableAll:function(){this.mask=0},test:function(e){return 0!=(this.mask&e.mask)}});var Nr=0,kr=new pr,Dr=new cr,Rr=new Er,zr=new pr,Ur=new pr,Br=new pr,Gr=new cr,Vr=new pr(1,0,0),Hr=new pr(0,1,0),Xr=new pr(0,0,1),Wr={type:"added"},Yr={type:"removed"};function qr(){Object.defineProperty(this,"id",{value:Nr++}),this.uuid=lr.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=qr.DefaultUp.clone();var e=new pr,t=new Cr,n=new cr,i=new pr(1,1,1);t._onChange(function(){n.setFromEuler(t,!1)}),n._onChange(function(){t.setFromQuaternion(n,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Er},normalMatrix:{value:new _r}}),this.matrix=new Er,this.matrixWorld=new Er,this.matrixAutoUpdate=qr.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Fr,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function Qr(){qr.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}qr.DefaultUp=new pr(0,1,0),qr.DefaultMatrixAutoUpdate=!0,qr.prototype=Object.assign(Object.create(Dt.prototype),{constructor:qr,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(e,t){return Dr.setFromAxisAngle(e,t),this.quaternion.multiply(Dr),this},rotateOnWorldAxis:function(e,t){return Dr.setFromAxisAngle(e,t),this.quaternion.premultiply(Dr),this},rotateX:function(e){return this.rotateOnAxis(Vr,e)},rotateY:function(e){return this.rotateOnAxis(Hr,e)},rotateZ:function(e){return this.rotateOnAxis(Xr,e)},translateOnAxis:function(e,t){return kr.copy(e).applyQuaternion(this.quaternion),this.position.add(kr.multiplyScalar(t)),this},translateX:function(e){return this.translateOnAxis(Vr,e)},translateY:function(e){return this.translateOnAxis(Hr,e)},translateZ:function(e){return this.translateOnAxis(Xr,e)},localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(e){return e.applyMatrix4(Rr.getInverse(this.matrixWorld))},lookAt:function(e,t,n){e.isVector3?zr.copy(e):zr.set(e,t,n);var i=this.parent;this.updateWorldMatrix(!0,!1),Ur.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Rr.lookAt(Ur,zr,this.up):Rr.lookAt(zr,Ur,this.up),this.quaternion.setFromRotationMatrix(Rr),i&&(Rr.extractRotation(i.matrixWorld),Dr.setFromRotationMatrix(Rr),this.quaternion.premultiply(Dr.inverse()))},add:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?this:(e&&e.isObject3D&&(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Wr)),this)},remove:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var n=this.children.indexOf(e);return-1!==n&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(Yr)),this},attach:function(e){return this.updateWorldMatrix(!0,!1),Rr.getInverse(this.matrixWorld),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Rr.multiply(e.parent.matrixWorld)),e.applyMatrix(Rr),e.updateWorldMatrix(!1,!1),this.add(e),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var n=0,i=this.children.length;n<i;n++){var r=this.children[n].getObjectByProperty(e,t);if(void 0!==r)return r}},getWorldPosition:function(e){return void 0===e&&(e=new pr),this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(e){return void 0===e&&(e=new cr),this.updateMatrixWorld(!0),this.matrixWorld.decompose(Ur,e,Br),e},getWorldScale:function(e){return void 0===e&&(e=new pr),this.updateMatrixWorld(!0),this.matrixWorld.decompose(Ur,Gr,e),e},getWorldDirection:function(e){void 0===e&&(e=new pr),this.updateMatrixWorld(!0);var t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()},raycast:function(){},traverse:function(e){e(this);for(var t=this.children,n=0,i=t.length;n<i;n++)t[n].traverse(e)},traverseVisible:function(e){if(!1!==this.visible){e(this);for(var t=this.children,n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,i=t.length;n<i;n++)t[n].updateMatrixWorld(e)},updateWorldMatrix:function(e,t){var n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t)for(var i=this.children,r=0,o=i.length;r<o;r++)i[r].updateWorldMatrix(!1,!0)},toJSON:function(e){var t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var i={};function r(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isMesh&&this.drawMode!==Vi&&(i.drawMode=this.drawMode),this.isMesh||this.isLine||this.isPoints){i.geometry=r(e.geometries,this.geometry);var o=this.geometry.parameters;if(void 0!==o&&void 0!==o.shapes){var s=o.shapes;if(Array.isArray(s))for(var a=0,l=s.length;a<l;a++){var u=s[a];r(e.shapes,u)}else r(e.shapes,s)}}if(void 0!==this.material)if(Array.isArray(this.material)){var c=[];for(a=0,l=this.material.length;a<l;a++)c.push(r(e.materials,this.material[a]));i.material=c}else i.material=r(e.materials,this.material);if(this.children.length>0){i.children=[];for(a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(t){var d=m(e.geometries),h=m(e.materials),p=m(e.textures),f=m(e.images);s=m(e.shapes);d.length>0&&(n.geometries=d),h.length>0&&(n.materials=h),p.length>0&&(n.textures=p),f.length>0&&(n.images=f),s.length>0&&(n.shapes=s)}return n.object=i,n;function m(e){var t=[];for(var n in e){var i=e[n];delete i.metadata,t.push(i)}return t}},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var n=0;n<e.children.length;n++){var i=e.children[n];this.add(i.clone())}return this}}),Qr.prototype=Object.assign(Object.create(qr.prototype),{constructor:Qr,isScene:!0,copy:function(e,t){return qr.prototype.copy.call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},toJSON:function(e){var t=qr.prototype.toJSON.call(this,e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t},dispose:function(){this.dispatchEvent({type:"dispose"})}});var Jr=[new pr,new pr,new pr,new pr,new pr,new pr,new pr,new pr],Zr=new pr,Kr=new pr,$r=new pr,eo=new pr,to=new pr,no=new pr,io=new pr,ro=new pr,oo=new pr,so=new pr,ao=new pr;function lo(e,t){this.min=void 0!==e?e:new pr(1/0,1/0,1/0),this.max=void 0!==t?t:new pr(-1/0,-1/0,-1/0)}function uo(e,t,n,i,r){var o,s;for(o=0,s=e.length-3;o<=s;o+=3){ao.fromArray(e,o);var a=r.x*Math.abs(ao.x)+r.y*Math.abs(ao.y)+r.z*Math.abs(ao.z),l=t.dot(ao),u=n.dot(ao),c=i.dot(ao);if(Math.max(-Math.max(l,u,c),Math.min(l,u,c))>a)return!1}return!0}Object.assign(lo.prototype,{isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){for(var t=1/0,n=1/0,i=1/0,r=-1/0,o=-1/0,s=-1/0,a=0,l=e.length;a<l;a+=3){var u=e[a],c=e[a+1],d=e[a+2];u<t&&(t=u),c<n&&(n=c),d<i&&(i=d),u>r&&(r=u),c>o&&(o=c),d>s&&(s=d)}return this.min.set(t,n,i),this.max.set(r,o,s),this},setFromBufferAttribute:function(e){for(var t=1/0,n=1/0,i=1/0,r=-1/0,o=-1/0,s=-1/0,a=0,l=e.count;a<l;a++){var u=e.getX(a),c=e.getY(a),d=e.getZ(a);u<t&&(t=u),c<n&&(n=c),d<i&&(i=d),u>r&&(r=u),c>o&&(o=c),d>s&&(s=d)}return this.min.set(t,n,i),this.max.set(r,o,s),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(e,t){var n=Zr.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this},setFromObject:function(e){return this.makeEmpty(),this.expandByObject(e)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){return void 0===e&&(e=new pr),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(e=new pr),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},expandByObject:function(e){var t,n;e.updateWorldMatrix(!1,!1);var i=e.geometry;if(void 0!==i)if(i.isGeometry){var r=i.vertices;for(t=0,n=r.length;t<n;t++)Zr.copy(r[t]),Zr.applyMatrix4(e.matrixWorld),this.expandByPoint(Zr)}else if(i.isBufferGeometry){var o=i.attributes.position;if(void 0!==o)for(t=0,n=o.count;t<n;t++)Zr.fromBufferAttribute(o,t).applyMatrix4(e.matrixWorld),this.expandByPoint(Zr)}var s=e.children;for(t=0,n=s.length;t<n;t++)this.expandByObject(s[t]);return this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){return void 0===t&&(t=new pr),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:function(e){return this.clampPoint(e.center,Zr),Zr.distanceToSquared(e.center)<=e.radius*e.radius},intersectsPlane:function(e){var t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant},intersectsTriangle:function(e){if(this.isEmpty())return!1;this.getCenter(ro),oo.subVectors(this.max,ro),Kr.subVectors(e.a,ro),$r.subVectors(e.b,ro),eo.subVectors(e.c,ro),to.subVectors($r,Kr),no.subVectors(eo,$r),io.subVectors(Kr,eo);var t=[0,-to.z,to.y,0,-no.z,no.y,0,-io.z,io.y,to.z,0,-to.x,no.z,0,-no.x,io.z,0,-io.x,-to.y,to.x,0,-no.y,no.x,0,-io.y,io.x,0];return!!uo(t,Kr,$r,eo,oo)&&(!!uo(t=[1,0,0,0,1,0,0,0,1],Kr,$r,eo,oo)&&(so.crossVectors(to,no),uo(t=[so.x,so.y,so.z],Kr,$r,eo,oo)))},clampPoint:function(e,t){return void 0===t&&(t=new pr),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(e){return Zr.copy(e).clamp(this.min,this.max).sub(e).length()},getBoundingSphere:function(e){return this.getCenter(e.center),e.radius=.5*this.getSize(Zr).length(),e},intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(e){return this.isEmpty()?this:(Jr[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Jr[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Jr[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Jr[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Jr[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Jr[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Jr[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Jr[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Jr),this)},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}});var co=new lo;function ho(e,t){this.center=void 0!==e?e:new pr,this.radius=void 0!==t?t:0}Object.assign(ho.prototype,{set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:function(e,t){var n=this.center;void 0!==t?n.copy(t):co.setFromPoints(e).getCenter(n);for(var i=0,r=0,o=e.length;r<o;r++)i=Math.max(i,n.distanceToSquared(e[r]));return this.radius=Math.sqrt(i),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius},clampPoint:function(e,t){var n=this.center.distanceToSquared(e);return void 0===t&&(t=new pr),t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t},getBoundingBox:function(e){return void 0===e&&(e=new lo),e.set(this.center,this.center),e.expandByScalar(this.radius),e},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}});var po=new pr,fo=new pr,mo=new pr,_o=new pr,go=new pr,vo=new pr,yo=new pr;function xo(e,t){this.origin=void 0!==e?e:new pr,this.direction=void 0!==t?t:new pr}Object.assign(xo.prototype,{set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return void 0===t&&(t=new pr),t.copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(e){return this.origin.copy(this.at(e,po)),this},closestPointToPoint:function(e,t){void 0===t&&(t=new pr),t.subVectors(e,this.origin);var n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(e){var t=po.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(po.copy(this.direction).multiplyScalar(t).add(this.origin),po.distanceToSquared(e))},distanceSqToSegment:function(e,t,n,i){fo.copy(e).add(t).multiplyScalar(.5),mo.copy(t).sub(e).normalize(),_o.copy(this.origin).sub(fo);var r,o,s,a,l=.5*e.distanceTo(t),u=-this.direction.dot(mo),c=_o.dot(this.direction),d=-_o.dot(mo),h=_o.lengthSq(),p=Math.abs(1-u*u);if(p>0)if(o=u*c-d,a=l*p,(r=u*d-c)>=0)if(o>=-a)if(o<=a){var f=1/p;s=(r*=f)*(r+u*(o*=f)+2*c)+o*(u*r+o+2*d)+h}else o=l,s=-(r=Math.max(0,-(u*o+c)))*r+o*(o+2*d)+h;else o=-l,s=-(r=Math.max(0,-(u*o+c)))*r+o*(o+2*d)+h;else o<=-a?s=-(r=Math.max(0,-(-u*l+c)))*r+(o=r>0?-l:Math.min(Math.max(-l,-d),l))*(o+2*d)+h:o<=a?(r=0,s=(o=Math.min(Math.max(-l,-d),l))*(o+2*d)+h):s=-(r=Math.max(0,-(u*l+c)))*r+(o=r>0?l:Math.min(Math.max(-l,-d),l))*(o+2*d)+h;else o=u>0?-l:l,s=-(r=Math.max(0,-(u*o+c)))*r+o*(o+2*d)+h;return n&&n.copy(this.direction).multiplyScalar(r).add(this.origin),i&&i.copy(mo).multiplyScalar(o).add(fo),s},intersectSphere:function(e,t){po.subVectors(e.center,this.origin);var n=po.dot(this.direction),i=po.dot(po)-n*n,r=e.radius*e.radius;if(i>r)return null;var o=Math.sqrt(r-i),s=n-o,a=n+o;return s<0&&a<0?null:s<0?this.at(a,t):this.at(s,t)},intersectsSphere:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null},intersectPlane:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0},intersectBox:function(e,t){var n,i,r,o,s,a,l=1/this.direction.x,u=1/this.direction.y,c=1/this.direction.z,d=this.origin;return l>=0?(n=(e.min.x-d.x)*l,i=(e.max.x-d.x)*l):(n=(e.max.x-d.x)*l,i=(e.min.x-d.x)*l),u>=0?(r=(e.min.y-d.y)*u,o=(e.max.y-d.y)*u):(r=(e.max.y-d.y)*u,o=(e.min.y-d.y)*u),n>o||r>i?null:((r>n||n!=n)&&(n=r),(o<i||i!=i)&&(i=o),c>=0?(s=(e.min.z-d.z)*c,a=(e.max.z-d.z)*c):(s=(e.max.z-d.z)*c,a=(e.min.z-d.z)*c),n>a||s>i?null:((s>n||n!=n)&&(n=s),(a<i||i!=i)&&(i=a),i<0?null:this.at(n>=0?n:i,t)))},intersectsBox:function(e){return null!==this.intersectBox(e,po)},intersectTriangle:function(e,t,n,i,r){go.subVectors(t,e),vo.subVectors(n,e),yo.crossVectors(go,vo);var o,s=this.direction.dot(yo);if(s>0){if(i)return null;o=1}else{if(!(s<0))return null;o=-1,s=-s}_o.subVectors(this.origin,e);var a=o*this.direction.dot(vo.crossVectors(_o,vo));if(a<0)return null;var l=o*this.direction.dot(go.cross(_o));if(l<0)return null;if(a+l>s)return null;var u=-o*_o.dot(yo);return u<0?null:this.at(u/s,r)},applyMatrix4:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}});var bo=new pr,wo=new pr,jo=new pr,So=new pr,Ao=new pr,Mo=new pr,To=new pr,Po=new pr,Lo=new pr,Eo=new pr;function Oo(e,t,n){this.a=void 0!==e?e:new pr,this.b=void 0!==t?t:new pr,this.c=void 0!==n?n:new pr}Object.assign(Oo,{getNormal:function(e,t,n,i){void 0===i&&(i=new pr),i.subVectors(n,t),bo.subVectors(e,t),i.cross(bo);var r=i.lengthSq();return r>0?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)},getBarycoord:function(e,t,n,i,r){bo.subVectors(i,t),wo.subVectors(n,t),jo.subVectors(e,t);var o=bo.dot(bo),s=bo.dot(wo),a=bo.dot(jo),l=wo.dot(wo),u=wo.dot(jo),c=o*l-s*s;if(void 0===r&&(r=new pr),0===c)return r.set(-2,-1,-1);var d=1/c,h=(l*a-s*u)*d,p=(o*u-s*a)*d;return r.set(1-h-p,p,h)},containsPoint:function(e,t,n,i){return Oo.getBarycoord(e,t,n,i,So),So.x>=0&&So.y>=0&&So.x+So.y<=1},getUV:function(e,t,n,i,r,o,s,a){return this.getBarycoord(e,t,n,i,So),a.set(0,0),a.addScaledVector(r,So.x),a.addScaledVector(o,So.y),a.addScaledVector(s,So.z),a},isFrontFacing:function(e,t,n,i){return bo.subVectors(n,t),wo.subVectors(e,t),bo.cross(wo).dot(i)<0}}),Object.assign(Oo.prototype,{set:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this},setFromPointsAndIndices:function(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},getArea:function(){return bo.subVectors(this.c,this.b),wo.subVectors(this.a,this.b),.5*bo.cross(wo).length()},getMidpoint:function(e){return void 0===e&&(e=new pr),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(e){return Oo.getNormal(this.a,this.b,this.c,e)},getPlane:function(e){return void 0===e&&(e=new pr),e.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(e,t){return Oo.getBarycoord(e,this.a,this.b,this.c,t)},getUV:function(e,t,n,i,r){return Oo.getUV(e,this.a,this.b,this.c,t,n,i,r)},containsPoint:function(e){return Oo.containsPoint(e,this.a,this.b,this.c)},isFrontFacing:function(e){return Oo.isFrontFacing(this.a,this.b,this.c,e)},intersectsBox:function(e){return e.intersectsTriangle(this)},closestPointToPoint:function(e,t){void 0===t&&(t=new pr);var n,i,r=this.a,o=this.b,s=this.c;Ao.subVectors(o,r),Mo.subVectors(s,r),Po.subVectors(e,r);var a=Ao.dot(Po),l=Mo.dot(Po);if(a<=0&&l<=0)return t.copy(r);Lo.subVectors(e,o);var u=Ao.dot(Lo),c=Mo.dot(Lo);if(u>=0&&c<=u)return t.copy(o);var d=a*c-u*l;if(d<=0&&a>=0&&u<=0)return n=a/(a-u),t.copy(r).addScaledVector(Ao,n);Eo.subVectors(e,s);var h=Ao.dot(Eo),p=Mo.dot(Eo);if(p>=0&&h<=p)return t.copy(s);var f=h*l-a*p;if(f<=0&&l>=0&&p<=0)return i=l/(l-p),t.copy(r).addScaledVector(Mo,i);var m=u*p-h*c;if(m<=0&&c-u>=0&&h-p>=0)return To.subVectors(s,o),i=(c-u)/(c-u+(h-p)),t.copy(o).addScaledVector(To,i);var _=1/(m+f+d);return n=f*_,i=d*_,t.copy(r).addScaledVector(Ao,n).addScaledVector(Mo,i)},equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}});var Io={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Co={h:0,s:0,l:0},Fo={h:0,s:0,l:0};function No(e,t,n){return void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}function ko(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function Do(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function Ro(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}function zo(e,t,n,i,r,o){this.a=e,this.b=t,this.c=n,this.normal=i&&i.isVector3?i:new pr,this.vertexNormals=Array.isArray(i)?i:[],this.color=r&&r.isColor?r:new No,this.vertexColors=Array.isArray(r)?r:[],this.materialIndex=void 0!==o?o:0}Object.assign(No.prototype,{isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this},setScalar:function(e){return this.r=e,this.g=e,this.b=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,n){return this.r=e,this.g=t,this.b=n,this},setHSL:function(e,t,n){if(e=lr.euclideanModulo(e,1),t=lr.clamp(t,0,1),n=lr.clamp(n,0,1),0===t)this.r=this.g=this.b=n;else{var i=n<=.5?n*(1+t):n+t-n*t,r=2*n-i;this.r=ko(r,i,e+1/3),this.g=ko(r,i,e),this.b=ko(r,i,e-1/3)}return this},setStyle:function(e){function t(e){void 0!==e&&parseFloat(e)}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var i,r=n[1],o=n[2];switch(r){case"rgb":case"rgba":if(i=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,t(i[5]),this;if(i=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,t(i[5]),this;break;case"hsl":case"hsla":if(i=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o)){var s=parseFloat(i[1])/360,a=parseInt(i[2],10)/100,l=parseInt(i[3],10)/100;return t(i[5]),this.setHSL(s,a,l)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(e)){var u,c=(u=n[1]).length;if(3===c)return this.r=parseInt(u.charAt(0)+u.charAt(0),16)/255,this.g=parseInt(u.charAt(1)+u.charAt(1),16)/255,this.b=parseInt(u.charAt(2)+u.charAt(2),16)/255,this;if(6===c)return this.r=parseInt(u.charAt(0)+u.charAt(1),16)/255,this.g=parseInt(u.charAt(2)+u.charAt(3),16)/255,this.b=parseInt(u.charAt(4)+u.charAt(5),16)/255,this}e&&e.length>0&&(void 0!==(u=Io[e])&&this.setHex(u));return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){void 0===t&&(t=2);var n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this},convertGammaToLinear:function(e){return this.copyGammaToLinear(this,e),this},convertLinearToGamma:function(e){return this.copyLinearToGamma(this,e),this},copySRGBToLinear:function(e){return this.r=Do(e.r),this.g=Do(e.g),this.b=Do(e.b),this},copyLinearToSRGB:function(e){return this.r=Ro(e.r),this.g=Ro(e.g),this.b=Ro(e.b),this},convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){void 0===e&&(e={h:0,s:0,l:0});var t,n,i=this.r,r=this.g,o=this.b,s=Math.max(i,r,o),a=Math.min(i,r,o),l=(a+s)/2;if(a===s)t=0,n=0;else{var u=s-a;switch(n=l<=.5?u/(s+a):u/(2-s-a),s){case i:t=(r-o)/u+(r<o?6:0);break;case r:t=(o-i)/u+2;break;case o:t=(i-r)/u+4}t/=6}return e.h=t,e.s=n,e.l=l,e},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(e,t,n){return this.getHSL(Co),Co.h+=e,Co.s+=t,Co.l+=n,this.setHSL(Co.h,Co.s,Co.l),this},add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},lerpHSL:function(e,t){this.getHSL(Co),e.getHSL(Fo);var n=lr.lerp(Co.h,Fo.h,t),i=lr.lerp(Co.s,Fo.s,t),r=lr.lerp(Co.l,Fo.l,t);return this.setHSL(n,i,r),this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return void 0===t&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},toJSON:function(){return this.getHex()}}),Object.assign(zo.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,n=e.vertexNormals.length;t<n;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(t=0,n=e.vertexColors.length;t<n;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}});var Uo=0;function Bo(){Object.defineProperty(this,"id",{value:Uo++}),this.uuid=lr.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=Zt,this.side=Ht,this.flatShading=!1,this.vertexTangents=!1,this.vertexColors=Yt,this.opacity=1,this.transparent=!1,this.blendSrc=hn,this.blendDst=pn,this.blendEquation=nn,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=wn,this.depthTest=!0,this.depthWrite=!0,this.stencilFunc=or,this.stencilRef=0,this.stencilMask=255,this.stencilFail=rr,this.stencilZFail=rr,this.stencilZPass=rr,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.needsUpdate=!0}function Go(e){Bo.call(this),this.type="MeshBasicMaterial",this.color=new No(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Tn,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(e)}function Vo(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function Ho(e,t,n){Vo.call(this,new Int8Array(e),t,n)}function Xo(e,t,n){Vo.call(this,new Uint8Array(e),t,n)}function Wo(e,t,n){Vo.call(this,new Uint8ClampedArray(e),t,n)}function Yo(e,t,n){Vo.call(this,new Int16Array(e),t,n)}function qo(e,t,n){Vo.call(this,new Uint16Array(e),t,n)}function Qo(e,t,n){Vo.call(this,new Int32Array(e),t,n)}function Jo(e,t,n){Vo.call(this,new Uint32Array(e),t,n)}function Zo(e,t,n){Vo.call(this,new Float32Array(e),t,n)}function Ko(e,t,n){Vo.call(this,new Float64Array(e),t,n)}function $o(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function es(e){if(0===e.length)return-1/0;for(var t=e[0],n=1,i=e.length;n<i;++n)e[n]>t&&(t=e[n]);return t}Bo.prototype=Object.assign(Object.create(Dt.prototype),{constructor:Bo,isMaterial:!0,onBeforeCompile:function(){},setValues:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0!==n)if("shading"!==t){var i=this[t];void 0!==i&&(i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]=n)}else this.flatShading=1===n}},toJSON:function(e){var t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function i(e){var t=[];for(var n in e){var i=e[n];delete i.metadata,t.push(i)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,n.reflectivity=this.reflectivity,n.refractionRatio=this.refractionRatio,void 0!==this.combine&&(n.combine=this.combine),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Zt&&(n.blending=this.blending),!0===this.flatShading&&(n.flatShading=this.flatShading),this.side!==Ht&&(n.side=this.side),this.vertexColors!==Yt&&(n.vertexColors=this.vertexColors),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.stencilWrite=this.stencilWrite,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilMask=this.stencilMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.morphNormals&&(n.morphNormals=!0),!0===this.skinning&&(n.skinning=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){var r=i(e.textures),o=i(e.images);r.length>0&&(n.textures=r),o.length>0&&(n.images=o)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.lights=e.lights,this.blending=e.blending,this.side=e.side,this.flatShading=e.flatShading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWrite=e.stencilWrite,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilMask=e.stencilMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this.clipShadows=e.clipShadows,this.clipIntersection=e.clipIntersection;var t=e.clippingPlanes,n=null;if(null!==t){var i=t.length;n=new Array(i);for(var r=0;r!==i;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.shadowSide=e.shadowSide,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Go.prototype=Object.create(Bo.prototype),Go.prototype.constructor=Go,Go.prototype.isMeshBasicMaterial=!0,Go.prototype.copy=function(e){return Bo.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this},Object.defineProperty(Vo.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(Vo.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==e?e.length/this.itemSize:0,this.array=e,this},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var i=0,r=this.itemSize;i<r;i++)this.array[e+i]=t.array[n+i];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t=this.array,n=0,i=0,r=e.length;i<r;i++){var o=e[i];void 0===o&&(o=new No),t[n++]=o.r,t[n++]=o.g,t[n++]=o.b}return this},copyVector2sArray:function(e){for(var t=this.array,n=0,i=0,r=e.length;i<r;i++){var o=e[i];void 0===o&&(o=new ur),t[n++]=o.x,t[n++]=o.y}return this},copyVector3sArray:function(e){for(var t=this.array,n=0,i=0,r=e.length;i<r;i++){var o=e[i];void 0===o&&(o=new pr),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z}return this},copyVector4sArray:function(e){for(var t=this.array,n=0,i=0,r=e.length;i<r;i++){var o=e[i];void 0===o&&(o=new xr),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z,t[n++]=o.w}return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this},setXYZ:function(e,t,n,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this},setXYZW:function(e,t,n,i,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=r,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),Ho.prototype=Object.create(Vo.prototype),Ho.prototype.constructor=Ho,Xo.prototype=Object.create(Vo.prototype),Xo.prototype.constructor=Xo,Wo.prototype=Object.create(Vo.prototype),Wo.prototype.constructor=Wo,Yo.prototype=Object.create(Vo.prototype),Yo.prototype.constructor=Yo,qo.prototype=Object.create(Vo.prototype),qo.prototype.constructor=qo,Qo.prototype=Object.create(Vo.prototype),Qo.prototype.constructor=Qo,Jo.prototype=Object.create(Vo.prototype),Jo.prototype.constructor=Jo,Zo.prototype=Object.create(Vo.prototype),Zo.prototype.constructor=Zo,Ko.prototype=Object.create(Vo.prototype),Ko.prototype.constructor=Ko,Object.assign($o.prototype,{computeGroups:function(e){for(var t,n=[],i=void 0,r=e.faces,o=0;o<r.length;o++){var s=r[o];s.materialIndex!==i&&(i=s.materialIndex,void 0!==t&&(t.count=3*o-t.start,n.push(t)),t={start:3*o,materialIndex:i})}void 0!==t&&(t.count=3*o-t.start,n.push(t)),this.groups=n},fromGeometry:function(e){var t,n=e.faces,i=e.vertices,r=e.faceVertexUvs,o=r[0]&&r[0].length>0,s=r[1]&&r[1].length>0,a=e.morphTargets,l=a.length;if(l>0){t=[];for(var u=0;u<l;u++)t[u]={name:a[u].name,data:[]};this.morphTargets.position=t}var c,d=e.morphNormals,h=d.length;if(h>0){c=[];for(u=0;u<h;u++)c[u]={name:d[u].name,data:[]};this.morphTargets.normal=c}var p=e.skinIndices,f=e.skinWeights,m=p.length===i.length,_=f.length===i.length;i.length>0&&n.length;for(u=0;u<n.length;u++){var g=n[u];this.vertices.push(i[g.a],i[g.b],i[g.c]);var v=g.vertexNormals;if(3===v.length)this.normals.push(v[0],v[1],v[2]);else{var y=g.normal;this.normals.push(y,y,y)}var x,b=g.vertexColors;if(3===b.length)this.colors.push(b[0],b[1],b[2]);else{var w=g.color;this.colors.push(w,w,w)}if(!0===o)void 0!==(x=r[0][u])?this.uvs.push(x[0],x[1],x[2]):this.uvs.push(new ur,new ur,new ur);if(!0===s)void 0!==(x=r[1][u])?this.uvs2.push(x[0],x[1],x[2]):this.uvs2.push(new ur,new ur,new ur);for(var j=0;j<l;j++){var S=a[j].vertices;t[j].data.push(S[g.a],S[g.b],S[g.c])}for(j=0;j<h;j++){var A=d[j].vertexNormals[u];c[j].data.push(A.a,A.b,A.c)}m&&this.skinIndices.push(p[g.a],p[g.b],p[g.c]),_&&this.skinWeights.push(f[g.a],f[g.b],f[g.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this}});var ts=1,ns=new Er,is=new qr,rs=new pr,os=new lo,ss=new lo,as=new pr;function ls(){Object.defineProperty(this,"id",{value:ts+=2}),this.uuid=lr.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}ls.prototype=Object.assign(Object.create(Dt.prototype),{constructor:ls,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){Array.isArray(e)?this.index=new(es(e)>65535?Jo:qo)(e,1):this.index=e},addAttribute:function(e,t){return t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(this.setIndex(t),this):(this.attributes[e]=t,this):this.addAttribute(e,new Vo(arguments[1],arguments[2]))},getAttribute:function(e){return this.attributes[e]},removeAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,n){this.groups.push({start:e,count:t,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix:function(e){var t=this.attributes.position;void 0!==t&&(e.applyToBufferAttribute(t),t.needsUpdate=!0);var n=this.attributes.normal;void 0!==n&&((new _r).getNormalMatrix(e).applyToBufferAttribute(n),n.needsUpdate=!0);var i=this.attributes.tangent;void 0!==i&&((new _r).getNormalMatrix(e).applyToBufferAttribute(i),i.needsUpdate=!0);return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(e){return ns.makeRotationX(e),this.applyMatrix(ns),this},rotateY:function(e){return ns.makeRotationY(e),this.applyMatrix(ns),this},rotateZ:function(e){return ns.makeRotationZ(e),this.applyMatrix(ns),this},translate:function(e,t,n){return ns.makeTranslation(e,t,n),this.applyMatrix(ns),this},scale:function(e,t,n){return ns.makeScale(e,t,n),this.applyMatrix(ns),this},lookAt:function(e){return is.lookAt(e),is.updateMatrix(),this.applyMatrix(is.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(rs).negate(),this.translate(rs.x,rs.y,rs.z),this},setFromObject:function(e){var t=e.geometry;if(e.isPoints||e.isLine){var n=new Zo(3*t.vertices.length,3),i=new Zo(3*t.colors.length,3);if(this.addAttribute("position",n.copyVector3sArray(t.vertices)),this.addAttribute("color",i.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){var r=new Zo(t.lineDistances.length,1);this.addAttribute("lineDistance",r.copyArray(t.lineDistances))}null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},setFromPoints:function(e){for(var t=[],n=0,i=e.length;n<i;n++){var r=e[n];t.push(r.x,r.y,r.z||0)}return this.addAttribute("position",new Zo(t,3)),this},updateFromObject:function(e){var t,n=e.geometry;if(e.isMesh){var i=n.__directGeometry;if(!0===n.elementsNeedUpdate&&(i=void 0,n.elementsNeedUpdate=!1),void 0===i)return this.fromGeometry(n);i.verticesNeedUpdate=n.verticesNeedUpdate,i.normalsNeedUpdate=n.normalsNeedUpdate,i.colorsNeedUpdate=n.colorsNeedUpdate,i.uvsNeedUpdate=n.uvsNeedUpdate,i.groupsNeedUpdate=n.groupsNeedUpdate,n.verticesNeedUpdate=!1,n.normalsNeedUpdate=!1,n.colorsNeedUpdate=!1,n.uvsNeedUpdate=!1,n.groupsNeedUpdate=!1,n=i}return!0===n.verticesNeedUpdate&&(void 0!==(t=this.attributes.position)&&(t.copyVector3sArray(n.vertices),t.needsUpdate=!0),n.verticesNeedUpdate=!1),!0===n.normalsNeedUpdate&&(void 0!==(t=this.attributes.normal)&&(t.copyVector3sArray(n.normals),t.needsUpdate=!0),n.normalsNeedUpdate=!1),!0===n.colorsNeedUpdate&&(void 0!==(t=this.attributes.color)&&(t.copyColorsArray(n.colors),t.needsUpdate=!0),n.colorsNeedUpdate=!1),n.uvsNeedUpdate&&(void 0!==(t=this.attributes.uv)&&(t.copyVector2sArray(n.uvs),t.needsUpdate=!0),n.uvsNeedUpdate=!1),n.lineDistancesNeedUpdate&&(void 0!==(t=this.attributes.lineDistance)&&(t.copyArray(n.lineDistances),t.needsUpdate=!0),n.lineDistancesNeedUpdate=!1),n.groupsNeedUpdate&&(n.computeGroups(e.geometry),this.groups=n.groups,n.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=(new $o).fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(3*e.vertices.length);if(this.addAttribute("position",new Vo(t,3).copyVector3sArray(e.vertices)),e.normals.length>0){var n=new Float32Array(3*e.normals.length);this.addAttribute("normal",new Vo(n,3).copyVector3sArray(e.normals))}if(e.colors.length>0){var i=new Float32Array(3*e.colors.length);this.addAttribute("color",new Vo(i,3).copyColorsArray(e.colors))}if(e.uvs.length>0){var r=new Float32Array(2*e.uvs.length);this.addAttribute("uv",new Vo(r,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){var o=new Float32Array(2*e.uvs2.length);this.addAttribute("uv2",new Vo(o,2).copyVector2sArray(e.uvs2))}for(var s in this.groups=e.groups,e.morphTargets){for(var a=[],l=e.morphTargets[s],u=0,c=l.length;u<c;u++){var d=l[u],h=new Zo(3*d.data.length,3);h.name=d.name,a.push(h.copyVector3sArray(d.data))}this.morphAttributes[s]=a}if(e.skinIndices.length>0){var p=new Zo(4*e.skinIndices.length,4);this.addAttribute("skinIndex",p.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){var f=new Zo(4*e.skinWeights.length,4);this.addAttribute("skinWeight",f.copyVector4sArray(e.skinWeights))}return null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new lo);var e=this.attributes.position,t=this.morphAttributes.position;if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(var n=0,i=t.length;n<i;n++){var r=t[n];os.setFromBufferAttribute(r),this.boundingBox.expandByPoint(os.min),this.boundingBox.expandByPoint(os.max)}}else this.boundingBox.makeEmpty();isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new ho);var e=this.attributes.position,t=this.morphAttributes.position;if(e){var n=this.boundingSphere.center;if(os.setFromBufferAttribute(e),t)for(var i=0,r=t.length;i<r;i++){var o=t[i];ss.setFromBufferAttribute(o),os.expandByPoint(ss.min),os.expandByPoint(ss.max)}os.getCenter(n);var s=0;for(i=0,r=e.count;i<r;i++)as.fromBufferAttribute(e,i),s=Math.max(s,n.distanceToSquared(as));if(t)for(i=0,r=t.length;i<r;i++)for(var a=0,l=(o=t[i]).count;a<l;a++)as.fromBufferAttribute(o,a),s=Math.max(s,n.distanceToSquared(as));this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)}},computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.attributes;if(t.position){var n=t.position.array;if(void 0===t.normal)this.addAttribute("normal",new Vo(new Float32Array(n.length),3));else for(var i=t.normal.array,r=0,o=i.length;r<o;r++)i[r]=0;var s,a,l,u=t.normal.array,c=new pr,d=new pr,h=new pr,p=new pr,f=new pr;if(e){var m=e.array;for(r=0,o=e.count;r<o;r+=3)s=3*m[r+0],a=3*m[r+1],l=3*m[r+2],c.fromArray(n,s),d.fromArray(n,a),h.fromArray(n,l),p.subVectors(h,d),f.subVectors(c,d),p.cross(f),u[s]+=p.x,u[s+1]+=p.y,u[s+2]+=p.z,u[a]+=p.x,u[a+1]+=p.y,u[a+2]+=p.z,u[l]+=p.x,u[l+1]+=p.y,u[l+2]+=p.z}else for(r=0,o=n.length;r<o;r+=9)c.fromArray(n,r),d.fromArray(n,r+3),h.fromArray(n,r+6),p.subVectors(h,d),f.subVectors(c,d),p.cross(f),u[r]=p.x,u[r+1]=p.y,u[r+2]=p.z,u[r+3]=p.x,u[r+4]=p.y,u[r+5]=p.z,u[r+6]=p.x,u[r+7]=p.y,u[r+8]=p.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},merge:function(e,t){if(e&&e.isBufferGeometry){void 0===t&&(t=0);var n=this.attributes;for(var i in n)if(void 0!==e.attributes[i])for(var r=n[i].array,o=e.attributes[i],s=o.array,a=o.itemSize*t,l=Math.min(s.length,r.length-a),u=0,c=a;u<l;u++,c++)r[c]=s[u];return this}},normalizeNormals:function(){for(var e=this.attributes.normal,t=0,n=e.count;t<n;t++)as.x=e.getX(t),as.y=e.getY(t),as.z=e.getZ(t),as.normalize(),e.setXYZ(t,as.x,as.y,as.z)},toNonIndexed:function(){function e(e,t){for(var n=e.array,i=e.itemSize,r=new n.constructor(t.length*i),o=0,s=0,a=0,l=t.length;a<l;a++){o=t[a]*i;for(var u=0;u<i;u++)r[s++]=n[o++]}return new Vo(r,i)}if(null===this.index)return this;var t=new ls,n=this.index.array,i=this.attributes;for(var r in i){var o=e(i[r],n);t.addAttribute(r,o)}var s=this.morphAttributes;for(r in s){for(var a=[],l=s[r],u=0,c=l.length;u<c;u++){o=e(l[u],n);a.push(o)}t.morphAttributes[r]=a}for(var d=this.groups,h=(u=0,d.length);u<h;u++){var p=d[u];t.addGroup(p.start,p.count,p.materialIndex)}return t},toJSON:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};var i=this.index;null!==i&&(e.data.index={type:i.array.constructor.name,array:Array.prototype.slice.call(i.array)});var r=this.attributes;for(var n in r){var o=(h=r[n]).toJSON();""!==h.name&&(o.name=h.name),e.data.attributes[n]=o}var s={},a=!1;for(var n in this.morphAttributes){for(var l=this.morphAttributes[n],u=[],c=0,d=l.length;c<d;c++){var h;o=(h=l[c]).toJSON();""!==h.name&&(o.name=h.name),u.push(o)}u.length>0&&(s[n]=u,a=!0)}a&&(e.data.morphAttributes=s);var p=this.groups;p.length>0&&(e.data.groups=JSON.parse(JSON.stringify(p)));var f=this.boundingSphere;return null!==f&&(e.data.boundingSphere={center:f.center.toArray(),radius:f.radius}),e},clone:function(){return(new ls).copy(this)},copy:function(e){var t,n,i;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var r=e.index;null!==r&&this.setIndex(r.clone());var o=e.attributes;for(t in o){var s=o[t];this.addAttribute(t,s.clone())}var a=e.morphAttributes;for(t in a){var l=[],u=a[t];for(n=0,i=u.length;n<i;n++)l.push(u[n].clone());this.morphAttributes[t]=l}var c=e.groups;for(n=0,i=c.length;n<i;n++){var d=c[n];this.addGroup(d.start,d.count,d.materialIndex)}var h=e.boundingBox;null!==h&&(this.boundingBox=h.clone());var p=e.boundingSphere;return null!==p&&(this.boundingSphere=p.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var us=new Er,cs=new xo,ds=new ho,hs=new pr,ps=new pr,fs=new pr,ms=new pr,_s=new pr,gs=new pr,vs=new pr,ys=new pr,xs=new pr,bs=new ur,ws=new ur,js=new ur,Ss=new pr,As=new pr;function Ms(e,t){qr.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new ls,this.material=void 0!==t?t:new Go({color:16777215*Math.random()}),this.drawMode=Vi,this.updateMorphTargets()}function Ts(e,t,n,i,r,o,s,a){if(null===(t.side===Xt?i.intersectTriangle(s,o,r,!0,a):i.intersectTriangle(r,o,s,t.side!==Wt,a)))return null;As.copy(a),As.applyMatrix4(e.matrixWorld);var l=n.ray.origin.distanceTo(As);return l<n.near||l>n.far?null:{distance:l,point:As.clone(),object:e}}function Ps(e,t,n,i,r,o,s,a,l,u,c){hs.fromBufferAttribute(r,l),ps.fromBufferAttribute(r,u),fs.fromBufferAttribute(r,c);var d=e.morphTargetInfluences;if(t.morphTargets&&o&&d){vs.set(0,0,0),ys.set(0,0,0),xs.set(0,0,0);for(var h=0,p=o.length;h<p;h++){var f=d[h],m=o[h];0!==f&&(ms.fromBufferAttribute(m,l),_s.fromBufferAttribute(m,u),gs.fromBufferAttribute(m,c),vs.addScaledVector(ms.sub(hs),f),ys.addScaledVector(_s.sub(ps),f),xs.addScaledVector(gs.sub(fs),f))}hs.add(vs),ps.add(ys),fs.add(xs)}var _=Ts(e,t,n,i,hs,ps,fs,Ss);if(_){s&&(bs.fromBufferAttribute(s,l),ws.fromBufferAttribute(s,u),js.fromBufferAttribute(s,c),_.uv=Oo.getUV(Ss,hs,ps,fs,bs,ws,js,new ur)),a&&(bs.fromBufferAttribute(a,l),ws.fromBufferAttribute(a,u),js.fromBufferAttribute(a,c),_.uv2=Oo.getUV(Ss,hs,ps,fs,bs,ws,js,new ur));var g=new zo(l,u,c);Oo.getNormal(hs,ps,fs,g.normal),_.face=g}return _}Ms.prototype=Object.assign(Object.create(qr.prototype),{constructor:Ms,isMesh:!0,setDrawMode:function(e){this.drawMode=e},copy:function(e){return qr.prototype.copy.call(this,e),this.drawMode=e.drawMode,void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this},updateMorphTargets:function(){var e,t,n,i=this.geometry;if(i.isBufferGeometry){var r=i.morphAttributes,o=Object.keys(r);if(o.length>0){var s=r[o[0]];if(void 0!==s)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=s.length;e<t;e++)n=s[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}else{var a=i.morphTargets;void 0!==a&&a.length}},raycast:function(e,t){var n,i=this.geometry,r=this.material,o=this.matrixWorld;if(void 0!==r&&(null===i.boundingSphere&&i.computeBoundingSphere(),ds.copy(i.boundingSphere),ds.applyMatrix4(o),!1!==e.ray.intersectsSphere(ds)&&(us.getInverse(o),cs.copy(e.ray).applyMatrix4(us),null===i.boundingBox||!1!==cs.intersectsBox(i.boundingBox))))if(i.isBufferGeometry){var s,a,l,u,c,d,h,p,f,m=i.index,_=i.attributes.position,g=i.morphAttributes.position,v=i.attributes.uv,y=i.attributes.uv2,x=i.groups,b=i.drawRange;if(null!==m)if(Array.isArray(r))for(u=0,d=x.length;u<d;u++)for(f=r[(p=x[u]).materialIndex],c=Math.max(p.start,b.start),h=Math.min(p.start+p.count,b.start+b.count);c<h;c+=3)s=m.getX(c),a=m.getX(c+1),l=m.getX(c+2),(n=Ps(this,f,e,cs,_,g,v,y,s,a,l))&&(n.faceIndex=Math.floor(c/3),n.face.materialIndex=p.materialIndex,t.push(n));else for(u=Math.max(0,b.start),d=Math.min(m.count,b.start+b.count);u<d;u+=3)s=m.getX(u),a=m.getX(u+1),l=m.getX(u+2),(n=Ps(this,r,e,cs,_,g,v,y,s,a,l))&&(n.faceIndex=Math.floor(u/3),t.push(n));else if(void 0!==_)if(Array.isArray(r))for(u=0,d=x.length;u<d;u++)for(f=r[(p=x[u]).materialIndex],c=Math.max(p.start,b.start),h=Math.min(p.start+p.count,b.start+b.count);c<h;c+=3)(n=Ps(this,f,e,cs,_,g,v,y,s=c,a=c+1,l=c+2))&&(n.faceIndex=Math.floor(c/3),n.face.materialIndex=p.materialIndex,t.push(n));else for(u=Math.max(0,b.start),d=Math.min(_.count,b.start+b.count);u<d;u+=3)(n=Ps(this,r,e,cs,_,g,v,y,s=u,a=u+1,l=u+2))&&(n.faceIndex=Math.floor(u/3),t.push(n))}else if(i.isGeometry){var w,j,S,A,M=Array.isArray(r),T=i.vertices,P=i.faces,L=i.faceVertexUvs[0];L.length>0&&(A=L);for(var E=0,O=P.length;E<O;E++){var I=P[E],C=M?r[I.materialIndex]:r;if(void 0!==C&&(w=T[I.a],j=T[I.b],S=T[I.c],n=Ts(this,C,e,cs,w,j,S,Ss))){if(A&&A[E]){var F=A[E];bs.copy(F[0]),ws.copy(F[1]),js.copy(F[2]),n.uv=Oo.getUV(Ss,w,j,S,bs,ws,js,new ur)}n.face=I,n.faceIndex=E,t.push(n)}}}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var Ls=0,Es=new Er,Os=new qr,Is=new pr;function Cs(){Object.defineProperty(this,"id",{value:Ls+=2}),this.uuid=lr.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function Fs(e,t,n,i,r,o){Cs.call(this),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:r,depthSegments:o},this.fromBufferGeometry(new Ns(e,t,n,i,r,o)),this.mergeVertices()}function Ns(e,t,n,i,r,o){ls.call(this),this.type="BoxBufferGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:r,depthSegments:o};var s=this;e=e||1,t=t||1,n=n||1,i=Math.floor(i)||1,r=Math.floor(r)||1,o=Math.floor(o)||1;var a=[],l=[],u=[],c=[],d=0,h=0;function p(e,t,n,i,r,o,p,f,m,_,g){var v,y,x=o/m,b=p/_,w=o/2,j=p/2,S=f/2,A=m+1,M=_+1,T=0,P=0,L=new pr;for(y=0;y<M;y++){var E=y*b-j;for(v=0;v<A;v++){var O=v*x-w;L[e]=O*i,L[t]=E*r,L[n]=S,l.push(L.x,L.y,L.z),L[e]=0,L[t]=0,L[n]=f>0?1:-1,u.push(L.x,L.y,L.z),c.push(v/m),c.push(1-y/_),T+=1}}for(y=0;y<_;y++)for(v=0;v<m;v++){var I=d+v+A*y,C=d+v+A*(y+1),F=d+(v+1)+A*(y+1),N=d+(v+1)+A*y;a.push(I,C,N),a.push(C,F,N),P+=6}s.addGroup(h,P,g),h+=P,d+=T}p("z","y","x",-1,-1,n,t,e,o,r,0),p("z","y","x",1,-1,n,t,-e,o,r,1),p("x","z","y",1,1,e,n,t,i,o,2),p("x","z","y",1,-1,e,n,-t,i,o,3),p("x","y","z",1,-1,e,t,n,i,r,4),p("x","y","z",-1,-1,e,t,-n,i,r,5),this.setIndex(a),this.addAttribute("position",new Zo(l,3)),this.addAttribute("normal",new Zo(u,3)),this.addAttribute("uv",new Zo(c,2))}function ks(e){var t={};for(var n in e)for(var i in t[n]={},e[n]){var r=e[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture)?t[n][i]=r.clone():Array.isArray(r)?t[n][i]=r.slice():t[n][i]=r}return t}function Ds(e){for(var t={},n=0;n<e.length;n++){var i=ks(e[n]);for(var r in i)t[r]=i[r]}return t}Cs.prototype=Object.assign(Object.create(Dt.prototype),{constructor:Cs,isGeometry:!0,applyMatrix:function(e){for(var t=(new _r).getNormalMatrix(e),n=0,i=this.vertices.length;n<i;n++){this.vertices[n].applyMatrix4(e)}for(n=0,i=this.faces.length;n<i;n++){var r=this.faces[n];r.normal.applyMatrix3(t).normalize();for(var o=0,s=r.vertexNormals.length;o<s;o++)r.vertexNormals[o].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(e){return Es.makeRotationX(e),this.applyMatrix(Es),this},rotateY:function(e){return Es.makeRotationY(e),this.applyMatrix(Es),this},rotateZ:function(e){return Es.makeRotationZ(e),this.applyMatrix(Es),this},translate:function(e,t,n){return Es.makeTranslation(e,t,n),this.applyMatrix(Es),this},scale:function(e,t,n){return Es.makeScale(e,t,n),this.applyMatrix(Es),this},lookAt:function(e){return Os.lookAt(e),Os.updateMatrix(),this.applyMatrix(Os.matrix),this},fromBufferGeometry:function(e){var t=this,n=null!==e.index?e.index.array:void 0,i=e.attributes,r=i.position.array,o=void 0!==i.normal?i.normal.array:void 0,s=void 0!==i.color?i.color.array:void 0,a=void 0!==i.uv?i.uv.array:void 0,l=void 0!==i.uv2?i.uv2.array:void 0;void 0!==l&&(this.faceVertexUvs[1]=[]);for(var u=0;u<r.length;u+=3)t.vertices.push((new pr).fromArray(r,u)),void 0!==s&&t.colors.push((new No).fromArray(s,u));function c(e,n,i,r){var u=void 0===s?[]:[t.colors[e].clone(),t.colors[n].clone(),t.colors[i].clone()],c=new zo(e,n,i,void 0===o?[]:[(new pr).fromArray(o,3*e),(new pr).fromArray(o,3*n),(new pr).fromArray(o,3*i)],u,r);t.faces.push(c),void 0!==a&&t.faceVertexUvs[0].push([(new ur).fromArray(a,2*e),(new ur).fromArray(a,2*n),(new ur).fromArray(a,2*i)]),void 0!==l&&t.faceVertexUvs[1].push([(new ur).fromArray(l,2*e),(new ur).fromArray(l,2*n),(new ur).fromArray(l,2*i)])}var d=e.groups;if(d.length>0)for(u=0;u<d.length;u++)for(var h=d[u],p=h.start,f=p,m=p+h.count;f<m;f+=3)void 0!==n?c(n[f],n[f+1],n[f+2],h.materialIndex):c(f,f+1,f+2,h.materialIndex);else if(void 0!==n)for(u=0;u<n.length;u+=3)c(n[u],n[u+1],n[u+2]);else for(u=0;u<r.length/3;u+=3)c(u,u+1,u+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Is).negate(),this.translate(Is.x,Is.y,Is.z),this},normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,n=0===t?1:1/t,i=new Er;return i.set(n,0,0,-n*e.x,0,n,0,-n*e.y,0,0,n,-n*e.z,0,0,0,1),this.applyMatrix(i),this},computeFaceNormals:function(){for(var e=new pr,t=new pr,n=0,i=this.faces.length;n<i;n++){var r=this.faces[n],o=this.vertices[r.a],s=this.vertices[r.b],a=this.vertices[r.c];e.subVectors(a,s),t.subVectors(o,s),e.cross(t),e.normalize(),r.normal.copy(e)}},computeVertexNormals:function(e){var t,n,i,r,o,s;for(void 0===e&&(e=!0),s=new Array(this.vertices.length),t=0,n=this.vertices.length;t<n;t++)s[t]=new pr;if(e){var a,l,u,c=new pr,d=new pr;for(i=0,r=this.faces.length;i<r;i++)o=this.faces[i],a=this.vertices[o.a],l=this.vertices[o.b],u=this.vertices[o.c],c.subVectors(u,l),d.subVectors(a,l),c.cross(d),s[o.a].add(c),s[o.b].add(c),s[o.c].add(c)}else for(this.computeFaceNormals(),i=0,r=this.faces.length;i<r;i++)s[(o=this.faces[i]).a].add(o.normal),s[o.b].add(o.normal),s[o.c].add(o.normal);for(t=0,n=this.vertices.length;t<n;t++)s[t].normalize();for(i=0,r=this.faces.length;i<r;i++){var h=(o=this.faces[i]).vertexNormals;3===h.length?(h[0].copy(s[o.a]),h[1].copy(s[o.b]),h[2].copy(s[o.c])):(h[0]=s[o.a].clone(),h[1]=s[o.b].clone(),h[2]=s[o.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var e,t,n;for(this.computeFaceNormals(),e=0,t=this.faces.length;e<t;e++){var i=(n=this.faces[e]).vertexNormals;3===i.length?(i[0].copy(n.normal),i[1].copy(n.normal),i[2].copy(n.normal)):(i[0]=n.normal.clone(),i[1]=n.normal.clone(),i[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,t,n,i,r;for(n=0,i=this.faces.length;n<i;n++)for((r=this.faces[n]).__originalFaceNormal?r.__originalFaceNormal.copy(r.normal):r.__originalFaceNormal=r.normal.clone(),r.__originalVertexNormals||(r.__originalVertexNormals=[]),e=0,t=r.vertexNormals.length;e<t;e++)r.__originalVertexNormals[e]?r.__originalVertexNormals[e].copy(r.vertexNormals[e]):r.__originalVertexNormals[e]=r.vertexNormals[e].clone();var o=new Cs;for(o.faces=this.faces,e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];var s=this.morphNormals[e].faceNormals,a=this.morphNormals[e].vertexNormals;for(n=0,i=this.faces.length;n<i;n++)l=new pr,u={a:new pr,b:new pr,c:new pr},s.push(l),a.push(u)}var l,u,c=this.morphNormals[e];for(o.vertices=this.morphTargets[e].vertices,o.computeFaceNormals(),o.computeVertexNormals(),n=0,i=this.faces.length;n<i;n++)r=this.faces[n],l=c.faceNormals[n],u=c.vertexNormals[n],l.copy(r.normal),u.a.copy(r.vertexNormals[0]),u.b.copy(r.vertexNormals[1]),u.c.copy(r.vertexNormals[2])}for(n=0,i=this.faces.length;n<i;n++)(r=this.faces[n]).normal=r.__originalFaceNormal,r.vertexNormals=r.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new lo),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new ho),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,n){if(e&&e.isGeometry){var i,r=this.vertices.length,o=this.vertices,s=e.vertices,a=this.faces,l=e.faces,u=this.colors,c=e.colors;void 0===n&&(n=0),void 0!==t&&(i=(new _r).getNormalMatrix(t));for(var d=0,h=s.length;d<h;d++){var p=s[d].clone();void 0!==t&&p.applyMatrix4(t),o.push(p)}for(d=0,h=c.length;d<h;d++)u.push(c[d].clone());for(d=0,h=l.length;d<h;d++){var f,m,_,g=l[d],v=g.vertexNormals,y=g.vertexColors;(f=new zo(g.a+r,g.b+r,g.c+r)).normal.copy(g.normal),void 0!==i&&f.normal.applyMatrix3(i).normalize();for(var x=0,b=v.length;x<b;x++)m=v[x].clone(),void 0!==i&&m.applyMatrix3(i).normalize(),f.vertexNormals.push(m);f.color.copy(g.color);for(x=0,b=y.length;x<b;x++)_=y[x],f.vertexColors.push(_.clone());f.materialIndex=g.materialIndex+n,a.push(f)}for(d=0,h=e.faceVertexUvs.length;d<h;d++){var w=e.faceVertexUvs[d];void 0===this.faceVertexUvs[d]&&(this.faceVertexUvs[d]=[]);for(x=0,b=w.length;x<b;x++){for(var j=w[x],S=[],A=0,M=j.length;A<M;A++)S.push(j[A].clone());this.faceVertexUvs[d].push(S)}}}},mergeMesh:function(e){e&&e.isMesh&&(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix))},mergeVertices:function(){var e,t,n,i,r,o,s,a,l={},u=[],c=[],d=Math.pow(10,4);for(n=0,i=this.vertices.length;n<i;n++)e=this.vertices[n],void 0===l[t=Math.round(e.x*d)+"_"+Math.round(e.y*d)+"_"+Math.round(e.z*d)]?(l[t]=n,u.push(this.vertices[n]),c[n]=u.length-1):c[n]=c[l[t]];var h=[];for(n=0,i=this.faces.length;n<i;n++){(r=this.faces[n]).a=c[r.a],r.b=c[r.b],r.c=c[r.c],o=[r.a,r.b,r.c];for(var p=0;p<3;p++)if(o[p]===o[(p+1)%3]){h.push(n);break}}for(n=h.length-1;n>=0;n--){var f=h[n];for(this.faces.splice(f,1),s=0,a=this.faceVertexUvs.length;s<a;s++)this.faceVertexUvs[s].splice(f,1)}var m=this.vertices.length-u.length;return this.vertices=u,m},setFromPoints:function(e){this.vertices=[];for(var t=0,n=e.length;t<n;t++){var i=e[t];this.vertices.push(new pr(i.x,i.y,i.z||0))}return this},sortFacesByMaterialIndex:function(){for(var e=this.faces,t=e.length,n=0;n<t;n++)e[n]._id=n;e.sort(function(e,t){return e.materialIndex-t.materialIndex});var i,r,o=this.faceVertexUvs[0],s=this.faceVertexUvs[1];o&&o.length===t&&(i=[]),s&&s.length===t&&(r=[]);for(n=0;n<t;n++){var a=e[n]._id;i&&i.push(o[a]),r&&r.push(s[a])}i&&(this.faceVertexUvs[0]=i),r&&(this.faceVertexUvs[1]=r)},toJSON:function(){var e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}for(var i=[],r=0;r<this.vertices.length;r++){var o=this.vertices[r];i.push(o.x,o.y,o.z)}var s=[],a=[],l={},u=[],c={},d=[],h={};for(r=0;r<this.faces.length;r++){var p=this.faces[r],f=void 0!==this.faceVertexUvs[0][r],m=p.normal.length()>0,_=p.vertexNormals.length>0,g=1!==p.color.r||1!==p.color.g||1!==p.color.b,v=p.vertexColors.length>0,y=0;if(y=j(y,0,0),y=j(y,1,!0),y=j(y,2,!1),y=j(y,3,f),y=j(y,4,m),y=j(y,5,_),y=j(y,6,g),y=j(y,7,v),s.push(y),s.push(p.a,p.b,p.c),s.push(p.materialIndex),f){var x=this.faceVertexUvs[0][r];s.push(M(x[0]),M(x[1]),M(x[2]))}if(m&&s.push(S(p.normal)),_){var b=p.vertexNormals;s.push(S(b[0]),S(b[1]),S(b[2]))}if(g&&s.push(A(p.color)),v){var w=p.vertexColors;s.push(A(w[0]),A(w[1]),A(w[2]))}}function j(e,t,n){return n?e|1<<t:e&~(1<<t)}function S(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==l[t]?l[t]:(l[t]=a.length/3,a.push(e.x,e.y,e.z),l[t])}function A(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==c[t]?c[t]:(c[t]=u.length,u.push(e.getHex()),c[t])}function M(e){var t=e.x.toString()+e.y.toString();return void 0!==h[t]?h[t]:(h[t]=d.length/2,d.push(e.x,e.y),h[t])}return e.data={},e.data.vertices=i,e.data.normals=a,u.length>0&&(e.data.colors=u),d.length>0&&(e.data.uvs=[d]),e.data.faces=s,e},clone:function(){return(new Cs).copy(this)},copy:function(e){var t,n,i,r,o,s;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var a=e.vertices;for(t=0,n=a.length;t<n;t++)this.vertices.push(a[t].clone());var l=e.colors;for(t=0,n=l.length;t<n;t++)this.colors.push(l[t].clone());var u=e.faces;for(t=0,n=u.length;t<n;t++)this.faces.push(u[t].clone());for(t=0,n=e.faceVertexUvs.length;t<n;t++){var c=e.faceVertexUvs[t];for(void 0===this.faceVertexUvs[t]&&(this.faceVertexUvs[t]=[]),i=0,r=c.length;i<r;i++){var d=c[i],h=[];for(o=0,s=d.length;o<s;o++){var p=d[o];h.push(p.clone())}this.faceVertexUvs[t].push(h)}}var f=e.morphTargets;for(t=0,n=f.length;t<n;t++){var m={};if(m.name=f[t].name,void 0!==f[t].vertices)for(m.vertices=[],i=0,r=f[t].vertices.length;i<r;i++)m.vertices.push(f[t].vertices[i].clone());if(void 0!==f[t].normals)for(m.normals=[],i=0,r=f[t].normals.length;i<r;i++)m.normals.push(f[t].normals[i].clone());this.morphTargets.push(m)}var _=e.morphNormals;for(t=0,n=_.length;t<n;t++){var g={};if(void 0!==_[t].vertexNormals)for(g.vertexNormals=[],i=0,r=_[t].vertexNormals.length;i<r;i++){var v=_[t].vertexNormals[i],y={};y.a=v.a.clone(),y.b=v.b.clone(),y.c=v.c.clone(),g.vertexNormals.push(y)}if(void 0!==_[t].faceNormals)for(g.faceNormals=[],i=0,r=_[t].faceNormals.length;i<r;i++)g.faceNormals.push(_[t].faceNormals[i].clone());this.morphNormals.push(g)}var x=e.skinWeights;for(t=0,n=x.length;t<n;t++)this.skinWeights.push(x[t].clone());var b=e.skinIndices;for(t=0,n=b.length;t<n;t++)this.skinIndices.push(b[t].clone());var w=e.lineDistances;for(t=0,n=w.length;t<n;t++)this.lineDistances.push(w[t]);var j=e.boundingBox;null!==j&&(this.boundingBox=j.clone());var S=e.boundingSphere;return null!==S&&(this.boundingSphere=S.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Fs.prototype=Object.create(Cs.prototype),Fs.prototype.constructor=Fs,Ns.prototype=Object.create(ls.prototype),Ns.prototype.constructor=Ns;var Rs={clone:ks,merge:Ds},zs="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",Us="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";function Bs(e){Bo.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=zs,this.fragmentShader=Us,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==e&&(e.attributes,this.setValues(e))}function Gs(){qr.call(this),this.type="Camera",this.matrixWorldInverse=new Er,this.projectionMatrix=new Er,this.projectionMatrixInverse=new Er}function Vs(e,t,n,i){Gs.call(this),this.type="PerspectiveCamera",this.fov=void 0!==e?e:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==i?i:2e3,this.focus=10,this.aspect=void 0!==t?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}Bs.prototype=Object.create(Bo.prototype),Bs.prototype.constructor=Bs,Bs.prototype.isShaderMaterial=!0,Bs.prototype.copy=function(e){return Bo.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=ks(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=e.extensions,this},Bs.prototype.toJSON=function(e){var t=Bo.prototype.toJSON.call(this,e);for(var n in t.uniforms={},this.uniforms){var i=this.uniforms[n].value;i&&i.isTexture?t.uniforms[n]={type:"t",value:i.toJSON(e).uuid}:i&&i.isColor?t.uniforms[n]={type:"c",value:i.getHex()}:i&&i.isVector2?t.uniforms[n]={type:"v2",value:i.toArray()}:i&&i.isVector3?t.uniforms[n]={type:"v3",value:i.toArray()}:i&&i.isVector4?t.uniforms[n]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?t.uniforms[n]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?t.uniforms[n]={type:"m4",value:i.toArray()}:t.uniforms[n]={value:i}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;var r={};for(var o in this.extensions)!0===this.extensions[o]&&(r[o]=!0);return Object.keys(r).length>0&&(t.extensions=r),t},Gs.prototype=Object.assign(Object.create(qr.prototype),{constructor:Gs,isCamera:!0,copy:function(e,t){return qr.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this},getWorldDirection:function(e){void 0===e&&(e=new pr),this.updateMatrixWorld(!0);var t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()},updateMatrixWorld:function(e){qr.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),Vs.prototype=Object.assign(Object.create(Gs.prototype),{constructor:Vs,isPerspectiveCamera:!0,copy:function(e,t){return Gs.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*lr.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(.5*lr.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*lr.RAD2DEG*Math.atan(Math.tan(.5*lr.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,n,i,r,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(.5*lr.DEG2RAD*this.fov)/this.zoom,n=2*t,i=this.aspect*n,r=-.5*i,o=this.view;if(null!==this.view&&this.view.enabled){var s=o.fullWidth,a=o.fullHeight;r+=o.offsetX*i/s,t-=o.offsetY*n/a,i*=o.width/s,n*=o.height/a}var l=this.filmOffset;0!==l&&(r+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,t,t-n,e,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){var t=qr.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}});var Hs=90,Xs=1;function Ws(e,t,n,i){qr.call(this),this.type="CubeCamera";var r=new Vs(Hs,Xs,e,t);r.up.set(0,-1,0),r.lookAt(new pr(1,0,0)),this.add(r);var o=new Vs(Hs,Xs,e,t);o.up.set(0,-1,0),o.lookAt(new pr(-1,0,0)),this.add(o);var s=new Vs(Hs,Xs,e,t);s.up.set(0,0,1),s.lookAt(new pr(0,1,0)),this.add(s);var a=new Vs(Hs,Xs,e,t);a.up.set(0,0,-1),a.lookAt(new pr(0,-1,0)),this.add(a);var l=new Vs(Hs,Xs,e,t);l.up.set(0,-1,0),l.lookAt(new pr(0,0,1)),this.add(l);var u=new Vs(Hs,Xs,e,t);u.up.set(0,-1,0),u.lookAt(new pr(0,0,-1)),this.add(u),i=i||{format:di,magFilter:Qn,minFilter:Qn},this.renderTarget=new Ys(n,n,i),this.renderTarget.texture.name="CubeCamera",this.update=function(e,t){null===this.parent&&this.updateMatrixWorld();var n=e.getRenderTarget(),i=this.renderTarget,c=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(t,r),e.setRenderTarget(i,1),e.render(t,o),e.setRenderTarget(i,2),e.render(t,s),e.setRenderTarget(i,3),e.render(t,a),e.setRenderTarget(i,4),e.render(t,l),i.texture.generateMipmaps=c,e.setRenderTarget(i,5),e.render(t,u),e.setRenderTarget(n)},this.clear=function(e,t,n,i){for(var r=e.getRenderTarget(),o=this.renderTarget,s=0;s<6;s++)e.setRenderTarget(o,s),e.clear(t,n,i);e.setRenderTarget(r)}}function Ys(e,t,n){br.call(this,e,t,n)}function qs(e,t,n,i,r,o,s,a,l,u,c,d){yr.call(this,null,o,s,a,l,u,i,r,c,d),this.image={data:e,width:t,height:n},this.magFilter=void 0!==l?l:Wn,this.minFilter=void 0!==u?u:Wn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}Ws.prototype=Object.create(qr.prototype),Ws.prototype.constructor=Ws,Ys.prototype=Object.create(br.prototype),Ys.prototype.constructor=Ys,Ys.prototype.isWebGLRenderTargetCube=!0,Ys.prototype.fromEquirectangularTexture=function(e,t){this.texture.type=t.type,this.texture.format=t.format,this.texture.encoding=t.encoding;var n=new Qr,i={uniforms:{tEquirect:{value:null}},vertexShader:["varying vec3 vWorldDirection;","vec3 transformDirection( in vec3 dir, in mat4 matrix ) {","\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );","}","void main() {","\tvWorldDirection = transformDirection( position, modelMatrix );","\t#include <begin_vertex>","\t#include <project_vertex>","}"].join("\n"),fragmentShader:["uniform sampler2D tEquirect;","varying vec3 vWorldDirection;","#define RECIPROCAL_PI 0.31830988618","#define RECIPROCAL_PI2 0.15915494","void main() {","\tvec3 direction = normalize( vWorldDirection );","\tvec2 sampleUV;","\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;","\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;","\tgl_FragColor = texture2D( tEquirect, sampleUV );","}"].join("\n")},r=new Bs({type:"CubemapFromEquirect",uniforms:ks(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Xt,blending:Jt});r.uniforms.tEquirect.value=t;var o=new Ms(new Ns(5,5,5),r);n.add(o);var s=new Ws(1,10,1);return s.renderTarget=this,s.renderTarget.texture.name="CubeCameraTexture",s.update(e,n),o.geometry.dispose(),o.material.dispose(),this},qs.prototype=Object.create(yr.prototype),qs.prototype.constructor=qs,qs.prototype.isDataTexture=!0;var Qs=new pr,Js=new pr,Zs=new _r;function Ks(e,t){this.normal=void 0!==e?e:new pr(1,0,0),this.constant=void 0!==t?t:0}Object.assign(Ks.prototype,{isPlane:!0,set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(e,t,n){var i=Qs.subVectors(n,t).cross(Js.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return void 0===t&&(t=new pr),t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)},intersectLine:function(e,t){void 0===t&&(t=new pr);var n=e.delta(Qs),i=this.normal.dot(n);if(0===i)return 0===this.distanceToPoint(e.start)?t.copy(e.start):void 0;var r=-(e.start.dot(this.normal)+this.constant)/i;return r<0||r>1?void 0:t.copy(n).multiplyScalar(r).add(e.start)},intersectsLine:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){return void 0===e&&(e=new pr),e.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(e,t){var n=t||Zs.getNormalMatrix(e),i=this.coplanarPoint(Qs).applyMatrix4(e),r=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(r),this},translate:function(e){return this.constant-=e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}});var $s=new ho,ea=new pr;function ta(e,t,n,i,r,o){this.planes=[void 0!==e?e:new Ks,void 0!==t?t:new Ks,void 0!==n?n:new Ks,void 0!==i?i:new Ks,void 0!==r?r:new Ks,void 0!==o?o:new Ks]}Object.assign(ta.prototype,{set:function(e,t,n,i,r,o){var s=this.planes;return s[0].copy(e),s[1].copy(t),s[2].copy(n),s[3].copy(i),s[4].copy(r),s[5].copy(o),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this},setFromMatrix:function(e){var t=this.planes,n=e.elements,i=n[0],r=n[1],o=n[2],s=n[3],a=n[4],l=n[5],u=n[6],c=n[7],d=n[8],h=n[9],p=n[10],f=n[11],m=n[12],_=n[13],g=n[14],v=n[15];return t[0].setComponents(s-i,c-a,f-d,v-m).normalize(),t[1].setComponents(s+i,c+a,f+d,v+m).normalize(),t[2].setComponents(s+r,c+l,f+h,v+_).normalize(),t[3].setComponents(s-r,c-l,f-h,v-_).normalize(),t[4].setComponents(s-o,c-u,f-p,v-g).normalize(),t[5].setComponents(s+o,c+u,f+p,v+g).normalize(),this},intersectsObject:function(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),$s.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere($s)},intersectsSprite:function(e){return $s.center.set(0,0,0),$s.radius=.7071067811865476,$s.applyMatrix4(e.matrixWorld),this.intersectsSphere($s)},intersectsSphere:function(e){for(var t=this.planes,n=e.center,i=-e.radius,r=0;r<6;r++){if(t[r].distanceToPoint(n)<i)return!1}return!0},intersectsBox:function(e){for(var t=this.planes,n=0;n<6;n++){var i=t[n];if(ea.x=i.normal.x>0?e.max.x:e.min.x,ea.y=i.normal.y>0?e.max.y:e.min.y,ea.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(ea)<0)return!1}return!0},containsPoint:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}});var na={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha  = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvarying vec3 vViewPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV( sampler2D envMap, vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = normalMatrix * objectTangent;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t  vec3 reflectVec = reflect( -viewDir, normal );\n\t\t  reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t  vec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryReflectVec, roughness );\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif",lights_pars_begin:"uniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = saturate( clearcoat );\tmaterial.clearcoatRoughness = clamp( clearcoatRoughness, 0.04, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectDiffuse += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\t#ifdef USE_TANGENT\n\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, normalScale, normalMap );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec2 normalScale, in sampler2D normalMap ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy *= normalScale;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvec3 NfromST = cross( S, T );\n\t\t\tif( dot( NfromST, N ) > 0.0 ) {\n\t\t\t\tS *= -1.0;\n\t\t\t\tT *= -1.0;\n\t\t\t}\n\t\t#else\n\t\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 vTBN = mat3( tangent, bitangent, clearcoatNormal );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = clearcoatNormalScale * mapN.xy;\n\t\tclearcoatNormal = normalize( vTBN * mapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatNormalScale, clearcoatNormalMap );\n\t#endif\n#endif",clearcoat_normalmap_pars_fragment:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 encodeHalfRGBA ( vec2 v ) {\n\tvec4 encoded = vec4( 0.0 );\n\tconst vec2 offset = vec2( 1.0 / 255.0, 0.0 );\n\tencoded.xy = vec2( v.x, fract( v.x * 255.0 ) );\n\tencoded.xy = encoded.xy - ( encoded.yy * offset );\n\tencoded.zw = vec2( v.y, fract( v.y * 255.0 ) );\n\tencoded.zw = encoded.zw - ( encoded.ww * offset );\n\treturn encoded;\n}\nvec2 decodeHalfRGBA( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn decodeHalfRGBA( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = ( floor( uv * size - 0.5 ) + 0.5 ) * texelSize;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );\n}",uv_pars_fragment:"#ifdef USE_UV\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSPARENCY\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef TRANSPARENCY\n\tuniform float transparency;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#ifdef TRANSPARENCY\n\t\tdiffuseColor.a *= saturate( 1. - transparency + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );\n\t#endif\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},ia={common:{diffuse:{value:new No(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new _r},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new ur(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new No(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new No(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new _r}},sprite:{diffuse:{value:new No(15658734)},opacity:{value:1},center:{value:new ur(.5,.5)},rotation:{value:0},map:{value:null},uvTransform:{value:new _r}}},ra={basic:{uniforms:Ds([ia.common,ia.specularmap,ia.envmap,ia.aomap,ia.lightmap,ia.fog]),vertexShader:na.meshbasic_vert,fragmentShader:na.meshbasic_frag},lambert:{uniforms:Ds([ia.common,ia.specularmap,ia.envmap,ia.aomap,ia.lightmap,ia.emissivemap,ia.fog,ia.lights,{emissive:{value:new No(0)}}]),vertexShader:na.meshlambert_vert,fragmentShader:na.meshlambert_frag},phong:{uniforms:Ds([ia.common,ia.specularmap,ia.envmap,ia.aomap,ia.lightmap,ia.emissivemap,ia.bumpmap,ia.normalmap,ia.displacementmap,ia.gradientmap,ia.fog,ia.lights,{emissive:{value:new No(0)},specular:{value:new No(1118481)},shininess:{value:30}}]),vertexShader:na.meshphong_vert,fragmentShader:na.meshphong_frag},standard:{uniforms:Ds([ia.common,ia.envmap,ia.aomap,ia.lightmap,ia.emissivemap,ia.bumpmap,ia.normalmap,ia.displacementmap,ia.roughnessmap,ia.metalnessmap,ia.fog,ia.lights,{emissive:{value:new No(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:na.meshphysical_vert,fragmentShader:na.meshphysical_frag},matcap:{uniforms:Ds([ia.common,ia.bumpmap,ia.normalmap,ia.displacementmap,ia.fog,{matcap:{value:null}}]),vertexShader:na.meshmatcap_vert,fragmentShader:na.meshmatcap_frag},points:{uniforms:Ds([ia.points,ia.fog]),vertexShader:na.points_vert,fragmentShader:na.points_frag},dashed:{uniforms:Ds([ia.common,ia.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:na.linedashed_vert,fragmentShader:na.linedashed_frag},depth:{uniforms:Ds([ia.common,ia.displacementmap]),vertexShader:na.depth_vert,fragmentShader:na.depth_frag},normal:{uniforms:Ds([ia.common,ia.bumpmap,ia.normalmap,ia.displacementmap,{opacity:{value:1}}]),vertexShader:na.normal_vert,fragmentShader:na.normal_frag},sprite:{uniforms:Ds([ia.sprite,ia.fog]),vertexShader:na.sprite_vert,fragmentShader:na.sprite_frag},background:{uniforms:{uvTransform:{value:new _r},t2D:{value:null}},vertexShader:na.background_vert,fragmentShader:na.background_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:na.cube_vert,fragmentShader:na.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:na.equirect_vert,fragmentShader:na.equirect_frag},distanceRGBA:{uniforms:Ds([ia.common,ia.displacementmap,{referencePosition:{value:new pr},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:na.distanceRGBA_vert,fragmentShader:na.distanceRGBA_frag},shadow:{uniforms:Ds([ia.lights,ia.fog,{color:{value:new No(0)},opacity:{value:1}}]),vertexShader:na.shadow_vert,fragmentShader:na.shadow_frag}};function oa(){var e=null,t=!1,n=null;function i(r,o){!1!==t&&(n(r,o),e.requestAnimationFrame(i))}return{start:function(){!0!==t&&null!==n&&(e.requestAnimationFrame(i),t=!0)},stop:function(){t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function sa(e){var t=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),t.get(e)},remove:function(n){n.isInterleavedBufferAttribute&&(n=n.data);var i=t.get(n);i&&(e.deleteBuffer(i.buffer),t.delete(n))},update:function(n,i){n.isInterleavedBufferAttribute&&(n=n.data);var r=t.get(n);void 0===r?t.set(n,function(t,n){var i=t.array,r=t.dynamic?35048:35044,o=e.createBuffer();e.bindBuffer(n,o),e.bufferData(n,i,r),t.onUploadCallback();var s=5126;return i instanceof Float32Array?s=5126:i instanceof Float64Array||(i instanceof Uint16Array?s=5123:i instanceof Int16Array?s=5122:i instanceof Uint32Array?s=5125:i instanceof Int32Array?s=5124:i instanceof Int8Array?s=5120:i instanceof Uint8Array&&(s=5121)),{buffer:o,type:s,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version}}(n,i)):r.version<n.version&&(!function(t,n,i){var r=n.array,o=n.updateRange;e.bindBuffer(i,t),!1===n.dynamic?e.bufferData(i,r,35044):-1===o.count?e.bufferSubData(i,0,r):0===o.count||(e.bufferSubData(i,o.offset*r.BYTES_PER_ELEMENT,r.subarray(o.offset,o.offset+o.count)),o.count=-1)}(r.buffer,n,i),r.version=n.version)}}}function aa(e,t,n,i){Cs.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i},this.fromBufferGeometry(new la(e,t,n,i)),this.mergeVertices()}function la(e,t,n,i){ls.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i};var r,o,s=(e=e||1)/2,a=(t=t||1)/2,l=Math.floor(n)||1,u=Math.floor(i)||1,c=l+1,d=u+1,h=e/l,p=t/u,f=[],m=[],_=[],g=[];for(o=0;o<d;o++){var v=o*p-a;for(r=0;r<c;r++){var y=r*h-s;m.push(y,-v,0),_.push(0,0,1),g.push(r/l),g.push(1-o/u)}}for(o=0;o<u;o++)for(r=0;r<l;r++){var x=r+c*o,b=r+c*(o+1),w=r+1+c*(o+1),j=r+1+c*o;f.push(x,b,j),f.push(b,w,j)}this.setIndex(f),this.addAttribute("position",new Zo(m,3)),this.addAttribute("normal",new Zo(_,3)),this.addAttribute("uv",new Zo(g,2))}function ua(e,t,n,i){var r,o,s=new No(0),a=0,l=null,u=0;function c(e,n){t.buffers.color.setClear(e.r,e.g,e.b,n,i)}return{getClearColor:function(){return s},setClearColor:function(e,t){s.set(e),c(s,a=void 0!==t?t:1)},getClearAlpha:function(){return a},setClearAlpha:function(e){c(s,a=e)},render:function(t,i,d,h){var p=i.background,f=e.vr,m=f.getSession&&f.getSession();if(m&&"additive"===m.environmentBlendMode&&(p=null),null===p?(c(s,a),l=null,u=0):p&&p.isColor&&(c(p,1),h=!0,l=null,u=0),(e.autoClear||h)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),p&&(p.isCubeTexture||p.isWebGLRenderTargetCube)){void 0===o&&((o=new Ms(new Ns(1,1,1),new Bs({type:"BackgroundCubeMaterial",uniforms:ks(ra.cube.uniforms),vertexShader:ra.cube.vertexShader,fragmentShader:ra.cube.fragmentShader,side:Xt,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),o.geometry.removeAttribute("uv"),o.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(o.material,"map",{get:function(){return this.uniforms.tCube.value}}),n.update(o));var _=p.isWebGLRenderTargetCube?p.texture:p;o.material.uniforms.tCube.value=_,o.material.uniforms.tFlip.value=p.isWebGLRenderTargetCube?1:-1,l===p&&u===_.version||(o.material.needsUpdate=!0,l=p,u=_.version),t.unshift(o,o.geometry,o.material,0,0,null)}else p&&p.isTexture&&(void 0===r&&((r=new Ms(new la(2,2),new Bs({type:"BackgroundMaterial",uniforms:ks(ra.background.uniforms),vertexShader:ra.background.vertexShader,fragmentShader:ra.background.fragmentShader,side:Ht,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),Object.defineProperty(r.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(r)),r.material.uniforms.t2D.value=p,!0===p.matrixAutoUpdate&&p.updateMatrix(),r.material.uniforms.uvTransform.value.copy(p.matrix),l===p&&u===p.version||(r.material.needsUpdate=!0,l=p,u=p.version),t.unshift(r,r.geometry,r.material,0,0,null))}}}function ca(e,t,n,i){var r;this.setMode=function(e){r=e},this.render=function(t,i){e.drawArrays(r,t,i),n.update(i,r)},this.renderInstances=function(o,s,a){var l,u;if(i.isWebGL2)l=e,u="drawArraysInstanced";else if(u="drawArraysInstancedANGLE",null===(l=t.get("ANGLE_instanced_arrays")))return;l[u](r,s,a,o.maxInstancedCount),n.update(a,r,o.maxInstancedCount)}}function da(e,t,n){var i;function r(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var o="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext,s=void 0!==n.precision?n.precision:"highp",a=r(s);a!==s&&(s=a);var l=!0===n.logarithmicDepthBuffer,u=e.getParameter(34930),c=e.getParameter(35660),d=e.getParameter(3379),h=e.getParameter(34076),p=e.getParameter(34921),f=e.getParameter(36347),m=e.getParameter(36348),_=e.getParameter(36349),g=c>0,v=o||!!t.get("OES_texture_float");return{isWebGL2:o,getMaxAnisotropy:function(){if(void 0!==i)return i;var n=t.get("EXT_texture_filter_anisotropic");return i=null!==n?e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:r,precision:s,logarithmicDepthBuffer:l,maxTextures:u,maxVertexTextures:c,maxTextureSize:d,maxCubemapSize:h,maxAttributes:p,maxVertexUniforms:f,maxVaryings:m,maxFragmentUniforms:_,vertexTextures:g,floatFragmentTextures:v,floatVertexTextures:g&&v,maxSamples:o?e.getParameter(36183):0}}function ha(){var e=this,t=null,n=0,i=!1,r=!1,o=new Ks,s=new _r,a={value:null,needsUpdate:!1};function l(){a.value!==t&&(a.value=t,a.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function u(t,n,i,r){var l=null!==t?t.length:0,u=null;if(0!==l){if(u=a.value,!0!==r||null===u){var c=i+4*l,d=n.matrixWorldInverse;s.getNormalMatrix(d),(null===u||u.length<c)&&(u=new Float32Array(c));for(var h=0,p=i;h!==l;++h,p+=4)o.copy(t[h]).applyMatrix4(d,s),o.normal.toArray(u,p),u[p+3]=o.constant}a.value=u,a.needsUpdate=!0}return e.numPlanes=l,u}this.uniform=a,this.numPlanes=0,this.numIntersection=0,this.init=function(e,r,o){var s=0!==e.length||r||0!==n||i;return i=r,t=u(e,o,0),n=e.length,s},this.beginShadows=function(){r=!0,u(null)},this.endShadows=function(){r=!1,l()},this.setState=function(e,o,s,c,d,h){if(!i||null===e||0===e.length||r&&!s)r?u(null):l();else{var p=r?0:n,f=4*p,m=d.clippingState||null;a.value=m,m=u(e,c,f,h);for(var _=0;_!==f;++_)m[_]=t[_];d.clippingState=m,this.numIntersection=o?this.numPlanes:0,this.numPlanes+=p}}}function pa(e){var t={};return{get:function(n){if(void 0!==t[n])return t[n];var i;switch(n){case"WEBGL_depth_texture":i=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=e.getExtension(n)}return t[n]=i,i}}}function fa(e,t,n){var i=new WeakMap,r=new WeakMap;function o(e){var s=e.target,a=i.get(s);for(var l in null!==a.index&&t.remove(a.index),a.attributes)t.remove(a.attributes[l]);s.removeEventListener("dispose",o),i.delete(s);var u=r.get(a);u&&(t.remove(u),r.delete(a)),n.memory.geometries--}function s(e){var n=[],i=e.index,o=e.attributes.position,s=0;if(null!==i){var a=i.array;s=i.version;for(var l=0,u=a.length;l<u;l+=3){var c=a[l+0],d=a[l+1],h=a[l+2];n.push(c,d,d,h,h,c)}}else{a=o.array;s=o.version;for(l=0,u=a.length/3-1;l<u;l+=3){c=l+0,d=l+1,h=l+2;n.push(c,d,d,h,h,c)}}var p=new(es(n)>65535?Jo:qo)(n,1);p.version=s,t.update(p,34963);var f=r.get(e);f&&t.remove(f),r.set(e,p)}return{get:function(e,t){var r=i.get(t);return r||(t.addEventListener("dispose",o),t.isBufferGeometry?r=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new ls).setFromObject(e)),r=t._bufferGeometry),i.set(t,r),n.memory.geometries++,r)},update:function(e){var n=e.index,i=e.attributes;for(var r in null!==n&&t.update(n,34963),i)t.update(i[r],34962);var o=e.morphAttributes;for(var r in o)for(var s=o[r],a=0,l=s.length;a<l;a++)t.update(s[a],34962)},getWireframeAttribute:function(e){var t=r.get(e);if(t){var n=e.index;null!==n&&t.version<n.version&&s(e)}else s(e);return r.get(e)}}}function ma(e,t,n,i){var r,o,s;this.setMode=function(e){r=e},this.setIndex=function(e){o=e.type,s=e.bytesPerElement},this.render=function(t,i){e.drawElements(r,i,o,t*s),n.update(i,r)},this.renderInstances=function(a,l,u){var c,d;if(i.isWebGL2)c=e,d="drawElementsInstanced";else if(d="drawElementsInstancedANGLE",null===(c=t.get("ANGLE_instanced_arrays")))return;c[d](r,u,o,l*s,a.maxInstancedCount),n.update(u,r,a.maxInstancedCount)}}function _a(e){var t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,n,i){switch(i=i||1,t.calls++,n){case 4:t.triangles+=i*(e/3);break;case 5:case 6:t.triangles+=i*(e-2);break;case 1:t.lines+=i*(e/2);break;case 3:t.lines+=i*(e-1);break;case 2:t.lines+=i*e;break;case 0:t.points+=i*e}}}}function ga(e,t){return Math.abs(t[1])-Math.abs(e[1])}function va(e){var t={},n=new Float32Array(8);return{update:function(i,r,o,s){var a=i.morphTargetInfluences,l=a.length,u=t[r.id];if(void 0===u){u=[];for(var c=0;c<l;c++)u[c]=[c,0];t[r.id]=u}var d=o.morphTargets&&r.morphAttributes.position,h=o.morphNormals&&r.morphAttributes.normal;for(c=0;c<l;c++){0!==(p=u[c])[1]&&(d&&r.removeAttribute("morphTarget"+c),h&&r.removeAttribute("morphNormal"+c))}for(c=0;c<l;c++){(p=u[c])[0]=c,p[1]=a[c]}for(u.sort(ga),c=0;c<8;c++){var p;if(p=u[c]){var f=p[0],m=p[1];if(m){d&&r.addAttribute("morphTarget"+c,d[f]),h&&r.addAttribute("morphNormal"+c,h[f]),n[c]=m;continue}}n[c]=0}s.getUniforms().setValue(e,"morphTargetInfluences",n)}}}function ya(e,t){var n={};return{update:function(i){var r=t.render.frame,o=i.geometry,s=e.get(i,o);return n[s.id]!==r&&(o.isGeometry&&s.updateFromObject(i),e.update(s),n[s.id]=r),s},dispose:function(){n={}}}}function xa(e,t,n,i,r,o,s,a,l,u){e=void 0!==e?e:[],t=void 0!==t?t:kn,s=void 0!==s?s:di,yr.call(this,e,t,n,i,r,o,s,a,l,u),this.flipY=!1}function ba(e,t,n,i){yr.call(this,null),this.image={data:e,width:t,height:n,depth:i},this.magFilter=Wn,this.minFilter=Wn,this.wrapR=Hn,this.generateMipmaps=!1,this.flipY=!1}function wa(e,t,n,i){yr.call(this,null),this.image={data:e,width:t,height:n,depth:i},this.magFilter=Wn,this.minFilter=Wn,this.wrapR=Hn,this.generateMipmaps=!1,this.flipY=!1}ra.physical={uniforms:Ds([ra.standard.uniforms,{transparency:{value:0},clearcoat:{value:0},clearcoatRoughness:{value:0},sheen:{value:new No(0)},clearcoatNormalScale:{value:new ur(1,1)},clearcoatNormalMap:{value:null}}]),vertexShader:na.meshphysical_vert,fragmentShader:na.meshphysical_frag},aa.prototype=Object.create(Cs.prototype),aa.prototype.constructor=aa,la.prototype=Object.create(ls.prototype),la.prototype.constructor=la,xa.prototype=Object.create(yr.prototype),xa.prototype.constructor=xa,xa.prototype.isCubeTexture=!0,Object.defineProperty(xa.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}}),ba.prototype=Object.create(yr.prototype),ba.prototype.constructor=ba,ba.prototype.isDataTexture2DArray=!0,wa.prototype=Object.create(yr.prototype),wa.prototype.constructor=wa,wa.prototype.isDataTexture3D=!0;var ja=new yr,Sa=new ba,Aa=new wa,Ma=new xa,Ta=[],Pa=[],La=new Float32Array(16),Ea=new Float32Array(9),Oa=new Float32Array(4);function Ia(e,t,n){var i=e[0];if(i<=0||i>0)return e;var r=t*n,o=Ta[r];if(void 0===o&&(o=new Float32Array(r),Ta[r]=o),0!==t){i.toArray(o,0);for(var s=1,a=0;s!==t;++s)a+=n,e[s].toArray(o,a)}return o}function Ca(e,t){if(e.length!==t.length)return!1;for(var n=0,i=e.length;n<i;n++)if(e[n]!==t[n])return!1;return!0}function Fa(e,t){for(var n=0,i=t.length;n<i;n++)e[n]=t[n]}function Na(e,t){var n=Pa[t];void 0===n&&(n=new Int32Array(t),Pa[t]=n);for(var i=0;i!==t;++i)n[i]=e.allocateTextureUnit();return n}function ka(e,t){var n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function Da(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Ca(n,t))return;e.uniform2fv(this.addr,t),Fa(n,t)}}function Ra(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(Ca(n,t))return;e.uniform3fv(this.addr,t),Fa(n,t)}}function za(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Ca(n,t))return;e.uniform4fv(this.addr,t),Fa(n,t)}}function Ua(e,t){var n=this.cache,i=t.elements;if(void 0===i){if(Ca(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),Fa(n,t)}else{if(Ca(n,i))return;Oa.set(i),e.uniformMatrix2fv(this.addr,!1,Oa),Fa(n,i)}}function Ba(e,t){var n=this.cache,i=t.elements;if(void 0===i){if(Ca(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),Fa(n,t)}else{if(Ca(n,i))return;Ea.set(i),e.uniformMatrix3fv(this.addr,!1,Ea),Fa(n,i)}}function Ga(e,t){var n=this.cache,i=t.elements;if(void 0===i){if(Ca(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),Fa(n,t)}else{if(Ca(n,i))return;La.set(i),e.uniformMatrix4fv(this.addr,!1,La),Fa(n,i)}}function Va(e,t,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.safeSetTexture2D(t||ja,r)}function Ha(e,t,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(t||Sa,r)}function Xa(e,t,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(t||Aa,r)}function Wa(e,t,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.safeSetTextureCube(t||Ma,r)}function Ya(e,t){var n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function qa(e,t){var n=this.cache;Ca(n,t)||(e.uniform2iv(this.addr,t),Fa(n,t))}function Qa(e,t){var n=this.cache;Ca(n,t)||(e.uniform3iv(this.addr,t),Fa(n,t))}function Ja(e,t){var n=this.cache;Ca(n,t)||(e.uniform4iv(this.addr,t),Fa(n,t))}function Za(e,t){e.uniform1fv(this.addr,t)}function Ka(e,t){e.uniform1iv(this.addr,t)}function $a(e,t){e.uniform2iv(this.addr,t)}function el(e,t){e.uniform3iv(this.addr,t)}function tl(e,t){e.uniform4iv(this.addr,t)}function nl(e,t){var n=Ia(t,this.size,2);e.uniform2fv(this.addr,n)}function il(e,t){var n=Ia(t,this.size,3);e.uniform3fv(this.addr,n)}function rl(e,t){var n=Ia(t,this.size,4);e.uniform4fv(this.addr,n)}function ol(e,t){var n=Ia(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function sl(e,t){var n=Ia(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function al(e,t){var n=Ia(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function ll(e,t,n){var i=t.length,r=Na(n,i);e.uniform1iv(this.addr,r);for(var o=0;o!==i;++o)n.safeSetTexture2D(t[o]||ja,r[o])}function ul(e,t,n){var i=t.length,r=Na(n,i);e.uniform1iv(this.addr,r);for(var o=0;o!==i;++o)n.safeSetTextureCube(t[o]||Ma,r[o])}function cl(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function(e){switch(e){case 5126:return ka;case 35664:return Da;case 35665:return Ra;case 35666:return za;case 35674:return Ua;case 35675:return Ba;case 35676:return Ga;case 35678:case 36198:return Va;case 35679:return Xa;case 35680:return Wa;case 36289:return Ha;case 5124:case 35670:return Ya;case 35667:case 35671:return qa;case 35668:case 35672:return Qa;case 35669:case 35673:return Ja}}(t.type)}function dl(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return Za;case 35664:return nl;case 35665:return il;case 35666:return rl;case 35674:return ol;case 35675:return sl;case 35676:return al;case 35678:return ll;case 35680:return ul;case 5124:case 35670:return Ka;case 35667:case 35671:return $a;case 35668:case 35672:return el;case 35669:case 35673:return tl}}(t.type)}function hl(e){this.id=e,this.seq=[],this.map={}}dl.prototype.updateCache=function(e){var t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),Fa(t,e)},hl.prototype.setValue=function(e,t,n){for(var i=this.seq,r=0,o=i.length;r!==o;++r){var s=i[r];s.setValue(e,t[s.id],n)}};var pl=/([\w\d_]+)(\])?(\[|\.)?/g;function fl(e,t){e.seq.push(t),e.map[t.id]=t}function ml(e,t,n){var i=e.name,r=i.length;for(pl.lastIndex=0;;){var o=pl.exec(i),s=pl.lastIndex,a=o[1],l="]"===o[2],u=o[3];if(l&&(a|=0),void 0===u||"["===u&&s+2===r){fl(n,void 0===u?new cl(a,e,t):new dl(a,e,t));break}var c=n.map[a];void 0===c&&fl(n,c=new hl(a)),n=c}}function _l(e,t){this.seq=[],this.map={};for(var n=e.getProgramParameter(t,35718),i=0;i<n;++i){var r=e.getActiveUniform(t,i);ml(r,e.getUniformLocation(t,r.name),this)}}function gl(e,t,n){var i=e.createShader(t);return e.shaderSource(i,n),e.compileShader(i),i}_l.prototype.setValue=function(e,t,n,i){var r=this.map[t];void 0!==r&&r.setValue(e,n,i)},_l.prototype.setOptional=function(e,t,n){var i=t[n];void 0!==i&&this.setValue(e,n,i)},_l.upload=function(e,t,n,i){for(var r=0,o=t.length;r!==o;++r){var s=t[r],a=n[s.id];!1!==a.needsUpdate&&s.setValue(e,a.value,i)}},_l.seqWithValue=function(e,t){for(var n=[],i=0,r=e.length;i!==r;++i){var o=e[i];o.id in t&&n.push(o)}return n};var vl=0;function yl(e){switch(e){case Wi:return["Linear","( value )"];case Yi:return["sRGB","( value )"];case Qi:return["RGBE","( value )"];case Zi:return["RGBM","( value, 7.0 )"];case Ki:return["RGBM","( value, 16.0 )"];case $i:return["RGBD","( value, 256.0 )"];case qi:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case Ji:return["LogLuv","( value )"];default:throw new Error("unsupported encoding: "+e)}}function xl(e,t,n){var i=e.getShaderParameter(t,35713),r=e.getShaderInfoLog(t).trim();return i&&""===r?"":"THREE.WebGLShader: gl.getShaderInfoLog() "+n+"\n"+r+function(e){for(var t=e.split("\n"),n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join("\n")}(e.getShaderSource(t))}function bl(e,t){var n=yl(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function wl(e,t){var n;switch(t){case On:n="Linear";break;case In:n="Reinhard";break;case Cn:n="Uncharted2";break;case Fn:n="OptimizedCineon";break;case Nn:n="ACESFilmic";break;default:throw new Error("unsupported toneMapping: "+t)}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function jl(e){return""!==e}function Sl(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function Al(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}function Ml(e){return e.replace(/^[ \t]*#include +<([\w\d.\/]+)>/gm,function(e,t){var n=na[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return Ml(n)})}function Tl(e){return e.replace(/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,function(e,t,n,i){for(var r="",o=parseInt(t);o<parseInt(n);o++)r+=i.replace(/\[ i \]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return r})}function Pl(e,t,n,i,r,o,s){var a=e.getContext(),l=i.defines,u=r.vertexShader,c=r.fragmentShader,d="SHADOWMAP_TYPE_BASIC";o.shadowMapType===Bt?d="SHADOWMAP_TYPE_PCF":o.shadowMapType===Gt?d="SHADOWMAP_TYPE_PCF_SOFT":o.shadowMapType===Vt&&(d="SHADOWMAP_TYPE_VSM");var h="ENVMAP_TYPE_CUBE",p="ENVMAP_MODE_REFLECTION",f="ENVMAP_BLENDING_MULTIPLY";if(o.envMap){switch(i.envMap.mapping){case kn:case Dn:h="ENVMAP_TYPE_CUBE";break;case Bn:case Gn:h="ENVMAP_TYPE_CUBE_UV";break;case Rn:case zn:h="ENVMAP_TYPE_EQUIREC";break;case Un:h="ENVMAP_TYPE_SPHERE"}switch(i.envMap.mapping){case Dn:case zn:p="ENVMAP_MODE_REFRACTION"}switch(i.combine){case Tn:f="ENVMAP_BLENDING_MULTIPLY";break;case Pn:f="ENVMAP_BLENDING_MIX";break;case Ln:f="ENVMAP_BLENDING_ADD"}}var m,_,g,v,y,x=e.gammaFactor>0?e.gammaFactor:1,b=s.isWebGL2?"":function(e,t,n){return[(e=e||{}).derivatives||t.envMapCubeUV||t.bumpMap||t.tangentSpaceNormalMap||t.clearcoatNormalMap||t.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(e.fragDepth||t.logarithmicDepthBuffer)&&n.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",e.drawBuffers&&n.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(e.shaderTextureLOD||t.envMap)&&n.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(jl).join("\n")}(i.extensions,o,t),w=function(e){var t=[];for(var n in e){var i=e[n];!1!==i&&t.push("#define "+n+" "+i)}return t.join("\n")}(l),j=a.createProgram();if(i.isRawShaderMaterial?((m=[w].filter(jl).join("\n")).length>0&&(m+="\n"),(_=[b,w].filter(jl).join("\n")).length>0&&(_+="\n")):(m=["precision "+o.precision+" float;","precision "+o.precision+" int;","highp"===o.precision?"#define HIGH_PRECISION":"","#define SHADER_NAME "+r.name,w,o.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+x,"#define MAX_BONES "+o.maxBones,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp2?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+p:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.normalMap&&o.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",o.normalMap&&o.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",o.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",o.displacementMap&&o.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexTangents?"#define USE_TANGENT":"",o.vertexColors?"#define USE_COLOR":"",o.vertexUvs?"#define USE_UV":"",o.flatShading?"#define FLAT_SHADED":"",o.skinning?"#define USE_SKINNING":"",o.useVertexTexture?"#define BONE_TEXTURE":"",o.morphTargets?"#define USE_MORPHTARGETS":"",o.morphNormals&&!1===o.flatShading?"#define USE_MORPHNORMALS":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+d:"",o.sizeAttenuation?"#define USE_SIZEATTENUATION":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&(s.isWebGL2||t.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(jl).join("\n"),_=[b,"precision "+o.precision+" float;","precision "+o.precision+" int;","highp"===o.precision?"#define HIGH_PRECISION":"","#define SHADER_NAME "+r.name,w,o.alphaTest?"#define ALPHATEST "+o.alphaTest+(o.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+x,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp2?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.matcap?"#define USE_MATCAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+h:"",o.envMap?"#define "+p:"",o.envMap?"#define "+f:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.normalMap&&o.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",o.normalMap&&o.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",o.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.sheen?"#define USE_SHEEN":"",o.vertexTangents?"#define USE_TANGENT":"",o.vertexColors?"#define USE_COLOR":"",o.vertexUvs?"#define USE_UV":"",o.gradientMap?"#define USE_GRADIENTMAP":"",o.flatShading?"#define FLAT_SHADED":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+d:"",o.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",o.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&(s.isWebGL2||t.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"",(i.extensions&&i.extensions.shaderTextureLOD||o.envMap)&&(s.isWebGL2||t.get("EXT_shader_texture_lod"))?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",o.toneMapping!==En?"#define TONE_MAPPING":"",o.toneMapping!==En?na.tonemapping_pars_fragment:"",o.toneMapping!==En?wl("toneMapping",o.toneMapping):"",o.dithering?"#define DITHERING":"",o.outputEncoding||o.mapEncoding||o.matcapEncoding||o.envMapEncoding||o.emissiveMapEncoding?na.encodings_pars_fragment:"",o.mapEncoding?bl("mapTexelToLinear",o.mapEncoding):"",o.matcapEncoding?bl("matcapTexelToLinear",o.matcapEncoding):"",o.envMapEncoding?bl("envMapTexelToLinear",o.envMapEncoding):"",o.emissiveMapEncoding?bl("emissiveMapTexelToLinear",o.emissiveMapEncoding):"",o.outputEncoding?(g="linearToOutputTexel",v=o.outputEncoding,y=yl(v),"vec4 "+g+"( vec4 value ) { return LinearTo"+y[0]+y[1]+"; }"):"",o.depthPacking?"#define DEPTH_PACKING "+i.depthPacking:"","\n"].filter(jl).join("\n")),u=Al(u=Sl(u=Ml(u),o),o),c=Al(c=Sl(c=Ml(c),o),o),u=Tl(u),c=Tl(c),s.isWebGL2&&!i.isRawShaderMaterial){var S=!1,A=/^\s*#version\s+300\s+es\s*\n/;i.isShaderMaterial&&null!==u.match(A)&&null!==c.match(A)&&(S=!0,u=u.replace(A,""),c=c.replace(A,"")),m=["#version 300 es\n","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+m,_=["#version 300 es\n","#define varying in",S?"":"out highp vec4 pc_fragColor;",S?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+_}var M,T,P=_+c,L=gl(a,35633,m+u),E=gl(a,35632,P);if(a.attachShader(j,L),a.attachShader(j,E),void 0!==i.index0AttributeName?a.bindAttribLocation(j,0,i.index0AttributeName):!0===o.morphTargets&&a.bindAttribLocation(j,0,"position"),a.linkProgram(j),e.debug.checkShaderErrors){var O=a.getProgramInfoLog(j).trim(),I=a.getShaderInfoLog(L).trim(),C=a.getShaderInfoLog(E).trim(),F=!0,N=!0;if(!1===a.getProgramParameter(j,35714)){F=!1;xl(a,L,"vertex"),xl(a,E,"fragment")}else""!==O||""!==I&&""!==C||(N=!1);N&&(this.diagnostics={runnable:F,material:i,programLog:O,vertexShader:{log:I,prefix:m},fragmentShader:{log:C,prefix:_}})}return a.deleteShader(L),a.deleteShader(E),this.getUniforms=function(){return void 0===M&&(M=new _l(a,j)),M},this.getAttributes=function(){return void 0===T&&(T=function(e,t){for(var n={},i=e.getProgramParameter(t,35721),r=0;r<i;r++){var o=e.getActiveAttrib(t,r).name;n[o]=e.getAttribLocation(t,o)}return n}(a,j)),T},this.destroy=function(){a.deleteProgram(j),this.program=void 0},this.name=r.name,this.id=vl++,this.code=n,this.usedTimes=1,this.program=j,this.vertexShader=L,this.fragmentShader=E,this}function Ll(e,t,n){var i=[],r={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},o=["precision","supportsVertexTextures","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen"];function s(e,t){var n;return e?e.isTexture?n=e.encoding:e.isWebGLRenderTarget&&(n=e.texture.encoding):n=Wi,n===Wi&&t&&(n=qi),n}this.getParameters=function(t,i,o,a,l,u,c){var d=r[t.type],h=c.isSkinnedMesh?function(e){var t=e.skeleton.bones;if(n.floatVertexTextures)return 1024;var i=n.maxVertexUniforms,r=Math.floor((i-20)/4),o=Math.min(r,t.length);return o<t.length?0:o}(c):0,p=n.precision;null!==t.precision&&(p=n.getMaxPrecision(t.precision),t.precision);var f=e.getRenderTarget();return{shaderID:d,precision:p,supportsVertexTextures:n.vertexTextures,outputEncoding:s(f?f.texture:null,e.gammaOutput),map:!!t.map,mapEncoding:s(t.map,e.gammaInput),matcap:!!t.matcap,matcapEncoding:s(t.matcap,e.gammaInput),envMap:!!t.envMap,envMapMode:t.envMap&&t.envMap.mapping,envMapEncoding:s(t.envMap,e.gammaInput),envMapCubeUV:!!t.envMap&&(t.envMap.mapping===Bn||t.envMap.mapping===Gn),lightMap:!!t.lightMap,aoMap:!!t.aoMap,emissiveMap:!!t.emissiveMap,emissiveMapEncoding:s(t.emissiveMap,e.gammaInput),bumpMap:!!t.bumpMap,normalMap:!!t.normalMap,objectSpaceNormalMap:t.normalMapType===ir,tangentSpaceNormalMap:t.normalMapType===nr,clearcoatNormalMap:!!t.clearcoatNormalMap,displacementMap:!!t.displacementMap,roughnessMap:!!t.roughnessMap,metalnessMap:!!t.metalnessMap,specularMap:!!t.specularMap,alphaMap:!!t.alphaMap,gradientMap:!!t.gradientMap,sheen:!!t.sheen,combine:t.combine,vertexTangents:t.normalMap&&t.vertexTangents,vertexColors:t.vertexColors,vertexUvs:!!(t.map||t.bumpMap||t.normalMap||t.specularMap||t.alphaMap||t.emissiveMap||t.roughnessMap||t.metalnessMap||t.clearcoatNormalMap),fog:!!a,useFog:t.fog,fogExp2:a&&a.isFogExp2,flatShading:t.flatShading,sizeAttenuation:t.sizeAttenuation,logarithmicDepthBuffer:n.logarithmicDepthBuffer,skinning:t.skinning&&h>0,maxBones:h,useVertexTexture:n.floatVertexTextures,morphTargets:t.morphTargets,morphNormals:t.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:i.directional.length,numPointLights:i.point.length,numSpotLights:i.spot.length,numRectAreaLights:i.rectArea.length,numHemiLights:i.hemi.length,numDirLightShadows:i.directionalShadowMap.length,numPointLightShadows:i.pointShadowMap.length,numSpotLightShadows:i.spotShadowMap.length,numClippingPlanes:l,numClipIntersection:u,dithering:t.dithering,shadowMapEnabled:e.shadowMap.enabled&&c.receiveShadow&&o.length>0,shadowMapType:e.shadowMap.type,toneMapping:t.toneMapped?e.toneMapping:En,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:t.premultipliedAlpha,alphaTest:t.alphaTest,doubleSided:t.side===Wt,flipSided:t.side===Xt,depthPacking:void 0!==t.depthPacking&&t.depthPacking}},this.getProgramCode=function(t,n){var i=[];if(n.shaderID?i.push(n.shaderID):(i.push(t.fragmentShader),i.push(t.vertexShader)),void 0!==t.defines)for(var r in t.defines)i.push(r),i.push(t.defines[r]);for(var s=0;s<o.length;s++)i.push(n[o[s]]);return i.push(t.onBeforeCompile.toString()),i.push(e.gammaOutput),i.push(e.gammaFactor),i.join()},this.acquireProgram=function(r,o,s,a){for(var l,u=0,c=i.length;u<c;u++){var d=i[u];if(d.code===a){++(l=d).usedTimes;break}}return void 0===l&&(l=new Pl(e,t,a,r,o,s,n),i.push(l)),l},this.releaseProgram=function(e){if(0==--e.usedTimes){var t=i.indexOf(e);i[t]=i[i.length-1],i.pop(),e.destroy()}},this.programs=i}function El(){var e=new WeakMap;return{get:function(t){var n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,i){e.get(t)[n]=i},dispose:function(){e=new WeakMap}}}function Ol(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function Il(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function Cl(){var e=[],t=0,n=[],i=[],r={id:-1};function o(n,i,o,s,a,l){var u=e[t];return void 0===u?(u={id:n.id,object:n,geometry:i,material:o,program:o.program||r,groupOrder:s,renderOrder:n.renderOrder,z:a,group:l},e[t]=u):(u.id=n.id,u.object=n,u.geometry=i,u.material=o,u.program=o.program||r,u.groupOrder=s,u.renderOrder=n.renderOrder,u.z=a,u.group=l),t++,u}return{opaque:n,transparent:i,init:function(){t=0,n.length=0,i.length=0},push:function(e,t,r,s,a,l){var u=o(e,t,r,s,a,l);(!0===r.transparent?i:n).push(u)},unshift:function(e,t,r,s,a,l){var u=o(e,t,r,s,a,l);(!0===r.transparent?i:n).unshift(u)},sort:function(){n.length>1&&n.sort(Ol),i.length>1&&i.sort(Il)}}}function Fl(){var e=new WeakMap;function t(n){var i=n.target;i.removeEventListener("dispose",t),e.delete(i)}return{get:function(n,i){var r,o=e.get(n);return void 0===o?(r=new Cl,e.set(n,new WeakMap),e.get(n).set(i,r),n.addEventListener("dispose",t)):void 0===(r=o.get(i))&&(r=new Cl,o.set(i,r)),r},dispose:function(){e=new WeakMap}}}function Nl(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":n={direction:new pr,color:new No,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new ur};break;case"SpotLight":n={position:new pr,direction:new pr,color:new No,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new ur};break;case"PointLight":n={position:new pr,color:new No,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new ur,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":n={direction:new pr,skyColor:new No,groundColor:new No};break;case"RectAreaLight":n={color:new No,position:new pr,halfWidth:new pr,halfHeight:new pr}}return e[t.id]=n,n}}}var kl=0;function Dl(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function Rl(){for(var e=new Nl,t={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},n=0;n<9;n++)t.probe.push(new pr);var i=new pr,r=new Er,o=new Er;return{setup:function(n,s,a){for(var l=0,u=0,c=0,d=0;d<9;d++)t.probe[d].set(0,0,0);var h=0,p=0,f=0,m=0,_=0,g=0,v=0,y=0,x=a.matrixWorldInverse;n.sort(Dl),d=0;for(var b=n.length;d<b;d++){var w=n[d],j=w.color,S=w.intensity,A=w.distance,M=w.shadow&&w.shadow.map?w.shadow.map.texture:null;if(w.isAmbientLight)l+=j.r*S,u+=j.g*S,c+=j.b*S;else if(w.isLightProbe)for(var T=0;T<9;T++)t.probe[T].addScaledVector(w.sh.coefficients[T],S);else if(w.isDirectionalLight){if((L=e.get(w)).color.copy(w.color).multiplyScalar(w.intensity),L.direction.setFromMatrixPosition(w.matrixWorld),i.setFromMatrixPosition(w.target.matrixWorld),L.direction.sub(i),L.direction.transformDirection(x),L.shadow=w.castShadow,w.castShadow){var P=w.shadow;L.shadowBias=P.bias,L.shadowRadius=P.radius,L.shadowMapSize=P.mapSize,t.directionalShadowMap[h]=M,t.directionalShadowMatrix[h]=w.shadow.matrix,g++}t.directional[h]=L,h++}else if(w.isSpotLight){if((L=e.get(w)).position.setFromMatrixPosition(w.matrixWorld),L.position.applyMatrix4(x),L.color.copy(j).multiplyScalar(S),L.distance=A,L.direction.setFromMatrixPosition(w.matrixWorld),i.setFromMatrixPosition(w.target.matrixWorld),L.direction.sub(i),L.direction.transformDirection(x),L.coneCos=Math.cos(w.angle),L.penumbraCos=Math.cos(w.angle*(1-w.penumbra)),L.decay=w.decay,L.shadow=w.castShadow,w.castShadow){P=w.shadow;L.shadowBias=P.bias,L.shadowRadius=P.radius,L.shadowMapSize=P.mapSize,t.spotShadowMap[f]=M,t.spotShadowMatrix[f]=w.shadow.matrix,y++}t.spot[f]=L,f++}else if(w.isRectAreaLight){(L=e.get(w)).color.copy(j).multiplyScalar(S),L.position.setFromMatrixPosition(w.matrixWorld),L.position.applyMatrix4(x),o.identity(),r.copy(w.matrixWorld),r.premultiply(x),o.extractRotation(r),L.halfWidth.set(.5*w.width,0,0),L.halfHeight.set(0,.5*w.height,0),L.halfWidth.applyMatrix4(o),L.halfHeight.applyMatrix4(o),t.rectArea[m]=L,m++}else if(w.isPointLight){if((L=e.get(w)).position.setFromMatrixPosition(w.matrixWorld),L.position.applyMatrix4(x),L.color.copy(w.color).multiplyScalar(w.intensity),L.distance=w.distance,L.decay=w.decay,L.shadow=w.castShadow,w.castShadow){P=w.shadow;L.shadowBias=P.bias,L.shadowRadius=P.radius,L.shadowMapSize=P.mapSize,L.shadowCameraNear=P.camera.near,L.shadowCameraFar=P.camera.far,t.pointShadowMap[p]=M,t.pointShadowMatrix[p]=w.shadow.matrix,v++}t.point[p]=L,p++}else if(w.isHemisphereLight){var L;(L=e.get(w)).direction.setFromMatrixPosition(w.matrixWorld),L.direction.transformDirection(x),L.direction.normalize(),L.skyColor.copy(w.color).multiplyScalar(S),L.groundColor.copy(w.groundColor).multiplyScalar(S),t.hemi[_]=L,_++}}t.ambient[0]=l,t.ambient[1]=u,t.ambient[2]=c;var E=t.hash;E.directionalLength===h&&E.pointLength===p&&E.spotLength===f&&E.rectAreaLength===m&&E.hemiLength===_&&E.numDirectionalShadows===g&&E.numPointShadows===v&&E.numSpotShadows===y||(t.directional.length=h,t.spot.length=f,t.rectArea.length=m,t.point.length=p,t.hemi.length=_,t.directionalShadowMap.length=g,t.pointShadowMap.length=v,t.spotShadowMap.length=y,t.directionalShadowMatrix.length=g,t.pointShadowMatrix.length=v,t.spotShadowMatrix.length=y,E.directionalLength=h,E.pointLength=p,E.spotLength=f,E.rectAreaLength=m,E.hemiLength=_,E.numDirectionalShadows=g,E.numPointShadows=v,E.numSpotShadows=y,t.version=kl++)},state:t}}function zl(){var e=new Rl,t=[],n=[];return{init:function(){t.length=0,n.length=0},state:{lightsArray:t,shadowsArray:n,lights:e},setupLights:function(i){e.setup(t,n,i)},pushLight:function(e){t.push(e)},pushShadow:function(e){n.push(e)}}}function Ul(){var e=new WeakMap;function t(n){var i=n.target;i.removeEventListener("dispose",t),e.delete(i)}return{get:function(n,i){var r;return!1===e.has(n)?(r=new zl,e.set(n,new WeakMap),e.get(n).set(i,r),n.addEventListener("dispose",t)):!1===e.get(n).has(i)?(r=new zl,e.get(n).set(i,r)):r=e.get(n).get(i),r},dispose:function(){e=new WeakMap}}}function Bl(e){Bo.call(this),this.type="MeshDepthMaterial",this.depthPacking=er,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(e)}function Gl(e){Bo.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new pr,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.lights=!1,this.setValues(e)}Bl.prototype=Object.create(Bo.prototype),Bl.prototype.constructor=Bl,Bl.prototype.isMeshDepthMaterial=!0,Bl.prototype.copy=function(e){return Bo.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},Gl.prototype=Object.create(Bo.prototype),Gl.prototype.constructor=Gl,Gl.prototype.isMeshDistanceMaterial=!0,Gl.prototype.copy=function(e){return Bo.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this};var Vl="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n  float mean = 0.0;\n  float squared_mean = 0.0;\n  \n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy  ) / resolution ) );\n  for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n    #ifdef HORIZONAL_PASS\n      vec2 distribution = decodeHalfRGBA ( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n      mean += distribution.x;\n      squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n    #else\n      float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0,  i )  * radius ) / resolution ) );\n      mean += depth;\n      squared_mean += depth * depth;\n    #endif\n  }\n  mean = mean * HALF_SAMPLE_RATE;\n  squared_mean = squared_mean * HALF_SAMPLE_RATE;\n  float std_dev = pow( squared_mean - mean * mean, 0.5 );\n  gl_FragColor = encodeHalfRGBA( vec2( mean, std_dev ) );\n}",Hl="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}";function Xl(e,t,n){var i=new ta,r=new ur,o=new ur,s=new xr,a=1,l=2,u=1+(a|l),c=new Array(u),d=new Array(u),h={},p={0:Xt,1:Ht,2:Wt},f=new Bs({defines:{SAMPLE_RATE:.25,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new ur},radius:{value:4}},vertexShader:Hl,fragmentShader:Vl}),m=f.clone();m.defines.HORIZONAL_PASS=1;var _=new ls;_.addAttribute("position",new Vo(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));for(var g=new Ms(_,f),v=0;v!==u;++v){var y=0!=(v&a),x=0!=(v&l),b=new Bl({depthPacking:tr,morphTargets:y,skinning:x});c[v]=b;var w=new Gl({morphTargets:y,skinning:x});d[v]=w}var j=this;function S(n,i){var r=t.update(g);f.uniforms.shadow_pass.value=n.map.texture,f.uniforms.resolution.value=n.mapSize,f.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(i,null,r,f,g,null),m.uniforms.shadow_pass.value=n.mapPass.texture,m.uniforms.resolution.value=n.mapSize,m.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(i,null,r,m,g,null)}function A(t,n,i,r,o,s){var u=t.geometry,f=null,m=c,_=t.customDepthMaterial;if(i.isPointLight&&(m=d,_=t.customDistanceMaterial),_)f=_;else{var g=!1;n.morphTargets&&(u&&u.isBufferGeometry?g=u.morphAttributes&&u.morphAttributes.position&&u.morphAttributes.position.length>0:u&&u.isGeometry&&(g=u.morphTargets&&u.morphTargets.length>0)),t.isSkinnedMesh&&n.skinning;var v=t.isSkinnedMesh&&n.skinning,y=0;g&&(y|=a),v&&(y|=l),f=m[y]}if(e.localClippingEnabled&&!0===n.clipShadows&&0!==n.clippingPlanes.length){var x=f.uuid,b=n.uuid,w=h[x];void 0===w&&(w={},h[x]=w);var j=w[b];void 0===j&&(j=f.clone(),w[b]=j),f=j}return f.visible=n.visible,f.wireframe=n.wireframe,f.side=s===Vt?null!=n.shadowSide?n.shadowSide:n.side:null!=n.shadowSide?n.shadowSide:p[n.side],f.clipShadows=n.clipShadows,f.clippingPlanes=n.clippingPlanes,f.clipIntersection=n.clipIntersection,f.wireframeLinewidth=n.wireframeLinewidth,f.linewidth=n.linewidth,i.isPointLight&&f.isMeshDistanceMaterial&&(f.referencePosition.setFromMatrixPosition(i.matrixWorld),f.nearDistance=r,f.farDistance=o),f}function M(n,r,o,s,a){if(!1!==n.visible){if(n.layers.test(r.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&a===Vt)&&(!n.frustumCulled||i.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);var l=t.update(n),u=n.material;if(Array.isArray(u))for(var c=l.groups,d=0,h=c.length;d<h;d++){var p=c[d],f=u[p.materialIndex];if(f&&f.visible){var m=A(n,f,s,o.near,o.far,a);e.renderBufferDirect(o,null,l,m,n,p)}}else if(u.visible){m=A(n,u,s,o.near,o.far,a);e.renderBufferDirect(o,null,l,m,n,null)}}for(var _=n.children,g=0,v=_.length;g<v;g++)M(_[g],r,o,s,a)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Bt,this.render=function(t,a,l){if(!1!==j.enabled&&(!1!==j.autoUpdate||!1!==j.needsUpdate)&&0!==t.length){var u=e.getRenderTarget(),c=e.getActiveCubeFace(),d=e.getActiveMipmapLevel(),h=e.state;h.setBlending(Jt),h.buffers.color.setClear(1,1,1,1),h.buffers.depth.setTest(!0),h.setScissorTest(!1);for(var p=0,f=t.length;p<f;p++){var m=t[p],_=m.shadow;if(void 0!==_){r.copy(_.mapSize);var g=_.getFrameExtents();if(r.multiply(g),o.copy(_.mapSize),(r.x>n||r.y>n)&&(r.x>n&&(o.x=Math.floor(n/g.x),r.x=o.x*g.x,_.mapSize.x=o.x),r.y>n&&(o.y=Math.floor(n/g.y),r.y=o.y*g.y,_.mapSize.y=o.y)),null===_.map&&!_.isPointLightShadow&&this.type===Vt){var v={minFilter:Qn,magFilter:Qn,format:hi};_.map=new br(r.x,r.y,v),_.map.texture.name=m.name+".shadowMap",_.mapPass=new br(r.x,r.y,v),_.camera.updateProjectionMatrix()}if(null===_.map){v={minFilter:Wn,magFilter:Wn,format:hi};_.map=new br(r.x,r.y,v),_.map.texture.name=m.name+".shadowMap",_.camera.updateProjectionMatrix()}e.setRenderTarget(_.map),e.clear();for(var y=_.getViewportCount(),x=0;x<y;x++){var b=_.getViewport(x);s.set(o.x*b.x,o.y*b.y,o.x*b.z,o.y*b.w),h.viewport(s),_.updateMatrices(m,l,x),i=_.getFrustum(),M(a,l,_.camera,m,this.type)}_.isPointLightShadow||this.type!==Vt||S(_,l)}}j.needsUpdate=!1,e.setRenderTarget(u,c,d)}}}function Wl(e,t,n,i){var r=new function(){var t=!1,n=new xr,i=null,r=new xr(0,0,0,0);return{setMask:function(n){i===n||t||(e.colorMask(n,n,n,n),i=n)},setLocked:function(e){t=e},setClear:function(t,i,o,s,a){!0===a&&(t*=s,i*=s,o*=s),n.set(t,i,o,s),!1===r.equals(n)&&(e.clearColor(t,i,o,s),r.copy(n))},reset:function(){t=!1,i=null,r.set(-1,0,0,0)}}},o=new function(){var t=!1,n=null,i=null,r=null;return{setTest:function(e){e?z(2929):U(2929)},setMask:function(i){n===i||t||(e.depthMask(i),n=i)},setFunc:function(t){if(i!==t){if(t)switch(t){case yn:e.depthFunc(512);break;case xn:e.depthFunc(519);break;case bn:e.depthFunc(513);break;case wn:e.depthFunc(515);break;case jn:e.depthFunc(514);break;case Sn:e.depthFunc(518);break;case An:e.depthFunc(516);break;case Mn:e.depthFunc(517);break;default:e.depthFunc(515)}else e.depthFunc(515);i=t}},setLocked:function(e){t=e},setClear:function(t){r!==t&&(e.clearDepth(t),r=t)},reset:function(){t=!1,n=null,i=null,r=null}}},s=new function(){var t=!1,n=null,i=null,r=null,o=null,s=null,a=null,l=null,u=null;return{setTest:function(e){t||(e?z(2960):U(2960))},setMask:function(i){n===i||t||(e.stencilMask(i),n=i)},setFunc:function(t,n,s){i===t&&r===n&&o===s||(e.stencilFunc(t,n,s),i=t,r=n,o=s)},setOp:function(t,n,i){s===t&&a===n&&l===i||(e.stencilOp(t,n,i),s=t,a=n,l=i)},setLocked:function(e){t=e},setClear:function(t){u!==t&&(e.clearStencil(t),u=t)},reset:function(){t=!1,n=null,i=null,r=null,o=null,s=null,a=null,l=null,u=null}}},a=e.getParameter(34921),l=new Uint8Array(a),u=new Uint8Array(a),c=new Uint8Array(a),d={},h=null,p=null,f=null,m=null,_=null,g=null,v=null,y=null,x=null,b=null,w=!1,j=null,S=null,A=null,M=null,T=null,P=e.getParameter(35661),L=!1,E=0,O=e.getParameter(7938);-1!==O.indexOf("WebGL")?(E=parseFloat(/^WebGL\ ([0-9])/.exec(O)[1]),L=E>=1):-1!==O.indexOf("OpenGL ES")&&(E=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(O)[1]),L=E>=2);var I=null,C={},F=new xr,N=new xr;function k(t,n,i){var r=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(var s=0;s<i;s++)e.texImage2D(n+s,0,6408,1,1,0,6408,5121,r);return o}var D={};function R(n,r){(l[n]=1,0===u[n]&&(e.enableVertexAttribArray(n),u[n]=1),c[n]!==r)&&((i.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,r),c[n]=r)}function z(t){!0!==d[t]&&(e.enable(t),d[t]=!0)}function U(t){!1!==d[t]&&(e.disable(t),d[t]=!1)}function B(t,i,r,o,s,a,l,u){if(t!==Jt){if(f||(z(3042),f=!0),t===tn)s=s||i,a=a||r,l=l||o,i===_&&s===y||(e.blendEquationSeparate(n.convert(i),n.convert(s)),_=i,y=s),r===g&&o===v&&a===x&&l===b||(e.blendFuncSeparate(n.convert(r),n.convert(o),n.convert(a),n.convert(l)),g=r,v=o,x=a,b=l),m=t,w=null;else if(t!==m||u!==w){if(_===nn&&y===nn||(e.blendEquation(32774),_=nn,y=nn),u)switch(t){case Zt:e.blendFuncSeparate(1,771,1,771);break;case Kt:e.blendFunc(1,1);break;case $t:e.blendFuncSeparate(0,0,769,771);break;case en:e.blendFuncSeparate(0,768,0,770)}else switch(t){case Zt:e.blendFuncSeparate(770,771,1,771);break;case Kt:e.blendFunc(770,1);break;case $t:e.blendFunc(0,769);break;case en:e.blendFunc(0,768)}g=null,v=null,x=null,b=null,m=t,w=u}}else f&&(U(3042),f=!1)}function G(t){j!==t&&(t?e.frontFace(2304):e.frontFace(2305),j=t)}function V(t){t!==Rt?(z(2884),t!==S&&(t===zt?e.cullFace(1029):t===Ut?e.cullFace(1028):e.cullFace(1032))):U(2884),S=t}function H(t,n,i){t?(z(32823),M===n&&T===i||(e.polygonOffset(n,i),M=n,T=i)):U(32823)}function X(t){void 0===t&&(t=33984+P-1),I!==t&&(e.activeTexture(t),I=t)}return D[3553]=k(3553,3553,1),D[34067]=k(34067,34069,6),r.setClear(0,0,0,1),o.setClear(1),s.setClear(0),z(2929),o.setFunc(wn),G(!1),V(zt),z(2884),B(Jt),{buffers:{color:r,depth:o,stencil:s},initAttributes:function(){for(var e=0,t=l.length;e<t;e++)l[e]=0},enableAttribute:function(e){R(e,0)},enableAttributeAndDivisor:R,disableUnusedAttributes:function(){for(var t=0,n=u.length;t!==n;++t)u[t]!==l[t]&&(e.disableVertexAttribArray(t),u[t]=0)},enable:z,disable:U,getCompressedTextureFormats:function(){if(null===h&&(h=[],t.get("WEBGL_compressed_texture_pvrtc")||t.get("WEBGL_compressed_texture_s3tc")||t.get("WEBGL_compressed_texture_etc1")||t.get("WEBGL_compressed_texture_astc")))for(var n=e.getParameter(34467),i=0;i<n.length;i++)h.push(n[i]);return h},useProgram:function(t){return p!==t&&(e.useProgram(t),p=t,!0)},setBlending:B,setMaterial:function(e,t){e.side===Wt?U(2884):z(2884);var n=e.side===Xt;t&&(n=!n),G(n),e.blending===Zt&&!1===e.transparent?B(Jt):B(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),o.setFunc(e.depthFunc),o.setTest(e.depthTest),o.setMask(e.depthWrite),r.setMask(e.colorWrite);var i=e.stencilWrite;s.setTest(i),i&&(s.setFunc(e.stencilFunc,e.stencilRef,e.stencilMask),s.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),H(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)},setFlipSided:G,setCullFace:V,setLineWidth:function(t){t!==A&&(L&&e.lineWidth(t),A=t)},setPolygonOffset:H,setScissorTest:function(e){e?z(3089):U(3089)},activeTexture:X,bindTexture:function(t,n){null===I&&X();var i=C[I];void 0===i&&(i={type:void 0,texture:void 0},C[I]=i),i.type===t&&i.texture===n||(e.bindTexture(t,n||D[t]),i.type=t,i.texture=n)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(e){}},scissor:function(t){!1===F.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),F.copy(t))},viewport:function(t){!1===N.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),N.copy(t))},reset:function(){for(var t=0;t<u.length;t++)1===u[t]&&(e.disableVertexAttribArray(t),u[t]=0);d={},h=null,I=null,C={},p=null,m=null,j=null,S=null,r.reset(),o.reset(),s.reset()}}}function Yl(e,t,n,i,r,o,s){var a,l=new WeakMap,u="undefined"!=typeof OffscreenCanvas;function c(e,t){return u?new OffscreenCanvas(e,t):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function d(e,t,n,i){var r=1;if((e.width>i||e.height>i)&&(r=i/Math.max(e.width,e.height)),r<1||!0===t){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){var o=t?lr.floorPowerOfTwo:Math.floor,s=o(r*e.width),l=o(r*e.height);void 0===a&&(a=c(s,l));var u=n?c(s,l):a;return u.width=s,u.height=l,u.getContext("2d").drawImage(e,0,0,s,l),u}return e}return e}function h(e){return lr.isPowerOfTwo(e.width)&&lr.isPowerOfTwo(e.height)}function p(e,t){return e.generateMipmaps&&t&&e.minFilter!==Wn&&e.minFilter!==Qn}function f(t,n,r,o){e.generateMipmap(t),i.get(n).__maxMipLevel=Math.log(Math.max(r,o))*Math.LOG2E}function m(e,n){if(!r.isWebGL2)return e;var i=e;return 6403===e&&(5126===n&&(i=33326),5131===n&&(i=33325),5121===n&&(i=33321)),6407===e&&(5126===n&&(i=34837),5131===n&&(i=34843),5121===n&&(i=32849)),6408===e&&(5126===n&&(i=34836),5131===n&&(i=34842),5121===n&&(i=32856)),33325!==i&&33326!==i&&34842!==i&&34836!==i||t.get("EXT_color_buffer_float"),i}function _(e){return e===Wn||e===Yn||e===qn?9728:9729}function g(t){var n=t.target;n.removeEventListener("dispose",g),function(t){var n=i.get(t);if(void 0===n.__webglInit)return;e.deleteTexture(n.__webglTexture),i.remove(t)}(n),n.isVideoTexture&&l.delete(n),s.memory.textures--}function v(t){var n=t.target;n.removeEventListener("dispose",v),function(t){var n=i.get(t),r=i.get(t.texture);if(!t)return;void 0!==r.__webglTexture&&e.deleteTexture(r.__webglTexture);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLRenderTargetCube)for(var o=0;o<6;o++)e.deleteFramebuffer(n.__webglFramebuffer[o]),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[o]);else e.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer);i.remove(t.texture),i.remove(t)}(n),s.memory.textures--}var y=0;function x(e,t){var r=i.get(e);if(e.isVideoTexture&&function(e){var t=s.render.frame;l.get(e)!==t&&(l.set(e,t),e.update())}(e),e.version>0&&r.__version!==e.version){var o=e.image;if(void 0===o);else if(!1!==o.complete)return void A(r,e,t)}n.activeTexture(33984+t),n.bindTexture(3553,r.__webglTexture)}function b(t,s){if(6===t.image.length){var a=i.get(t);if(t.version>0&&a.__version!==t.version){S(a,t),n.activeTexture(33984+s),n.bindTexture(34067,a.__webglTexture),e.pixelStorei(37440,t.flipY);for(var l=t&&t.isCompressedTexture,u=t.image[0]&&t.image[0].isDataTexture,c=[],_=0;_<6;_++)c[_]=l||u?u?t.image[_].image:t.image[_]:d(t.image[_],!1,!0,r.maxCubemapSize);var g,v=c[0],y=h(v)||r.isWebGL2,x=o.convert(t.format),b=o.convert(t.type),w=m(x,b);if(j(34067,t,y),l){for(_=0;_<6;_++){g=c[_].mipmaps;for(var A=0;A<g.length;A++){var M=g[A];t.format!==hi&&t.format!==di?n.getCompressedTextureFormats().indexOf(x)>-1&&n.compressedTexImage2D(34069+_,A,w,M.width,M.height,0,M.data):n.texImage2D(34069+_,A,w,M.width,M.height,0,x,b,M.data)}}a.__maxMipLevel=g.length-1}else{g=t.mipmaps;for(_=0;_<6;_++)if(u){n.texImage2D(34069+_,0,w,c[_].width,c[_].height,0,x,b,c[_].data);for(A=0;A<g.length;A++){var T=(M=g[A]).image[_].image;n.texImage2D(34069+_,A+1,w,T.width,T.height,0,x,b,T.data)}}else{n.texImage2D(34069+_,0,w,x,b,c[_]);for(A=0;A<g.length;A++){M=g[A];n.texImage2D(34069+_,A+1,w,x,b,M.image[_])}}a.__maxMipLevel=g.length}p(t,y)&&f(34067,t,v.width,v.height),a.__version=t.version,t.onUpdate&&t.onUpdate(t)}else n.activeTexture(33984+s),n.bindTexture(34067,a.__webglTexture)}}function w(e,t){n.activeTexture(33984+t),n.bindTexture(34067,i.get(e).__webglTexture)}function j(n,s,a){var l;if(a?(e.texParameteri(n,10242,o.convert(s.wrapS)),e.texParameteri(n,10243,o.convert(s.wrapT)),32879!==n&&35866!==n||e.texParameteri(n,32882,o.convert(s.wrapR)),e.texParameteri(n,10240,o.convert(s.magFilter)),e.texParameteri(n,10241,o.convert(s.minFilter))):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),32879!==n&&35866!==n||e.texParameteri(n,32882,33071),s.wrapS!==Hn||s.wrapT,e.texParameteri(n,10240,_(s.magFilter)),e.texParameteri(n,10241,_(s.minFilter)),s.minFilter!==Wn&&s.minFilter),l=t.get("EXT_texture_filter_anisotropic")){if(s.type===ri&&null===t.get("OES_texture_float_linear"))return;if(s.type===oi&&null===(r.isWebGL2||t.get("OES_texture_half_float_linear")))return;(s.anisotropy>1||i.get(s).__currentAnisotropy)&&(e.texParameterf(n,l.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(s.anisotropy,r.getMaxAnisotropy())),i.get(s).__currentAnisotropy=s.anisotropy)}}function S(t,n){void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",g),t.__webglTexture=e.createTexture(),s.memory.textures++)}function A(t,i,s){var a=3553;i.isDataTexture2DArray&&(a=35866),i.isDataTexture3D&&(a=32879),S(t,i),n.activeTexture(33984+s),n.bindTexture(a,t.__webglTexture),e.pixelStorei(37440,i.flipY),e.pixelStorei(37441,i.premultiplyAlpha),e.pixelStorei(3317,i.unpackAlignment);var l=function(e){return!r.isWebGL2&&(e.wrapS!==Hn||e.wrapT!==Hn||e.minFilter!==Wn&&e.minFilter!==Qn)}(i)&&!1===h(i.image),u=d(i.image,l,!1,r.maxTextureSize),c=h(u)||r.isWebGL2,_=o.convert(i.format),g=o.convert(i.type),v=m(_,g);j(a,i,c);var y,x=i.mipmaps;if(i.isDepthTexture){if(v=6402,i.type===ri){if(!r.isWebGL2)throw new Error("Float Depth Texture only supported in WebGL2.0");v=36012}else r.isWebGL2&&(v=33189);i.format===mi&&6402===v&&i.type!==ti&&i.type!==ii&&(i.type=ti,g=o.convert(i.type)),i.format===_i&&(v=34041,i.type!==ui&&(i.type=ui,g=o.convert(i.type))),n.texImage2D(3553,0,v,u.width,u.height,0,_,g,null)}else if(i.isDataTexture)if(x.length>0&&c){for(var b=0,w=x.length;b<w;b++)y=x[b],n.texImage2D(3553,b,v,y.width,y.height,0,_,g,y.data);i.generateMipmaps=!1,t.__maxMipLevel=x.length-1}else n.texImage2D(3553,0,v,u.width,u.height,0,_,g,u.data),t.__maxMipLevel=0;else if(i.isCompressedTexture){for(b=0,w=x.length;b<w;b++)y=x[b],i.format!==hi&&i.format!==di?n.getCompressedTextureFormats().indexOf(_)>-1&&n.compressedTexImage2D(3553,b,v,y.width,y.height,0,y.data):n.texImage2D(3553,b,v,y.width,y.height,0,_,g,y.data);t.__maxMipLevel=x.length-1}else if(i.isDataTexture2DArray)n.texImage3D(35866,0,v,u.width,u.height,u.depth,0,_,g,u.data),t.__maxMipLevel=0;else if(i.isDataTexture3D)n.texImage3D(32879,0,v,u.width,u.height,u.depth,0,_,g,u.data),t.__maxMipLevel=0;else if(x.length>0&&c){for(b=0,w=x.length;b<w;b++)y=x[b],n.texImage2D(3553,b,v,_,g,y);i.generateMipmaps=!1,t.__maxMipLevel=x.length-1}else n.texImage2D(3553,0,v,_,g,u),t.__maxMipLevel=0;p(i,c)&&f(3553,i,u.width,u.height),t.__version=i.version,i.onUpdate&&i.onUpdate(i)}function M(t,r,s,a){var l=o.convert(r.texture.format),u=o.convert(r.texture.type),c=m(l,u);n.texImage2D(a,0,c,r.width,r.height,0,l,u,null),e.bindFramebuffer(36160,t),e.framebufferTexture2D(36160,s,a,i.get(r.texture).__webglTexture,0),e.bindFramebuffer(36160,null)}function T(t,n,i){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer){if(i){var r=L(n);e.renderbufferStorageMultisample(36161,r,33189,n.width,n.height)}else e.renderbufferStorage(36161,33189,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(n.depthBuffer&&n.stencilBuffer){if(i){r=L(n);e.renderbufferStorageMultisample(36161,r,35056,n.width,n.height)}else e.renderbufferStorage(36161,34041,n.width,n.height);e.framebufferRenderbuffer(36160,33306,36161,t)}else{var s=m(o.convert(n.texture.format),o.convert(n.texture.type));if(i){r=L(n);e.renderbufferStorageMultisample(36161,r,s,n.width,n.height)}else e.renderbufferStorage(36161,s,n.width,n.height)}e.bindRenderbuffer(36161,null)}function P(t){var n=i.get(t),r=!0===t.isWebGLRenderTargetCube;if(t.depthTexture){if(r)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,n){if(n&&n.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(36160,t),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),x(n.depthTexture,0);var r=i.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===mi)e.framebufferTexture2D(36160,36096,3553,r,0);else{if(n.depthTexture.format!==_i)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(36160,33306,3553,r,0)}}(n.__webglFramebuffer,t)}else if(r){n.__webglDepthbuffer=[];for(var o=0;o<6;o++)e.bindFramebuffer(36160,n.__webglFramebuffer[o]),n.__webglDepthbuffer[o]=e.createRenderbuffer(),T(n.__webglDepthbuffer[o],t)}else e.bindFramebuffer(36160,n.__webglFramebuffer),n.__webglDepthbuffer=e.createRenderbuffer(),T(n.__webglDepthbuffer,t);e.bindFramebuffer(36160,null)}function L(e){return r.isWebGL2&&e.isWebGLMultisampleRenderTarget?Math.min(r.maxSamples,e.samples):0}var E=!1,O=!1;this.allocateTextureUnit=function(){var e=y;return r.maxTextures,y+=1,e},this.resetTextureUnits=function(){y=0},this.setTexture2D=x,this.setTexture2DArray=function(e,t){var r=i.get(e);e.version>0&&r.__version!==e.version?A(r,e,t):(n.activeTexture(33984+t),n.bindTexture(35866,r.__webglTexture))},this.setTexture3D=function(e,t){var r=i.get(e);e.version>0&&r.__version!==e.version?A(r,e,t):(n.activeTexture(33984+t),n.bindTexture(32879,r.__webglTexture))},this.setTextureCube=b,this.setTextureCubeDynamic=w,this.setupRenderTarget=function(t){var a=i.get(t),l=i.get(t.texture);t.addEventListener("dispose",v),l.__webglTexture=e.createTexture(),s.memory.textures++;var u=!0===t.isWebGLRenderTargetCube,c=!0===t.isWebGLMultisampleRenderTarget,d=h(t)||r.isWebGL2;if(u){a.__webglFramebuffer=[];for(var _=0;_<6;_++)a.__webglFramebuffer[_]=e.createFramebuffer()}else if(a.__webglFramebuffer=e.createFramebuffer(),c&&r.isWebGL2){a.__webglMultisampledFramebuffer=e.createFramebuffer(),a.__webglColorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,a.__webglColorRenderbuffer);var g=m(o.convert(t.texture.format),o.convert(t.texture.type)),y=L(t);e.renderbufferStorageMultisample(36161,y,g,t.width,t.height),e.bindFramebuffer(36160,a.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064,36161,a.__webglColorRenderbuffer),e.bindRenderbuffer(36161,null),t.depthBuffer&&(a.__webglDepthRenderbuffer=e.createRenderbuffer(),T(a.__webglDepthRenderbuffer,t,!0)),e.bindFramebuffer(36160,null)}if(u){n.bindTexture(34067,l.__webglTexture),j(34067,t.texture,d);for(_=0;_<6;_++)M(a.__webglFramebuffer[_],t,36064,34069+_);p(t.texture,d)&&f(34067,t.texture,t.width,t.height),n.bindTexture(34067,null)}else n.bindTexture(3553,l.__webglTexture),j(3553,t.texture,d),M(a.__webglFramebuffer,t,36064,3553),p(t.texture,d)&&f(3553,t.texture,t.width,t.height),n.bindTexture(3553,null);t.depthBuffer&&P(t)},this.updateRenderTargetMipmap=function(e){var t=e.texture;if(p(t,h(e)||r.isWebGL2)){var o=e.isWebGLRenderTargetCube?34067:3553,s=i.get(t).__webglTexture;n.bindTexture(o,s),f(o,t,e.width,e.height),n.bindTexture(o,null)}},this.updateMultisampleRenderTarget=function(t){if(t.isWebGLMultisampleRenderTarget&&r.isWebGL2){var n=i.get(t);e.bindFramebuffer(36008,n.__webglMultisampledFramebuffer),e.bindFramebuffer(36009,n.__webglFramebuffer);var o=t.width,s=t.height,a=16384;t.depthBuffer&&(a|=256),t.stencilBuffer&&(a|=1024),e.blitFramebuffer(0,0,o,s,0,0,o,s,a,9728)}},this.safeSetTexture2D=function(e,t){e&&e.isWebGLRenderTarget&&(!1===E&&(E=!0),e=e.texture),x(e,t)},this.safeSetTextureCube=function(e,t){e&&e.isWebGLRenderTargetCube&&(!1===O&&(O=!0),e=e.texture),e&&e.isCubeTexture||Array.isArray(e.image)&&6===e.image.length?b(e,t):w(e,t)}}function ql(e,t,n){return{convert:function(e){var i;if(e===Vn)return 10497;if(e===Hn)return 33071;if(e===Xn)return 33648;if(e===Wn)return 9728;if(e===Yn)return 9984;if(e===qn)return 9986;if(e===Qn)return 9729;if(e===Jn)return 9985;if(e===Zn)return 9987;if(e===Kn)return 5121;if(e===si)return 32819;if(e===ai)return 32820;if(e===li)return 33635;if(e===$n)return 5120;if(e===ei)return 5122;if(e===ti)return 5123;if(e===ni)return 5124;if(e===ii)return 5125;if(e===ri)return 5126;if(e===oi){if(n.isWebGL2)return 5131;if(null!==(i=t.get("OES_texture_half_float")))return i.HALF_FLOAT_OES}if(e===ci)return 6406;if(e===di)return 6407;if(e===hi)return 6408;if(e===pi)return 6409;if(e===fi)return 6410;if(e===mi)return 6402;if(e===_i)return 34041;if(e===gi)return 6403;if(e===nn)return 32774;if(e===rn)return 32778;if(e===on)return 32779;if(e===ln)return 0;if(e===un)return 1;if(e===cn)return 768;if(e===dn)return 769;if(e===hn)return 770;if(e===pn)return 771;if(e===fn)return 772;if(e===mn)return 773;if(e===_n)return 774;if(e===gn)return 775;if(e===vn)return 776;if((e===vi||e===yi||e===xi||e===bi)&&null!==(i=t.get("WEBGL_compressed_texture_s3tc"))){if(e===vi)return i.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===yi)return i.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===xi)return i.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===bi)return i.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((e===wi||e===ji||e===Si||e===Ai)&&null!==(i=t.get("WEBGL_compressed_texture_pvrtc"))){if(e===wi)return i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===ji)return i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===Si)return i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===Ai)return i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(e===Mi&&null!==(i=t.get("WEBGL_compressed_texture_etc1")))return i.COMPRESSED_RGB_ETC1_WEBGL;if((e===Ti||e===Pi||e===Li||e===Ei||e===Oi||e===Ii||e===Ci||e===Fi||e===Ni||e===ki||e===Di||e===Ri||e===zi||e===Ui)&&null!==(i=t.get("WEBGL_compressed_texture_astc")))return e;if(e===sn||e===an){if(n.isWebGL2){if(e===sn)return 32775;if(e===an)return 32776}if(null!==(i=t.get("EXT_blend_minmax"))){if(e===sn)return i.MIN_EXT;if(e===an)return i.MAX_EXT}}if(e===ui){if(n.isWebGL2)return 34042;if(null!==(i=t.get("WEBGL_depth_texture")))return i.UNSIGNED_INT_24_8_WEBGL}return 0}}}function Ql(){qr.call(this),this.type="Group"}function Jl(e){Vs.call(this),this.cameras=e||[]}Ql.prototype=Object.assign(Object.create(qr.prototype),{constructor:Ql,isGroup:!0}),Jl.prototype=Object.assign(Object.create(Vs.prototype),{constructor:Jl,isArrayCamera:!0});var Zl,Kl=new pr,$l=new pr;function eu(e,t,n){Kl.setFromMatrixPosition(t.matrixWorld),$l.setFromMatrixPosition(n.matrixWorld);var i=Kl.distanceTo($l),r=t.projectionMatrix.elements,o=n.projectionMatrix.elements,s=r[14]/(r[10]-1),a=r[14]/(r[10]+1),l=(r[9]+1)/r[5],u=(r[9]-1)/r[5],c=(r[8]-1)/r[0],d=(o[8]+1)/o[0],h=s*c,p=s*d,f=i/(-c+d),m=f*-c;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(f),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.getInverse(e.matrixWorld);var _=s+f,g=a+f,v=h-m,y=p+(i-m),x=l*a/g*_,b=u*a/g*_;e.projectionMatrix.makePerspective(v,y,x,b,_,g)}function tu(e){var t,n,i=this,r=null,o=null,s=null,a=[],l=new Er,u=new Er,c=1,d="local-floor";"undefined"!=typeof window&&"VRFrameData"in window&&(o=new window.VRFrameData,window.addEventListener("vrdisplaypresentchange",b,!1));var h=new Er,p=new cr,f=new pr,m=new Vs;m.viewport=new xr,m.layers.enable(1);var _=new Vs;_.viewport=new xr,_.layers.enable(2);var g=new Jl([m,_]);function v(){return null!==r&&!0===r.isPresenting}g.layers.enable(1),g.layers.enable(2);var y,x=new ur;function b(){if(v()){var o=r.getEyeParameters("left");t=2*o.renderWidth*c,n=o.renderHeight*c,y=e.getPixelRatio(),e.getSize(x),e.setDrawingBufferSize(t,n,1),m.viewport.set(0,0,t/2,n),_.viewport.set(t/2,0,t/2,n),A.start(),i.dispatchEvent({type:"sessionstart"})}else i.enabled&&e.setDrawingBufferSize(x.width,x.height,y),A.stop(),i.dispatchEvent({type:"sessionend"})}var w=[];function j(e){for(var t=navigator.getGamepads&&navigator.getGamepads(),n=0,i=0,r=t.length;n<r;n++){var o=t[n];if(o&&("Daydream Controller"===o.id||"Gear VR Controller"===o.id||"Oculus Go Controller"===o.id||"OpenVR Gamepad"===o.id||o.id.startsWith("Oculus Touch")||o.id.startsWith("HTC Vive Focus")||o.id.startsWith("Spatial Controller"))){if(i===e)return o;i++}}}function S(e,i){null!==i&&4===i.length&&e.set(i[0]*t,i[1]*n,i[2]*t,i[3]*n)}this.enabled=!1,this.getController=function(e){var t=a[e];return void 0===t&&((t=new Ql).matrixAutoUpdate=!1,t.visible=!1,a[e]=t),t},this.getDevice=function(){return r},this.setDevice=function(e){void 0!==e&&(r=e),A.setContext(e)},this.setFramebufferScaleFactor=function(e){c=e},this.setReferenceSpaceType=function(e){d=e},this.setPoseTarget=function(e){void 0!==e&&(s=e)},this.getCamera=function(e){var t="local-floor"===d?1.6:0;if(!1===v())return e.position.set(0,t,0),e.rotation.set(0,0,0),e;if(r.depthNear=e.near,r.depthFar=e.far,r.getFrameData(o),"local-floor"===d){var n=r.stageParameters;n?l.fromArray(n.sittingToStandingTransform):l.makeTranslation(0,t,0)}var i=o.pose,c=null!==s?s:e;c.matrix.copy(l),c.matrix.decompose(c.position,c.quaternion,c.scale),null!==i.orientation&&(p.fromArray(i.orientation),c.quaternion.multiply(p)),null!==i.position&&(p.setFromRotationMatrix(l),f.fromArray(i.position),f.applyQuaternion(p),c.position.add(f)),c.updateMatrixWorld(),m.near=e.near,_.near=e.near,m.far=e.far,_.far=e.far,m.matrixWorldInverse.fromArray(o.leftViewMatrix),_.matrixWorldInverse.fromArray(o.rightViewMatrix),u.getInverse(l),"local-floor"===d&&(m.matrixWorldInverse.multiply(u),_.matrixWorldInverse.multiply(u));var y=c.parent;null!==y&&(h.getInverse(y.matrixWorld),m.matrixWorldInverse.multiply(h),_.matrixWorldInverse.multiply(h)),m.matrixWorld.getInverse(m.matrixWorldInverse),_.matrixWorld.getInverse(_.matrixWorldInverse),m.projectionMatrix.fromArray(o.leftProjectionMatrix),_.projectionMatrix.fromArray(o.rightProjectionMatrix),eu(g,m,_);var x=r.getLayers();if(x.length){var b=x[0];S(m.viewport,b.leftBounds),S(_.viewport,b.rightBounds)}return function(){for(var e=0;e<a.length;e++){var t=a[e],n=j(e);if(void 0!==n&&void 0!==n.pose){if(null===n.pose)return;var i=n.pose;!1===i.hasPosition&&t.position.set(.2,-.6,-.05),null!==i.position&&t.position.fromArray(i.position),null!==i.orientation&&t.quaternion.fromArray(i.orientation),t.matrix.compose(t.position,t.quaternion,t.scale),t.matrix.premultiply(l),t.matrix.decompose(t.position,t.quaternion,t.scale),t.matrixWorldNeedsUpdate=!0,t.visible=!0;var r="Daydream Controller"===n.id?0:1;void 0===w[e]&&(w[e]=!1),w[e]!==n.buttons[r].pressed&&(w[e]=n.buttons[r].pressed,!0===w[e]?t.dispatchEvent({type:"selectstart"}):(t.dispatchEvent({type:"selectend"}),t.dispatchEvent({type:"select"})))}else t.visible=!1}}(),g},this.getStandingMatrix=function(){return l},this.isPresenting=v;var A=new oa;this.setAnimationLoop=function(e){A.setAnimationLoop(e),v()&&A.start()},this.submitFrame=function(){v()&&r.submitFrame()},this.dispose=function(){"undefined"!=typeof window&&window.removeEventListener("vrdisplaypresentchange",b)},this.setFrameOfReferenceType=function(){}}function nu(e,t){var n=this,i=null,r=null,o="local-floor",s=null,a=[],l=[];function u(){return null!==i&&null!==r}var c=new Vs;c.layers.enable(1),c.viewport=new xr;var d=new Vs;d.layers.enable(2),d.viewport=new xr;var h=new Jl([c,d]);function p(e){for(var t=0;t<a.length;t++)l[t]===e.inputSource&&a[t].dispatchEvent({type:e.type})}function f(){e.setFramebuffer(null),e.setRenderTarget(e.getRenderTarget()),v.stop(),n.dispatchEvent({type:"sessionend"})}function m(e){r=e,v.setContext(i),v.start(),n.dispatchEvent({type:"sessionstart"})}function _(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.getInverse(e.matrixWorld)}h.layers.enable(1),h.layers.enable(2),this.enabled=!1,this.getController=function(e){var t=a[e];return void 0===t&&((t=new Ql).matrixAutoUpdate=!1,t.visible=!1,a[e]=t),t},this.setFramebufferScaleFactor=function(e){},this.setReferenceSpaceType=function(e){o=e},this.getSession=function(){return i},this.setSession=function(e){null!==(i=e)&&(i.addEventListener("select",p),i.addEventListener("selectstart",p),i.addEventListener("selectend",p),i.addEventListener("end",f),i.updateRenderState({baseLayer:new XRWebGLLayer(i,t)}),i.requestReferenceSpace(o).then(m),l=i.inputSources,i.addEventListener("inputsourceschange",function(){l=i.inputSources;for(var e=0;e<a.length;e++){a[e].userData.inputSource=l[e]}}))},this.getCamera=function(e){if(u()){var t=e.parent,n=h.cameras;_(h,t);for(var i=0;i<n.length;i++)_(n[i],t);e.matrixWorld.copy(h.matrixWorld);for(var r=e.children,o=(i=0,r.length);i<o;i++)r[i].updateMatrixWorld(!0);return eu(h,c,d),h}return e},this.isPresenting=u;var g=null;var v=new oa;v.setAnimationLoop(function(t,n){if(null!==(s=n.getViewerPose(r))){var o=s.views,u=i.renderState.baseLayer;e.setFramebuffer(u.framebuffer);for(var c=0;c<o.length;c++){var d=o[c],p=u.getViewport(d),f=d.transform.inverse.matrix,m=h.cameras[c];m.matrix.fromArray(f).getInverse(m.matrix),m.projectionMatrix.fromArray(d.projectionMatrix),m.viewport.set(p.x,p.y,p.width,p.height),0===c&&h.matrix.copy(m.matrix)}}for(c=0;c<a.length;c++){var _=a[c],v=l[c];if(v){var y=n.getPose(v.targetRaySpace,r);if(null!==y){_.matrix.fromArray(y.transform.matrix),_.matrix.decompose(_.position,_.rotation,_.scale),_.visible=!0;continue}}_.visible=!1}g&&g(t)}),this.setAnimationLoop=function(e){g=e},this.dispose=function(){},this.getStandingMatrix=function(){return new Er},this.getDevice=function(){},this.setDevice=function(){},this.setFrameOfReferenceType=function(){},this.submitFrame=function(){}}function iu(e){var t=void 0!==(e=e||{}).canvas?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),n=void 0!==e.context?e.context:null,i=void 0!==e.alpha&&e.alpha,r=void 0===e.depth||e.depth,o=void 0===e.stencil||e.stencil,s=void 0!==e.antialias&&e.antialias,a=void 0===e.premultipliedAlpha||e.premultipliedAlpha,l=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,u=void 0!==e.powerPreference?e.powerPreference:"default",c=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat,d=null,h=null;this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=On,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var p,f,m,_,g,v,y,x,b,w,j,S,A,M,T,P,L,E,O=this,I=!1,C=null,F=0,N=0,k=null,D=null,R=-1,z={geometry:null,program:null,wireframe:!1},U=null,B=null,G=new xr,V=new xr,H=null,X=t.width,W=t.height,Y=1,q=new xr(0,0,X,W),Q=new xr(0,0,X,W),J=!1,Z=new ta,K=new ha,$=!1,ee=!1,te=new Er,ne=new pr;function ie(){return null===k?Y:1}try{var re={alpha:i,depth:r,stencil:o,antialias:s,premultipliedAlpha:a,preserveDrawingBuffer:l,powerPreference:u,failIfMajorPerformanceCaveat:c,xrCompatible:!0};if(t.addEventListener("webglcontextlost",le,!1),t.addEventListener("webglcontextrestored",ue,!1),null===(p=n||t.getContext("webgl",re)||t.getContext("experimental-webgl",re)))throw null!==t.getContext("webgl")?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");void 0===p.getShaderPrecisionFormat&&(p.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){throw e}function oe(){f=new pa(p),(m=new da(p,f,e)).isWebGL2||(f.get("WEBGL_depth_texture"),f.get("OES_texture_float"),f.get("OES_texture_half_float"),f.get("OES_texture_half_float_linear"),f.get("OES_standard_derivatives"),f.get("OES_element_index_uint"),f.get("ANGLE_instanced_arrays")),f.get("OES_texture_float_linear"),E=new ql(p,f,m),(_=new Wl(p,f,E,m)).scissor(V.copy(Q).multiplyScalar(Y).floor()),_.viewport(G.copy(q).multiplyScalar(Y).floor()),g=new _a(p),v=new El,y=new Yl(p,f,_,v,m,E,g),x=new sa(p),b=new fa(p,x,g),w=new ya(b,g),T=new va(p),j=new Ll(O,f,m),S=new Fl,A=new Ul,M=new ua(O,_,w,a),P=new ca(p,f,g,m),L=new ma(p,f,g,m),g.programs=j.programs,O.capabilities=m,O.extensions=f,O.properties=v,O.renderLists=S,O.state=_,O.info=g}oe();var se="undefined"!=typeof navigator&&"xr"in navigator&&"supportsSession"in navigator.xr?new nu(O,p):new tu(O);this.vr=se;var ae=new Xl(O,w,m.maxTextureSize);function le(e){e.preventDefault(),I=!0}function ue(){I=!1,oe()}function ce(e){var t=e.target;t.removeEventListener("dispose",ce),function(e){de(e),v.remove(e)}(t)}function de(e){var t=v.get(e).program;e.program=void 0,void 0!==t&&j.releaseProgram(t)}this.shadowMap=ae,this.getContext=function(){return p},this.getContextAttributes=function(){return p.getContextAttributes()},this.forceContextLoss=function(){var e=f.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=f.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return Y},this.setPixelRatio=function(e){void 0!==e&&(Y=e,this.setSize(X,W,!1))},this.getSize=function(e){return void 0===e&&(e=new ur),e.set(X,W)},this.setSize=function(e,n,i){se.isPresenting()||(X=e,W=n,t.width=Math.floor(e*Y),t.height=Math.floor(n*Y),!1!==i&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return void 0===e&&(e=new ur),e.set(X*Y,W*Y).floor()},this.setDrawingBufferSize=function(e,n,i){X=e,W=n,Y=i,t.width=Math.floor(e*i),t.height=Math.floor(n*i),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return void 0===e&&(e=new xr),e.copy(G)},this.getViewport=function(e){return e.copy(q)},this.setViewport=function(e,t,n,i){e.isVector4?q.set(e.x,e.y,e.z,e.w):q.set(e,t,n,i),_.viewport(G.copy(q).multiplyScalar(Y).floor())},this.getScissor=function(e){return e.copy(Q)},this.setScissor=function(e,t,n,i){e.isVector4?Q.set(e.x,e.y,e.z,e.w):Q.set(e,t,n,i),_.scissor(V.copy(Q).multiplyScalar(Y).floor())},this.getScissorTest=function(){return J},this.setScissorTest=function(e){_.setScissorTest(J=e)},this.getClearColor=function(){return M.getClearColor()},this.setClearColor=function(){M.setClearColor.apply(M,arguments)},this.getClearAlpha=function(){return M.getClearAlpha()},this.setClearAlpha=function(){M.setClearAlpha.apply(M,arguments)},this.clear=function(e,t,n){var i=0;(void 0===e||e)&&(i|=16384),(void 0===t||t)&&(i|=256),(void 0===n||n)&&(i|=1024),p.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",le,!1),t.removeEventListener("webglcontextrestored",ue,!1),S.dispose(),A.dispose(),v.dispose(),w.dispose(),se.dispose(),pe.stop()},this.renderBufferImmediate=function(e,t){_.initAttributes();var n=v.get(e);e.hasPositions&&!n.position&&(n.position=p.createBuffer()),e.hasNormals&&!n.normal&&(n.normal=p.createBuffer()),e.hasUvs&&!n.uv&&(n.uv=p.createBuffer()),e.hasColors&&!n.color&&(n.color=p.createBuffer());var i=t.getAttributes();e.hasPositions&&(p.bindBuffer(34962,n.position),p.bufferData(34962,e.positionArray,35048),_.enableAttribute(i.position),p.vertexAttribPointer(i.position,3,5126,!1,0,0)),e.hasNormals&&(p.bindBuffer(34962,n.normal),p.bufferData(34962,e.normalArray,35048),_.enableAttribute(i.normal),p.vertexAttribPointer(i.normal,3,5126,!1,0,0)),e.hasUvs&&(p.bindBuffer(34962,n.uv),p.bufferData(34962,e.uvArray,35048),_.enableAttribute(i.uv),p.vertexAttribPointer(i.uv,2,5126,!1,0,0)),e.hasColors&&(p.bindBuffer(34962,n.color),p.bufferData(34962,e.colorArray,35048),_.enableAttribute(i.color),p.vertexAttribPointer(i.color,3,5126,!1,0,0)),_.disableUnusedAttributes(),p.drawArrays(4,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,n,i,r,o){var s=r.isMesh&&r.matrixWorld.determinant()<0;_.setMaterial(i,s);var a=ve(e,t,i,r),l=!1;z.geometry===n.id&&z.program===a.id&&z.wireframe===(!0===i.wireframe)||(z.geometry=n.id,z.program=a.id,z.wireframe=!0===i.wireframe,l=!0),r.morphTargetInfluences&&(T.update(r,n,i,a),l=!0);var u,c=n.index,d=n.attributes.position,h=1;!0===i.wireframe&&(c=b.getWireframeAttribute(n),h=2);var g=P;null!==c&&(u=x.get(c),(g=L).setIndex(u)),l&&(!function(e,t,n){if(n&&n.isInstancedBufferGeometry&&!m.isWebGL2&&null===f.get("ANGLE_instanced_arrays"))return;_.initAttributes();var i=n.attributes,r=t.getAttributes(),o=e.defaultAttributeValues;for(var s in r){var a=r[s];if(a>=0){var l=i[s];if(void 0!==l){var u=l.normalized,c=l.itemSize,d=x.get(l);if(void 0===d)continue;var h=d.buffer,g=d.type,v=d.bytesPerElement;if(l.isInterleavedBufferAttribute){var y=l.data,b=y.stride,w=l.offset;y&&y.isInstancedInterleavedBuffer?(_.enableAttributeAndDivisor(a,y.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=y.meshPerAttribute*y.count)):_.enableAttribute(a),p.bindBuffer(34962,h),p.vertexAttribPointer(a,c,g,u,b*v,w*v)}else l.isInstancedBufferAttribute?(_.enableAttributeAndDivisor(a,l.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=l.meshPerAttribute*l.count)):_.enableAttribute(a),p.bindBuffer(34962,h),p.vertexAttribPointer(a,c,g,u,0,0)}else if(void 0!==o){var j=o[s];if(void 0!==j)switch(j.length){case 2:p.vertexAttrib2fv(a,j);break;case 3:p.vertexAttrib3fv(a,j);break;case 4:p.vertexAttrib4fv(a,j);break;default:p.vertexAttrib1fv(a,j)}}}}_.disableUnusedAttributes()}(i,a,n),null!==c&&p.bindBuffer(34963,u.buffer));var v=1/0;null!==c?v=c.count:void 0!==d&&(v=d.count);var y=n.drawRange.start*h,w=n.drawRange.count*h,j=null!==o?o.start*h:0,S=null!==o?o.count*h:1/0,A=Math.max(y,j),M=Math.min(v,y+w,j+S)-1,E=Math.max(0,M-A+1);if(0!==E){if(r.isMesh)if(!0===i.wireframe)_.setLineWidth(i.wireframeLinewidth*ie()),g.setMode(1);else switch(r.drawMode){case Vi:g.setMode(4);break;case Hi:g.setMode(5);break;case Xi:g.setMode(6)}else if(r.isLine){var O=i.linewidth;void 0===O&&(O=1),_.setLineWidth(O*ie()),r.isLineSegments?g.setMode(1):r.isLineLoop?g.setMode(2):g.setMode(3)}else r.isPoints?g.setMode(0):r.isSprite&&g.setMode(4);n&&n.isInstancedBufferGeometry?n.maxInstancedCount>0&&g.renderInstances(n,A,E):g.render(A,E)}},this.compile=function(e,t){(h=A.get(e,t)).init(),e.traverse(function(e){e.isLight&&(h.pushLight(e),e.castShadow&&h.pushShadow(e))}),h.setupLights(t),e.traverse(function(t){if(t.material)if(Array.isArray(t.material))for(var n=0;n<t.material.length;n++)ge(t.material[n],e.fog,t);else ge(t.material,e.fog,t)})};var he=null;var pe=new oa;function fe(e,t,n,i){if(!1!==e.visible){if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)h.pushLight(e),e.castShadow&&h.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||Z.intersectsSprite(e)){i&&ne.setFromMatrixPosition(e.matrixWorld).applyMatrix4(te);var r=w.update(e);(o=e.material).visible&&d.push(e,r,o,n,ne.z,null)}}else if(e.isImmediateRenderObject)i&&ne.setFromMatrixPosition(e.matrixWorld).applyMatrix4(te),d.push(e,null,e.material,n,ne.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.update(),!e.frustumCulled||Z.intersectsObject(e))){i&&ne.setFromMatrixPosition(e.matrixWorld).applyMatrix4(te);r=w.update(e);var o=e.material;if(Array.isArray(o))for(var s=r.groups,a=0,l=s.length;a<l;a++){var u=s[a],c=o[u.materialIndex];c&&c.visible&&d.push(e,r,c,n,ne.z,u)}else o.visible&&d.push(e,r,o,n,ne.z,null)}var p=e.children;for(a=0,l=p.length;a<l;a++)fe(p[a],t,n,i)}}function me(e,t,n,i){for(var r=0,o=e.length;r<o;r++){var s=e[r],a=s.object,l=s.geometry,u=void 0===i?s.material:i,c=s.group;if(n.isArrayCamera){B=n;for(var d=n.cameras,p=0,f=d.length;p<f;p++){var m=d[p];a.layers.test(m.layers)&&(_.viewport(G.copy(m.viewport)),h.setupLights(m),_e(a,t,m,l,u,c))}}else B=null,_e(a,t,n,l,u,c)}}function _e(e,t,n,i,r,o){if(e.onBeforeRender(O,t,n,i,r,o),h=A.get(t,B||n),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){_.setMaterial(r);var s=ve(n,t.fog,r,e);z.geometry=null,z.program=null,z.wireframe=!1,function(e,t){e.render(function(e){O.renderBufferImmediate(e,t)})}(e,s)}else O.renderBufferDirect(n,t.fog,i,r,e,o);e.onAfterRender(O,t,n,i,r,o),h=A.get(t,B||n)}function ge(e,t,n){var i=v.get(e),r=h.state.lights,o=h.state.shadowsArray,s=r.state.version,a=j.getParameters(e,r.state,o,t,K.numPlanes,K.numIntersection,n),l=j.getProgramCode(e,a),u=i.program,c=!0;if(void 0===u)e.addEventListener("dispose",ce);else if(u.code!==l)de(e);else if(i.lightsStateVersion!==s)i.lightsStateVersion=s,c=!1;else{if(void 0!==a.shaderID)return;c=!1}if(c){if(a.shaderID){var d=ra[a.shaderID];i.shader={name:e.type,uniforms:ks(d.uniforms),vertexShader:d.vertexShader,fragmentShader:d.fragmentShader}}else i.shader={name:e.type,uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader};e.onBeforeCompile(i.shader,O),l=j.getProgramCode(e,a),u=j.acquireProgram(e,i.shader,a,l),i.program=u,e.program=u}var p=u.getAttributes();if(e.morphTargets){e.numSupportedMorphTargets=0;for(var f=0;f<O.maxMorphTargets;f++)p["morphTarget"+f]>=0&&e.numSupportedMorphTargets++}if(e.morphNormals){e.numSupportedMorphNormals=0;for(f=0;f<O.maxMorphNormals;f++)p["morphNormal"+f]>=0&&e.numSupportedMorphNormals++}var m=i.shader.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(i.numClippingPlanes=K.numPlanes,i.numIntersection=K.numIntersection,m.clippingPlanes=K.uniform),i.fog=t,i.lightsStateVersion=s,e.lights&&(m.ambientLightColor.value=r.state.ambient,m.lightProbe.value=r.state.probe,m.directionalLights.value=r.state.directional,m.spotLights.value=r.state.spot,m.rectAreaLights.value=r.state.rectArea,m.pointLights.value=r.state.point,m.hemisphereLights.value=r.state.hemi,m.directionalShadowMap.value=r.state.directionalShadowMap,m.directionalShadowMatrix.value=r.state.directionalShadowMatrix,m.spotShadowMap.value=r.state.spotShadowMap,m.spotShadowMatrix.value=r.state.spotShadowMatrix,m.pointShadowMap.value=r.state.pointShadowMap,m.pointShadowMatrix.value=r.state.pointShadowMatrix);var _=i.program.getUniforms(),g=_l.seqWithValue(_.seq,m);i.uniformsList=g}function ve(e,t,n,i){y.resetTextureUnits();var r=v.get(n),o=h.state.lights;if($&&(ee||e!==U)){var s=e===U&&n.id===R;K.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,e,r,s)}!1===n.needsUpdate&&(void 0===r.program?n.needsUpdate=!0:n.fog&&r.fog!==t?n.needsUpdate=!0:n.lights&&r.lightsStateVersion!==o.state.version?n.needsUpdate=!0:void 0===r.numClippingPlanes||r.numClippingPlanes===K.numPlanes&&r.numIntersection===K.numIntersection||(n.needsUpdate=!0)),n.needsUpdate&&(ge(n,t,i),n.needsUpdate=!1);var a,l,u=!1,c=!1,d=!1,f=r.program,g=f.getUniforms(),x=r.shader.uniforms;if(_.useProgram(f.program)&&(u=!0,c=!0,d=!0),n.id!==R&&(R=n.id,c=!0),u||U!==e){if(g.setValue(p,"projectionMatrix",e.projectionMatrix),m.logarithmicDepthBuffer&&g.setValue(p,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),U!==e&&(U=e,c=!0,d=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.envMap){var b=g.map.cameraPosition;void 0!==b&&b.setValue(p,ne.setFromMatrixPosition(e.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.skinning)&&g.setValue(p,"viewMatrix",e.matrixWorldInverse)}if(n.skinning){g.setOptional(p,i,"bindMatrix"),g.setOptional(p,i,"bindMatrixInverse");var w=i.skeleton;if(w){var j=w.bones;if(m.floatVertexTextures){if(void 0===w.boneTexture){var S=Math.sqrt(4*j.length);S=lr.ceilPowerOfTwo(S),S=Math.max(S,4);var A=new Float32Array(S*S*4);A.set(w.boneMatrices);var M=new qs(A,S,S,hi,ri);M.needsUpdate=!0,w.boneMatrices=A,w.boneTexture=M,w.boneTextureSize=S}g.setValue(p,"boneTexture",w.boneTexture,y),g.setValue(p,"boneTextureSize",w.boneTextureSize)}else g.setOptional(p,w,"boneMatrices")}}return c&&(g.setValue(p,"toneMappingExposure",O.toneMappingExposure),g.setValue(p,"toneMappingWhitePoint",O.toneMappingWhitePoint),n.lights&&(l=d,(a=x).ambientLightColor.needsUpdate=l,a.lightProbe.needsUpdate=l,a.directionalLights.needsUpdate=l,a.pointLights.needsUpdate=l,a.spotLights.needsUpdate=l,a.rectAreaLights.needsUpdate=l,a.hemisphereLights.needsUpdate=l),t&&n.fog&&function(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)}(x,t),n.isMeshBasicMaterial?ye(x,n):n.isMeshLambertMaterial?(ye(x,n),function(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}(x,n)):n.isMeshPhongMaterial?(ye(x,n),n.isMeshToonMaterial?function(e,t){xe(e,t),t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(x,n):xe(x,n)):n.isMeshStandardMaterial?(ye(x,n),n.isMeshPhysicalMaterial?function(e,t){be(e,t),e.reflectivity.value=t.reflectivity,e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.sheen&&e.sheen.value.copy(t.sheen);t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,t.side===Xt&&e.clearcoatNormalScale.value.negate());e.transparency.value=t.transparency}(x,n):be(x,n)):n.isMeshMatcapMaterial?(ye(x,n),function(e,t){t.matcap&&(e.matcap.value=t.matcap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===Xt&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===Xt&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(x,n)):n.isMeshDepthMaterial?(ye(x,n),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(x,n)):n.isMeshDistanceMaterial?(ye(x,n),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias);e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(x,n)):n.isMeshNormalMaterial?(ye(x,n),function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===Xt&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===Xt&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(x,n)):n.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(x,n),n.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(x,n)):n.isPointsMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*Y,e.scale.value=.5*W,e.map.value=t.map,null!==t.map&&(!0===t.map.matrixAutoUpdate&&t.map.updateMatrix(),e.uvTransform.value.copy(t.map.matrix))}(x,n):n.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,e.map.value=t.map,null!==t.map&&(!0===t.map.matrixAutoUpdate&&t.map.updateMatrix(),e.uvTransform.value.copy(t.map.matrix))}(x,n):n.isShadowMaterial&&(x.color.value.copy(n.color),x.opacity.value=n.opacity),void 0!==x.ltc_1&&(x.ltc_1.value=ia.LTC_1),void 0!==x.ltc_2&&(x.ltc_2.value=ia.LTC_2),_l.upload(p,r.uniformsList,x,y)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(_l.upload(p,r.uniformsList,x,y),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&g.setValue(p,"center",i.center),g.setValue(p,"modelViewMatrix",i.modelViewMatrix),g.setValue(p,"normalMatrix",i.normalMatrix),g.setValue(p,"modelMatrix",i.matrixWorld),f}function ye(e,t){var n;e.opacity.value=t.opacity,t.color&&e.diffuse.value.copy(t.color),t.emissive&&e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity),t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.specularMap&&(e.specularMap.value=t.specularMap),t.envMap&&(e.envMap.value=t.envMap,e.flipEnvMap.value=t.envMap.isCubeTexture?-1:1,e.reflectivity.value=t.reflectivity,e.refractionRatio.value=t.refractionRatio,e.maxMipLevel.value=v.get(t.envMap).__maxMipLevel),t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.aoMap&&(e.aoMap.value=t.aoMap,e.aoMapIntensity.value=t.aoMapIntensity),t.map?n=t.map:t.specularMap?n=t.specularMap:t.displacementMap?n=t.displacementMap:t.normalMap?n=t.normalMap:t.bumpMap?n=t.bumpMap:t.roughnessMap?n=t.roughnessMap:t.metalnessMap?n=t.metalnessMap:t.alphaMap?n=t.alphaMap:t.emissiveMap&&(n=t.emissiveMap),void 0!==n&&(n.isWebGLRenderTarget&&(n=n.texture),!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}function xe(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===Xt&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===Xt&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function be(e,t){e.roughness.value=t.roughness,e.metalness.value=t.metalness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===Xt&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===Xt&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}pe.setAnimationLoop(function(e){se.isPresenting()||he&&he(e)}),"undefined"!=typeof window&&pe.setContext(window),this.setAnimationLoop=function(e){he=e,se.setAnimationLoop(e),pe.start()},this.render=function(e,t){var n,i;if(void 0!==arguments[2]&&(n=arguments[2]),void 0!==arguments[3]&&(i=arguments[3]),t&&t.isCamera&&!I){z.geometry=null,z.program=null,z.wireframe=!1,R=-1,U=null,!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),se.enabled&&(t=se.getCamera(t)),(h=A.get(e,t)).init(),e.onBeforeRender(O,e,t,n||k),te.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),Z.setFromMatrix(te),ee=this.localClippingEnabled,$=K.init(this.clippingPlanes,ee,t),(d=S.get(e,t)).init(),fe(e,t,0,O.sortObjects),!0===O.sortObjects&&d.sort(),$&&K.beginShadows();var r=h.state.shadowsArray;ae.render(r,e,t),h.setupLights(t),$&&K.endShadows(),this.info.autoReset&&this.info.reset(),void 0!==n&&this.setRenderTarget(n),M.render(d,e,t,i);var o=d.opaque,s=d.transparent;if(e.overrideMaterial){var a=e.overrideMaterial;o.length&&me(o,e,t,a),s.length&&me(s,e,t,a)}else o.length&&me(o,e,t),s.length&&me(s,e,t);e.onAfterRender(O,e,t),null!==k&&(y.updateRenderTargetMipmap(k),y.updateMultisampleRenderTarget(k)),_.buffers.depth.setTest(!0),_.buffers.depth.setMask(!0),_.buffers.color.setMask(!0),_.setPolygonOffset(!1),se.enabled&&se.submitFrame(),d=null,h=null}},this.setFramebuffer=function(e){C!==e&&p.bindFramebuffer(36160,e),C=e},this.getActiveCubeFace=function(){return F},this.getActiveMipmapLevel=function(){return N},this.getRenderTarget=function(){return k},this.setRenderTarget=function(e,t,n){k=e,F=t,N=n,e&&void 0===v.get(e).__webglFramebuffer&&y.setupRenderTarget(e);var i=C,r=!1;if(e){var o=v.get(e).__webglFramebuffer;e.isWebGLRenderTargetCube?(i=o[t||0],r=!0):i=e.isWebGLMultisampleRenderTarget?v.get(e).__webglMultisampledFramebuffer:o,G.copy(e.viewport),V.copy(e.scissor),H=e.scissorTest}else G.copy(q).multiplyScalar(Y).floor(),V.copy(Q).multiplyScalar(Y).floor(),H=J;if(D!==i&&(p.bindFramebuffer(36160,i),D=i),_.viewport(G),_.scissor(V),_.setScissorTest(H),r){var s=v.get(e.texture);p.framebufferTexture2D(36160,36064,34069+(t||0),s.__webglTexture,n||0)}},this.readRenderTargetPixels=function(e,t,n,i,r,o,s){if(e&&e.isWebGLRenderTarget){var a=v.get(e).__webglFramebuffer;if(e.isWebGLRenderTargetCube&&void 0!==s&&(a=a[s]),a){var l=!1;a!==D&&(p.bindFramebuffer(36160,a),l=!0);try{var u=e.texture,c=u.format,d=u.type;if(c!==hi&&E.convert(c)!==p.getParameter(35739))return;if(!(d===Kn||E.convert(d)===p.getParameter(35738)||d===ri&&(m.isWebGL2||f.get("OES_texture_float")||f.get("WEBGL_color_buffer_float"))||d===oi&&(m.isWebGL2?f.get("EXT_color_buffer_float"):f.get("EXT_color_buffer_half_float"))))return;36053===p.checkFramebufferStatus(36160)&&t>=0&&t<=e.width-i&&n>=0&&n<=e.height-r&&p.readPixels(t,n,i,r,E.convert(c),E.convert(d),o)}finally{l&&p.bindFramebuffer(36160,D)}}}},this.copyFramebufferToTexture=function(e,t,n){var i=t.image.width,r=t.image.height,o=E.convert(t.format);y.setTexture2D(t,0),p.copyTexImage2D(3553,n||0,o,e.x,e.y,i,r,0)},this.copyTextureToTexture=function(e,t,n,i){var r=t.image.width,o=t.image.height,s=E.convert(n.format),a=E.convert(n.type);y.setTexture2D(n,0),t.isDataTexture?p.texSubImage2D(3553,i||0,e.x,e.y,r,o,s,a,t.image.data):p.texSubImage2D(3553,i||0,e.x,e.y,s,a,t.image)},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function ru(e,t){this.name="",this.color=new No(e),this.density=void 0!==t?t:25e-5}function ou(e,t,n){this.name="",this.color=new No(e),this.near=void 0!==t?t:1,this.far=void 0!==n?n:1e3}function su(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function au(e,t,n,i){this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===i}function lu(e){Bo.call(this),this.type="SpriteMaterial",this.color=new No(16777215),this.map=null,this.rotation=0,this.sizeAttenuation=!0,this.lights=!1,this.transparent=!0,this.setValues(e)}Object.assign(tu.prototype,Dt.prototype),Object.assign(nu.prototype,Dt.prototype),Object.assign(ru.prototype,{isFogExp2:!0,clone:function(){return new ru(this.color,this.density)},toJSON:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}),Object.assign(ou.prototype,{isFog:!0,clone:function(){return new ou(this.color,this.near,this.far)},toJSON:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}),Object.defineProperty(su.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(su.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==e?e.length/this.stride:0,this.array=e,this},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.stride,n*=t.stride;for(var i=0,r=this.stride;i<r;i++)this.array[e+i]=t.array[n+i];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(e){return this.onUploadCallback=e,this}}),Object.defineProperties(au.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(au.prototype,{isInterleavedBufferAttribute:!0,setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this},setXYZ:function(e,t,n,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this},setXYZW:function(e,t,n,i,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=r,this}}),lu.prototype=Object.create(Bo.prototype),lu.prototype.constructor=lu,lu.prototype.isSpriteMaterial=!0,lu.prototype.copy=function(e){return Bo.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this};var uu=new pr,cu=new pr,du=new pr,hu=new ur,pu=new ur,fu=new Er,mu=new pr,_u=new pr,gu=new pr,vu=new ur,yu=new ur,xu=new ur;function bu(e){if(qr.call(this),this.type="Sprite",void 0===Zl){Zl=new ls;var t=new su(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5);Zl.setIndex([0,1,2,0,2,3]),Zl.addAttribute("position",new au(t,3,0,!1)),Zl.addAttribute("uv",new au(t,2,3,!1))}this.geometry=Zl,this.material=void 0!==e?e:new lu,this.center=new ur(.5,.5)}function wu(e,t,n,i,r,o){hu.subVectors(e,n).addScalar(.5).multiply(i),void 0!==r?(pu.x=o*hu.x-r*hu.y,pu.y=r*hu.x+o*hu.y):pu.copy(hu),e.copy(t),e.x+=pu.x,e.y+=pu.y,e.applyMatrix4(fu)}bu.prototype=Object.assign(Object.create(qr.prototype),{constructor:bu,isSprite:!0,raycast:function(e,t){e.camera,cu.setFromMatrixScale(this.matrixWorld),fu.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),du.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&cu.multiplyScalar(-du.z);var n,i,r=this.material.rotation;0!==r&&(i=Math.cos(r),n=Math.sin(r));var o=this.center;wu(mu.set(-.5,-.5,0),du,o,cu,n,i),wu(_u.set(.5,-.5,0),du,o,cu,n,i),wu(gu.set(.5,.5,0),du,o,cu,n,i),vu.set(0,0),yu.set(1,0),xu.set(1,1);var s=e.ray.intersectTriangle(mu,_u,gu,!1,uu);if(null!==s||(wu(_u.set(-.5,.5,0),du,o,cu,n,i),yu.set(0,1),null!==(s=e.ray.intersectTriangle(mu,gu,_u,!1,uu)))){var a=e.ray.origin.distanceTo(uu);a<e.near||a>e.far||t.push({distance:a,point:uu.clone(),uv:Oo.getUV(uu,mu,_u,gu,vu,yu,xu,new ur),face:null,object:this})}},clone:function(){return new this.constructor(this.material).copy(this)},copy:function(e){return qr.prototype.copy.call(this,e),void 0!==e.center&&this.center.copy(e.center),this}});var ju=new pr,Su=new pr;function Au(){qr.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}function Mu(e,t){e&&e.isGeometry,Ms.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Er,this.bindMatrixInverse=new Er}Au.prototype=Object.assign(Object.create(qr.prototype),{constructor:Au,isLOD:!0,copy:function(e){qr.prototype.copy.call(this,e,!1);for(var t=e.levels,n=0,i=t.length;n<i;n++){var r=t[n];this.addLevel(r.object.clone(),r.distance)}return this},addLevel:function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var n=this.levels,i=0;i<n.length&&!(t<n[i].distance);i++);return n.splice(i,0,{distance:t,object:e}),this.add(e),this},getObjectForDistance:function(e){for(var t=this.levels,n=1,i=t.length;n<i&&!(e<t[n].distance);n++);return t[n-1].object},raycast:function(e,t){ju.setFromMatrixPosition(this.matrixWorld);var n=e.ray.origin.distanceTo(ju);this.getObjectForDistance(n).raycast(e,t)},update:function(e){var t=this.levels;if(t.length>1){ju.setFromMatrixPosition(e.matrixWorld),Su.setFromMatrixPosition(this.matrixWorld);var n=ju.distanceTo(Su);t[0].object.visible=!0;for(var i=1,r=t.length;i<r&&n>=t[i].distance;i++)t[i-1].object.visible=!1,t[i].object.visible=!0;for(;i<r;i++)t[i].object.visible=!1}},toJSON:function(e){var t=qr.prototype.toJSON.call(this,e);t.object.levels=[];for(var n=this.levels,i=0,r=n.length;i<r;i++){var o=n[i];t.object.levels.push({object:o.object.uuid,distance:o.distance})}return t}}),Mu.prototype=Object.assign(Object.create(Ms.prototype),{constructor:Mu,isSkinnedMesh:!0,bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var e=new xr,t=this.geometry.attributes.skinWeight,n=0,i=t.count;n<i;n++){e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.w=t.getW(n);var r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}},updateMatrixWorld:function(e){Ms.prototype.updateMatrixWorld.call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode&&this.bindMatrixInverse.getInverse(this.bindMatrix)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var Tu=new Er,Pu=new Er;function Lu(e,t){if(e=e||[],this.bones=e.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{this.boneInverses=[];for(var n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new Er)}}function Eu(){qr.call(this),this.type="Bone"}function Ou(e){Bo.call(this),this.type="LineBasicMaterial",this.color=new No(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(e)}Object.assign(Lu.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var n=new Er;this.bones[e]&&n.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(n)}},pose:function(){var e,t,n;for(t=0,n=this.bones.length;t<n;t++)(e=this.bones[t])&&e.matrixWorld.getInverse(this.boneInverses[t]);for(t=0,n=this.bones.length;t<n;t++)(e=this.bones[t])&&(e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},update:function(){for(var e=this.bones,t=this.boneInverses,n=this.boneMatrices,i=this.boneTexture,r=0,o=e.length;r<o;r++){var s=e[r]?e[r].matrixWorld:Pu;Tu.multiplyMatrices(s,t[r]),Tu.toArray(n,16*r)}void 0!==i&&(i.needsUpdate=!0)},clone:function(){return new Lu(this.bones,this.boneInverses)},getBoneByName:function(e){for(var t=0,n=this.bones.length;t<n;t++){var i=this.bones[t];if(i.name===e)return i}}}),Eu.prototype=Object.assign(Object.create(qr.prototype),{constructor:Eu,isBone:!0}),Ou.prototype=Object.create(Bo.prototype),Ou.prototype.constructor=Ou,Ou.prototype.isLineBasicMaterial=!0,Ou.prototype.copy=function(e){return Bo.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this};var Iu=new pr,Cu=new pr,Fu=new Er,Nu=new xo,ku=new ho;function Du(e,t,n){qr.call(this),this.type="Line",this.geometry=void 0!==e?e:new ls,this.material=void 0!==t?t:new Ou({color:16777215*Math.random()})}Du.prototype=Object.assign(Object.create(qr.prototype),{constructor:Du,isLine:!0,computeLineDistances:function(){var e=this.geometry;if(e.isBufferGeometry){if(null===e.index){for(var t=e.attributes.position,n=[0],i=1,r=t.count;i<r;i++)Iu.fromBufferAttribute(t,i-1),Cu.fromBufferAttribute(t,i),n[i]=n[i-1],n[i]+=Iu.distanceTo(Cu);e.addAttribute("lineDistance",new Zo(n,1))}}else if(e.isGeometry){var o=e.vertices;(n=e.lineDistances)[0]=0;for(i=1,r=o.length;i<r;i++)n[i]=n[i-1],n[i]+=o[i-1].distanceTo(o[i])}return this},raycast:function(e,t){var n=e.linePrecision,i=this.geometry,r=this.matrixWorld;if(null===i.boundingSphere&&i.computeBoundingSphere(),ku.copy(i.boundingSphere),ku.applyMatrix4(r),ku.radius+=n,!1!==e.ray.intersectsSphere(ku)){Fu.getInverse(r),Nu.copy(e.ray).applyMatrix4(Fu);var o=n/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o,a=new pr,l=new pr,u=new pr,c=new pr,d=this&&this.isLineSegments?2:1;if(i.isBufferGeometry){var h=i.index,p=i.attributes.position.array;if(null!==h)for(var f=h.array,m=0,_=f.length-1;m<_;m+=d){var g=f[m],v=f[m+1];if(a.fromArray(p,3*g),l.fromArray(p,3*v),!(Nu.distanceSqToSegment(a,l,c,u)>s))c.applyMatrix4(this.matrixWorld),(b=e.ray.origin.distanceTo(c))<e.near||b>e.far||t.push({distance:b,point:u.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this})}else for(m=0,_=p.length/3-1;m<_;m+=d){if(a.fromArray(p,3*m),l.fromArray(p,3*m+3),!(Nu.distanceSqToSegment(a,l,c,u)>s))c.applyMatrix4(this.matrixWorld),(b=e.ray.origin.distanceTo(c))<e.near||b>e.far||t.push({distance:b,point:u.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this})}}else if(i.isGeometry){var y=i.vertices,x=y.length;for(m=0;m<x-1;m+=d){var b;if(!(Nu.distanceSqToSegment(y[m],y[m+1],c,u)>s))c.applyMatrix4(this.matrixWorld),(b=e.ray.origin.distanceTo(c))<e.near||b>e.far||t.push({distance:b,point:u.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this})}}}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var Ru=new pr,zu=new pr;function Uu(e,t){Du.call(this,e,t),this.type="LineSegments"}function Bu(e,t){Du.call(this,e,t),this.type="LineLoop"}function Gu(e){Bo.call(this),this.type="PointsMaterial",this.color=new No(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.lights=!1,this.setValues(e)}Uu.prototype=Object.assign(Object.create(Du.prototype),{constructor:Uu,isLineSegments:!0,computeLineDistances:function(){var e=this.geometry;if(e.isBufferGeometry){if(null===e.index){for(var t=e.attributes.position,n=[],i=0,r=t.count;i<r;i+=2)Ru.fromBufferAttribute(t,i),zu.fromBufferAttribute(t,i+1),n[i]=0===i?0:n[i-1],n[i+1]=n[i]+Ru.distanceTo(zu);e.addAttribute("lineDistance",new Zo(n,1))}}else if(e.isGeometry){var o=e.vertices;for(n=e.lineDistances,i=0,r=o.length;i<r;i+=2)Ru.copy(o[i]),zu.copy(o[i+1]),n[i]=0===i?0:n[i-1],n[i+1]=n[i]+Ru.distanceTo(zu)}return this}}),Bu.prototype=Object.assign(Object.create(Du.prototype),{constructor:Bu,isLineLoop:!0}),Gu.prototype=Object.create(Bo.prototype),Gu.prototype.constructor=Gu,Gu.prototype.isPointsMaterial=!0,Gu.prototype.copy=function(e){return Bo.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.morphTargets=e.morphTargets,this};var Vu=new Er,Hu=new xo,Xu=new ho,Wu=new pr;function Yu(e,t){qr.call(this),this.type="Points",this.geometry=void 0!==e?e:new ls,this.material=void 0!==t?t:new Gu({color:16777215*Math.random()}),this.updateMorphTargets()}function qu(e,t,n,i,r,o,s){var a=Hu.distanceSqToPoint(e);if(a<n){var l=new pr;Hu.closestPointToPoint(e,l),l.applyMatrix4(i);var u=r.ray.origin.distanceTo(l);if(u<r.near||u>r.far)return;o.push({distance:u,distanceToRay:Math.sqrt(a),point:l,index:t,face:null,object:s})}}function Qu(e,t,n,i,r,o,s,a,l){yr.call(this,e,t,n,i,r,o,s,a,l),this.format=void 0!==s?s:di,this.minFilter=void 0!==o?o:Qn,this.magFilter=void 0!==r?r:Qn,this.generateMipmaps=!1}function Ju(e,t,n,i,r,o,s,a,l,u,c,d){yr.call(this,null,o,s,a,l,u,i,r,c,d),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}function Zu(e,t,n,i,r,o,s,a,l){yr.call(this,e,t,n,i,r,o,s,a,l),this.needsUpdate=!0}function Ku(e,t,n,i,r,o,s,a,l,u){if((u=void 0!==u?u:mi)!==mi&&u!==_i)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&u===mi&&(n=ti),void 0===n&&u===_i&&(n=ui),yr.call(this,null,i,r,o,s,a,u,n,l),this.image={width:e,height:t},this.magFilter=void 0!==s?s:Wn,this.minFilter=void 0!==a?a:Wn,this.flipY=!1,this.generateMipmaps=!1}function $u(e){ls.call(this),this.type="WireframeGeometry";var t,n,i,r,o,s,a,l,u,c,d=[],h=[0,0],p={},f=["a","b","c"];if(e&&e.isGeometry){var m=e.faces;for(t=0,i=m.length;t<i;t++){var _=m[t];for(n=0;n<3;n++)a=_[f[n]],l=_[f[(n+1)%3]],h[0]=Math.min(a,l),h[1]=Math.max(a,l),void 0===p[u=h[0]+","+h[1]]&&(p[u]={index1:h[0],index2:h[1]})}for(u in p)s=p[u],c=e.vertices[s.index1],d.push(c.x,c.y,c.z),c=e.vertices[s.index2],d.push(c.x,c.y,c.z)}else if(e&&e.isBufferGeometry){var g,v,y,x,b,w,j;if(c=new pr,null!==e.index){for(g=e.attributes.position,v=e.index,0===(y=e.groups).length&&(y=[{start:0,count:v.count,materialIndex:0}]),r=0,o=y.length;r<o;++r)for(t=b=(x=y[r]).start,i=b+x.count;t<i;t+=3)for(n=0;n<3;n++)a=v.getX(t+n),l=v.getX(t+(n+1)%3),h[0]=Math.min(a,l),h[1]=Math.max(a,l),void 0===p[u=h[0]+","+h[1]]&&(p[u]={index1:h[0],index2:h[1]});for(u in p)s=p[u],c.fromBufferAttribute(g,s.index1),d.push(c.x,c.y,c.z),c.fromBufferAttribute(g,s.index2),d.push(c.x,c.y,c.z)}else for(t=0,i=(g=e.attributes.position).count/3;t<i;t++)for(n=0;n<3;n++)w=3*t+n,c.fromBufferAttribute(g,w),d.push(c.x,c.y,c.z),j=3*t+(n+1)%3,c.fromBufferAttribute(g,j),d.push(c.x,c.y,c.z)}this.addAttribute("position",new Zo(d,3))}function ec(e,t,n){Cs.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:n},this.fromBufferGeometry(new tc(e,t,n)),this.mergeVertices()}function tc(e,t,n){ls.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:n};var i,r,o=[],s=[],a=[],l=[],u=new pr,c=new pr,d=new pr,h=new pr,p=new pr;e.length;var f=t+1;for(i=0;i<=n;i++){var m=i/n;for(r=0;r<=t;r++){var _=r/t;e(_,m,c),s.push(c.x,c.y,c.z),_-1e-5>=0?(e(_-1e-5,m,d),h.subVectors(c,d)):(e(_+1e-5,m,d),h.subVectors(d,c)),m-1e-5>=0?(e(_,m-1e-5,d),p.subVectors(c,d)):(e(_,m+1e-5,d),p.subVectors(d,c)),u.crossVectors(h,p).normalize(),a.push(u.x,u.y,u.z),l.push(_,m)}}for(i=0;i<n;i++)for(r=0;r<t;r++){var g=i*f+r,v=i*f+r+1,y=(i+1)*f+r+1,x=(i+1)*f+r;o.push(g,v,x),o.push(v,y,x)}this.setIndex(o),this.addAttribute("position",new Zo(s,3)),this.addAttribute("normal",new Zo(a,3)),this.addAttribute("uv",new Zo(l,2))}function nc(e,t,n,i){Cs.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:i},this.fromBufferGeometry(new ic(e,t,n,i)),this.mergeVertices()}function ic(e,t,n,i){ls.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:i},n=n||1;var r=[],o=[];function s(e,t,n,i){var r,o,s=Math.pow(2,i),l=[];for(r=0;r<=s;r++){l[r]=[];var u=e.clone().lerp(n,r/s),c=t.clone().lerp(n,r/s),d=s-r;for(o=0;o<=d;o++)l[r][o]=0===o&&r===s?u:u.clone().lerp(c,o/d)}for(r=0;r<s;r++)for(o=0;o<2*(s-r)-1;o++){var h=Math.floor(o/2);o%2==0?(a(l[r][h+1]),a(l[r+1][h]),a(l[r][h])):(a(l[r][h+1]),a(l[r+1][h+1]),a(l[r+1][h]))}}function a(e){r.push(e.x,e.y,e.z)}function l(t,n){var i=3*t;n.x=e[i+0],n.y=e[i+1],n.z=e[i+2]}function u(e,t,n,i){i<0&&1===e.x&&(o[t]=e.x-1),0===n.x&&0===n.z&&(o[t]=i/2/Math.PI+.5)}function c(e){return Math.atan2(e.z,-e.x)}!function(e){for(var n=new pr,i=new pr,r=new pr,o=0;o<t.length;o+=3)l(t[o+0],n),l(t[o+1],i),l(t[o+2],r),s(n,i,r,e)}(i=i||0),function(e){for(var t=new pr,n=0;n<r.length;n+=3)t.x=r[n+0],t.y=r[n+1],t.z=r[n+2],t.normalize().multiplyScalar(e),r[n+0]=t.x,r[n+1]=t.y,r[n+2]=t.z}(n),function(){for(var e=new pr,t=0;t<r.length;t+=3){e.x=r[t+0],e.y=r[t+1],e.z=r[t+2];var n=c(e)/2/Math.PI+.5,i=(s=e,Math.atan2(-s.y,Math.sqrt(s.x*s.x+s.z*s.z))/Math.PI+.5);o.push(n,1-i)}var s;(function(){for(var e=new pr,t=new pr,n=new pr,i=new pr,s=new ur,a=new ur,l=new ur,d=0,h=0;d<r.length;d+=9,h+=6){e.set(r[d+0],r[d+1],r[d+2]),t.set(r[d+3],r[d+4],r[d+5]),n.set(r[d+6],r[d+7],r[d+8]),s.set(o[h+0],o[h+1]),a.set(o[h+2],o[h+3]),l.set(o[h+4],o[h+5]),i.copy(e).add(t).add(n).divideScalar(3);var p=c(i);u(s,h+0,e,p),u(a,h+2,t,p),u(l,h+4,n,p)}})(),function(){for(var e=0;e<o.length;e+=6){var t=o[e+0],n=o[e+2],i=o[e+4],r=Math.max(t,n,i),s=Math.min(t,n,i);r>.9&&s<.1&&(t<.2&&(o[e+0]+=1),n<.2&&(o[e+2]+=1),i<.2&&(o[e+4]+=1))}}()}(),this.addAttribute("position",new Zo(r,3)),this.addAttribute("normal",new Zo(r.slice(),3)),this.addAttribute("uv",new Zo(o,2)),0===i?this.computeVertexNormals():this.normalizeNormals()}function rc(e,t){Cs.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new oc(e,t)),this.mergeVertices()}function oc(e,t){ic.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}function sc(e,t){Cs.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new ac(e,t)),this.mergeVertices()}function ac(e,t){ic.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}function lc(e,t){Cs.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new uc(e,t)),this.mergeVertices()}function uc(e,t){var n=(1+Math.sqrt(5))/2,i=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1];ic.call(this,i,[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}function cc(e,t){Cs.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new dc(e,t)),this.mergeVertices()}function dc(e,t){var n=(1+Math.sqrt(5))/2,i=1/n,r=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i];ic.call(this,r,[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}function hc(e,t,n,i,r,o){Cs.call(this),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:i,closed:r};var s=new pc(e,t,n,i,r);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals,this.fromBufferGeometry(s),this.mergeVertices()}function pc(e,t,n,i,r){ls.call(this),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:i,closed:r},t=t||64,n=n||1,i=i||8,r=r||!1;var o=e.computeFrenetFrames(t,r);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;var s,a,l=new pr,u=new pr,c=new ur,d=new pr,h=[],p=[],f=[],m=[];function _(r){d=e.getPointAt(r/t,d);var s=o.normals[r],c=o.binormals[r];for(a=0;a<=i;a++){var f=a/i*Math.PI*2,m=Math.sin(f),_=-Math.cos(f);u.x=_*s.x+m*c.x,u.y=_*s.y+m*c.y,u.z=_*s.z+m*c.z,u.normalize(),p.push(u.x,u.y,u.z),l.x=d.x+n*u.x,l.y=d.y+n*u.y,l.z=d.z+n*u.z,h.push(l.x,l.y,l.z)}}!function(){for(s=0;s<t;s++)_(s);_(!1===r?t:0),function(){for(s=0;s<=t;s++)for(a=0;a<=i;a++)c.x=s/t,c.y=a/i,f.push(c.x,c.y)}(),function(){for(a=1;a<=t;a++)for(s=1;s<=i;s++){var e=(i+1)*(a-1)+(s-1),n=(i+1)*a+(s-1),r=(i+1)*a+s,o=(i+1)*(a-1)+s;m.push(e,n,o),m.push(n,r,o)}}()}(),this.setIndex(m),this.addAttribute("position",new Zo(h,3)),this.addAttribute("normal",new Zo(p,3)),this.addAttribute("uv",new Zo(f,2))}function fc(e,t,n,i,r,o,s){Cs.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:i,p:r,q:o},this.fromBufferGeometry(new mc(e,t,n,i,r,o)),this.mergeVertices()}function mc(e,t,n,i,r,o){ls.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:i,p:r,q:o},e=e||1,t=t||.4,n=Math.floor(n)||64,i=Math.floor(i)||8,r=r||2,o=o||3;var s,a,l=[],u=[],c=[],d=[],h=new pr,p=new pr,f=new pr,m=new pr,_=new pr,g=new pr,v=new pr;for(s=0;s<=n;++s){var y=s/n*r*Math.PI*2;for(T(y,r,o,e,f),T(y+.01,r,o,e,m),g.subVectors(m,f),v.addVectors(m,f),_.crossVectors(g,v),v.crossVectors(_,g),_.normalize(),v.normalize(),a=0;a<=i;++a){var x=a/i*Math.PI*2,b=-t*Math.cos(x),w=t*Math.sin(x);h.x=f.x+(b*v.x+w*_.x),h.y=f.y+(b*v.y+w*_.y),h.z=f.z+(b*v.z+w*_.z),u.push(h.x,h.y,h.z),p.subVectors(h,f).normalize(),c.push(p.x,p.y,p.z),d.push(s/n),d.push(a/i)}}for(a=1;a<=n;a++)for(s=1;s<=i;s++){var j=(i+1)*(a-1)+(s-1),S=(i+1)*a+(s-1),A=(i+1)*a+s,M=(i+1)*(a-1)+s;l.push(j,S,M),l.push(S,A,M)}function T(e,t,n,i,r){var o=Math.cos(e),s=Math.sin(e),a=n/t*e,l=Math.cos(a);r.x=i*(2+l)*.5*o,r.y=i*(2+l)*s*.5,r.z=i*Math.sin(a)*.5}this.setIndex(l),this.addAttribute("position",new Zo(u,3)),this.addAttribute("normal",new Zo(c,3)),this.addAttribute("uv",new Zo(d,2))}function _c(e,t,n,i,r){Cs.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:i,arc:r},this.fromBufferGeometry(new gc(e,t,n,i,r)),this.mergeVertices()}function gc(e,t,n,i,r){ls.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:i,arc:r},e=e||1,t=t||.4,n=Math.floor(n)||8,i=Math.floor(i)||6,r=r||2*Math.PI;var o,s,a=[],l=[],u=[],c=[],d=new pr,h=new pr,p=new pr;for(o=0;o<=n;o++)for(s=0;s<=i;s++){var f=s/i*r,m=o/n*Math.PI*2;h.x=(e+t*Math.cos(m))*Math.cos(f),h.y=(e+t*Math.cos(m))*Math.sin(f),h.z=t*Math.sin(m),l.push(h.x,h.y,h.z),d.x=e*Math.cos(f),d.y=e*Math.sin(f),p.subVectors(h,d).normalize(),u.push(p.x,p.y,p.z),c.push(s/i),c.push(o/n)}for(o=1;o<=n;o++)for(s=1;s<=i;s++){var _=(i+1)*o+s-1,g=(i+1)*(o-1)+s-1,v=(i+1)*(o-1)+s,y=(i+1)*o+s;a.push(_,g,y),a.push(g,v,y)}this.setIndex(a),this.addAttribute("position",new Zo(l,3)),this.addAttribute("normal",new Zo(u,3)),this.addAttribute("uv",new Zo(c,2))}Yu.prototype=Object.assign(Object.create(qr.prototype),{constructor:Yu,isPoints:!0,raycast:function(e,t){var n=this.geometry,i=this.matrixWorld,r=e.params.Points.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),Xu.copy(n.boundingSphere),Xu.applyMatrix4(i),Xu.radius+=r,!1!==e.ray.intersectsSphere(Xu)){Vu.getInverse(i),Hu.copy(e.ray).applyMatrix4(Vu);var o=r/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o;if(n.isBufferGeometry){var a=n.index,l=n.attributes.position.array;if(null!==a)for(var u=a.array,c=0,d=u.length;c<d;c++){var h=u[c];Wu.fromArray(l,3*h),qu(Wu,h,s,i,e,t,this)}else{c=0;for(var p=l.length/3;c<p;c++)Wu.fromArray(l,3*c),qu(Wu,c,s,i,e,t,this)}}else{var f=n.vertices;for(c=0,p=f.length;c<p;c++)qu(f[c],c,s,i,e,t,this)}}},updateMorphTargets:function(){var e,t,n,i=this.geometry;if(i.isBufferGeometry){var r=i.morphAttributes,o=Object.keys(r);if(o.length>0){var s=r[o[0]];if(void 0!==s)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=s.length;e<t;e++)n=s[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}else{var a=i.morphTargets;void 0!==a&&a.length}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Qu.prototype=Object.assign(Object.create(yr.prototype),{constructor:Qu,isVideoTexture:!0,update:function(){var e=this.image;e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),Ju.prototype=Object.create(yr.prototype),Ju.prototype.constructor=Ju,Ju.prototype.isCompressedTexture=!0,Zu.prototype=Object.create(yr.prototype),Zu.prototype.constructor=Zu,Zu.prototype.isCanvasTexture=!0,Ku.prototype=Object.create(yr.prototype),Ku.prototype.constructor=Ku,Ku.prototype.isDepthTexture=!0,$u.prototype=Object.create(ls.prototype),$u.prototype.constructor=$u,ec.prototype=Object.create(Cs.prototype),ec.prototype.constructor=ec,tc.prototype=Object.create(ls.prototype),tc.prototype.constructor=tc,nc.prototype=Object.create(Cs.prototype),nc.prototype.constructor=nc,ic.prototype=Object.create(ls.prototype),ic.prototype.constructor=ic,rc.prototype=Object.create(Cs.prototype),rc.prototype.constructor=rc,oc.prototype=Object.create(ic.prototype),oc.prototype.constructor=oc,sc.prototype=Object.create(Cs.prototype),sc.prototype.constructor=sc,ac.prototype=Object.create(ic.prototype),ac.prototype.constructor=ac,lc.prototype=Object.create(Cs.prototype),lc.prototype.constructor=lc,uc.prototype=Object.create(ic.prototype),uc.prototype.constructor=uc,cc.prototype=Object.create(Cs.prototype),cc.prototype.constructor=cc,dc.prototype=Object.create(ic.prototype),dc.prototype.constructor=dc,hc.prototype=Object.create(Cs.prototype),hc.prototype.constructor=hc,pc.prototype=Object.create(ls.prototype),pc.prototype.constructor=pc,pc.prototype.toJSON=function(){var e=ls.prototype.toJSON.call(this);return e.path=this.parameters.path.toJSON(),e},fc.prototype=Object.create(Cs.prototype),fc.prototype.constructor=fc,mc.prototype=Object.create(ls.prototype),mc.prototype.constructor=mc,_c.prototype=Object.create(Cs.prototype),_c.prototype.constructor=_c,gc.prototype=Object.create(ls.prototype),gc.prototype.constructor=gc;var vc=function(e,t,n){n=n||2;var i,r,o,s,a,l,u,c=t&&t.length,d=c?t[0]*n:e.length,h=yc(e,0,d,n,!0),p=[];if(!h||h.next===h.prev)return p;if(c&&(h=function(e,t,n,i){var r,o,s,a,l,u=[];for(r=0,o=t.length;r<o;r++)s=t[r]*i,a=r<o-1?t[r+1]*i:e.length,(l=yc(e,s,a,i,!1))===l.next&&(l.steiner=!0),u.push(Lc(l));for(u.sort(Mc),r=0;r<u.length;r++)Tc(u[r],n),n=xc(n,n.next);return n}(e,t,h,n)),e.length>80*n){i=o=e[0],r=s=e[1];for(var f=n;f<d;f+=n)(a=e[f])<i&&(i=a),(l=e[f+1])<r&&(r=l),a>o&&(o=a),l>s&&(s=l);u=0!==(u=Math.max(o-i,s-r))?1/u:0}return bc(h,p,n,i,r,u),p};function yc(e,t,n,i,r){var o,s;if(r===function(e,t,n,i){for(var r=0,o=t,s=n-i;o<n;o+=i)r+=(e[s]-e[o])*(e[o+1]+e[s+1]),s=o;return r}(e,t,n,i)>0)for(o=t;o<n;o+=i)s=Dc(o,e[o],e[o+1],s);else for(o=n-i;o>=t;o-=i)s=Dc(o,e[o],e[o+1],s);return s&&Cc(s,s.next)&&(Rc(s),s=s.next),s}function xc(e,t){if(!e)return e;t||(t=e);var n,i=e;do{if(n=!1,i.steiner||!Cc(i,i.next)&&0!==Ic(i.prev,i,i.next))i=i.next;else{if(Rc(i),(i=t=i.prev)===i.next)break;n=!0}}while(n||i!==t);return t}function bc(e,t,n,i,r,o,s){if(e){!s&&o&&function(e,t,n,i){var r=e;do{null===r.z&&(r.z=Pc(r.x,r.y,t,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,function(e){var t,n,i,r,o,s,a,l,u=1;do{for(n=e,e=null,o=null,s=0;n;){for(s++,i=n,a=0,t=0;t<u&&(a++,i=i.nextZ);t++);for(l=u;a>0||l>0&&i;)0!==a&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,a--):(r=i,i=i.nextZ,l--),o?o.nextZ=r:e=r,r.prevZ=o,o=r;n=i}o.nextZ=null,u*=2}while(s>1)}(r)}(e,i,r,o);for(var a,l,u=e;e.prev!==e.next;)if(a=e.prev,l=e.next,o?jc(e,i,r,o):wc(e))t.push(a.i/n),t.push(e.i/n),t.push(l.i/n),Rc(e),e=l.next,u=l.next;else if((e=l)===u){s?1===s?bc(e=Sc(e,t,n),t,n,i,r,o,2):2===s&&Ac(e,t,n,i,r,o):bc(xc(e),t,n,i,r,o,1);break}}}function wc(e){var t=e.prev,n=e,i=e.next;if(Ic(t,n,i)>=0)return!1;for(var r=e.next.next;r!==e.prev;){if(Ec(t.x,t.y,n.x,n.y,i.x,i.y,r.x,r.y)&&Ic(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function jc(e,t,n,i){var r=e.prev,o=e,s=e.next;if(Ic(r,o,s)>=0)return!1;for(var a=r.x<o.x?r.x<s.x?r.x:s.x:o.x<s.x?o.x:s.x,l=r.y<o.y?r.y<s.y?r.y:s.y:o.y<s.y?o.y:s.y,u=r.x>o.x?r.x>s.x?r.x:s.x:o.x>s.x?o.x:s.x,c=r.y>o.y?r.y>s.y?r.y:s.y:o.y>s.y?o.y:s.y,d=Pc(a,l,t,n,i),h=Pc(u,c,t,n,i),p=e.prevZ,f=e.nextZ;p&&p.z>=d&&f&&f.z<=h;){if(p!==e.prev&&p!==e.next&&Ec(r.x,r.y,o.x,o.y,s.x,s.y,p.x,p.y)&&Ic(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,f!==e.prev&&f!==e.next&&Ec(r.x,r.y,o.x,o.y,s.x,s.y,f.x,f.y)&&Ic(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(;p&&p.z>=d;){if(p!==e.prev&&p!==e.next&&Ec(r.x,r.y,o.x,o.y,s.x,s.y,p.x,p.y)&&Ic(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;f&&f.z<=h;){if(f!==e.prev&&f!==e.next&&Ec(r.x,r.y,o.x,o.y,s.x,s.y,f.x,f.y)&&Ic(f.prev,f,f.next)>=0)return!1;f=f.nextZ}return!0}function Sc(e,t,n){var i=e;do{var r=i.prev,o=i.next.next;!Cc(r,o)&&Fc(r,i,i.next,o)&&Nc(r,o)&&Nc(o,r)&&(t.push(r.i/n),t.push(i.i/n),t.push(o.i/n),Rc(i),Rc(i.next),i=e=o),i=i.next}while(i!==e);return i}function Ac(e,t,n,i,r,o){var s=e;do{for(var a=s.next.next;a!==s.prev;){if(s.i!==a.i&&Oc(s,a)){var l=kc(s,a);return s=xc(s,s.next),l=xc(l,l.next),bc(s,t,n,i,r,o),void bc(l,t,n,i,r,o)}a=a.next}s=s.next}while(s!==e)}function Mc(e,t){return e.x-t.x}function Tc(e,t){if(t=function(e,t){var n,i=t,r=e.x,o=e.y,s=-1/0;do{if(o<=i.y&&o>=i.next.y&&i.next.y!==i.y){var a=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(a<=r&&a>s){if(s=a,a===r){if(o===i.y)return i;if(o===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==t);if(!n)return null;if(r===s)return n.prev;var l,u=n,c=n.x,d=n.y,h=1/0;i=n.next;for(;i!==u;)r>=i.x&&i.x>=c&&r!==i.x&&Ec(o<d?r:s,o,c,d,o<d?s:r,o,i.x,i.y)&&((l=Math.abs(o-i.y)/(r-i.x))<h||l===h&&i.x>n.x)&&Nc(i,e)&&(n=i,h=l),i=i.next;return n}(e,t)){var n=kc(t,e);xc(n,n.next)}}function Pc(e,t,n,i,r){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*r)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*r)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Lc(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function Ec(e,t,n,i,r,o,s,a){return(r-s)*(t-a)-(e-s)*(o-a)>=0&&(e-s)*(i-a)-(n-s)*(t-a)>=0&&(n-s)*(o-a)-(r-s)*(i-a)>=0}function Oc(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&Fc(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&Nc(e,t)&&Nc(t,e)&&function(e,t){var n=e,i=!1,r=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==e);return i}(e,t)}function Ic(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function Cc(e,t){return e.x===t.x&&e.y===t.y}function Fc(e,t,n,i){return!!(Cc(e,n)&&Cc(t,i)||Cc(e,i)&&Cc(n,t))||Ic(e,t,n)>0!=Ic(e,t,i)>0&&Ic(n,i,e)>0!=Ic(n,i,t)>0}function Nc(e,t){return Ic(e.prev,e,e.next)<0?Ic(e,t,e.next)>=0&&Ic(e,e.prev,t)>=0:Ic(e,t,e.prev)<0||Ic(e,e.next,t)<0}function kc(e,t){var n=new zc(e.i,e.x,e.y),i=new zc(t.i,t.x,t.y),r=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function Dc(e,t,n,i){var r=new zc(e,t,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Rc(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function zc(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}var Uc={area:function(e){for(var t=e.length,n=0,i=t-1,r=0;r<t;i=r++)n+=e[i].x*e[r].y-e[r].x*e[i].y;return.5*n},isClockWise:function(e){return Uc.area(e)<0},triangulateShape:function(e,t){var n=[],i=[],r=[];Bc(e),Gc(n,e);var o=e.length;t.forEach(Bc);for(var s=0;s<t.length;s++)i.push(o),o+=t[s].length,Gc(n,t[s]);var a=vc(n,i);for(s=0;s<a.length;s+=3)r.push(a.slice(s,s+3));return r}};function Bc(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function Gc(e,t){for(var n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}function Vc(e,t){Cs.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},this.fromBufferGeometry(new Hc(e,t)),this.mergeVertices()}function Hc(e,t){ls.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];for(var n=this,i=[],r=[],o=0,s=e.length;o<s;o++){a(e[o])}function a(e){var o=[],s=void 0!==t.curveSegments?t.curveSegments:12,a=void 0!==t.steps?t.steps:1,l=void 0!==t.depth?t.depth:100,u=void 0===t.bevelEnabled||t.bevelEnabled,c=void 0!==t.bevelThickness?t.bevelThickness:6,d=void 0!==t.bevelSize?t.bevelSize:c-2,h=void 0!==t.bevelOffset?t.bevelOffset:0,p=void 0!==t.bevelSegments?t.bevelSegments:3,f=t.extrudePath,m=void 0!==t.UVGenerator?t.UVGenerator:Xc;void 0!==t.amount&&(l=t.amount);var _,g,v,y,x,b,w,j,S=!1;f&&(_=f.getSpacedPoints(a),S=!0,u=!1,g=f.computeFrenetFrames(a,!1),v=new pr,y=new pr,x=new pr),u||(p=0,c=0,d=0,h=0);var A=e.extractPoints(s),M=A.shape,T=A.holes;if(!Uc.isClockWise(M))for(M=M.reverse(),w=0,j=T.length;w<j;w++)b=T[w],Uc.isClockWise(b)&&(T[w]=b.reverse());var P=Uc.triangulateShape(M,T),L=M;for(w=0,j=T.length;w<j;w++)b=T[w],M=M.concat(b);function E(e,t,n){return t.clone().multiplyScalar(n).add(e)}var O,I,C,F,N,k,D=M.length,R=P.length;function z(e,t,n){var i,r,o,s=e.x-t.x,a=e.y-t.y,l=n.x-e.x,u=n.y-e.y,c=s*s+a*a,d=s*u-a*l;if(Math.abs(d)>Number.EPSILON){var h=Math.sqrt(c),p=Math.sqrt(l*l+u*u),f=t.x-a/h,m=t.y+s/h,_=((n.x-u/p-f)*u-(n.y+l/p-m)*l)/(s*u-a*l),g=(i=f+s*_-e.x)*i+(r=m+a*_-e.y)*r;if(g<=2)return new ur(i,r);o=Math.sqrt(g/2)}else{var v=!1;s>Number.EPSILON?l>Number.EPSILON&&(v=!0):s<-Number.EPSILON?l<-Number.EPSILON&&(v=!0):Math.sign(a)===Math.sign(u)&&(v=!0),v?(i=-a,r=s,o=Math.sqrt(c)):(i=s,r=a,o=Math.sqrt(c/2))}return new ur(i/o,r/o)}for(var U=[],B=0,G=L.length,V=G-1,H=B+1;B<G;B++,V++,H++)V===G&&(V=0),H===G&&(H=0),U[B]=z(L[B],L[V],L[H]);var X,W,Y=[],q=U.concat();for(w=0,j=T.length;w<j;w++){for(b=T[w],X=[],B=0,V=(G=b.length)-1,H=B+1;B<G;B++,V++,H++)V===G&&(V=0),H===G&&(H=0),X[B]=z(b[B],b[V],b[H]);Y.push(X),q=q.concat(X)}for(O=0;O<p;O++){for(C=O/p,F=c*Math.cos(C*Math.PI/2),I=d*Math.sin(C*Math.PI/2)+h,B=0,G=L.length;B<G;B++)J((N=E(L[B],U[B],I)).x,N.y,-F);for(w=0,j=T.length;w<j;w++)for(b=T[w],X=Y[w],B=0,G=b.length;B<G;B++)J((N=E(b[B],X[B],I)).x,N.y,-F)}for(I=d+h,B=0;B<D;B++)N=u?E(M[B],q[B],I):M[B],S?(y.copy(g.normals[0]).multiplyScalar(N.x),v.copy(g.binormals[0]).multiplyScalar(N.y),x.copy(_[0]).add(y).add(v),J(x.x,x.y,x.z)):J(N.x,N.y,0);for(W=1;W<=a;W++)for(B=0;B<D;B++)N=u?E(M[B],q[B],I):M[B],S?(y.copy(g.normals[W]).multiplyScalar(N.x),v.copy(g.binormals[W]).multiplyScalar(N.y),x.copy(_[W]).add(y).add(v),J(x.x,x.y,x.z)):J(N.x,N.y,l/a*W);for(O=p-1;O>=0;O--){for(C=O/p,F=c*Math.cos(C*Math.PI/2),I=d*Math.sin(C*Math.PI/2)+h,B=0,G=L.length;B<G;B++)J((N=E(L[B],U[B],I)).x,N.y,l+F);for(w=0,j=T.length;w<j;w++)for(b=T[w],X=Y[w],B=0,G=b.length;B<G;B++)N=E(b[B],X[B],I),S?J(N.x,N.y+_[a-1].y,_[a-1].x+F):J(N.x,N.y,l+F)}function Q(e,t){var n,i;for(B=e.length;--B>=0;){n=B,(i=B-1)<0&&(i=e.length-1);var r=0,o=a+2*p;for(r=0;r<o;r++){var s=D*r,l=D*(r+1);K(t+n+s,t+i+s,t+i+l,t+n+l)}}}function J(e,t,n){o.push(e),o.push(t),o.push(n)}function Z(e,t,r){$(e),$(t),$(r);var o=i.length/3,s=m.generateTopUV(n,i,o-3,o-2,o-1);ee(s[0]),ee(s[1]),ee(s[2])}function K(e,t,r,o){$(e),$(t),$(o),$(t),$(r),$(o);var s=i.length/3,a=m.generateSideWallUV(n,i,s-6,s-3,s-2,s-1);ee(a[0]),ee(a[1]),ee(a[3]),ee(a[1]),ee(a[2]),ee(a[3])}function $(e){i.push(o[3*e+0]),i.push(o[3*e+1]),i.push(o[3*e+2])}function ee(e){r.push(e.x),r.push(e.y)}!function(){var e=i.length/3;if(u){var t=0,r=D*t;for(B=0;B<R;B++)Z((k=P[B])[2]+r,k[1]+r,k[0]+r);for(r=D*(t=a+2*p),B=0;B<R;B++)Z((k=P[B])[0]+r,k[1]+r,k[2]+r)}else{for(B=0;B<R;B++)Z((k=P[B])[2],k[1],k[0]);for(B=0;B<R;B++)Z((k=P[B])[0]+D*a,k[1]+D*a,k[2]+D*a)}n.addGroup(e,i.length/3-e,0)}(),function(){var e=i.length/3,t=0;for(Q(L,t),t+=L.length,w=0,j=T.length;w<j;w++)Q(b=T[w],t),t+=b.length;n.addGroup(e,i.length/3-e,1)}()}this.addAttribute("position",new Zo(i,3)),this.addAttribute("uv",new Zo(r,2)),this.computeVertexNormals()}Vc.prototype=Object.create(Cs.prototype),Vc.prototype.constructor=Vc,Vc.prototype.toJSON=function(){var e=Cs.prototype.toJSON.call(this);return Wc(this.parameters.shapes,this.parameters.options,e)},Hc.prototype=Object.create(ls.prototype),Hc.prototype.constructor=Hc,Hc.prototype.toJSON=function(){var e=ls.prototype.toJSON.call(this);return Wc(this.parameters.shapes,this.parameters.options,e)};var Xc={generateTopUV:function(e,t,n,i,r){var o=t[3*n],s=t[3*n+1],a=t[3*i],l=t[3*i+1],u=t[3*r],c=t[3*r+1];return[new ur(o,s),new ur(a,l),new ur(u,c)]},generateSideWallUV:function(e,t,n,i,r,o){var s=t[3*n],a=t[3*n+1],l=t[3*n+2],u=t[3*i],c=t[3*i+1],d=t[3*i+2],h=t[3*r],p=t[3*r+1],f=t[3*r+2],m=t[3*o],_=t[3*o+1],g=t[3*o+2];return Math.abs(a-c)<.01?[new ur(s,1-l),new ur(u,1-d),new ur(h,1-f),new ur(m,1-g)]:[new ur(a,1-l),new ur(c,1-d),new ur(p,1-f),new ur(_,1-g)]}};function Wc(e,t,n){if(n.shapes=[],Array.isArray(e))for(var i=0,r=e.length;i<r;i++){var o=e[i];n.shapes.push(o.uuid)}else n.shapes.push(e.uuid);return void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON()),n}function Yc(e,t){Cs.call(this),this.type="TextGeometry",this.parameters={text:e,parameters:t},this.fromBufferGeometry(new qc(e,t)),this.mergeVertices()}function qc(e,t){var n=(t=t||{}).font;if(!n||!n.isFont)return new Cs;var i=n.generateShapes(e,t.size);t.depth=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),Hc.call(this,i,t),this.type="TextBufferGeometry"}function Qc(e,t,n,i,r,o,s){Cs.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:r,thetaStart:o,thetaLength:s},this.fromBufferGeometry(new Jc(e,t,n,i,r,o,s)),this.mergeVertices()}function Jc(e,t,n,i,r,o,s){ls.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:r,thetaStart:o,thetaLength:s},e=e||1,t=Math.max(3,Math.floor(t)||8),n=Math.max(2,Math.floor(n)||6),i=void 0!==i?i:0,r=void 0!==r?r:2*Math.PI,o=void 0!==o?o:0,s=void 0!==s?s:Math.PI;var a,l,u=Math.min(o+s,Math.PI),c=0,d=[],h=new pr,p=new pr,f=[],m=[],_=[],g=[];for(l=0;l<=n;l++){var v=[],y=l/n,x=0;for(0==l&&0==o?x=.5/t:l==n&&u==Math.PI&&(x=-.5/t),a=0;a<=t;a++){var b=a/t;h.x=-e*Math.cos(i+b*r)*Math.sin(o+y*s),h.y=e*Math.cos(o+y*s),h.z=e*Math.sin(i+b*r)*Math.sin(o+y*s),m.push(h.x,h.y,h.z),p.copy(h).normalize(),_.push(p.x,p.y,p.z),g.push(b+x,1-y),v.push(c++)}d.push(v)}for(l=0;l<n;l++)for(a=0;a<t;a++){var w=d[l][a+1],j=d[l][a],S=d[l+1][a],A=d[l+1][a+1];(0!==l||o>0)&&f.push(w,j,A),(l!==n-1||u<Math.PI)&&f.push(j,S,A)}this.setIndex(f),this.addAttribute("position",new Zo(m,3)),this.addAttribute("normal",new Zo(_,3)),this.addAttribute("uv",new Zo(g,2))}function Zc(e,t,n,i,r,o){Cs.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:o},this.fromBufferGeometry(new Kc(e,t,n,i,r,o)),this.mergeVertices()}function Kc(e,t,n,i,r,o){ls.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:o},e=e||.5,t=t||1,r=void 0!==r?r:0,o=void 0!==o?o:2*Math.PI,n=void 0!==n?Math.max(3,n):8;var s,a,l,u=[],c=[],d=[],h=[],p=e,f=(t-e)/(i=void 0!==i?Math.max(1,i):1),m=new pr,_=new ur;for(a=0;a<=i;a++){for(l=0;l<=n;l++)s=r+l/n*o,m.x=p*Math.cos(s),m.y=p*Math.sin(s),c.push(m.x,m.y,m.z),d.push(0,0,1),_.x=(m.x/t+1)/2,_.y=(m.y/t+1)/2,h.push(_.x,_.y);p+=f}for(a=0;a<i;a++){var g=a*(n+1);for(l=0;l<n;l++){var v=s=l+g,y=s+n+1,x=s+n+2,b=s+1;u.push(v,y,b),u.push(y,x,b)}}this.setIndex(u),this.addAttribute("position",new Zo(c,3)),this.addAttribute("normal",new Zo(d,3)),this.addAttribute("uv",new Zo(h,2))}function $c(e,t,n,i){Cs.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:i},this.fromBufferGeometry(new ed(e,t,n,i)),this.mergeVertices()}function ed(e,t,n,i){ls.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:i},t=Math.floor(t)||12,n=n||0,i=i||2*Math.PI,i=lr.clamp(i,0,2*Math.PI);var r,o,s,a=[],l=[],u=[],c=1/t,d=new pr,h=new ur;for(o=0;o<=t;o++){var p=n+o*c*i,f=Math.sin(p),m=Math.cos(p);for(s=0;s<=e.length-1;s++)d.x=e[s].x*f,d.y=e[s].y,d.z=e[s].x*m,l.push(d.x,d.y,d.z),h.x=o/t,h.y=s/(e.length-1),u.push(h.x,h.y)}for(o=0;o<t;o++)for(s=0;s<e.length-1;s++){var _=r=s+o*e.length,g=r+e.length,v=r+e.length+1,y=r+1;a.push(_,g,y),a.push(g,v,y)}if(this.setIndex(a),this.addAttribute("position",new Zo(l,3)),this.addAttribute("uv",new Zo(u,2)),this.computeVertexNormals(),i===2*Math.PI){var x=this.attributes.normal.array,b=new pr,w=new pr,j=new pr;for(r=t*e.length*3,o=0,s=0;o<e.length;o++,s+=3)b.x=x[s+0],b.y=x[s+1],b.z=x[s+2],w.x=x[r+s+0],w.y=x[r+s+1],w.z=x[r+s+2],j.addVectors(b,w).normalize(),x[s+0]=x[r+s+0]=j.x,x[s+1]=x[r+s+1]=j.y,x[s+2]=x[r+s+2]=j.z}}function td(e,t){Cs.call(this),this.type="ShapeGeometry","object"==typeof t&&(t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new nd(e,t)),this.mergeVertices()}function nd(e,t){ls.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:t},t=t||12;var n=[],i=[],r=[],o=[],s=0,a=0;if(!1===Array.isArray(e))u(e);else for(var l=0;l<e.length;l++)u(e[l]),this.addGroup(s,a,l),s+=a,a=0;function u(e){var s,l,u,c=i.length/3,d=e.extractPoints(t),h=d.shape,p=d.holes;for(!1===Uc.isClockWise(h)&&(h=h.reverse()),s=0,l=p.length;s<l;s++)u=p[s],!0===Uc.isClockWise(u)&&(p[s]=u.reverse());var f=Uc.triangulateShape(h,p);for(s=0,l=p.length;s<l;s++)u=p[s],h=h.concat(u);for(s=0,l=h.length;s<l;s++){var m=h[s];i.push(m.x,m.y,0),r.push(0,0,1),o.push(m.x,m.y)}for(s=0,l=f.length;s<l;s++){var _=f[s],g=_[0]+c,v=_[1]+c,y=_[2]+c;n.push(g,v,y),a+=3}}this.setIndex(n),this.addAttribute("position",new Zo(i,3)),this.addAttribute("normal",new Zo(r,3)),this.addAttribute("uv",new Zo(o,2))}function id(e,t){if(t.shapes=[],Array.isArray(e))for(var n=0,i=e.length;n<i;n++){var r=e[n];t.shapes.push(r.uuid)}else t.shapes.push(e.uuid);return t}function rd(e,t){ls.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:t},t=void 0!==t?t:1;var n,i,r,o,s=[],a=Math.cos(lr.DEG2RAD*t),l=[0,0],u={},c=["a","b","c"];e.isBufferGeometry?(o=new Cs).fromBufferGeometry(e):o=e.clone(),o.mergeVertices(),o.computeFaceNormals();for(var d=o.vertices,h=o.faces,p=0,f=h.length;p<f;p++)for(var m=h[p],_=0;_<3;_++)n=m[c[_]],i=m[c[(_+1)%3]],l[0]=Math.min(n,i),l[1]=Math.max(n,i),void 0===u[r=l[0]+","+l[1]]?u[r]={index1:l[0],index2:l[1],face1:p,face2:void 0}:u[r].face2=p;for(r in u){var g=u[r];if(void 0===g.face2||h[g.face1].normal.dot(h[g.face2].normal)<=a){var v=d[g.index1];s.push(v.x,v.y,v.z),v=d[g.index2],s.push(v.x,v.y,v.z)}}this.addAttribute("position",new Zo(s,3))}function od(e,t,n,i,r,o,s,a){Cs.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:r,openEnded:o,thetaStart:s,thetaLength:a},this.fromBufferGeometry(new sd(e,t,n,i,r,o,s,a)),this.mergeVertices()}function sd(e,t,n,i,r,o,s,a){ls.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:r,openEnded:o,thetaStart:s,thetaLength:a};var l=this;e=void 0!==e?e:1,t=void 0!==t?t:1,n=n||1,i=Math.floor(i)||8,r=Math.floor(r)||1,o=void 0!==o&&o,s=void 0!==s?s:0,a=void 0!==a?a:2*Math.PI;var u=[],c=[],d=[],h=[],p=0,f=[],m=n/2,_=0;function g(n){var r,o,f,g=new ur,v=new pr,y=0,x=!0===n?e:t,b=!0===n?1:-1;for(o=p,r=1;r<=i;r++)c.push(0,m*b,0),d.push(0,b,0),h.push(.5,.5),p++;for(f=p,r=0;r<=i;r++){var w=r/i*a+s,j=Math.cos(w),S=Math.sin(w);v.x=x*S,v.y=m*b,v.z=x*j,c.push(v.x,v.y,v.z),d.push(0,b,0),g.x=.5*j+.5,g.y=.5*S*b+.5,h.push(g.x,g.y),p++}for(r=0;r<i;r++){var A=o+r,M=f+r;!0===n?u.push(M,M+1,A):u.push(M+1,M,A),y+=3}l.addGroup(_,y,!0===n?1:2),_+=y}!function(){var o,g,v=new pr,y=new pr,x=0,b=(t-e)/n;for(g=0;g<=r;g++){var w=[],j=g/r,S=j*(t-e)+e;for(o=0;o<=i;o++){var A=o/i,M=A*a+s,T=Math.sin(M),P=Math.cos(M);y.x=S*T,y.y=-j*n+m,y.z=S*P,c.push(y.x,y.y,y.z),v.set(T,b,P).normalize(),d.push(v.x,v.y,v.z),h.push(A,1-j),w.push(p++)}f.push(w)}for(o=0;o<i;o++)for(g=0;g<r;g++){var L=f[g][o],E=f[g+1][o],O=f[g+1][o+1],I=f[g][o+1];u.push(L,E,I),u.push(E,O,I),x+=6}l.addGroup(_,x,0),_+=x}(),!1===o&&(e>0&&g(!0),t>0&&g(!1)),this.setIndex(u),this.addAttribute("position",new Zo(c,3)),this.addAttribute("normal",new Zo(d,3)),this.addAttribute("uv",new Zo(h,2))}function ad(e,t,n,i,r,o,s){od.call(this,0,e,t,n,i,r,o,s),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:o,thetaLength:s}}function ld(e,t,n,i,r,o,s){sd.call(this,0,e,t,n,i,r,o,s),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:o,thetaLength:s}}function ud(e,t,n,i){Cs.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:i},this.fromBufferGeometry(new cd(e,t,n,i)),this.mergeVertices()}function cd(e,t,n,i){ls.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:i},e=e||1,t=void 0!==t?Math.max(3,t):8,n=void 0!==n?n:0,i=void 0!==i?i:2*Math.PI;var r,o,s=[],a=[],l=[],u=[],c=new pr,d=new ur;for(a.push(0,0,0),l.push(0,0,1),u.push(.5,.5),o=0,r=3;o<=t;o++,r+=3){var h=n+o/t*i;c.x=e*Math.cos(h),c.y=e*Math.sin(h),a.push(c.x,c.y,c.z),l.push(0,0,1),d.x=(a[r]/e+1)/2,d.y=(a[r+1]/e+1)/2,u.push(d.x,d.y)}for(r=1;r<=t;r++)s.push(r,r+1,0);this.setIndex(s),this.addAttribute("position",new Zo(a,3)),this.addAttribute("normal",new Zo(l,3)),this.addAttribute("uv",new Zo(u,2))}Yc.prototype=Object.create(Cs.prototype),Yc.prototype.constructor=Yc,qc.prototype=Object.create(Hc.prototype),qc.prototype.constructor=qc,Qc.prototype=Object.create(Cs.prototype),Qc.prototype.constructor=Qc,Jc.prototype=Object.create(ls.prototype),Jc.prototype.constructor=Jc,Zc.prototype=Object.create(Cs.prototype),Zc.prototype.constructor=Zc,Kc.prototype=Object.create(ls.prototype),Kc.prototype.constructor=Kc,$c.prototype=Object.create(Cs.prototype),$c.prototype.constructor=$c,ed.prototype=Object.create(ls.prototype),ed.prototype.constructor=ed,td.prototype=Object.create(Cs.prototype),td.prototype.constructor=td,td.prototype.toJSON=function(){var e=Cs.prototype.toJSON.call(this);return id(this.parameters.shapes,e)},nd.prototype=Object.create(ls.prototype),nd.prototype.constructor=nd,nd.prototype.toJSON=function(){var e=ls.prototype.toJSON.call(this);return id(this.parameters.shapes,e)},rd.prototype=Object.create(ls.prototype),rd.prototype.constructor=rd,od.prototype=Object.create(Cs.prototype),od.prototype.constructor=od,sd.prototype=Object.create(ls.prototype),sd.prototype.constructor=sd,ad.prototype=Object.create(od.prototype),ad.prototype.constructor=ad,ld.prototype=Object.create(sd.prototype),ld.prototype.constructor=ld,ud.prototype=Object.create(Cs.prototype),ud.prototype.constructor=ud,cd.prototype=Object.create(ls.prototype),cd.prototype.constructor=cd;var dd=Object.freeze({WireframeGeometry:$u,ParametricGeometry:ec,ParametricBufferGeometry:tc,TetrahedronGeometry:rc,TetrahedronBufferGeometry:oc,OctahedronGeometry:sc,OctahedronBufferGeometry:ac,IcosahedronGeometry:lc,IcosahedronBufferGeometry:uc,DodecahedronGeometry:cc,DodecahedronBufferGeometry:dc,PolyhedronGeometry:nc,PolyhedronBufferGeometry:ic,TubeGeometry:hc,TubeBufferGeometry:pc,TorusKnotGeometry:fc,TorusKnotBufferGeometry:mc,TorusGeometry:_c,TorusBufferGeometry:gc,TextGeometry:Yc,TextBufferGeometry:qc,SphereGeometry:Qc,SphereBufferGeometry:Jc,RingGeometry:Zc,RingBufferGeometry:Kc,PlaneGeometry:aa,PlaneBufferGeometry:la,LatheGeometry:$c,LatheBufferGeometry:ed,ShapeGeometry:td,ShapeBufferGeometry:nd,ExtrudeGeometry:Vc,ExtrudeBufferGeometry:Hc,EdgesGeometry:rd,ConeGeometry:ad,ConeBufferGeometry:ld,CylinderGeometry:od,CylinderBufferGeometry:sd,CircleGeometry:ud,CircleBufferGeometry:cd,BoxGeometry:Fs,BoxBufferGeometry:Ns});function hd(e){Bo.call(this),this.type="ShadowMaterial",this.color=new No(0),this.transparent=!0,this.setValues(e)}function pd(e){Bs.call(this,e),this.type="RawShaderMaterial"}function fd(e){Bo.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new No(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new No(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=nr,this.normalScale=new ur(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function md(e){fd.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearcoat=0,this.clearcoatRoughness=0,this.sheen=null,this.clearcoatNormalScale=new ur(1,1),this.clearcoatNormalMap=null,this.transparency=0,this.setValues(e)}function _d(e){Bo.call(this),this.type="MeshPhongMaterial",this.color=new No(16777215),this.specular=new No(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new No(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=nr,this.normalScale=new ur(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Tn,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function gd(e){_d.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(e)}function vd(e){Bo.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=nr,this.normalScale=new ur(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function yd(e){Bo.call(this),this.type="MeshLambertMaterial",this.color=new No(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new No(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Tn,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function xd(e){Bo.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new No(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=nr,this.normalScale=new ur(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.lights=!1,this.setValues(e)}function bd(e){Ou.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}hd.prototype=Object.create(Bo.prototype),hd.prototype.constructor=hd,hd.prototype.isShadowMaterial=!0,hd.prototype.copy=function(e){return Bo.prototype.copy.call(this,e),this.color.copy(e.color),this},pd.prototype=Object.create(Bs.prototype),pd.prototype.constructor=pd,pd.prototype.isRawShaderMaterial=!0,fd.prototype=Object.create(Bo.prototype),fd.prototype.constructor=fd,fd.prototype.isMeshStandardMaterial=!0,fd.prototype.copy=function(e){return Bo.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},md.prototype=Object.create(fd.prototype),md.prototype.constructor=md,md.prototype.isMeshPhysicalMaterial=!0,md.prototype.copy=function(e){return fd.prototype.copy.call(this,e),this.defines={STANDARD:"",PHYSICAL:""},this.reflectivity=e.reflectivity,this.clearcoat=e.clearcoat,this.clearcoatRoughness=e.clearcoatRoughness,e.sheen?this.sheen=(this.sheen||new No).copy(e.sheen):this.sheen=null,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.transparency=e.transparency,this},_d.prototype=Object.create(Bo.prototype),_d.prototype.constructor=_d,_d.prototype.isMeshPhongMaterial=!0,_d.prototype.copy=function(e){return Bo.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},gd.prototype=Object.create(_d.prototype),gd.prototype.constructor=gd,gd.prototype.isMeshToonMaterial=!0,gd.prototype.copy=function(e){return _d.prototype.copy.call(this,e),this.gradientMap=e.gradientMap,this},vd.prototype=Object.create(Bo.prototype),vd.prototype.constructor=vd,vd.prototype.isMeshNormalMaterial=!0,vd.prototype.copy=function(e){return Bo.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},yd.prototype=Object.create(Bo.prototype),yd.prototype.constructor=yd,yd.prototype.isMeshLambertMaterial=!0,yd.prototype.copy=function(e){return Bo.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},xd.prototype=Object.create(Bo.prototype),xd.prototype.constructor=xd,xd.prototype.isMeshMatcapMaterial=!0,xd.prototype.copy=function(e){return Bo.prototype.copy.call(this,e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},bd.prototype=Object.create(Ou.prototype),bd.prototype.constructor=bd,bd.prototype.isLineDashedMaterial=!0,bd.prototype.copy=function(e){return Ou.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var wd=Object.freeze({ShadowMaterial:hd,SpriteMaterial:lu,RawShaderMaterial:pd,ShaderMaterial:Bs,PointsMaterial:Gu,MeshPhysicalMaterial:md,MeshStandardMaterial:fd,MeshPhongMaterial:_d,MeshToonMaterial:gd,MeshNormalMaterial:vd,MeshLambertMaterial:yd,MeshDepthMaterial:Bl,MeshDistanceMaterial:Gl,MeshBasicMaterial:Go,MeshMatcapMaterial:xd,LineDashedMaterial:bd,LineBasicMaterial:Ou,Material:Bo}),jd={arraySlice:function(e,t,n){return jd.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){for(var t=e.length,n=new Array(t),i=0;i!==t;++i)n[i]=i;return n.sort(function(t,n){return e[t]-e[n]}),n},sortedArray:function(e,t,n){for(var i=e.length,r=new e.constructor(i),o=0,s=0;s!==i;++o)for(var a=n[o]*t,l=0;l!==t;++l)r[s++]=e[a+l];return r},flattenJSON:function(e,t,n,i){for(var r=1,o=e[0];void 0!==o&&void 0===o[i];)o=e[r++];if(void 0!==o){var s=o[i];if(void 0!==s)if(Array.isArray(s))do{void 0!==(s=o[i])&&(t.push(o.time),n.push.apply(n,s)),o=e[r++]}while(void 0!==o);else if(void 0!==s.toArray)do{void 0!==(s=o[i])&&(t.push(o.time),s.toArray(n,n.length)),o=e[r++]}while(void 0!==o);else do{void 0!==(s=o[i])&&(t.push(o.time),n.push(s)),o=e[r++]}while(void 0!==o)}}};function Sd(e,t,n,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new t.constructor(n),this.sampleValues=t,this.valueSize=n}function Ad(e,t,n,i){Sd.call(this,e,t,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function Md(e,t,n,i){Sd.call(this,e,t,n,i)}function Td(e,t,n,i){Sd.call(this,e,t,n,i)}function Pd(e,t,n,i){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=jd.convertArray(t,this.TimeBufferType),this.values=jd.convertArray(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}function Ld(e,t,n){Pd.call(this,e,t,n)}function Ed(e,t,n,i){Pd.call(this,e,t,n,i)}function Od(e,t,n,i){Pd.call(this,e,t,n,i)}function Id(e,t,n,i){Sd.call(this,e,t,n,i)}function Cd(e,t,n,i){Pd.call(this,e,t,n,i)}function Fd(e,t,n,i){Pd.call(this,e,t,n,i)}function Nd(e,t,n,i){Pd.call(this,e,t,n,i)}function kd(e,t,n){this.name=e,this.tracks=n,this.duration=void 0!==t?t:-1,this.uuid=lr.generateUUID(),this.duration<0&&this.resetDuration()}function Dd(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Od;case"vector":case"vector2":case"vector3":case"vector4":return Nd;case"color":return Ed;case"quaternion":return Cd;case"bool":case"boolean":return Ld;case"string":return Fd}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){var n=[],i=[];jd.flattenJSON(e.keys,n,i,"value"),e.times=n,e.values=i}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}Object.assign(Sd.prototype,{evaluate:function(e){var t=this.parameterPositions,n=this._cachedIndex,i=t[n],r=t[n-1];e:{t:{var o;n:{i:if(!(e<i)){for(var s=n+2;;){if(void 0===i){if(e<r)break i;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,r)}if(n===s)break;if(r=i,e<(i=t[++n]))break t}o=t.length;break n}if(e>=r)break e;var a=t[1];e<a&&(n=2,r=a);for(s=n-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,e,i);if(n===s)break;if(i=r,e>=(r=t[--n-1]))break t}o=n,n=0}for(;n<o;){var l=n+o>>>1;e<t[l]?o=l:n=l+1}if(i=t[n],void 0===(r=t[n-1]))return this._cachedIndex=0,this.beforeStart_(0,e,i);if(void 0===i)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,r,e)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,e,i)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){for(var t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=e*i,o=0;o!==i;++o)t[o]=n[r+o];return t},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(Sd.prototype,{beforeStart_:Sd.prototype.copySampleValue_,afterEnd_:Sd.prototype.copySampleValue_}),Ad.prototype=Object.assign(Object.create(Sd.prototype),{constructor:Ad,DefaultSettings_:{endingStart:Gi,endingEnd:Gi},intervalChanged_:function(e,t,n){var i=this.parameterPositions,r=e-2,o=e+1,s=i[r],a=i[o];if(void 0===s)switch(this.getSettings_().endingStart){case 2401:r=e,s=2*t-n;break;case 2402:s=t+i[r=i.length-2]-i[r+1];break;default:r=e,s=n}if(void 0===a)switch(this.getSettings_().endingEnd){case 2401:o=e,a=2*n-t;break;case 2402:o=1,a=n+i[1]-i[0];break;default:o=e-1,a=t}var l=.5*(n-t),u=this.valueSize;this._weightPrev=l/(t-s),this._weightNext=l/(a-n),this._offsetPrev=r*u,this._offsetNext=o*u},interpolate_:function(e,t,n,i){for(var r=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=e*s,l=a-s,u=this._offsetPrev,c=this._offsetNext,d=this._weightPrev,h=this._weightNext,p=(n-t)/(i-t),f=p*p,m=f*p,_=-d*m+2*d*f-d*p,g=(1+d)*m+(-1.5-2*d)*f+(-.5+d)*p+1,v=(-1-h)*m+(1.5+h)*f+.5*p,y=h*m-h*f,x=0;x!==s;++x)r[x]=_*o[u+x]+g*o[l+x]+v*o[a+x]+y*o[c+x];return r}}),Md.prototype=Object.assign(Object.create(Sd.prototype),{constructor:Md,interpolate_:function(e,t,n,i){for(var r=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=e*s,l=a-s,u=(n-t)/(i-t),c=1-u,d=0;d!==s;++d)r[d]=o[l+d]*c+o[a+d]*u;return r}}),Td.prototype=Object.assign(Object.create(Sd.prototype),{constructor:Td,interpolate_:function(e){return this.copySampleValue_(e-1)}}),Object.assign(Pd,{toJSON:function(e){var t,n=e.constructor;if(void 0!==n.toJSON)t=n.toJSON(e);else{t={name:e.name,times:jd.convertArray(e.times,Array),values:jd.convertArray(e.values,Array)};var i=e.getInterpolation();i!==e.DefaultInterpolation&&(t.interpolation=i)}return t.type=e.ValueTypeName,t}}),Object.assign(Pd.prototype,{constructor:Pd,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(e){return new Td(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new Md(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new Ad(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){var t;switch(e){case 2300:t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return this}return this.createInterpolant=t,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e)for(var t=this.times,n=0,i=t.length;n!==i;++n)t[n]+=e;return this},scale:function(e){if(1!==e)for(var t=this.times,n=0,i=t.length;n!==i;++n)t[n]*=e;return this},trim:function(e,t){for(var n=this.times,i=n.length,r=0,o=i-1;r!==i&&n[r]<e;)++r;for(;-1!==o&&n[o]>t;)--o;if(++o,0!==r||o!==i){r>=o&&(r=(o=Math.max(o,1))-1);var s=this.getValueSize();this.times=jd.arraySlice(n,r,o),this.values=jd.arraySlice(this.values,r*s,o*s)}return this},validate:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!=0&&(e=!1);var n=this.times,i=this.values,r=n.length;0===r&&(e=!1);for(var o=null,s=0;s!==r;s++){var a=n[s];if("number"==typeof a&&isNaN(a)){e=!1;break}if(null!==o&&o>a){e=!1;break}o=a}if(void 0!==i&&jd.isTypedArray(i)){s=0;for(var l=i.length;s!==l;++s){var u=i[s];if(isNaN(u)){e=!1;break}}}return e},optimize:function(){for(var e=this.times,t=this.values,n=this.getValueSize(),i=2302===this.getInterpolation(),r=1,o=e.length-1,s=1;s<o;++s){var a=!1,l=e[s];if(l!==e[s+1]&&(1!==s||l!==l[0]))if(i)a=!0;else for(var u=s*n,c=u-n,d=u+n,h=0;h!==n;++h){var p=t[u+h];if(p!==t[c+h]||p!==t[d+h]){a=!0;break}}if(a){if(s!==r){e[r]=e[s];var f=s*n,m=r*n;for(h=0;h!==n;++h)t[m+h]=t[f+h]}++r}}if(o>0){e[r]=e[o];for(f=o*n,m=r*n,h=0;h!==n;++h)t[m+h]=t[f+h];++r}return r!==e.length&&(this.times=jd.arraySlice(e,0,r),this.values=jd.arraySlice(t,0,r*n)),this},clone:function(){var e=jd.arraySlice(this.times,0),t=jd.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}),Ld.prototype=Object.assign(Object.create(Pd.prototype),{constructor:Ld,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Ed.prototype=Object.assign(Object.create(Pd.prototype),{constructor:Ed,ValueTypeName:"color"}),Od.prototype=Object.assign(Object.create(Pd.prototype),{constructor:Od,ValueTypeName:"number"}),Id.prototype=Object.assign(Object.create(Sd.prototype),{constructor:Id,interpolate_:function(e,t,n,i){for(var r=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=e*s,l=(n-t)/(i-t),u=a+s;a!==u;a+=4)cr.slerpFlat(r,0,o,a-s,o,a,l);return r}}),Cd.prototype=Object.assign(Object.create(Pd.prototype),{constructor:Cd,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(e){return new Id(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),Fd.prototype=Object.assign(Object.create(Pd.prototype),{constructor:Fd,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Nd.prototype=Object.assign(Object.create(Pd.prototype),{constructor:Nd,ValueTypeName:"vector"}),Object.assign(kd,{parse:function(e){for(var t=[],n=e.tracks,i=1/(e.fps||1),r=0,o=n.length;r!==o;++r)t.push(Dd(n[r]).scale(i));return new kd(e.name,e.duration,t)},toJSON:function(e){for(var t=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid},r=0,o=n.length;r!==o;++r)t.push(Pd.toJSON(n[r]));return i},CreateFromMorphTargetSequence:function(e,t,n,i){for(var r=t.length,o=[],s=0;s<r;s++){var a=[],l=[];a.push((s+r-1)%r,s,(s+1)%r),l.push(0,1,0);var u=jd.getKeyframeOrder(a);a=jd.sortedArray(a,1,u),l=jd.sortedArray(l,1,u),i||0!==a[0]||(a.push(r),l.push(l[0])),o.push(new Od(".morphTargetInfluences["+t[s].name+"]",a,l).scale(1/n))}return new kd(e,-1,o)},findByName:function(e,t){var n=e;if(!Array.isArray(e)){var i=e;n=i.geometry&&i.geometry.animations||i.animations}for(var r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null},CreateClipsFromMorphTargetSequences:function(e,t,n){for(var i={},r=/^([\w-]*?)([\d]+)$/,o=0,s=e.length;o<s;o++){var a=e[o],l=a.name.match(r);if(l&&l.length>1){var u=i[d=l[1]];u||(i[d]=u=[]),u.push(a)}}var c=[];for(var d in i)c.push(kd.CreateFromMorphTargetSequence(d,i[d],t,n));return c},parseAnimation:function(e,t){if(!e)return null;for(var n=function(e,t,n,i,r){if(0!==n.length){var o=[],s=[];jd.flattenJSON(n,o,s,i),0!==o.length&&r.push(new e(t,o,s))}},i=[],r=e.name||"default",o=e.length||-1,s=e.fps||30,a=e.hierarchy||[],l=0;l<a.length;l++){var u=a[l].keys;if(u&&0!==u.length)if(u[0].morphTargets){for(var c={},d=0;d<u.length;d++)if(u[d].morphTargets)for(var h=0;h<u[d].morphTargets.length;h++)c[u[d].morphTargets[h]]=-1;for(var p in c){var f=[],m=[];for(h=0;h!==u[d].morphTargets.length;++h){var _=u[d];f.push(_.time),m.push(_.morphTarget===p?1:0)}i.push(new Od(".morphTargetInfluence["+p+"]",f,m))}o=c.length*(s||1)}else{var g=".bones["+t[l].name+"]";n(Nd,g+".position",u,"pos",i),n(Cd,g+".quaternion",u,"rot",i),n(Nd,g+".scale",u,"scl",i)}}return 0===i.length?null:new kd(r,o,i)}}),Object.assign(kd.prototype,{resetDuration:function(){for(var e=0,t=0,n=this.tracks.length;t!==n;++t){var i=this.tracks[t];e=Math.max(e,i.times[i.times.length-1])}return this.duration=e,this},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},validate:function(){for(var e=!0,t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this},clone:function(){for(var e=[],t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new kd(this.name,this.duration,e)}});var Rd={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};function zd(e,t,n){var i=this,r=!1,o=0,s=0,a=void 0;this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){s++,!1===r&&void 0!==i.onStart&&i.onStart(e,o,s),r=!0},this.itemEnd=function(e){o++,void 0!==i.onProgress&&i.onProgress(e,o,s),o===s&&(r=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(e){void 0!==i.onError&&i.onError(e)},this.resolveURL=function(e){return a?a(e):e},this.setURLModifier=function(e){return a=e,this}}var Ud=new zd;function Bd(e){this.manager=void 0!==e?e:Ud,this.crossOrigin="anonymous",this.path="",this.resourcePath=""}Object.assign(Bd.prototype,{load:function(){},parse:function(){},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this},setResourcePath:function(e){return this.resourcePath=e,this}}),Bd.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){for(var t=this.handlers,n=0,i=t.length;n<i;n+=2){var r=t[n],o=t[n+1];if(r.test(e))return o}return null}};var Gd={};function Vd(e){Bd.call(this,e)}function Hd(e){Bd.call(this,e)}function Xd(e){Bd.call(this,e),this._parser=null}function Wd(e){Bd.call(this,e),this._parser=null}function Yd(e){Bd.call(this,e)}function qd(e){Bd.call(this,e)}function Qd(e){Bd.call(this,e)}function Jd(){this.type="Curve",this.arcLengthDivisions=200}function Zd(e,t,n,i,r,o,s,a){Jd.call(this),this.type="EllipseCurve",this.aX=e||0,this.aY=t||0,this.xRadius=n||1,this.yRadius=i||1,this.aStartAngle=r||0,this.aEndAngle=o||2*Math.PI,this.aClockwise=s||!1,this.aRotation=a||0}function Kd(e,t,n,i,r,o){Zd.call(this,e,t,n,n,i,r,o),this.type="ArcCurve"}function $d(){var e=0,t=0,n=0,i=0;function r(r,o,s,a){e=r,t=s,n=-3*r+3*o-2*s-a,i=2*r-2*o+s+a}return{initCatmullRom:function(e,t,n,i,o){r(t,n,o*(n-e),o*(i-t))},initNonuniformCatmullRom:function(e,t,n,i,o,s,a){var l=(t-e)/o-(n-e)/(o+s)+(n-t)/s,u=(n-t)/s-(i-t)/(s+a)+(i-n)/a;r(t,n,l*=s,u*=s)},calc:function(r){var o=r*r;return e+t*r+n*o+i*(o*r)}}}Vd.prototype=Object.assign(Object.create(Bd.prototype),{constructor:Vd,load:function(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var r=this,o=Rd.get(e);if(void 0!==o)return r.manager.itemStart(e),setTimeout(function(){t&&t(o),r.manager.itemEnd(e)},0),o;if(void 0===Gd[e]){var s=e.match(/^data:(.*?)(;base64)?,(.*)$/);if(s){var a=s[1],l=!!s[2],u=s[3];u=decodeURIComponent(u),l&&(u=atob(u));try{var c,d=(this.responseType||"").toLowerCase();switch(d){case"arraybuffer":case"blob":for(var h=new Uint8Array(u.length),p=0;p<u.length;p++)h[p]=u.charCodeAt(p);c="blob"===d?new Blob([h.buffer],{type:a}):h.buffer;break;case"document":var f=new DOMParser;c=f.parseFromString(u,a);break;case"json":c=JSON.parse(u);break;default:c=u}setTimeout(function(){t&&t(c),r.manager.itemEnd(e)},0)}catch(t){setTimeout(function(){i&&i(t),r.manager.itemError(e),r.manager.itemEnd(e)},0)}}else{Gd[e]=[],Gd[e].push({onLoad:t,onProgress:n,onError:i});var m=new XMLHttpRequest;for(var _ in m.open("GET",e,!0),m.addEventListener("load",function(t){var n=this.response;Rd.add(e,n);var i=Gd[e];if(delete Gd[e],200===this.status||0===this.status){this.status;for(var o=0,s=i.length;o<s;o++){(a=i[o]).onLoad&&a.onLoad(n)}r.manager.itemEnd(e)}else{for(o=0,s=i.length;o<s;o++){var a;(a=i[o]).onError&&a.onError(t)}r.manager.itemError(e),r.manager.itemEnd(e)}},!1),m.addEventListener("progress",function(t){for(var n=Gd[e],i=0,r=n.length;i<r;i++){var o=n[i];o.onProgress&&o.onProgress(t)}},!1),m.addEventListener("error",function(t){var n=Gd[e];delete Gd[e];for(var i=0,o=n.length;i<o;i++){var s=n[i];s.onError&&s.onError(t)}r.manager.itemError(e),r.manager.itemEnd(e)},!1),m.addEventListener("abort",function(t){var n=Gd[e];delete Gd[e];for(var i=0,o=n.length;i<o;i++){var s=n[i];s.onError&&s.onError(t)}r.manager.itemError(e),r.manager.itemEnd(e)},!1),void 0!==this.responseType&&(m.responseType=this.responseType),void 0!==this.withCredentials&&(m.withCredentials=this.withCredentials),m.overrideMimeType&&m.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)m.setRequestHeader(_,this.requestHeader[_]);m.send(null)}return r.manager.itemStart(e),m}Gd[e].push({onLoad:t,onProgress:n,onError:i})},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}}),Hd.prototype=Object.assign(Object.create(Bd.prototype),{constructor:Hd,load:function(e,t,n,i){var r=this,o=new Vd(r.manager);o.setPath(r.path),o.load(e,function(e){t(r.parse(JSON.parse(e)))},n,i)},parse:function(e){for(var t=[],n=0;n<e.length;n++){var i=kd.parse(e[n]);t.push(i)}return t}}),Xd.prototype=Object.assign(Object.create(Bd.prototype),{constructor:Xd,load:function(e,t,n,i){var r=this,o=[],s=new Ju;s.image=o;var a=new Vd(this.manager);function l(l){a.load(e[l],function(e){var n=r._parser(e,!0);o[l]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},6===(u+=1)&&(1===n.mipmapCount&&(s.minFilter=Qn),s.format=n.format,s.needsUpdate=!0,t&&t(s))},n,i)}if(a.setPath(this.path),a.setResponseType("arraybuffer"),Array.isArray(e))for(var u=0,c=0,d=e.length;c<d;++c)l(c);else a.load(e,function(e){var n=r._parser(e,!0);if(n.isCubemap)for(var i=n.mipmaps.length/n.mipmapCount,a=0;a<i;a++){o[a]={mipmaps:[]};for(var l=0;l<n.mipmapCount;l++)o[a].mipmaps.push(n.mipmaps[a*n.mipmapCount+l]),o[a].format=n.format,o[a].width=n.width,o[a].height=n.height}else s.image.width=n.width,s.image.height=n.height,s.mipmaps=n.mipmaps;1===n.mipmapCount&&(s.minFilter=Qn),s.format=n.format,s.needsUpdate=!0,t&&t(s)},n,i);return s}}),Wd.prototype=Object.assign(Object.create(Bd.prototype),{constructor:Wd,load:function(e,t,n,i){var r=this,o=new qs,s=new Vd(this.manager);return s.setResponseType("arraybuffer"),s.setPath(this.path),s.load(e,function(e){var n=r._parser(e);n&&(void 0!==n.image?o.image=n.image:void 0!==n.data&&(o.image.width=n.width,o.image.height=n.height,o.image.data=n.data),o.wrapS=void 0!==n.wrapS?n.wrapS:Hn,o.wrapT=void 0!==n.wrapT?n.wrapT:Hn,o.magFilter=void 0!==n.magFilter?n.magFilter:Qn,o.minFilter=void 0!==n.minFilter?n.minFilter:Zn,o.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.mipmaps&&(o.mipmaps=n.mipmaps),1===n.mipmapCount&&(o.minFilter=Qn),o.needsUpdate=!0,t&&t(o,n))},n,i),o}}),Yd.prototype=Object.assign(Object.create(Bd.prototype),{constructor:Yd,load:function(e,t,n,i){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var r=this,o=Rd.get(e);if(void 0!==o)return r.manager.itemStart(e),setTimeout(function(){t&&t(o),r.manager.itemEnd(e)},0),o;var s=document.createElementNS("http://www.w3.org/1999/xhtml","img");function a(){s.removeEventListener("load",a,!1),s.removeEventListener("error",l,!1),Rd.add(e,this),t&&t(this),r.manager.itemEnd(e)}function l(t){s.removeEventListener("load",a,!1),s.removeEventListener("error",l,!1),i&&i(t),r.manager.itemError(e),r.manager.itemEnd(e)}return s.addEventListener("load",a,!1),s.addEventListener("error",l,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(s.crossOrigin=this.crossOrigin),r.manager.itemStart(e),s.src=e,s}}),qd.prototype=Object.assign(Object.create(Bd.prototype),{constructor:qd,load:function(e,t,n,i){var r=new xa,o=new Yd(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);var s=0;function a(n){o.load(e[n],function(e){r.images[n]=e,6===++s&&(r.needsUpdate=!0,t&&t(r))},void 0,i)}for(var l=0;l<e.length;++l)a(l);return r}}),Qd.prototype=Object.assign(Object.create(Bd.prototype),{constructor:Qd,load:function(e,t,n,i){var r=new yr,o=new Yd(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(n){r.image=n;var i=e.search(/\.jpe?g($|\?)/i)>0||0===e.search(/^data\:image\/jpeg/);r.format=i?di:hi,r.needsUpdate=!0,void 0!==t&&t(r)},n,i),r}}),Object.assign(Jd.prototype,{getPoint:function(){return null},getPointAt:function(e,t){var n=this.getUtoTmapping(e);return this.getPoint(n,t)},getPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return t},getSpacedPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(void 0===e&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,n,i=[],r=this.getPoint(0),o=0;for(i.push(0),n=1;n<=e;n++)o+=(t=this.getPoint(n/e)).distanceTo(r),i.push(o),r=t;return this.cacheArcLengths=i,i},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){var n,i=this.getLengths(),r=0,o=i.length;n=t||e*i[o-1];for(var s,a=0,l=o-1;a<=l;)if((s=i[r=Math.floor(a+(l-a)/2)]-n)<0)a=r+1;else{if(!(s>0)){l=r;break}l=r-1}if(i[r=l]===n)return r/(o-1);var u=i[r];return(r+(n-u)/(i[r+1]-u))/(o-1)},getTangent:function(e){var t=e-1e-4,n=e+1e-4;t<0&&(t=0),n>1&&(n=1);var i=this.getPoint(t);return this.getPoint(n).clone().sub(i).normalize()},getTangentAt:function(e){var t=this.getUtoTmapping(e);return this.getTangent(t)},computeFrenetFrames:function(e,t){var n,i,r,o=new pr,s=[],a=[],l=[],u=new pr,c=new Er;for(n=0;n<=e;n++)i=n/e,s[n]=this.getTangentAt(i),s[n].normalize();a[0]=new pr,l[0]=new pr;var d=Number.MAX_VALUE,h=Math.abs(s[0].x),p=Math.abs(s[0].y),f=Math.abs(s[0].z);for(h<=d&&(d=h,o.set(1,0,0)),p<=d&&(d=p,o.set(0,1,0)),f<=d&&o.set(0,0,1),u.crossVectors(s[0],o).normalize(),a[0].crossVectors(s[0],u),l[0].crossVectors(s[0],a[0]),n=1;n<=e;n++)a[n]=a[n-1].clone(),l[n]=l[n-1].clone(),u.crossVectors(s[n-1],s[n]),u.length()>Number.EPSILON&&(u.normalize(),r=Math.acos(lr.clamp(s[n-1].dot(s[n]),-1,1)),a[n].applyMatrix4(c.makeRotationAxis(u,r))),l[n].crossVectors(s[n],a[n]);if(!0===t)for(r=Math.acos(lr.clamp(a[0].dot(a[e]),-1,1)),r/=e,s[0].dot(u.crossVectors(a[0],a[e]))>0&&(r=-r),n=1;n<=e;n++)a[n].applyMatrix4(c.makeRotationAxis(s[n],r*n)),l[n].crossVectors(s[n],a[n]);return{tangents:s,normals:a,binormals:l}},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}),Zd.prototype=Object.create(Jd.prototype),Zd.prototype.constructor=Zd,Zd.prototype.isEllipseCurve=!0,Zd.prototype.getPoint=function(e,t){for(var n=t||new ur,i=2*Math.PI,r=this.aEndAngle-this.aStartAngle,o=Math.abs(r)<Number.EPSILON;r<0;)r+=i;for(;r>i;)r-=i;r<Number.EPSILON&&(r=o?0:i),!0!==this.aClockwise||o||(r===i?r=-i:r-=i);var s=this.aStartAngle+e*r,a=this.aX+this.xRadius*Math.cos(s),l=this.aY+this.yRadius*Math.sin(s);if(0!==this.aRotation){var u=Math.cos(this.aRotation),c=Math.sin(this.aRotation),d=a-this.aX,h=l-this.aY;a=d*u-h*c+this.aX,l=d*c+h*u+this.aY}return n.set(a,l)},Zd.prototype.copy=function(e){return Jd.prototype.copy.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},Zd.prototype.toJSON=function(){var e=Jd.prototype.toJSON.call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e},Zd.prototype.fromJSON=function(e){return Jd.prototype.fromJSON.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},Kd.prototype=Object.create(Zd.prototype),Kd.prototype.constructor=Kd,Kd.prototype.isArcCurve=!0;var eh=new pr,th=new $d,nh=new $d,ih=new $d;function rh(e,t,n,i){Jd.call(this),this.type="CatmullRomCurve3",this.points=e||[],this.closed=t||!1,this.curveType=n||"centripetal",this.tension=i||.5}function oh(e,t,n,i,r){var o=.5*(i-t),s=.5*(r-n),a=e*e;return(2*n-2*i+o+s)*(e*a)+(-3*n+3*i-2*o-s)*a+o*e+n}function sh(e,t,n,i){return function(e,t){var n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,i)}function ah(e,t,n,i,r){return function(e,t){var n=1-e;return n*n*n*t}(e,t)+function(e,t){var n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,i)+function(e,t){return e*e*e*t}(e,r)}function lh(e,t,n,i){Jd.call(this),this.type="CubicBezierCurve",this.v0=e||new ur,this.v1=t||new ur,this.v2=n||new ur,this.v3=i||new ur}function uh(e,t,n,i){Jd.call(this),this.type="CubicBezierCurve3",this.v0=e||new pr,this.v1=t||new pr,this.v2=n||new pr,this.v3=i||new pr}function ch(e,t){Jd.call(this),this.type="LineCurve",this.v1=e||new ur,this.v2=t||new ur}function dh(e,t){Jd.call(this),this.type="LineCurve3",this.v1=e||new pr,this.v2=t||new pr}function hh(e,t,n){Jd.call(this),this.type="QuadraticBezierCurve",this.v0=e||new ur,this.v1=t||new ur,this.v2=n||new ur}function ph(e,t,n){Jd.call(this),this.type="QuadraticBezierCurve3",this.v0=e||new pr,this.v1=t||new pr,this.v2=n||new pr}function fh(e){Jd.call(this),this.type="SplineCurve",this.points=e||[]}rh.prototype=Object.create(Jd.prototype),rh.prototype.constructor=rh,rh.prototype.isCatmullRomCurve3=!0,rh.prototype.getPoint=function(e,t){var n,i,r,o,s=t||new pr,a=this.points,l=a.length,u=(l-(this.closed?0:1))*e,c=Math.floor(u),d=u-c;if(this.closed?c+=c>0?0:(Math.floor(Math.abs(c)/l)+1)*l:0===d&&c===l-1&&(c=l-2,d=1),this.closed||c>0?n=a[(c-1)%l]:(eh.subVectors(a[0],a[1]).add(a[0]),n=eh),i=a[c%l],r=a[(c+1)%l],this.closed||c+2<l?o=a[(c+2)%l]:(eh.subVectors(a[l-1],a[l-2]).add(a[l-1]),o=eh),"centripetal"===this.curveType||"chordal"===this.curveType){var h="chordal"===this.curveType?.5:.25,p=Math.pow(n.distanceToSquared(i),h),f=Math.pow(i.distanceToSquared(r),h),m=Math.pow(r.distanceToSquared(o),h);f<1e-4&&(f=1),p<1e-4&&(p=f),m<1e-4&&(m=f),th.initNonuniformCatmullRom(n.x,i.x,r.x,o.x,p,f,m),nh.initNonuniformCatmullRom(n.y,i.y,r.y,o.y,p,f,m),ih.initNonuniformCatmullRom(n.z,i.z,r.z,o.z,p,f,m)}else"catmullrom"===this.curveType&&(th.initCatmullRom(n.x,i.x,r.x,o.x,this.tension),nh.initCatmullRom(n.y,i.y,r.y,o.y,this.tension),ih.initCatmullRom(n.z,i.z,r.z,o.z,this.tension));return s.set(th.calc(d),nh.calc(d),ih.calc(d)),s},rh.prototype.copy=function(e){Jd.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},rh.prototype.toJSON=function(){var e=Jd.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++){var i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e},rh.prototype.fromJSON=function(e){Jd.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var i=e.points[t];this.points.push((new pr).fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},lh.prototype=Object.create(Jd.prototype),lh.prototype.constructor=lh,lh.prototype.isCubicBezierCurve=!0,lh.prototype.getPoint=function(e,t){var n=t||new ur,i=this.v0,r=this.v1,o=this.v2,s=this.v3;return n.set(ah(e,i.x,r.x,o.x,s.x),ah(e,i.y,r.y,o.y,s.y)),n},lh.prototype.copy=function(e){return Jd.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},lh.prototype.toJSON=function(){var e=Jd.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},lh.prototype.fromJSON=function(e){return Jd.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},uh.prototype=Object.create(Jd.prototype),uh.prototype.constructor=uh,uh.prototype.isCubicBezierCurve3=!0,uh.prototype.getPoint=function(e,t){var n=t||new pr,i=this.v0,r=this.v1,o=this.v2,s=this.v3;return n.set(ah(e,i.x,r.x,o.x,s.x),ah(e,i.y,r.y,o.y,s.y),ah(e,i.z,r.z,o.z,s.z)),n},uh.prototype.copy=function(e){return Jd.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},uh.prototype.toJSON=function(){var e=Jd.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},uh.prototype.fromJSON=function(e){return Jd.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},ch.prototype=Object.create(Jd.prototype),ch.prototype.constructor=ch,ch.prototype.isLineCurve=!0,ch.prototype.getPoint=function(e,t){var n=t||new ur;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},ch.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},ch.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},ch.prototype.copy=function(e){return Jd.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},ch.prototype.toJSON=function(){var e=Jd.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},ch.prototype.fromJSON=function(e){return Jd.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},dh.prototype=Object.create(Jd.prototype),dh.prototype.constructor=dh,dh.prototype.isLineCurve3=!0,dh.prototype.getPoint=function(e,t){var n=t||new pr;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},dh.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},dh.prototype.copy=function(e){return Jd.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},dh.prototype.toJSON=function(){var e=Jd.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},dh.prototype.fromJSON=function(e){return Jd.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},hh.prototype=Object.create(Jd.prototype),hh.prototype.constructor=hh,hh.prototype.isQuadraticBezierCurve=!0,hh.prototype.getPoint=function(e,t){var n=t||new ur,i=this.v0,r=this.v1,o=this.v2;return n.set(sh(e,i.x,r.x,o.x),sh(e,i.y,r.y,o.y)),n},hh.prototype.copy=function(e){return Jd.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},hh.prototype.toJSON=function(){var e=Jd.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},hh.prototype.fromJSON=function(e){return Jd.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},ph.prototype=Object.create(Jd.prototype),ph.prototype.constructor=ph,ph.prototype.isQuadraticBezierCurve3=!0,ph.prototype.getPoint=function(e,t){var n=t||new pr,i=this.v0,r=this.v1,o=this.v2;return n.set(sh(e,i.x,r.x,o.x),sh(e,i.y,r.y,o.y),sh(e,i.z,r.z,o.z)),n},ph.prototype.copy=function(e){return Jd.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},ph.prototype.toJSON=function(){var e=Jd.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},ph.prototype.fromJSON=function(e){return Jd.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},fh.prototype=Object.create(Jd.prototype),fh.prototype.constructor=fh,fh.prototype.isSplineCurve=!0,fh.prototype.getPoint=function(e,t){var n=t||new ur,i=this.points,r=(i.length-1)*e,o=Math.floor(r),s=r-o,a=i[0===o?o:o-1],l=i[o],u=i[o>i.length-2?i.length-1:o+1],c=i[o>i.length-3?i.length-1:o+2];return n.set(oh(s,a.x,l.x,u.x,c.x),oh(s,a.y,l.y,u.y,c.y)),n},fh.prototype.copy=function(e){Jd.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var i=e.points[t];this.points.push(i.clone())}return this},fh.prototype.toJSON=function(){var e=Jd.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++){var i=this.points[t];e.points.push(i.toArray())}return e},fh.prototype.fromJSON=function(e){Jd.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var i=e.points[t];this.points.push((new ur).fromArray(i))}return this};var mh=Object.freeze({ArcCurve:Kd,CatmullRomCurve3:rh,CubicBezierCurve:lh,CubicBezierCurve3:uh,EllipseCurve:Zd,LineCurve:ch,LineCurve3:dh,QuadraticBezierCurve:hh,QuadraticBezierCurve3:ph,SplineCurve:fh});function _h(){Jd.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function gh(e){_h.call(this),this.type="Path",this.currentPoint=new ur,e&&this.setFromPoints(e)}function vh(e){gh.call(this,e),this.uuid=lr.generateUUID(),this.type="Shape",this.holes=[]}function yh(e,t){qr.call(this),this.type="Light",this.color=new No(e),this.intensity=void 0!==t?t:1,this.receiveShadow=void 0}function xh(e,t,n){yh.call(this,e,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(qr.DefaultUp),this.updateMatrix(),this.groundColor=new No(t)}function bh(e){this.camera=e,this.bias=0,this.radius=1,this.mapSize=new ur(512,512),this.map=null,this.mapPass=null,this.matrix=new Er,this._frustum=new ta,this._frameExtents=new ur(1,1),this._viewportCount=1,this._viewports=[new xr(0,0,1,1)]}function wh(){bh.call(this,new Vs(50,1,.5,500))}function jh(e,t,n,i,r,o){yh.call(this,e,t),this.type="SpotLight",this.position.copy(qr.DefaultUp),this.updateMatrix(),this.target=new qr,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==i?i:Math.PI/3,this.penumbra=void 0!==r?r:0,this.decay=void 0!==o?o:1,this.shadow=new wh}function Sh(){bh.call(this,new Vs(90,1,.5,500)),this._frameExtents=new ur(4,2),this._viewportCount=6,this._viewports=[new xr(2,1,1,1),new xr(0,1,1,1),new xr(3,1,1,1),new xr(1,1,1,1),new xr(3,0,1,1),new xr(1,0,1,1)],this._cubeDirections=[new pr(1,0,0),new pr(-1,0,0),new pr(0,0,1),new pr(0,0,-1),new pr(0,1,0),new pr(0,-1,0)],this._cubeUps=[new pr(0,1,0),new pr(0,1,0),new pr(0,1,0),new pr(0,1,0),new pr(0,0,1),new pr(0,0,-1)]}function Ah(e,t,n,i){yh.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==i?i:1,this.shadow=new Sh}function Mh(e,t,n,i,r,o){Gs.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=void 0!==e?e:-1,this.right=void 0!==t?t:1,this.top=void 0!==n?n:1,this.bottom=void 0!==i?i:-1,this.near=void 0!==r?r:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()}function Th(){bh.call(this,new Mh(-5,5,5,-5,.5,500))}function Ph(e,t){yh.call(this,e,t),this.type="DirectionalLight",this.position.copy(qr.DefaultUp),this.updateMatrix(),this.target=new qr,this.shadow=new Th}function Lh(e,t){yh.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}function Eh(e,t,n,i){yh.call(this,e,t),this.type="RectAreaLight",this.width=void 0!==n?n:10,this.height=void 0!==i?i:10}function Oh(e){Bd.call(this,e),this.textures={}}_h.prototype=Object.assign(Object.create(Jd.prototype),{constructor:_h,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new ch(t,e))},getPoint:function(e){for(var t=e*this.getLength(),n=this.getCurveLengths(),i=0;i<n.length;){if(n[i]>=t){var r=n[i]-t,o=this.curves[i],s=o.getLength(),a=0===s?0:1-r/s;return o.getPointAt(a)}i++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,n=0,i=this.curves.length;n<i;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e},getSpacedPoints:function(e){void 0===e&&(e=40);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;for(var t,n=[],i=0,r=this.curves;i<r.length;i++)for(var o=r[i],s=o&&o.isEllipseCurve?2*e:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?e*o.points.length:e,a=o.getPoints(s),l=0;l<a.length;l++){var u=a[l];t&&t.equals(u)||(n.push(u),t=u)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},copy:function(e){Jd.prototype.copy.call(this,e),this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this},toJSON:function(){var e=Jd.prototype.toJSON.call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,n=this.curves.length;t<n;t++){var i=this.curves[t];e.curves.push(i.toJSON())}return e},fromJSON:function(e){Jd.prototype.fromJSON.call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var i=e.curves[t];this.curves.push((new mh[i.type]).fromJSON(i))}return this}}),gh.prototype=Object.assign(Object.create(_h.prototype),{constructor:gh,setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y)},moveTo:function(e,t){this.currentPoint.set(e,t)},lineTo:function(e,t){var n=new ch(this.currentPoint.clone(),new ur(e,t));this.curves.push(n),this.currentPoint.set(e,t)},quadraticCurveTo:function(e,t,n,i){var r=new hh(this.currentPoint.clone(),new ur(e,t),new ur(n,i));this.curves.push(r),this.currentPoint.set(n,i)},bezierCurveTo:function(e,t,n,i,r,o){var s=new lh(this.currentPoint.clone(),new ur(e,t),new ur(n,i),new ur(r,o));this.curves.push(s),this.currentPoint.set(r,o)},splineThru:function(e){var t=new fh([this.currentPoint.clone()].concat(e));this.curves.push(t),this.currentPoint.copy(e[e.length-1])},arc:function(e,t,n,i,r,o){var s=this.currentPoint.x,a=this.currentPoint.y;this.absarc(e+s,t+a,n,i,r,o)},absarc:function(e,t,n,i,r,o){this.absellipse(e,t,n,n,i,r,o)},ellipse:function(e,t,n,i,r,o,s,a){var l=this.currentPoint.x,u=this.currentPoint.y;this.absellipse(e+l,t+u,n,i,r,o,s,a)},absellipse:function(e,t,n,i,r,o,s,a){var l=new Zd(e,t,n,i,r,o,s,a);if(this.curves.length>0){var u=l.getPoint(0);u.equals(this.currentPoint)||this.lineTo(u.x,u.y)}this.curves.push(l);var c=l.getPoint(1);this.currentPoint.copy(c)},copy:function(e){return _h.prototype.copy.call(this,e),this.currentPoint.copy(e.currentPoint),this},toJSON:function(){var e=_h.prototype.toJSON.call(this);return e.currentPoint=this.currentPoint.toArray(),e},fromJSON:function(e){return _h.prototype.fromJSON.call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}),vh.prototype=Object.assign(Object.create(gh.prototype),{constructor:vh,getPointsHoles:function(e){for(var t=[],n=0,i=this.holes.length;n<i;n++)t[n]=this.holes[n].getPoints(e);return t},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){gh.prototype.copy.call(this,e),this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var i=e.holes[t];this.holes.push(i.clone())}return this},toJSON:function(){var e=gh.prototype.toJSON.call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,n=this.holes.length;t<n;t++){var i=this.holes[t];e.holes.push(i.toJSON())}return e},fromJSON:function(e){gh.prototype.fromJSON.call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var i=e.holes[t];this.holes.push((new gh).fromJSON(i))}return this}}),yh.prototype=Object.assign(Object.create(qr.prototype),{constructor:yh,isLight:!0,copy:function(e){return qr.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){var t=qr.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),xh.prototype=Object.assign(Object.create(yh.prototype),{constructor:xh,isHemisphereLight:!0,copy:function(e){return yh.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Object.assign(bh.prototype,{_projScreenMatrix:new Er,_lightPositionWorld:new pr,_lookTarget:new pr,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(e){var t=this.camera,n=this.matrix,i=this._projScreenMatrix,r=this._lookTarget,o=this._lightPositionWorld;o.setFromMatrixPosition(e.matrixWorld),t.position.copy(o),r.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(r),t.updateMatrixWorld(),i.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromMatrix(i),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(t.projectionMatrix),n.multiply(t.matrixWorldInverse)},getViewport:function(e){return this._viewports[e]},getFrameExtents:function(){return this._frameExtents},copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),wh.prototype=Object.assign(Object.create(bh.prototype),{constructor:wh,isSpotLightShadow:!0,updateMatrices:function(e,t,n){var i=this.camera,r=2*lr.RAD2DEG*e.angle,o=this.mapSize.width/this.mapSize.height,s=e.distance||i.far;r===i.fov&&o===i.aspect&&s===i.far||(i.fov=r,i.aspect=o,i.far=s,i.updateProjectionMatrix()),bh.prototype.updateMatrices.call(this,e,t,n)}}),jh.prototype=Object.assign(Object.create(yh.prototype),{constructor:jh,isSpotLight:!0,copy:function(e){return yh.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),Sh.prototype=Object.assign(Object.create(bh.prototype),{constructor:Sh,isPointLightShadow:!0,updateMatrices:function(e,t,n){var i=this.camera,r=this.matrix,o=this._lightPositionWorld,s=this._lookTarget,a=this._projScreenMatrix;o.setFromMatrixPosition(e.matrixWorld),i.position.copy(o),s.copy(i.position),s.add(this._cubeDirections[n]),i.up.copy(this._cubeUps[n]),i.lookAt(s),i.updateMatrixWorld(),r.makeTranslation(-o.x,-o.y,-o.z),a.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromMatrix(a)}}),Ah.prototype=Object.assign(Object.create(yh.prototype),{constructor:Ah,isPointLight:!0,copy:function(e){return yh.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),Mh.prototype=Object.assign(Object.create(Gs.prototype),{constructor:Mh,isOrthographicCamera:!0,copy:function(e,t){return Gs.prototype.copy.call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this},setViewOffset:function(e,t,n,i,r,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2,r=n-e,o=n+e,s=i+t,a=i-t;if(null!==this.view&&this.view.enabled){var l=this.zoom/(this.view.width/this.view.fullWidth),u=this.zoom/(this.view.height/this.view.fullHeight),c=(this.right-this.left)/this.view.width,d=(this.top-this.bottom)/this.view.height;o=(r+=c*(this.view.offsetX/l))+c*(this.view.width/l),a=(s-=d*(this.view.offsetY/u))-d*(this.view.height/u)}this.projectionMatrix.makeOrthographic(r,o,s,a,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){var t=qr.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}),Th.prototype=Object.assign(Object.create(bh.prototype),{constructor:Th,isDirectionalLightShadow:!0,updateMatrices:function(e,t,n){bh.prototype.updateMatrices.call(this,e,t,n)}}),Ph.prototype=Object.assign(Object.create(yh.prototype),{constructor:Ph,isDirectionalLight:!0,copy:function(e){return yh.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),Lh.prototype=Object.assign(Object.create(yh.prototype),{constructor:Lh,isAmbientLight:!0}),Eh.prototype=Object.assign(Object.create(yh.prototype),{constructor:Eh,isRectAreaLight:!0,copy:function(e){return yh.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){var t=yh.prototype.toJSON.call(this,e);return t.object.width=this.width,t.object.height=this.height,t}}),Oh.prototype=Object.assign(Object.create(Bd.prototype),{constructor:Oh,load:function(e,t,n,i){var r=this,o=new Vd(r.manager);o.setPath(r.path),o.load(e,function(e){t(r.parse(JSON.parse(e)))},n,i)},parse:function(e){var t=this.textures;function n(e){return t[e],t[e]}var i=new wd[e.type];if(void 0!==e.uuid&&(i.uuid=e.uuid),void 0!==e.name&&(i.name=e.name),void 0!==e.color&&i.color.setHex(e.color),void 0!==e.roughness&&(i.roughness=e.roughness),void 0!==e.metalness&&(i.metalness=e.metalness),void 0!==e.emissive&&i.emissive.setHex(e.emissive),void 0!==e.specular&&i.specular.setHex(e.specular),void 0!==e.shininess&&(i.shininess=e.shininess),void 0!==e.clearcoat&&(i.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(i.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.vertexColors&&(i.vertexColors=e.vertexColors),void 0!==e.fog&&(i.fog=e.fog),void 0!==e.flatShading&&(i.flatShading=e.flatShading),void 0!==e.blending&&(i.blending=e.blending),void 0!==e.combine&&(i.combine=e.combine),void 0!==e.side&&(i.side=e.side),void 0!==e.opacity&&(i.opacity=e.opacity),void 0!==e.transparent&&(i.transparent=e.transparent),void 0!==e.alphaTest&&(i.alphaTest=e.alphaTest),void 0!==e.depthTest&&(i.depthTest=e.depthTest),void 0!==e.depthWrite&&(i.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(i.colorWrite=e.colorWrite),void 0!==e.wireframe&&(i.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(i.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(i.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(i.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(i.rotation=e.rotation),1!==e.linewidth&&(i.linewidth=e.linewidth),void 0!==e.dashSize&&(i.dashSize=e.dashSize),void 0!==e.gapSize&&(i.gapSize=e.gapSize),void 0!==e.scale&&(i.scale=e.scale),void 0!==e.polygonOffset&&(i.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(i.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(i.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.skinning&&(i.skinning=e.skinning),void 0!==e.morphTargets&&(i.morphTargets=e.morphTargets),void 0!==e.morphNormals&&(i.morphNormals=e.morphNormals),void 0!==e.dithering&&(i.dithering=e.dithering),void 0!==e.visible&&(i.visible=e.visible),void 0!==e.toneMapped&&(i.toneMapped=e.toneMapped),void 0!==e.userData&&(i.userData=e.userData),void 0!==e.uniforms)for(var r in e.uniforms){var o=e.uniforms[r];switch(i.uniforms[r]={},o.type){case"t":i.uniforms[r].value=n(o.value);break;case"c":i.uniforms[r].value=(new No).setHex(o.value);break;case"v2":i.uniforms[r].value=(new ur).fromArray(o.value);break;case"v3":i.uniforms[r].value=(new pr).fromArray(o.value);break;case"v4":i.uniforms[r].value=(new xr).fromArray(o.value);break;case"m3":i.uniforms[r].value=(new _r).fromArray(o.value);case"m4":i.uniforms[r].value=(new Er).fromArray(o.value);break;default:i.uniforms[r].value=o.value}}if(void 0!==e.defines&&(i.defines=e.defines),void 0!==e.vertexShader&&(i.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(i.fragmentShader=e.fragmentShader),void 0!==e.extensions)for(var s in e.extensions)i.extensions[s]=e.extensions[s];if(void 0!==e.shading&&(i.flatShading=1===e.shading),void 0!==e.size&&(i.size=e.size),void 0!==e.sizeAttenuation&&(i.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(i.map=n(e.map)),void 0!==e.matcap&&(i.matcap=n(e.matcap)),void 0!==e.alphaMap&&(i.alphaMap=n(e.alphaMap),i.transparent=!0),void 0!==e.bumpMap&&(i.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(i.bumpScale=e.bumpScale),void 0!==e.normalMap&&(i.normalMap=n(e.normalMap)),void 0!==e.normalMapType&&(i.normalMapType=e.normalMapType),void 0!==e.normalScale){var a=e.normalScale;!1===Array.isArray(a)&&(a=[a,a]),i.normalScale=(new ur).fromArray(a)}return void 0!==e.displacementMap&&(i.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(i.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(i.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(i.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(i.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(i.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(i.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(i.specularMap=n(e.specularMap)),void 0!==e.envMap&&(i.envMap=n(e.envMap)),void 0!==e.envMapIntensity&&(i.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(i.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(i.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(i.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(i.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(i.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(i.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(i.gradientMap=n(e.gradientMap)),void 0!==e.clearcoatNormalMap&&(i.clearcoatNormalMap=n(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(i.clearcoatNormalScale=(new ur).fromArray(e.clearcoatNormalScale)),i},setTextures:function(e){return this.textures=e,this}});var Ih={decodeText:function(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);for(var t="",n=0,i=e.length;n<i;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(e){return t}},extractUrlBase:function(e){var t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}};function Ch(){ls.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function Fh(e,t,n,i){"number"==typeof n&&(i=n,n=!1),Vo.call(this,e,t,n),this.meshPerAttribute=i||1}function Nh(e){Bd.call(this,e)}Ch.prototype=Object.assign(Object.create(ls.prototype),{constructor:Ch,isInstancedBufferGeometry:!0,copy:function(e){return ls.prototype.copy.call(this,e),this.maxInstancedCount=e.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e=ls.prototype.toJSON.call(this);return e.maxInstancedCount=this.maxInstancedCount,e.isInstancedBufferGeometry=!0,e}}),Fh.prototype=Object.assign(Object.create(Vo.prototype),{constructor:Fh,isInstancedBufferAttribute:!0,copy:function(e){return Vo.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},toJSON:function(){var e=Vo.prototype.toJSON.call(this);return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}),Nh.prototype=Object.assign(Object.create(Bd.prototype),{constructor:Nh,load:function(e,t,n,i){var r=this,o=new Vd(r.manager);o.setPath(r.path),o.load(e,function(e){t(r.parse(JSON.parse(e)))},n,i)},parse:function(e){var t=e.isInstancedBufferGeometry?new Ch:new ls,n=e.data.index;if(void 0!==n){var i=new kh[n.type](n.array);t.setIndex(new Vo(i,1))}var r=e.data.attributes;for(var o in r){var s=r[o],a=(i=new kh[s.type](s.array),new(s.isInstancedBufferAttribute?Fh:Vo)(i,s.itemSize,s.normalized));void 0!==s.name&&(a.name=s.name),t.addAttribute(o,a)}var l=e.data.morphAttributes;if(l)for(var o in l){for(var u=l[o],c=[],d=0,h=u.length;d<h;d++){s=u[d],a=new Vo(i=new kh[s.type](s.array),s.itemSize,s.normalized);void 0!==s.name&&(a.name=s.name),c.push(a)}t.morphAttributes[o]=c}var p=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==p){d=0;for(var f=p.length;d!==f;++d){var m=p[d];t.addGroup(m.start,m.count,m.materialIndex)}}var _=e.data.boundingSphere;if(void 0!==_){var g=new pr;void 0!==_.center&&g.fromArray(_.center),t.boundingSphere=new ho(g,_.radius)}return e.name&&(t.name=e.name),e.userData&&(t.userData=e.userData),t}});var kh={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function Dh(e){Bd.call(this,e)}Dh.prototype=Object.assign(Object.create(Bd.prototype),{constructor:Dh,load:function(e,t,n,i){var r=this,o=""===this.path?Ih.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;var s=new Vd(r.manager);s.setPath(this.path),s.load(e,function(e){var n=null;try{n=JSON.parse(e)}catch(e){return void(void 0!==i&&i(e))}var o=n.metadata;void 0!==o&&void 0!==o.type&&"geometry"!==o.type.toLowerCase()&&r.parse(n,t)},n,i)},parse:function(e,t){var n=this.parseShape(e.shapes),i=this.parseGeometries(e.geometries,n),r=this.parseImages(e.images,function(){void 0!==t&&t(a)}),o=this.parseTextures(e.textures,r),s=this.parseMaterials(e.materials,o),a=this.parseObject(e.object,i,s);return e.animations&&(a.animations=this.parseAnimations(e.animations)),void 0!==e.images&&0!==e.images.length||void 0!==t&&t(a),a},parseShape:function(e){var t={};if(void 0!==e)for(var n=0,i=e.length;n<i;n++){var r=(new vh).fromJSON(e[n]);t[r.uuid]=r}return t},parseGeometries:function(e,t){var n={};if(void 0!==e)for(var i=new Nh,r=0,o=e.length;r<o;r++){var s,a=e[r];switch(a.type){case"PlaneGeometry":case"PlaneBufferGeometry":s=new dd[a.type](a.width,a.height,a.widthSegments,a.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":s=new dd[a.type](a.width,a.height,a.depth,a.widthSegments,a.heightSegments,a.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":s=new dd[a.type](a.radius,a.segments,a.thetaStart,a.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":s=new dd[a.type](a.radiusTop,a.radiusBottom,a.height,a.radialSegments,a.heightSegments,a.openEnded,a.thetaStart,a.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":s=new dd[a.type](a.radius,a.height,a.radialSegments,a.heightSegments,a.openEnded,a.thetaStart,a.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":s=new dd[a.type](a.radius,a.widthSegments,a.heightSegments,a.phiStart,a.phiLength,a.thetaStart,a.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":s=new dd[a.type](a.radius,a.detail);break;case"RingGeometry":case"RingBufferGeometry":s=new dd[a.type](a.innerRadius,a.outerRadius,a.thetaSegments,a.phiSegments,a.thetaStart,a.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":s=new dd[a.type](a.radius,a.tube,a.radialSegments,a.tubularSegments,a.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":s=new dd[a.type](a.radius,a.tube,a.tubularSegments,a.radialSegments,a.p,a.q);break;case"TubeGeometry":case"TubeBufferGeometry":s=new dd[a.type]((new mh[a.path.type]).fromJSON(a.path),a.tubularSegments,a.radius,a.radialSegments,a.closed);break;case"LatheGeometry":case"LatheBufferGeometry":s=new dd[a.type](a.points,a.segments,a.phiStart,a.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":s=new dd[a.type](a.vertices,a.indices,a.radius,a.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var l=[],u=0,c=a.shapes.length;u<c;u++){var d=t[a.shapes[u]];l.push(d)}s=new dd[a.type](l,a.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(l=[],u=0,c=a.shapes.length;u<c;u++){d=t[a.shapes[u]];l.push(d)}var h=a.options.extrudePath;void 0!==h&&(a.options.extrudePath=(new mh[h.type]).fromJSON(h)),s=new dd[a.type](l,a.options);break;case"BufferGeometry":case"InstancedBufferGeometry":s=i.parse(a);break;case"Geometry":if("THREE"in window&&"LegacyJSONLoader"in THREE)s=(new THREE.LegacyJSONLoader).parse(a,this.resourcePath).geometry;break;default:continue}s.uuid=a.uuid,void 0!==a.name&&(s.name=a.name),!0===s.isBufferGeometry&&void 0!==a.userData&&(s.userData=a.userData),n[a.uuid]=s}return n},parseMaterials:function(e,t){var n={},i={};if(void 0!==e){var r=new Oh;r.setTextures(t);for(var o=0,s=e.length;o<s;o++){var a=e[o];if("MultiMaterial"===a.type){for(var l=[],u=0;u<a.materials.length;u++){var c=a.materials[u];void 0===n[c.uuid]&&(n[c.uuid]=r.parse(c)),l.push(n[c.uuid])}i[a.uuid]=l}else void 0===n[a.uuid]&&(n[a.uuid]=r.parse(a)),i[a.uuid]=n[a.uuid]}}return i},parseAnimations:function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n],r=kd.parse(i);void 0!==i.uuid&&(r.uuid=i.uuid),t.push(r)}return t},parseImages:function(e,t){var n=this,i={};function r(e){return n.manager.itemStart(e),o.load(e,function(){n.manager.itemEnd(e)},void 0,function(){n.manager.itemError(e),n.manager.itemEnd(e)})}if(void 0!==e&&e.length>0){var o=new Yd(new zd(t));o.setCrossOrigin(this.crossOrigin);for(var s=0,a=e.length;s<a;s++){var l=e[s],u=l.url;if(Array.isArray(u)){i[l.uuid]=[];for(var c=0,d=u.length;c<d;c++){var h=u[c],p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(h)?h:n.resourcePath+h;i[l.uuid].push(r(p))}}else{p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l.url)?l.url:n.resourcePath+l.url;i[l.uuid]=r(p)}}}return i},parseTextures:function(e,t){function n(e,t){return"number"==typeof e?e:t[e]}var i={};if(void 0!==e)for(var r=0,o=e.length;r<o;r++){var s,a=e[r];a.image,t[a.image],(s=Array.isArray(t[a.image])?new xa(t[a.image]):new yr(t[a.image])).needsUpdate=!0,s.uuid=a.uuid,void 0!==a.name&&(s.name=a.name),void 0!==a.mapping&&(s.mapping=n(a.mapping,zh)),void 0!==a.offset&&s.offset.fromArray(a.offset),void 0!==a.repeat&&s.repeat.fromArray(a.repeat),void 0!==a.center&&s.center.fromArray(a.center),void 0!==a.rotation&&(s.rotation=a.rotation),void 0!==a.wrap&&(s.wrapS=n(a.wrap[0],Uh),s.wrapT=n(a.wrap[1],Uh)),void 0!==a.format&&(s.format=a.format),void 0!==a.type&&(s.type=a.type),void 0!==a.encoding&&(s.encoding=a.encoding),void 0!==a.minFilter&&(s.minFilter=n(a.minFilter,Bh)),void 0!==a.magFilter&&(s.magFilter=n(a.magFilter,Bh)),void 0!==a.anisotropy&&(s.anisotropy=a.anisotropy),void 0!==a.flipY&&(s.flipY=a.flipY),void 0!==a.premultiplyAlpha&&(s.premultiplyAlpha=a.premultiplyAlpha),void 0!==a.unpackAlignment&&(s.unpackAlignment=a.unpackAlignment),i[a.uuid]=s}return i},parseObject:function(e,t,n){var i;function r(e){return t[e],t[e]}function o(e){if(void 0!==e){if(Array.isArray(e)){for(var t=[],i=0,r=e.length;i<r;i++){var o=e[i];n[o],t.push(n[o])}return t}return n[e],n[e]}}switch(e.type){case"Scene":i=new Qr,void 0!==e.background&&Number.isInteger(e.background)&&(i.background=new No(e.background)),void 0!==e.fog&&("Fog"===e.fog.type?i.fog=new ou(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(i.fog=new ru(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":i=new Vs(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(i.focus=e.focus),void 0!==e.zoom&&(i.zoom=e.zoom),void 0!==e.filmGauge&&(i.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(i.filmOffset=e.filmOffset),void 0!==e.view&&(i.view=Object.assign({},e.view));break;case"OrthographicCamera":i=new Mh(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(i.zoom=e.zoom),void 0!==e.view&&(i.view=Object.assign({},e.view));break;case"AmbientLight":i=new Lh(e.color,e.intensity);break;case"DirectionalLight":i=new Ph(e.color,e.intensity);break;case"PointLight":i=new Ah(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":i=new Eh(e.color,e.intensity,e.width,e.height);break;case"SpotLight":i=new jh(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":i=new xh(e.color,e.groundColor,e.intensity);break;case"SkinnedMesh":case"Mesh":var s=r(e.geometry),a=o(e.material);i=s.bones&&s.bones.length>0?new Mu(s,a):new Ms(s,a),void 0!==e.drawMode&&i.setDrawMode(e.drawMode);break;case"LOD":i=new Au;break;case"Line":i=new Du(r(e.geometry),o(e.material),e.mode);break;case"LineLoop":i=new Bu(r(e.geometry),o(e.material));break;case"LineSegments":i=new Uu(r(e.geometry),o(e.material));break;case"PointCloud":case"Points":i=new Yu(r(e.geometry),o(e.material));break;case"Sprite":i=new bu(o(e.material));break;case"Group":i=new Ql;break;default:i=new qr}if(i.uuid=e.uuid,void 0!==e.name&&(i.name=e.name),void 0!==e.matrix?(i.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(i.matrixAutoUpdate=e.matrixAutoUpdate),i.matrixAutoUpdate&&i.matrix.decompose(i.position,i.quaternion,i.scale)):(void 0!==e.position&&i.position.fromArray(e.position),void 0!==e.rotation&&i.rotation.fromArray(e.rotation),void 0!==e.quaternion&&i.quaternion.fromArray(e.quaternion),void 0!==e.scale&&i.scale.fromArray(e.scale)),void 0!==e.castShadow&&(i.castShadow=e.castShadow),void 0!==e.receiveShadow&&(i.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(i.shadow.bias=e.shadow.bias),void 0!==e.shadow.radius&&(i.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&i.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(i.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(i.visible=e.visible),void 0!==e.frustumCulled&&(i.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(i.renderOrder=e.renderOrder),void 0!==e.userData&&(i.userData=e.userData),void 0!==e.layers&&(i.layers.mask=e.layers),void 0!==e.children)for(var l=e.children,u=0;u<l.length;u++)i.add(this.parseObject(l[u],t,n));if("LOD"===e.type)for(var c=e.levels,d=0;d<c.length;d++){var h=c[d],p=i.getObjectByProperty("uuid",h.object);void 0!==p&&i.addLevel(p,h.distance)}return i}});var Rh,zh={UVMapping:300,CubeReflectionMapping:kn,CubeRefractionMapping:Dn,EquirectangularReflectionMapping:Rn,EquirectangularRefractionMapping:zn,SphericalReflectionMapping:Un,CubeUVReflectionMapping:Bn,CubeUVRefractionMapping:Gn},Uh={RepeatWrapping:Vn,ClampToEdgeWrapping:Hn,MirroredRepeatWrapping:Xn},Bh={NearestFilter:Wn,NearestMipmapNearestFilter:Yn,NearestMipmapLinearFilter:qn,LinearFilter:Qn,LinearMipmapNearestFilter:Jn,LinearMipmapLinearFilter:Zn};function Gh(e){Bd.call(this,e),this.options=void 0}function Vh(){this.type="ShapePath",this.color=new No,this.subPaths=[],this.currentPath=null}function Hh(e){this.type="Font",this.data=e}function Xh(e,t,n,i,r){var o=r.glyphs[e]||r.glyphs["?"];if(o){var s,a,l,u,c,d,h,p,f=new Vh;if(o.o)for(var m=o._cachedOutline||(o._cachedOutline=o.o.split(" ")),_=0,g=m.length;_<g;){switch(m[_++]){case"m":s=m[_++]*t+n,a=m[_++]*t+i,f.moveTo(s,a);break;case"l":s=m[_++]*t+n,a=m[_++]*t+i,f.lineTo(s,a);break;case"q":l=m[_++]*t+n,u=m[_++]*t+i,c=m[_++]*t+n,d=m[_++]*t+i,f.quadraticCurveTo(c,d,l,u);break;case"b":l=m[_++]*t+n,u=m[_++]*t+i,c=m[_++]*t+n,d=m[_++]*t+i,h=m[_++]*t+n,p=m[_++]*t+i,f.bezierCurveTo(c,d,h,p,l,u)}}return{offsetX:o.ha*t,path:f}}}function Wh(e){Bd.call(this,e)}Gh.prototype=Object.assign(Object.create(Bd.prototype),{constructor:Gh,setOptions:function(e){return this.options=e,this},load:function(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var r=this,o=Rd.get(e);if(void 0!==o)return r.manager.itemStart(e),setTimeout(function(){t&&t(o),r.manager.itemEnd(e)},0),o;fetch(e).then(function(e){return e.blob()}).then(function(e){return void 0===r.options?createImageBitmap(e):createImageBitmap(e,r.options)}).then(function(n){Rd.add(e,n),t&&t(n),r.manager.itemEnd(e)}).catch(function(t){i&&i(t),r.manager.itemError(e),r.manager.itemEnd(e)}),r.manager.itemStart(e)}}),Object.assign(Vh.prototype,{moveTo:function(e,t){this.currentPath=new gh,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t)},lineTo:function(e,t){this.currentPath.lineTo(e,t)},quadraticCurveTo:function(e,t,n,i){this.currentPath.quadraticCurveTo(e,t,n,i)},bezierCurveTo:function(e,t,n,i,r,o){this.currentPath.bezierCurveTo(e,t,n,i,r,o)},splineThru:function(e){this.currentPath.splineThru(e)},toShapes:function(e,t){function n(e){for(var t=[],n=0,i=e.length;n<i;n++){var r=e[n],o=new vh;o.curves=r.curves,t.push(o)}return t}function i(e,t){for(var n=t.length,i=!1,r=n-1,o=0;o<n;r=o++){var s=t[r],a=t[o],l=a.x-s.x,u=a.y-s.y;if(Math.abs(u)>Number.EPSILON){if(u<0&&(s=t[o],l=-l,a=t[r],u=-u),e.y<s.y||e.y>a.y)continue;if(e.y===s.y){if(e.x===s.x)return!0}else{var c=u*(e.x-s.x)-l*(e.y-s.y);if(0===c)return!0;if(c<0)continue;i=!i}}else{if(e.y!==s.y)continue;if(a.x<=e.x&&e.x<=s.x||s.x<=e.x&&e.x<=a.x)return!0}}return i}var r=Uc.isClockWise,o=this.subPaths;if(0===o.length)return[];if(!0===t)return n(o);var s,a,l,u=[];if(1===o.length)return a=o[0],(l=new vh).curves=a.curves,u.push(l),u;var c=!r(o[0].getPoints());c=e?!c:c;var d,h,p=[],f=[],m=[],_=0;f[_]=void 0,m[_]=[];for(var g=0,v=o.length;g<v;g++)s=r(d=(a=o[g]).getPoints()),(s=e?!s:s)?(!c&&f[_]&&_++,f[_]={s:new vh,p:d},f[_].s.curves=a.curves,c&&_++,m[_]=[]):m[_].push({h:a,p:d[0]});if(!f[0])return n(o);if(f.length>1){for(var y=!1,x=[],b=0,w=f.length;b<w;b++)p[b]=[];for(b=0,w=f.length;b<w;b++)for(var j=m[b],S=0;S<j.length;S++){for(var A=j[S],M=!0,T=0;T<f.length;T++)i(A.p,f[T].p)&&(b!==T&&x.push({froms:b,tos:T,hole:S}),M?(M=!1,p[T].push(A)):y=!0);M&&p[b].push(A)}x.length>0&&(y||(m=p))}g=0;for(var P=f.length;g<P;g++){l=f[g].s,u.push(l);for(var L=0,E=(h=m[g]).length;L<E;L++)l.holes.push(h[L].h)}return u}}),Object.assign(Hh.prototype,{isFont:!0,generateShapes:function(e,t){void 0===t&&(t=100);for(var n=[],i=function(e,t,n){for(var i=Array.from?Array.from(e):String(e).split(""),r=t/n.resolution,o=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*r,s=[],a=0,l=0,u=0;u<i.length;u++){var c=i[u];if("\n"===c)a=0,l-=o;else{var d=Xh(c,r,a,l,n);a+=d.offsetX,s.push(d.path)}}return s}(e,t,this.data),r=0,o=i.length;r<o;r++)Array.prototype.push.apply(n,i[r].toShapes());return n}}),Wh.prototype=Object.assign(Object.create(Bd.prototype),{constructor:Wh,load:function(e,t,n,i){var r=this,o=new Vd(this.manager);o.setPath(this.path),o.load(e,function(e){var n;try{n=JSON.parse(e)}catch(t){n=JSON.parse(e.substring(65,e.length-2))}var i=r.parse(n);t&&t(i)},n,i)},parse:function(e){return new Hh(e)}});var Yh={getContext:function(){return void 0===Rh&&(Rh=new(window.AudioContext||window.webkitAudioContext)),Rh},setContext:function(e){Rh=e}};function qh(e){Bd.call(this,e)}function Qh(){this.coefficients=[];for(var e=0;e<9;e++)this.coefficients.push(new pr)}function Jh(e,t){yh.call(this,void 0,t),this.sh=void 0!==e?e:new Qh}function Zh(e,t,n){Jh.call(this,void 0,n);var i=(new No).set(e),r=(new No).set(t),o=new pr(i.r,i.g,i.b),s=new pr(r.r,r.g,r.b),a=Math.sqrt(Math.PI),l=a*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(s).multiplyScalar(a),this.sh.coefficients[1].copy(o).sub(s).multiplyScalar(l)}function Kh(e,t){Jh.call(this,void 0,t);var n=(new No).set(e);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}qh.prototype=Object.assign(Object.create(Bd.prototype),{constructor:qh,load:function(e,t,n,i){var r=new Vd(this.manager);r.setResponseType("arraybuffer"),r.setPath(this.path),r.load(e,function(e){var n=e.slice(0);Yh.getContext().decodeAudioData(n,function(e){t(e)})},n,i)}}),Object.assign(Qh.prototype,{isSphericalHarmonics3:!0,set:function(e){for(var t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this},zero:function(){for(var e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this},getAt:function(e,t){var n=e.x,i=e.y,r=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScale(o[1],.488603*i),t.addScale(o[2],.488603*r),t.addScale(o[3],.488603*n),t.addScale(o[4],n*i*1.092548),t.addScale(o[5],i*r*1.092548),t.addScale(o[6],.315392*(3*r*r-1)),t.addScale(o[7],n*r*1.092548),t.addScale(o[8],.546274*(n*n-i*i)),t},getIrradianceAt:function(e,t){var n=e.x,i=e.y,r=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScale(o[1],1.023328*i),t.addScale(o[2],1.023328*r),t.addScale(o[3],1.023328*n),t.addScale(o[4],.858086*n*i),t.addScale(o[5],.858086*i*r),t.addScale(o[6],.743125*r*r-.247708),t.addScale(o[7],.858086*n*r),t.addScale(o[8],.429043*(n*n-i*i)),t},add:function(e){for(var t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this},scale:function(e){for(var t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this},lerp:function(e,t){for(var n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this},equals:function(e){for(var t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0},copy:function(e){return this.set(e.coefficients)},clone:function(){return(new this.constructor).copy(this)},fromArray:function(e,t){void 0===t&&(t=0);for(var n=this.coefficients,i=0;i<9;i++)n[i].fromArray(e,t+3*i);return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);for(var n=this.coefficients,i=0;i<9;i++)n[i].toArray(e,t+3*i);return e}}),Object.assign(Qh,{getBasisAt:function(e,t){var n=e.x,i=e.y,r=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*r,t[3]=.488603*n,t[4]=1.092548*n*i,t[5]=1.092548*i*r,t[6]=.315392*(3*r*r-1),t[7]=1.092548*n*r,t[8]=.546274*(n*n-i*i)}}),Jh.prototype=Object.assign(Object.create(yh.prototype),{constructor:Jh,isLightProbe:!0,copy:function(e){return yh.prototype.copy.call(this,e),this.sh.copy(e.sh),this.intensity=e.intensity,this},toJSON:function(e){return yh.prototype.toJSON.call(this,e)}}),Zh.prototype=Object.assign(Object.create(Jh.prototype),{constructor:Zh,isHemisphereLightProbe:!0,copy:function(e){return Jh.prototype.copy.call(this,e),this},toJSON:function(e){return Jh.prototype.toJSON.call(this,e)}}),Kh.prototype=Object.assign(Object.create(Jh.prototype),{constructor:Kh,isAmbientLightProbe:!0,copy:function(e){return Jh.prototype.copy.call(this,e),this},toJSON:function(e){return Jh.prototype.toJSON.call(this,e)}});var $h=new Er,ep=new Er;function tp(e){this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}Object.assign(function(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Vs,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Vs,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}.prototype,{update:function(e){var t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep;var n,i,r=e.projectionMatrix.clone(),o=t.eyeSep/2,s=o*t.near/t.focus,a=t.near*Math.tan(lr.DEG2RAD*t.fov*.5)/t.zoom;ep.elements[12]=-o,$h.elements[12]=o,n=-a*t.aspect+s,i=a*t.aspect+s,r.elements[0]=2*t.near/(i-n),r.elements[8]=(i+n)/(i-n),this.cameraL.projectionMatrix.copy(r),n=-a*t.aspect-s,i=a*t.aspect-s,r.elements[0]=2*t.near/(i-n),r.elements[8]=(i+n)/(i-n),this.cameraR.projectionMatrix.copy(r)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(ep),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply($h)}}),Object.assign(tp.prototype,{start:function(){this.startTime=("undefined"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=("undefined"==typeof performance?Date:performance).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}});var np=new pr,ip=new cr,rp=new pr,op=new pr;function sp(){qr.call(this),this.type="AudioListener",this.context=Yh.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new tp}function ap(e){qr.call(this),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.startTime=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}sp.prototype=Object.assign(Object.create(qr.prototype),{constructor:sp,getInput:function(){return this.gain},removeFilter:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this},updateMatrixWorld:function(e){qr.prototype.updateMatrixWorld.call(this,e);var t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(np,ip,rp),op.set(0,0,-1).applyQuaternion(ip),t.positionX){var i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(np.x,i),t.positionY.linearRampToValueAtTime(np.y,i),t.positionZ.linearRampToValueAtTime(np.z,i),t.forwardX.linearRampToValueAtTime(op.x,i),t.forwardY.linearRampToValueAtTime(op.y,i),t.forwardZ.linearRampToValueAtTime(op.z,i),t.upX.linearRampToValueAtTime(n.x,i),t.upY.linearRampToValueAtTime(n.y,i),t.upZ.linearRampToValueAtTime(n.z,i)}else t.setPosition(np.x,np.y,np.z),t.setOrientation(op.x,op.y,op.z,n.x,n.y,n.z)}}),ap.prototype=Object.assign(Object.create(qr.prototype),{constructor:ap,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setMediaElementSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this},setBuffer:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0!==this.isPlaying&&!1!==this.hasPlaybackControl){var e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.onended=this.onEnded.bind(this),this.startTime=this.context.currentTime,e.start(this.startTime,this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}},pause:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this.source.stop(),this.source.onended=null,this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this},stop:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.source.onended=null,this.offset=0,this.isPlaying=!1,this},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),!0===this.isPlaying?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},setDetune:function(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1!==this.hasPlaybackControl&&this.loop},setLoop:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}});var lp=new pr,up=new cr,cp=new pr,dp=new pr;function hp(e){ap.call(this,e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}function pp(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=void 0!==t?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}function fp(e,t,n){this.binding=e,this.valueSize=n;var i,r=Float64Array;switch(t){case"quaternion":i=this._slerp;break;case"string":case"bool":r=Array,i=this._select;break;default:i=this._lerp}this.buffer=new r(4*n),this._mixBufferRegion=i,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}hp.prototype=Object.assign(Object.create(ap.prototype),{constructor:hp,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){return this.panner.refDistance=e,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){return this.panner.rolloffFactor=e,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){return this.panner.distanceModel=e,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){return this.panner.maxDistance=e,this},setDirectionalCone:function(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this},updateMatrixWorld:function(e){if(qr.prototype.updateMatrixWorld.call(this,e),!0!==this.hasPlaybackControl||!1!==this.isPlaying){this.matrixWorld.decompose(lp,up,cp),dp.set(0,0,1).applyQuaternion(up);var t=this.panner;if(t.positionX){var n=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(lp.x,n),t.positionY.linearRampToValueAtTime(lp.y,n),t.positionZ.linearRampToValueAtTime(lp.z,n),t.orientationX.linearRampToValueAtTime(dp.x,n),t.orientationY.linearRampToValueAtTime(dp.y,n),t.orientationZ.linearRampToValueAtTime(dp.z,n)}else t.setPosition(lp.x,lp.y,lp.z),t.setOrientation(dp.x,dp.y,dp.z)}}}),Object.assign(pp.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var e=0,t=this.getFrequencyData(),n=0;n<t.length;n++)e+=t[n];return e/t.length}}),Object.assign(fp.prototype,{accumulate:function(e,t){var n=this.buffer,i=this.valueSize,r=e*i+i,o=this.cumulativeWeight;if(0===o){for(var s=0;s!==i;++s)n[r+s]=n[s];o=t}else{var a=t/(o+=t);this._mixBufferRegion(n,r,0,a,i)}this.cumulativeWeight=o},apply:function(e){var t=this.valueSize,n=this.buffer,i=e*t+t,r=this.cumulativeWeight,o=this.binding;if(this.cumulativeWeight=0,r<1){var s=3*t;this._mixBufferRegion(n,i,s,1-r,t)}for(var a=t,l=t+t;a!==l;++a)if(n[a]!==n[a+t]){o.setValue(n,i);break}},saveOriginalState:function(){var e=this.binding,t=this.buffer,n=this.valueSize,i=3*n;e.getValue(t,i);for(var r=n,o=i;r!==o;++r)t[r]=t[i+r%n];this.cumulativeWeight=0},restoreOriginalState:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)},_select:function(e,t,n,i,r){if(i>=.5)for(var o=0;o!==r;++o)e[t+o]=e[n+o]},_slerp:function(e,t,n,i){cr.slerpFlat(e,t,e,t,e,n,i)},_lerp:function(e,t,n,i,r){for(var o=1-i,s=0;s!==r;++s){var a=t+s;e[a]=e[a]*o+e[n+s]*i}}});var mp=new RegExp("[\\[\\]\\.:\\/]","g"),_p="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",gp=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]"),vp=/(WCOD+)?/.source.replace("WCOD",_p),yp=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"),xp=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]"),bp=new RegExp("^"+gp+vp+yp+xp+"$"),wp=["material","materials","bones"];function jp(e,t,n){var i=n||Sp.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}function Sp(e,t,n){this.path=t,this.parsedPath=n||Sp.parseTrackName(t),this.node=Sp.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}function Ap(e,t,n){this._mixer=e,this._clip=t,this._localRoot=n||null;for(var i=t.tracks,r=i.length,o=new Array(r),s={endingStart:Gi,endingEnd:Gi},a=0;a!==r;++a){var l=i[a].createInterpolant(null);o[a]=l,l.settings=s}this._interpolantSettings=s,this._interpolants=o,this._propertyBindings=new Array(r),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Bi,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function Mp(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function Tp(e){"string"==typeof e&&(e=arguments[1]),this.value=e}function Pp(e,t,n){su.call(this,e,t),this.meshPerAttribute=n||1}function Lp(e,t,n,i){this.ray=new xo(e,t),this.near=n||0,this.far=i||1/0,this.camera=null,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return this.Points}}})}function Ep(e,t){return e.distance-t.distance}function Op(e,t,n,i){if(!1!==e.visible&&(e.raycast(t,n),!0===i))for(var r=e.children,o=0,s=r.length;o<s;o++)Op(r[o],t,n,!0)}Object.assign(jp.prototype,{getValue:function(e,t){this.bind();var n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(e,t)},setValue:function(e,t){for(var n=this._bindings,i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(e,t)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}),Object.assign(Sp,{Composite:jp,create:function(e,t,n){return e&&e.isAnimationObjectGroup?new Sp.Composite(e,t,n):new Sp(e,t,n)},sanitizeNodeName:function(e){return e.replace(/\s/g,"_").replace(mp,"")},parseTrackName:function(e){var t=bp.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){var r=n.nodeName.substring(i+1);-1!==wp.indexOf(r)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=r)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n},findNode:function(e,t){if(!t||""===t||"root"===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){var i=function(e){for(var n=0;n<e.length;n++){var r=e[n];if(r.name===t||r.uuid===t)return r;var o=i(r.children);if(o)return o}return null},r=i(e.children);if(r)return r}return null}}),Object.assign(Sp.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)e[t++]=n[i]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.targetObject[this.propertyName]=e[t]},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=e[t++]},function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){var e=this.node,t=this.parsedPath,n=t.objectName,i=t.propertyName,r=t.propertyIndex;if(e||(e=Sp.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,e){if(n){var o=t.objectIndex;switch(n){case"materials":if(!e.material)return;if(!e.material.materials)return;e=e.material.materials;break;case"bones":if(!e.skeleton)return;e=e.skeleton.bones;for(var s=0;s<e.length;s++)if(e[s].name===o){o=s;break}break;default:if(void 0===e[n])return;e=e[n]}if(void 0!==o){if(void 0===e[o])return;e=e[o]}}var a=e[i];if(void 0!==a){var l=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?l=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate);var u=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===i){if(!e.geometry)return;if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes)return;for(s=0;s<this.node.geometry.morphAttributes.position.length;s++)if(e.geometry.morphAttributes.position[s].name===r){r=s;break}}else{if(!e.geometry.morphTargets)return;for(s=0;s<this.node.geometry.morphTargets.length;s++)if(e.geometry.morphTargets[s].name===r){r=s;break}}}u=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=r}else void 0!==a.fromArray&&void 0!==a.toArray?(u=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(u=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=i;this.getValue=this.GetterByBindingType[u],this.setValue=this.SetterByBindingTypeAndVersioning[u][l]}else t.nodeName}},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(Sp.prototype,{_getValue_unbound:Sp.prototype.getValue,_setValue_unbound:Sp.prototype.setValue}),Object.assign(function(){this.uuid=lr.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var t=0,n=arguments.length;t!==n;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var i=this;this.stats={objects:{get total(){return i._objects.length},get inUse(){return this.total-i.nCachedObjects_}},get bindingsPerObject(){return i._bindings.length}}}.prototype,{isAnimationObjectGroup:!0,add:function(){for(var e=this._objects,t=e.length,n=this.nCachedObjects_,i=this._indicesByUUID,r=this._paths,o=this._parsedPaths,s=this._bindings,a=s.length,l=0,u=arguments.length;l!==u;++l){var c=arguments[l],d=c.uuid,h=i[d];if(void 0===h){h=t++,i[d]=h,e.push(c);for(var p=0,f=a;p!==f;++p)s[p].push(new Sp(c,r[p],o[p]))}else if(h<n){e[h];var m=--n,_=e[m];i[_.uuid]=h,e[h]=_,i[d]=m,e[m]=c;for(p=0,f=a;p!==f;++p){var g=s[p],v=g[m],y=g[h];g[h]=v,void 0===y&&(y=new Sp(c,r[p],o[p])),g[m]=y}}else e[h]}this.nCachedObjects_=n},remove:function(){for(var e=this._objects,t=this.nCachedObjects_,n=this._indicesByUUID,i=this._bindings,r=i.length,o=0,s=arguments.length;o!==s;++o){var a=arguments[o],l=a.uuid,u=n[l];if(void 0!==u&&u>=t){var c=t++,d=e[c];n[d.uuid]=u,e[u]=d,n[l]=c,e[c]=a;for(var h=0,p=r;h!==p;++h){var f=i[h],m=f[c],_=f[u];f[u]=m,f[c]=_}}}this.nCachedObjects_=t},uncache:function(){for(var e=this._objects,t=e.length,n=this.nCachedObjects_,i=this._indicesByUUID,r=this._bindings,o=r.length,s=0,a=arguments.length;s!==a;++s){var l=arguments[s],u=l.uuid,c=i[u];if(void 0!==c)if(delete i[u],c<n){var d=--n,h=e[d],p=e[v=--t];i[h.uuid]=c,e[c]=h,i[p.uuid]=d,e[d]=p,e.pop();for(var f=0,m=o;f!==m;++f){var _=(y=r[f])[d],g=y[v];y[c]=_,y[d]=g,y.pop()}}else{var v;i[(p=e[v=--t]).uuid]=c,e[c]=p,e.pop();for(f=0,m=o;f!==m;++f){var y;(y=r[f])[c]=y[v],y.pop()}}}this.nCachedObjects_=n},subscribe_:function(e,t){var n=this._bindingsIndicesByPath,i=n[e],r=this._bindings;if(void 0!==i)return r[i];var o=this._paths,s=this._parsedPaths,a=this._objects,l=a.length,u=this.nCachedObjects_,c=new Array(l);i=r.length,n[e]=i,o.push(e),s.push(t),r.push(c);for(var d=u,h=a.length;d!==h;++d){var p=a[d];c[d]=new Sp(p,e,t)}return c},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){var i=this._paths,r=this._parsedPaths,o=this._bindings,s=o.length-1,a=o[s];t[e[s]]=n,o[n]=a,o.pop(),r[n]=r[s],r.pop(),i[n]=i[s],i.pop()}}}),Object.assign(Ap.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){var i=this._clip.duration,r=e._clip.duration,o=r/i,s=i/r;e.warp(1,o,t),this.warp(s,1,t)}return this},crossFadeTo:function(e,t,n){return e.crossFadeFrom(this,t,n)},stopFading:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,n){var i=this._mixer,r=i.time,o=this._timeScaleInterpolant,s=this.timeScale;null===o&&(o=i._lendControlInterpolant(),this._timeScaleInterpolant=o);var a=o.parameterPositions,l=o.sampleValues;return a[0]=r,a[1]=r+n,l[0]=e/s,l[1]=t/s,this},stopWarping:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,n,i){if(this.enabled){var r=this._startTime;if(null!==r){var o=(e-r)*n;if(o<0||0===n)return;this._startTime=null,t=n*o}t*=this._updateTimeScale(e);var s=this._updateTime(t),a=this._updateWeight(e);if(a>0)for(var l=this._interpolants,u=this._propertyBindings,c=0,d=l.length;c!==d;++c)l[c].evaluate(s),u[c].accumulate(i,a)}else this._updateWeight(e)},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var n=this._weightInterpolant;if(null!==n){var i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=t,t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var n=this._timeScaleInterpolant;if(null!==n)t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}return this._effectiveTimeScale=t,t},_updateTime:function(e){var t=this.time+e,n=this._clip.duration,i=this.loop,r=this._loopCount,o=2202===i;if(0===e)return-1===r?t:o&&1==(1&r)?n-t:t;if(2200===i){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(t>=n)t=n;else{if(!(t<0)){this.time=t;break e}t=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=t,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===r&&(e>=0?(r=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),t>=n||t<0){var s=Math.floor(t/n);t-=n*s,r+=Math.abs(s);var a=this.repetitions-r;if(a<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,t=e>0?n:0,this.time=t,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===a){var l=e<0;this._setEndings(l,!l,o)}else this._setEndings(!1,!1,o);this._loopCount=r,this.time=t,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:s})}}else this.time=t;if(o&&1==(1&r))return n-t}return t},_setEndings:function(e,t,n){var i=this._interpolantSettings;n?(i.endingStart=2401,i.endingEnd=2401):(i.endingStart=e?this.zeroSlopeAtStart?2401:Gi:2402,i.endingEnd=t?this.zeroSlopeAtEnd?2401:Gi:2402)},_scheduleFading:function(e,t,n){var i=this._mixer,r=i.time,o=this._weightInterpolant;null===o&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);var s=o.parameterPositions,a=o.sampleValues;return s[0]=r,a[0]=t,s[1]=r+e,a[1]=n,this}}),Mp.prototype=Object.assign(Object.create(Dt.prototype),{constructor:Mp,_bindAction:function(e,t){var n=e._localRoot||this._root,i=e._clip.tracks,r=i.length,o=e._propertyBindings,s=e._interpolants,a=n.uuid,l=this._bindingsByRootAndName,u=l[a];void 0===u&&(u={},l[a]=u);for(var c=0;c!==r;++c){var d=i[c],h=d.name,p=u[h];if(void 0!==p)o[c]=p;else{if(void 0!==(p=o[c])){null===p._cacheIndex&&(++p.referenceCount,this._addInactiveBinding(p,a,h));continue}var f=t&&t._propertyBindings[c].binding.parsedPath;++(p=new fp(Sp.create(n,h,f),d.ValueTypeName,d.getValueSize())).referenceCount,this._addInactiveBinding(p,a,h),o[c]=p}s[c].resultBuffer=p.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,n=e._clip.uuid,i=this._actionsByClip[n];this._bindAction(e,i&&i.knownActions[0]),this._addInactiveAction(e,n,t)}for(var r=e._propertyBindings,o=0,s=r.length;o!==s;++o){var a=r[o];0==a.useCount++&&(this._lendBinding(a),a.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,n=0,i=t.length;n!==i;++n){var r=t[n];0==--r.useCount&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions},_addInactiveAction:function(e,t,n){var i=this._actions,r=this._actionsByClip,o=r[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=o;else{var s=o.knownActions;e._byClipCacheIndex=s.length,s.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[n]=e},_removeInactiveAction:function(e){var t=this._actions,n=t[t.length-1],i=e._cacheIndex;n._cacheIndex=i,t[i]=n,t.pop(),e._cacheIndex=null;var r=e._clip.uuid,o=this._actionsByClip,s=o[r],a=s.knownActions,l=a[a.length-1],u=e._byClipCacheIndex;l._byClipCacheIndex=u,a[u]=l,a.pop(),e._byClipCacheIndex=null,delete s.actionByRoot[(e._localRoot||this._root).uuid],0===a.length&&delete o[r],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){for(var t=e._propertyBindings,n=0,i=t.length;n!==i;++n){var r=t[n];0==--r.referenceCount&&this._removeInactiveBinding(r)}},_lendAction:function(e){var t=this._actions,n=e._cacheIndex,i=this._nActiveActions++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_takeBackAction:function(e){var t=this._actions,n=e._cacheIndex,i=--this._nActiveActions,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_addInactiveBinding:function(e,t,n){var i=this._bindingsByRootAndName,r=i[t],o=this._bindings;void 0===r&&(r={},i[t]=r),r[n]=e,e._cacheIndex=o.length,o.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,n=e.binding,i=n.rootNode.uuid,r=n.path,o=this._bindingsByRootAndName,s=o[i],a=t[t.length-1],l=e._cacheIndex;a._cacheIndex=l,t[l]=a,t.pop(),delete s[r],0===Object.keys(s).length&&delete o[i]},_lendBinding:function(e){var t=this._bindings,n=e._cacheIndex,i=this._nActiveBindings++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_takeBackBinding:function(e){var t=this._bindings,n=e._cacheIndex,i=--this._nActiveBindings,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&((n=new Md(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=t,e[t]=n),n},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,i=--this._nActiveControlInterpolants,r=t[i];e.__cacheIndex=i,t[i]=e,r.__cacheIndex=n,t[n]=r},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t){var n=t||this._root,i=n.uuid,r="string"==typeof e?kd.findByName(n,e):e,o=null!==r?r.uuid:e,s=this._actionsByClip[o],a=null;if(void 0!==s){var l=s.actionByRoot[i];if(void 0!==l)return l;a=s.knownActions[0],null===r&&(r=a._clip)}if(null===r)return null;var u=new Ap(this,r,t);return this._bindAction(u,a),this._addInactiveAction(u,o,i),u},existingAction:function(e,t){var n=t||this._root,i=n.uuid,r="string"==typeof e?kd.findByName(n,e):e,o=r?r.uuid:e,s=this._actionsByClip[o];return void 0!==s&&s.actionByRoot[i]||null},stopAllAction:function(){var e=this._actions,t=this._nActiveActions,n=this._bindings,i=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var r=0;r!==t;++r)e[r].reset();for(r=0;r!==i;++r)n[r].useCount=0;return this},update:function(e){e*=this.timeScale;for(var t=this._actions,n=this._nActiveActions,i=this.time+=e,r=Math.sign(e),o=this._accuIndex^=1,s=0;s!==n;++s){t[s]._update(i,e,r,o)}var a=this._bindings,l=this._nActiveBindings;for(s=0;s!==l;++s)a[s].apply(o);return this},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions,n=e.uuid,i=this._actionsByClip,r=i[n];if(void 0!==r){for(var o=r.knownActions,s=0,a=o.length;s!==a;++s){var l=o[s];this._deactivateAction(l);var u=l._cacheIndex,c=t[t.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,c._cacheIndex=u,t[u]=c,t.pop(),this._removeInactiveBindingsForAction(l)}delete i[n]}},uncacheRoot:function(e){var t=e.uuid,n=this._actionsByClip;for(var i in n){var r=n[i].actionByRoot[t];void 0!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}var o=this._bindingsByRootAndName[t];if(void 0!==o)for(var s in o){var a=o[s];a.restoreOriginalState(),this._removeInactiveBinding(a)}},uncacheAction:function(e,t){var n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}),Tp.prototype.clone=function(){return new Tp(void 0===this.value.clone?this.value:this.value.clone())},Pp.prototype=Object.assign(Object.create(su.prototype),{constructor:Pp,isInstancedInterleavedBuffer:!0,copy:function(e){return su.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Object.assign(Lp.prototype,{linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t&&t.isOrthographicCamera&&(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t)},intersectObject:function(e,t,n){var i=n||[];return Op(e,this,i,t),i.sort(Ep),i},intersectObjects:function(e,t,n){var i=n||[];if(!1===Array.isArray(e))return i;for(var r=0,o=e.length;r<o;r++)Op(e[r],this,i,t);return i.sort(Ep),i}}),Object.assign(function(e,t,n){return this.radius=void 0!==e?e:1,this.phi=void 0!==t?t:0,this.theta=void 0!==n?n:0,this}.prototype,{set:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(lr.clamp(t/this.radius,-1,1))),this}}),Object.assign(function(e,t,n){return this.radius=void 0!==e?e:1,this.theta=void 0!==t?t:0,this.y=void 0!==n?n:0,this}.prototype,{set:function(e,t,n){return this.radius=e,this.theta=t,this.y=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}});var Ip=new ur;function Cp(e,t){this.min=void 0!==e?e:new ur(1/0,1/0),this.max=void 0!==t?t:new ur(-1/0,-1/0)}Object.assign(Cp.prototype,{set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(e,t){var n=Ip.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){return void 0===e&&(e=new ur),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(e=new ur),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){return void 0===t&&(t=new ur),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){return void 0===t&&(t=new ur),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(e){return Ip.copy(e).clamp(this.min,this.max).sub(e).length()},intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}});var Fp=new pr,Np=new pr;function kp(e,t){this.start=void 0!==e?e:new pr,this.end=void 0!==t?t:new pr}function Dp(e){qr.call(this),this.material=e,this.render=function(){}}Object.assign(kp.prototype,{set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){return void 0===e&&(e=new pr),e.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return void 0===e&&(e=new pr),e.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){return void 0===t&&(t=new pr),this.delta(t).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(e,t){Fp.subVectors(e,this.start),Np.subVectors(this.end,this.start);var n=Np.dot(Np),i=Np.dot(Fp)/n;return t&&(i=lr.clamp(i,0,1)),i},closestPointToPoint:function(e,t,n){var i=this.closestPointToPointParameter(e,t);return void 0===n&&(n=new pr),this.delta(n).multiplyScalar(i).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}),Dp.prototype=Object.create(qr.prototype),Dp.prototype.constructor=Dp,Dp.prototype.isImmediateRenderObject=!0;var Rp=new pr,zp=new pr,Up=new _r,Bp=["a","b","c"];function Gp(e,t,n,i){this.object=e,this.size=void 0!==t?t:1;var r=void 0!==n?n:16711680,o=void 0!==i?i:1,s=0,a=this.object.geometry;a&&a.isGeometry?s=3*a.faces.length:a&&a.isBufferGeometry&&(s=a.attributes.normal.count);var l=new ls,u=new Zo(2*s*3,3);l.addAttribute("position",u),Uu.call(this,l,new Ou({color:r,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}Gp.prototype=Object.create(Uu.prototype),Gp.prototype.constructor=Gp,Gp.prototype.update=function(){this.object.updateMatrixWorld(!0),Up.getNormalMatrix(this.object.matrixWorld);var e=this.object.matrixWorld,t=this.geometry.attributes.position,n=this.object.geometry;if(n&&n.isGeometry)for(var i=n.vertices,r=n.faces,o=0,s=0,a=r.length;s<a;s++)for(var l=r[s],u=0,c=l.vertexNormals.length;u<c;u++){var d=i[l[Bp[u]]],h=l.vertexNormals[u];Rp.copy(d).applyMatrix4(e),zp.copy(h).applyMatrix3(Up).normalize().multiplyScalar(this.size).add(Rp),t.setXYZ(o,Rp.x,Rp.y,Rp.z),o+=1,t.setXYZ(o,zp.x,zp.y,zp.z),o+=1}else if(n&&n.isBufferGeometry){var p=n.attributes.position,f=n.attributes.normal;for(o=0,u=0,c=p.count;u<c;u++)Rp.set(p.getX(u),p.getY(u),p.getZ(u)).applyMatrix4(e),zp.set(f.getX(u),f.getY(u),f.getZ(u)),zp.applyMatrix3(Up).normalize().multiplyScalar(this.size).add(Rp),t.setXYZ(o,Rp.x,Rp.y,Rp.z),o+=1,t.setXYZ(o,zp.x,zp.y,zp.z),o+=1}t.needsUpdate=!0};var Vp=new pr;function Hp(e,t){qr.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;for(var n=new ls,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],r=0,o=1;r<32;r++,o++){var s=r/32*Math.PI*2,a=o/32*Math.PI*2;i.push(Math.cos(s),Math.sin(s),1,Math.cos(a),Math.sin(a),1)}n.addAttribute("position",new Zo(i,3));var l=new Ou({fog:!1});this.cone=new Uu(n,l),this.add(this.cone),this.update()}Hp.prototype=Object.create(qr.prototype),Hp.prototype.constructor=Hp,Hp.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},Hp.prototype.update=function(){this.light.updateMatrixWorld();var e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),Vp.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Vp),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)};var Xp=new pr,Wp=new Er,Yp=new Er;function qp(e){for(var t=function e(t){var n=[];t&&t.isBone&&n.push(t);for(var i=0;i<t.children.length;i++)n.push.apply(n,e(t.children[i]));return n}(e),n=new ls,i=[],r=[],o=new No(0,0,1),s=new No(0,1,0),a=0;a<t.length;a++){var l=t[a];l.parent&&l.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),r.push(o.r,o.g,o.b),r.push(s.r,s.g,s.b))}n.addAttribute("position",new Zo(i,3)),n.addAttribute("color",new Zo(r,3));var u=new Ou({vertexColors:Qt,depthTest:!1,depthWrite:!1,transparent:!0});Uu.call(this,n,u),this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}function Qp(e,t,n){this.light=e,this.light.updateMatrixWorld(),this.color=n;var i=new Jc(t,4,2),r=new Go({wireframe:!0,fog:!1});Ms.call(this,i,r),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function Jp(e,t){this.type="RectAreaLightHelper",this.light=e,this.color=t;var n=new ls;n.addAttribute("position",new Zo([1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),n.computeBoundingSphere();var i=new Ou({fog:!1});Du.call(this,n,i);var r=new ls;r.addAttribute("position",new Zo([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),r.computeBoundingSphere(),this.add(new Ms(r,new Go({side:Xt,fog:!1}))),this.update()}qp.prototype=Object.create(Uu.prototype),qp.prototype.constructor=qp,qp.prototype.updateMatrixWorld=function(e){var t=this.bones,n=this.geometry,i=n.getAttribute("position");Yp.getInverse(this.root.matrixWorld);for(var r=0,o=0;r<t.length;r++){var s=t[r];s.parent&&s.parent.isBone&&(Wp.multiplyMatrices(Yp,s.matrixWorld),Xp.setFromMatrixPosition(Wp),i.setXYZ(o,Xp.x,Xp.y,Xp.z),Wp.multiplyMatrices(Yp,s.parent.matrixWorld),Xp.setFromMatrixPosition(Wp),i.setXYZ(o+1,Xp.x,Xp.y,Xp.z),o+=2)}n.getAttribute("position").needsUpdate=!0,qr.prototype.updateMatrixWorld.call(this,e)},Qp.prototype=Object.create(Ms.prototype),Qp.prototype.constructor=Qp,Qp.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},Qp.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)},Jp.prototype=Object.create(Du.prototype),Jp.prototype.constructor=Jp,Jp.prototype.update=function(){if(this.scale.set(.5*this.light.width,.5*this.light.height,1),void 0!==this.color)this.material.color.set(this.color),this.children[0].material.color.set(this.color);else{this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);var e=this.material.color,t=Math.max(e.r,e.g,e.b);t>1&&e.multiplyScalar(1/t),this.children[0].material.color.copy(this.material.color)}},Jp.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()};var Zp=new pr,Kp=new No,$p=new No;function ef(e,t,n){qr.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;var i=new ac(t);i.rotateY(.5*Math.PI),this.material=new Go({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=Qt);var r=i.getAttribute("position"),o=new Float32Array(3*r.count);i.addAttribute("color",new Vo(o,3)),this.add(new Ms(i,this.material)),this.update()}function tf(e,t){this.lightProbe=e,this.size=t;var n={GAMMA_OUTPUT:""},i=new Bs({defines:n,uniforms:{sh:{value:this.lightProbe.sh.coefficients},intensity:{value:this.lightProbe.intensity}},vertexShader:["varying vec3 vNormal;","void main() {","\tvNormal = normalize( normalMatrix * normal );","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["#define RECIPROCAL_PI 0.318309886","vec3 inverseTransformDirection( in vec3 normal, in mat4 matrix ) {","\t// matrix is assumed to be orthogonal","\treturn normalize( ( vec4( normal, 0.0 ) * matrix ).xyz );","}","vec3 linearToOutput( in vec3 a ) {","\t#ifdef GAMMA_OUTPUT","\t\treturn pow( a, vec3( 1.0 / float( GAMMA_FACTOR ) ) );","\t#else","\t\treturn a;","\t#endif","}","// source: https://graphics.stanford.edu/papers/envmap/envmap.pdf","vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {","\t// normal is assumed to have unit length","\tfloat x = normal.x, y = normal.y, z = normal.z;","\t// band 0","\tvec3 result = shCoefficients[ 0 ] * 0.886227;","\t// band 1","\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;","\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;","\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;","\t// band 2","\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;","\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;","\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );","\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;","\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );","\treturn result;","}","uniform vec3 sh[ 9 ]; // sh coefficients","uniform float intensity; // light probe intensity","varying vec3 vNormal;","void main() {","\tvec3 normal = normalize( vNormal );","\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );","\tvec3 irradiance = shGetIrradianceAt( worldNormal, sh );","\tvec3 outgoingLight = RECIPROCAL_PI * irradiance * intensity;","\toutgoingLight = linearToOutput( outgoingLight );","\tgl_FragColor = vec4( outgoingLight, 1.0 );","}"].join("\n")}),r=new Jc(1,32,16);Ms.call(this,r,i),this.onBeforeRender()}function nf(e,t,n,i){e=e||10,t=t||10,n=new No(void 0!==n?n:4473924),i=new No(void 0!==i?i:8947848);for(var r=t/2,o=e/t,s=e/2,a=[],l=[],u=0,c=0,d=-s;u<=t;u++,d+=o){a.push(-s,0,d,s,0,d),a.push(d,0,-s,d,0,s);var h=u===r?n:i;h.toArray(l,c),c+=3,h.toArray(l,c),c+=3,h.toArray(l,c),c+=3,h.toArray(l,c),c+=3}var p=new ls;p.addAttribute("position",new Zo(a,3)),p.addAttribute("color",new Zo(l,3));var f=new Ou({vertexColors:Qt});Uu.call(this,p,f)}function rf(e,t,n,i,r,o){e=e||10,t=t||16,n=n||8,i=i||64,r=new No(void 0!==r?r:4473924),o=new No(void 0!==o?o:8947848);var s,a,l,u,c,d,h,p=[],f=[];for(u=0;u<=t;u++)l=u/t*(2*Math.PI),s=Math.sin(l)*e,a=Math.cos(l)*e,p.push(0,0,0),p.push(s,0,a),h=1&u?r:o,f.push(h.r,h.g,h.b),f.push(h.r,h.g,h.b);for(u=0;u<=n;u++)for(h=1&u?r:o,d=e-e/n*u,c=0;c<i;c++)l=c/i*(2*Math.PI),s=Math.sin(l)*d,a=Math.cos(l)*d,p.push(s,0,a),f.push(h.r,h.g,h.b),l=(c+1)/i*(2*Math.PI),s=Math.sin(l)*d,a=Math.cos(l)*d,p.push(s,0,a),f.push(h.r,h.g,h.b);var m=new ls;m.addAttribute("position",new Zo(p,3)),m.addAttribute("color",new Zo(f,3));var _=new Ou({vertexColors:Qt});Uu.call(this,m,_)}function of(e,t,n,i){this.audio=e,this.range=t||1,this.divisionsInnerAngle=n||16,this.divisionsOuterAngle=i||2;var r=new ls,o=this.divisionsInnerAngle+2*this.divisionsOuterAngle,s=new Float32Array(3*(3*o+3));r.addAttribute("position",new Vo(s,3));var a=new Ou({color:65280}),l=new Ou({color:16776960});Du.call(this,r,[l,a]),this.update()}ef.prototype=Object.create(qr.prototype),ef.prototype.constructor=ef,ef.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},ef.prototype.update=function(){var e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var t=e.geometry.getAttribute("color");Kp.copy(this.light.color),$p.copy(this.light.groundColor);for(var n=0,i=t.count;n<i;n++){var r=n<i/2?Kp:$p;t.setXYZ(n,r.r,r.g,r.b)}t.needsUpdate=!0}e.lookAt(Zp.setFromMatrixPosition(this.light.matrixWorld).negate())},tf.prototype=Object.create(Ms.prototype),tf.prototype.constructor=tf,tf.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},tf.prototype.onBeforeRender=function(){this.position.copy(this.lightProbe.position),this.scale.set(1,1,1).multiplyScalar(this.size),this.material.uniforms.intensity.value=this.lightProbe.intensity},nf.prototype=Object.assign(Object.create(Uu.prototype),{constructor:nf,copy:function(e){return Uu.prototype.copy.call(this,e),this.geometry.copy(e.geometry),this.material.copy(e.material),this},clone:function(){return(new this.constructor).copy(this)}}),rf.prototype=Object.create(Uu.prototype),rf.prototype.constructor=rf,of.prototype=Object.create(Du.prototype),of.prototype.constructor=of,of.prototype.update=function(){var e,t,n=this.audio,i=this.range,r=this.divisionsInnerAngle,o=this.divisionsOuterAngle,s=lr.degToRad(n.panner.coneInnerAngle),a=lr.degToRad(n.panner.coneOuterAngle),l=s/2,u=a/2,c=0,d=0,h=this.geometry,p=h.attributes.position;function f(n,r,o,s){var a=(r-n)/o;for(p.setXYZ(c,0,0,0),d++,e=n;e<r;e+=a)t=c+d,p.setXYZ(t,Math.sin(e)*i,0,Math.cos(e)*i),p.setXYZ(t+1,Math.sin(Math.min(e+a,r))*i,0,Math.cos(Math.min(e+a,r))*i),p.setXYZ(t+2,0,0,0),d+=3;h.addGroup(c,d,s),c+=d,d=0}h.clearGroups(),f(-u,-l,o,0),f(-l,l,r,1),f(l,u,o,0),p.needsUpdate=!0,s===a&&(this.material[0].visible=!1)},of.prototype.dispose=function(){this.geometry.dispose(),this.material[0].dispose(),this.material[1].dispose()};var sf=new pr,af=new pr,lf=new _r;function uf(e,t,n,i){this.object=e,this.size=void 0!==t?t:1;var r=void 0!==n?n:16776960,o=void 0!==i?i:1,s=0,a=this.object.geometry;a&&a.isGeometry&&(s=a.faces.length);var l=new ls,u=new Zo(2*s*3,3);l.addAttribute("position",u),Uu.call(this,l,new Ou({color:r,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}uf.prototype=Object.create(Uu.prototype),uf.prototype.constructor=uf,uf.prototype.update=function(){this.object.updateMatrixWorld(!0),lf.getNormalMatrix(this.object.matrixWorld);for(var e=this.object.matrixWorld,t=this.geometry.attributes.position,n=this.object.geometry,i=n.vertices,r=n.faces,o=0,s=0,a=r.length;s<a;s++){var l=r[s],u=l.normal;sf.copy(i[l.a]).add(i[l.b]).add(i[l.c]).divideScalar(3).applyMatrix4(e),af.copy(u).applyMatrix3(lf).normalize().multiplyScalar(this.size).add(sf),t.setXYZ(o,sf.x,sf.y,sf.z),o+=1,t.setXYZ(o,af.x,af.y,af.z),o+=1}t.needsUpdate=!0};var cf=new pr,df=new pr,hf=new pr;function pf(e,t,n){qr.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===t&&(t=1);var i=new ls;i.addAttribute("position",new Zo([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));var r=new Ou({fog:!1});this.lightPlane=new Du(i,r),this.add(this.lightPlane),(i=new ls).addAttribute("position",new Zo([0,0,0,0,0,1],3)),this.targetLine=new Du(i,r),this.add(this.targetLine),this.update()}pf.prototype=Object.create(qr.prototype),pf.prototype.constructor=pf,pf.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},pf.prototype.update=function(){cf.setFromMatrixPosition(this.light.matrixWorld),df.setFromMatrixPosition(this.light.target.matrixWorld),hf.subVectors(df,cf),this.lightPlane.lookAt(df),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(df),this.targetLine.scale.z=hf.length()};var ff=new pr,mf=new Gs;function _f(e){var t=new ls,n=new Ou({color:16777215,vertexColors:qt}),i=[],r=[],o={},s=new No(16755200),a=new No(16711680),l=new No(43775),u=new No(16777215),c=new No(3355443);function d(e,t,n){h(e,n),h(t,n)}function h(e,t){i.push(0,0,0),r.push(t.r,t.g,t.b),void 0===o[e]&&(o[e]=[]),o[e].push(i.length/3-1)}d("n1","n2",s),d("n2","n4",s),d("n4","n3",s),d("n3","n1",s),d("f1","f2",s),d("f2","f4",s),d("f4","f3",s),d("f3","f1",s),d("n1","f1",s),d("n2","f2",s),d("n3","f3",s),d("n4","f4",s),d("p","n1",a),d("p","n2",a),d("p","n3",a),d("p","n4",a),d("u1","u2",l),d("u2","u3",l),d("u3","u1",l),d("c","t",u),d("p","c",c),d("cn1","cn2",c),d("cn3","cn4",c),d("cf1","cf2",c),d("cf3","cf4",c),t.addAttribute("position",new Zo(i,3)),t.addAttribute("color",new Zo(r,3)),Uu.call(this,t,n),this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}function gf(e,t,n,i,r,o,s){ff.set(r,o,s).unproject(i);var a=t[e];if(void 0!==a)for(var l=n.getAttribute("position"),u=0,c=a.length;u<c;u++)l.setXYZ(a[u],ff.x,ff.y,ff.z)}_f.prototype=Object.create(Uu.prototype),_f.prototype.constructor=_f,_f.prototype.update=function(){var e=this.geometry,t=this.pointMap;mf.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),gf("c",t,e,mf,0,0,-1),gf("t",t,e,mf,0,0,1),gf("n1",t,e,mf,-1,-1,-1),gf("n2",t,e,mf,1,-1,-1),gf("n3",t,e,mf,-1,1,-1),gf("n4",t,e,mf,1,1,-1),gf("f1",t,e,mf,-1,-1,1),gf("f2",t,e,mf,1,-1,1),gf("f3",t,e,mf,-1,1,1),gf("f4",t,e,mf,1,1,1),gf("u1",t,e,mf,.7,1.1,-1),gf("u2",t,e,mf,-.7,1.1,-1),gf("u3",t,e,mf,0,2,-1),gf("cf1",t,e,mf,-1,0,1),gf("cf2",t,e,mf,1,0,1),gf("cf3",t,e,mf,0,-1,1),gf("cf4",t,e,mf,0,1,1),gf("cn1",t,e,mf,-1,0,-1),gf("cn2",t,e,mf,1,0,-1),gf("cn3",t,e,mf,0,-1,-1),gf("cn4",t,e,mf,0,1,-1),e.getAttribute("position").needsUpdate=!0};var vf=new lo;function yf(e,t){this.object=e,void 0===t&&(t=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),r=new ls;r.setIndex(new Vo(n,1)),r.addAttribute("position",new Vo(i,3)),Uu.call(this,r,new Ou({color:t})),this.matrixAutoUpdate=!1,this.update()}function xf(e,t){this.type="Box3Helper",this.box=e,t=t||16776960;var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new ls;i.setIndex(new Vo(n,1)),i.addAttribute("position",new Zo([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),Uu.call(this,i,new Ou({color:t})),this.geometry.computeBoundingSphere()}function bf(e,t,n){this.type="PlaneHelper",this.plane=e,this.size=void 0===t?1:t;var i=void 0!==n?n:16776960,r=new ls;r.addAttribute("position",new Zo([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),r.computeBoundingSphere(),Du.call(this,r,new Ou({color:i}));var o=new ls;o.addAttribute("position",new Zo([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),o.computeBoundingSphere(),this.add(new Ms(o,new Go({color:i,opacity:.2,transparent:!0,depthWrite:!1})))}yf.prototype=Object.create(Uu.prototype),yf.prototype.constructor=yf,yf.prototype.update=function(e){if(void 0!==this.object&&vf.setFromObject(this.object),!vf.isEmpty()){var t=vf.min,n=vf.max,i=this.geometry.attributes.position,r=i.array;r[0]=n.x,r[1]=n.y,r[2]=n.z,r[3]=t.x,r[4]=n.y,r[5]=n.z,r[6]=t.x,r[7]=t.y,r[8]=n.z,r[9]=n.x,r[10]=t.y,r[11]=n.z,r[12]=n.x,r[13]=n.y,r[14]=t.z,r[15]=t.x,r[16]=n.y,r[17]=t.z,r[18]=t.x,r[19]=t.y,r[20]=t.z,r[21]=n.x,r[22]=t.y,r[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}},yf.prototype.setFromObject=function(e){return this.object=e,this.update(),this},yf.prototype.copy=function(e){return Uu.prototype.copy.call(this,e),this.object=e.object,this},yf.prototype.clone=function(){return(new this.constructor).copy(this)},xf.prototype=Object.create(Uu.prototype),xf.prototype.constructor=xf,xf.prototype.updateMatrixWorld=function(e){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),qr.prototype.updateMatrixWorld.call(this,e))},bf.prototype=Object.create(Du.prototype),bf.prototype.constructor=bf,bf.prototype.updateMatrixWorld=function(e){var t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.children[0].material.side=t<0?Xt:Ht,this.lookAt(this.plane.normal),qr.prototype.updateMatrixWorld.call(this,e)};var wf,jf,Sf=new pr;function Af(e,t,n,i,r,o){qr.call(this),void 0===e&&(e=new pr(0,0,1)),void 0===t&&(t=new pr(0,0,0)),void 0===n&&(n=1),void 0===i&&(i=16776960),void 0===r&&(r=.2*n),void 0===o&&(o=.2*r),void 0===wf&&((wf=new ls).addAttribute("position",new Zo([0,0,0,0,1,0],3)),(jf=new sd(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(t),this.line=new Du(wf,new Ou({color:i})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Ms(jf,new Go({color:i})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,r,o)}function Mf(e){var t=[0,0,0,e=e||1,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new ls;n.addAttribute("position",new Zo(t,3)),n.addAttribute("color",new Zo([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));var i=new Ou({vertexColors:Qt});Uu.call(this,n,i)}Af.prototype=Object.create(qr.prototype),Af.prototype.constructor=Af,Af.prototype.setDirection=function(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{Sf.set(e.z,0,-e.x).normalize();var t=Math.acos(e.y);this.quaternion.setFromAxisAngle(Sf,t)}},Af.prototype.setLength=function(e,t,n){void 0===t&&(t=.2*e),void 0===n&&(n=.2*t),this.line.scale.set(1,Math.max(0,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()},Af.prototype.setColor=function(e){this.line.material.color.set(e),this.cone.material.color.set(e)},Af.prototype.copy=function(e){return qr.prototype.copy.call(this,e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this},Af.prototype.clone=function(){return(new this.constructor).copy(this)},Mf.prototype=Object.create(Uu.prototype),Mf.prototype.constructor=Mf;function Tf(e){rh.call(this,e),this.type="catmullrom"}Jd.create=function(e,t){return e.prototype=Object.create(Jd.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},Object.assign(_h.prototype,{createPointsGeometry:function(e){var t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){var t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){for(var t=new Cs,n=0,i=e.length;n<i;n++){var r=e[n];t.vertices.push(new pr(r.x,r.y,r.z||0))}return t}}),Object.assign(gh.prototype,{fromPoints:function(e){this.setFromPoints(e)}}),Object.create(rh.prototype),Object.create(rh.prototype),Tf.prototype=Object.create(rh.prototype),Object.assign(Tf.prototype,{initFromArray:function(){},getControlPointsArray:function(){},reparametrizeByArcLength:function(){}}),nf.prototype.setColors=function(){},qp.prototype.update=function(){},Object.assign(Bd.prototype,{extractUrlBase:function(e){return Ih.extractUrlBase(e)}}),Object.assign(Dh.prototype,{setTexturePath:function(e){return this.setResourcePath(e)}}),Object.assign(Cp.prototype,{center:function(e){return this.getCenter(e)},empty:function(){return this.isEmpty()},isIntersectionBox:function(e){return this.intersectsBox(e)},size:function(e){return this.getSize(e)}}),Object.assign(lo.prototype,{center:function(e){return this.getCenter(e)},empty:function(){return this.isEmpty()},isIntersectionBox:function(e){return this.intersectsBox(e)},isIntersectionSphere:function(e){return this.intersectsSphere(e)},size:function(e){return this.getSize(e)}}),kp.prototype.center=function(e){return this.getCenter(e)},Object.assign(lr,{random16:function(){return Math.random()},nearestPowerOfTwo:function(e){return lr.floorPowerOfTwo(e)},nextPowerOfTwo:function(e){return lr.ceilPowerOfTwo(e)}}),Object.assign(_r.prototype,{flattenToArrayOffset:function(e,t){return this.toArray(e,t)},multiplyVector3:function(e){return e.applyMatrix3(this)},multiplyVector3Array:function(){},applyToBuffer:function(e){return this.applyToBufferAttribute(e)},applyToVector3Array:function(){}}),Object.assign(Er.prototype,{extractPosition:function(e){return this.copyPosition(e)},flattenToArrayOffset:function(e,t){return this.toArray(e,t)},getPosition:function(){return(new pr).setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(e){return this.makeRotationFromQuaternion(e)},multiplyToArray:function(){},multiplyVector3:function(e){return e.applyMatrix4(this)},multiplyVector4:function(e){return e.applyMatrix4(this)},multiplyVector3Array:function(){},rotateAxis:function(e){e.transformDirection(this)},crossVector:function(e){return e.applyMatrix4(this)},translate:function(){},rotateX:function(){},rotateY:function(){},rotateZ:function(){},rotateByAxis:function(){},applyToBuffer:function(e){return this.applyToBufferAttribute(e)},applyToVector3Array:function(){},makeFrustum:function(e,t,n,i,r,o){return this.makePerspective(e,t,i,n,r,o)}}),Ks.prototype.isIntersectionLine=function(e){return this.intersectsLine(e)},cr.prototype.multiplyVector3=function(e){return e.applyQuaternion(this)},Object.assign(xo.prototype,{isIntersectionBox:function(e){return this.intersectsBox(e)},isIntersectionPlane:function(e){return this.intersectsPlane(e)},isIntersectionSphere:function(e){return this.intersectsSphere(e)}}),Object.assign(Oo.prototype,{area:function(){return this.getArea()},barycoordFromPoint:function(e,t){return this.getBarycoord(e,t)},midpoint:function(e){return this.getMidpoint(e)},normal:function(e){return this.getNormal(e)},plane:function(e){return this.getPlane(e)}}),Object.assign(Oo,{barycoordFromPoint:function(e,t,n,i,r){return Oo.getBarycoord(e,t,n,i,r)},normal:function(e,t,n,i){return Oo.getNormal(e,t,n,i)}}),Object.assign(vh.prototype,{extractAllPoints:function(e){return this.extractPoints(e)},extrude:function(e){return new Vc(this,e)},makeGeometry:function(e){return new td(this,e)}}),Object.assign(ur.prototype,{fromAttribute:function(e,t,n){return this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return this.manhattanDistanceTo(e)},lengthManhattan:function(){return this.manhattanLength()}}),Object.assign(pr.prototype,{setEulerFromRotationMatrix:function(){},setEulerFromQuaternion:function(){},getPositionFromMatrix:function(e){return this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return this.setFromMatrixColumn(t,e)},applyProjection:function(e){return this.applyMatrix4(e)},fromAttribute:function(e,t,n){return this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return this.manhattanDistanceTo(e)},lengthManhattan:function(){return this.manhattanLength()}}),Object.assign(xr.prototype,{fromAttribute:function(e,t,n){return this.fromBufferAttribute(e,t,n)},lengthManhattan:function(){return this.manhattanLength()}}),Object.assign(Cs.prototype,{computeTangents:function(){},computeLineDistances:function(){}}),Object.assign(qr.prototype,{getChildByName:function(e){return this.getObjectByName(e)},renderDepth:function(){},translate:function(e,t){return this.translateOnAxis(t,e)},getWorldRotation:function(){}}),Object.defineProperties(qr.prototype,{eulerOrder:{get:function(){return this.rotation.order},set:function(e){this.rotation.order=e}},useQuaternion:{get:function(){},set:function(){}}}),Object.defineProperties(Au.prototype,{objects:{get:function(){return this.levels}}}),Object.defineProperty(Lu.prototype,"useVertexTexture",{get:function(){},set:function(){}}),Mu.prototype.initBones=function(){},Object.defineProperty(Jd.prototype,"__arcLengthDivisions",{get:function(){return this.arcLengthDivisions},set:function(e){this.arcLengthDivisions=e}}),Vs.prototype.setLens=function(e,t){void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(yh.prototype,{onlyShadow:{set:function(){}},shadowCameraFov:{set:function(e){this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){}},shadowBias:{set:function(e){this.shadow.bias=e}},shadowDarkness:{set:function(){}},shadowMapWidth:{set:function(e){this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){this.shadow.mapSize.height=e}}}),Object.defineProperties(Vo.prototype,{length:{get:function(){return this.array.length}},copyIndicesArray:function(){}}),Object.assign(ls.prototype,{addIndex:function(e){this.setIndex(e)},addDrawCall:function(e,t,n){this.addGroup(e,t)},clearDrawCalls:function(){this.clearGroups()},computeTangents:function(){},computeOffsets:function(){}}),Object.defineProperties(ls.prototype,{drawcalls:{get:function(){return this.groups}},offsets:{get:function(){return this.groups}}}),Object.assign(Hc.prototype,{getArrays:function(){},addShapeList:function(){},addShape:function(){}}),Object.defineProperties(Tp.prototype,{dynamic:{set:function(){}},onUpdate:{value:function(){return this}}}),Object.defineProperties(Bo.prototype,{wrapAround:{get:function(){},set:function(){}},overdraw:{get:function(){},set:function(){}},wrapRGB:{get:function(){return new No}},shading:{get:function(){},set:function(e){this.flatShading=1===e}}}),Object.defineProperties(_d.prototype,{metal:{get:function(){return!1},set:function(){}}}),Object.defineProperties(Bs.prototype,{derivatives:{get:function(){return this.extensions.derivatives},set:function(e){this.extensions.derivatives=e}}}),Object.assign(iu.prototype,{clearTarget:function(e,t,n,i){this.setRenderTarget(e),this.clear(t,n,i)},animate:function(e){this.setAnimationLoop(e)},getCurrentRenderTarget:function(){return this.getRenderTarget()},getMaxAnisotropy:function(){return this.capabilities.getMaxAnisotropy()},getPrecision:function(){return this.capabilities.precision},resetGLState:function(){return this.state.reset()},supportsFloatTextures:function(){return this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return this.capabilities.vertexTextures},supportsInstancedArrays:function(){return this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){this.setScissorTest(e)},initMaterial:function(){},addPrePlugin:function(){},addPostPlugin:function(){},updateShadowMap:function(){},setFaceCulling:function(){},allocTextureUnit:function(){},setTexture:function(){},setTexture2D:function(){},setTextureCube:function(){},getActiveMipMapLevel:function(){return this.getActiveMipmapLevel()}}),Object.defineProperties(iu.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){this.shadowMap.type=e}},shadowMapCullFace:{get:function(){},set:function(){}},context:{get:function(){return this.getContext()}}}),Object.defineProperties(Xl.prototype,{cullFace:{get:function(){},set:function(){}},renderReverseSided:{get:function(){},set:function(){}},renderSingleSided:{get:function(){},set:function(){}}}),Object.defineProperties(Ys.prototype,{activeCubeFace:{set:function(){}},activeMipMapLevel:{set:function(){}}}),Object.defineProperties(br.prototype,{wrapS:{get:function(){return this.texture.wrapS},set:function(e){this.texture.wrapS=e}},wrapT:{get:function(){return this.texture.wrapT},set:function(e){this.texture.wrapT=e}},magFilter:{get:function(){return this.texture.magFilter},set:function(e){this.texture.magFilter=e}},minFilter:{get:function(){return this.texture.minFilter},set:function(e){this.texture.minFilter=e}},anisotropy:{get:function(){return this.texture.anisotropy},set:function(e){this.texture.anisotropy=e}},offset:{get:function(){return this.texture.offset},set:function(e){this.texture.offset=e}},repeat:{get:function(){return this.texture.repeat},set:function(e){this.texture.repeat=e}},format:{get:function(){return this.texture.format},set:function(e){this.texture.format=e}},type:{get:function(){return this.texture.type},set:function(e){this.texture.type=e}},generateMipmaps:{get:function(){return this.texture.generateMipmaps},set:function(e){this.texture.generateMipmaps=e}}}),Object.defineProperties(tu.prototype,{standing:{set:function(){}},userHeight:{set:function(){}}}),ap.prototype.load=function(e){var t=this;return(new qh).load(e,function(e){t.setBuffer(e)}),this},pp.prototype.getData=function(){return this.getFrequencyData()},Ws.prototype.updateCubeMap=function(e,t){return this.update(e,t)};gr.crossOrigin=void 0,gr.loadTexture=function(e,t,n,i){var r=new Qd;r.setCrossOrigin(this.crossOrigin);var o=r.load(e,n,void 0,i);return t&&(o.mapping=t),o},gr.loadTextureCube=function(e,t,n,i){var r=new qd;r.setCrossOrigin(this.crossOrigin);var o=r.load(e,n,void 0,i);return t&&(o.mapping=t),o},gr.loadCompressedTexture=function(){},gr.loadCompressedTextureCube=function(){};var Pf={OutWindow:function(){this._windowSize=0}};Pf.OutWindow.prototype.create=function(e){this._buffer&&this._windowSize===e||(this._buffer=[]),this._windowSize=e,this._pos=0,this._streamPos=0},Pf.OutWindow.prototype.flush=function(){var e=this._pos-this._streamPos;if(0!==e){for(;e--;)this._stream.writeByte(this._buffer[this._streamPos++]);this._pos>=this._windowSize&&(this._pos=0),this._streamPos=this._pos}},Pf.OutWindow.prototype.releaseStream=function(){this.flush(),this._stream=null},Pf.OutWindow.prototype.setStream=function(e){this.releaseStream(),this._stream=e},Pf.OutWindow.prototype.init=function(e){e||(this._streamPos=0,this._pos=0)},Pf.OutWindow.prototype.copyBlock=function(e,t){var n=this._pos-e-1;for(n<0&&(n+=this._windowSize);t--;)n>=this._windowSize&&(n=0),this._buffer[this._pos++]=this._buffer[n++],this._pos>=this._windowSize&&this.flush()},Pf.OutWindow.prototype.putByte=function(e){this._buffer[this._pos++]=e,this._pos>=this._windowSize&&this.flush()},Pf.OutWindow.prototype.getByte=function(e){var t=this._pos-e-1;return t<0&&(t+=this._windowSize),this._buffer[t]},Pf.RangeDecoder=function(){},Pf.RangeDecoder.prototype.setStream=function(e){this._stream=e},Pf.RangeDecoder.prototype.releaseStream=function(){this._stream=null},Pf.RangeDecoder.prototype.init=function(){var e=5;for(this._code=0,this._range=-1;e--;)this._code=this._code<<8|this._stream.readByte()},Pf.RangeDecoder.prototype.decodeDirectBits=function(e){for(var t,n=0,i=e;i--;)this._range>>>=1,t=this._code-this._range>>>31,this._code-=this._range&t-1,n=n<<1|1-t,0==(4278190080&this._range)&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8);return n},Pf.RangeDecoder.prototype.decodeBit=function(e,t){var n=e[t],i=(this._range>>>11)*n;return(2147483648^this._code)<(2147483648^i)?(this._range=i,e[t]+=2048-n>>>5,0==(4278190080&this._range)&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8),0):(this._range-=i,this._code-=i,e[t]-=n>>>5,0==(4278190080&this._range)&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8),1)},Pf.initBitModels=function(e,t){for(;t--;)e[t]=1024},Pf.BitTreeDecoder=function(e){this._models=[],this._numBitLevels=e},Pf.BitTreeDecoder.prototype.init=function(){Pf.initBitModels(this._models,1<<this._numBitLevels)},Pf.BitTreeDecoder.prototype.decode=function(e){for(var t=1,n=this._numBitLevels;n--;)t=t<<1|e.decodeBit(this._models,t);return t-(1<<this._numBitLevels)},Pf.BitTreeDecoder.prototype.reverseDecode=function(e){for(var t,n=1,i=0,r=0;r<this._numBitLevels;++r)n=n<<1|(t=e.decodeBit(this._models,n)),i|=t<<r;return i},Pf.reverseDecode2=function(e,t,n,i){for(var r,o=1,s=0,a=0;a<i;++a)o=o<<1|(r=n.decodeBit(e,t+o)),s|=r<<a;return s},Pf.LenDecoder=function(){this._choice=[],this._lowCoder=[],this._midCoder=[],this._highCoder=new Pf.BitTreeDecoder(8),this._numPosStates=0},Pf.LenDecoder.prototype.create=function(e){for(;this._numPosStates<e;++this._numPosStates)this._lowCoder[this._numPosStates]=new Pf.BitTreeDecoder(3),this._midCoder[this._numPosStates]=new Pf.BitTreeDecoder(3)},Pf.LenDecoder.prototype.init=function(){var e=this._numPosStates;for(Pf.initBitModels(this._choice,2);e--;)this._lowCoder[e].init(),this._midCoder[e].init();this._highCoder.init()},Pf.LenDecoder.prototype.decode=function(e,t){return 0===e.decodeBit(this._choice,0)?this._lowCoder[t].decode(e):0===e.decodeBit(this._choice,1)?8+this._midCoder[t].decode(e):16+this._highCoder.decode(e)},Pf.Decoder2=function(){this._decoders=[]},Pf.Decoder2.prototype.init=function(){Pf.initBitModels(this._decoders,768)},Pf.Decoder2.prototype.decodeNormal=function(e){var t=1;do{t=t<<1|e.decodeBit(this._decoders,t)}while(t<256);return 255&t},Pf.Decoder2.prototype.decodeWithMatchByte=function(e,t){var n,i,r=1;do{if(n=t>>7&1,t<<=1,r=r<<1|(i=e.decodeBit(this._decoders,(1+n<<8)+r)),n!==i){for(;r<256;)r=r<<1|e.decodeBit(this._decoders,r);break}}while(r<256);return 255&r},Pf.LiteralDecoder=function(){},Pf.LiteralDecoder.prototype.create=function(e,t){var n;if(!this._coders||this._numPrevBits!==t||this._numPosBits!==e)for(this._numPosBits=e,this._posMask=(1<<e)-1,this._numPrevBits=t,this._coders=[],n=1<<this._numPrevBits+this._numPosBits;n--;)this._coders[n]=new Pf.Decoder2},Pf.LiteralDecoder.prototype.init=function(){for(var e=1<<this._numPrevBits+this._numPosBits;e--;)this._coders[e].init()},Pf.LiteralDecoder.prototype.getDecoder=function(e,t){return this._coders[((e&this._posMask)<<this._numPrevBits)+((255&t)>>>8-this._numPrevBits)]},Pf.Decoder=function(){this._outWindow=new Pf.OutWindow,this._rangeDecoder=new Pf.RangeDecoder,this._isMatchDecoders=[],this._isRepDecoders=[],this._isRepG0Decoders=[],this._isRepG1Decoders=[],this._isRepG2Decoders=[],this._isRep0LongDecoders=[],this._posSlotDecoder=[],this._posDecoders=[],this._posAlignDecoder=new Pf.BitTreeDecoder(4),this._lenDecoder=new Pf.LenDecoder,this._repLenDecoder=new Pf.LenDecoder,this._literalDecoder=new Pf.LiteralDecoder,this._dictionarySize=-1,this._dictionarySizeCheck=-1,this._posSlotDecoder[0]=new Pf.BitTreeDecoder(6),this._posSlotDecoder[1]=new Pf.BitTreeDecoder(6),this._posSlotDecoder[2]=new Pf.BitTreeDecoder(6),this._posSlotDecoder[3]=new Pf.BitTreeDecoder(6)},Pf.Decoder.prototype.setDictionarySize=function(e){return!(e<0)&&(this._dictionarySize!==e&&(this._dictionarySize=e,this._dictionarySizeCheck=Math.max(this._dictionarySize,1),this._outWindow.create(Math.max(this._dictionarySizeCheck,4096))),!0)},Pf.Decoder.prototype.setLcLpPb=function(e,t,n){var i=1<<n;return!(e>8||t>4||n>4)&&(this._literalDecoder.create(t,e),this._lenDecoder.create(i),this._repLenDecoder.create(i),this._posStateMask=i-1,!0)},Pf.Decoder.prototype.init=function(){var e=4;for(this._outWindow.init(!1),Pf.initBitModels(this._isMatchDecoders,192),Pf.initBitModels(this._isRep0LongDecoders,192),Pf.initBitModels(this._isRepDecoders,12),Pf.initBitModels(this._isRepG0Decoders,12),Pf.initBitModels(this._isRepG1Decoders,12),Pf.initBitModels(this._isRepG2Decoders,12),Pf.initBitModels(this._posDecoders,114),this._literalDecoder.init();e--;)this._posSlotDecoder[e].init();this._lenDecoder.init(),this._repLenDecoder.init(),this._posAlignDecoder.init(),this._rangeDecoder.init()},Pf.Decoder.prototype.decode=function(e,t,n){var i,r,o,s,a,l,u=0,c=0,d=0,h=0,p=0,f=0,m=0;for(this._rangeDecoder.setStream(e),this._outWindow.setStream(t),this.init();n<0||f<n;)if(i=f&this._posStateMask,0===this._rangeDecoder.decodeBit(this._isMatchDecoders,(u<<4)+i))r=this._literalDecoder.getDecoder(f++,m),m=u>=7?r.decodeWithMatchByte(this._rangeDecoder,this._outWindow.getByte(c)):r.decodeNormal(this._rangeDecoder),this._outWindow.putByte(m),u=u<4?0:u-(u<10?3:6);else{if(1===this._rangeDecoder.decodeBit(this._isRepDecoders,u))o=0,0===this._rangeDecoder.decodeBit(this._isRepG0Decoders,u)?0===this._rangeDecoder.decodeBit(this._isRep0LongDecoders,(u<<4)+i)&&(u=u<7?9:11,o=1):(0===this._rangeDecoder.decodeBit(this._isRepG1Decoders,u)?s=d:(0===this._rangeDecoder.decodeBit(this._isRepG2Decoders,u)?s=h:(s=p,p=h),h=d),d=c,c=s),0===o&&(o=2+this._repLenDecoder.decode(this._rangeDecoder,i),u=u<7?8:11);else if(p=h,h=d,d=c,o=2+this._lenDecoder.decode(this._rangeDecoder,i),u=u<7?7:10,(a=this._posSlotDecoder[o<=5?o-2:3].decode(this._rangeDecoder))>=4){if(c=(2|1&a)<<(l=(a>>1)-1),a<14)c+=Pf.reverseDecode2(this._posDecoders,c-a-1,this._rangeDecoder,l);else if(c+=this._rangeDecoder.decodeDirectBits(l-4)<<4,(c+=this._posAlignDecoder.reverseDecode(this._rangeDecoder))<0){if(-1===c)break;return!1}}else c=a;if(c>=f||c>=this._dictionarySizeCheck)return!1;this._outWindow.copyBlock(c,o),f+=o,m=this._outWindow.getByte(0)}return this._outWindow.flush(),this._outWindow.releaseStream(),this._rangeDecoder.releaseStream(),!0},Pf.Decoder.prototype.setDecoderProperties=function(e){var t,n,i,r,o;return!(e.size<5)&&(n=(t=e.readByte())%9,i=(t=~~(t/9))%5,r=~~(t/5),!!this.setLcLpPb(n,i,r)&&(o=e.readByte(),o|=e.readByte()<<8,o|=e.readByte()<<16,o+=16777216*e.readByte(),this.setDictionarySize(o)))},Pf.decompress=function(e,t,n,i){var r=new Pf.Decoder;if(!r.setDecoderProperties(e))throw"Incorrect stream properties";if(!r.decode(t,n,i))throw"Error in data stream";return!0};var Lf,Ef,Of,If={};function Cf(){Bd.call(this),Object.defineProperties(this,{statusDomElement:{get:function(){return void 0===this._statusDomElement&&(this._statusDomElement=document.createElement("div")),this._statusDomElement}}})}function Ff(e){this.manager=void 0!==e?e:Ud,this.materials=null}If.CompressionMethod={RAW:5718354,MG1:3229517,MG2:3295053},If.Flags={NORMALS:1},If.File=function(e){this.load(e)},If.File.prototype.load=function(e){this.header=new If.FileHeader(e),this.body=new If.FileBody(this.header),this.getReader().read(e,this.body)},If.File.prototype.getReader=function(){var e;switch(this.header.compressionMethod){case If.CompressionMethod.RAW:e=new If.ReaderRAW;break;case If.CompressionMethod.MG1:e=new If.ReaderMG1;break;case If.CompressionMethod.MG2:e=new If.ReaderMG2}return e},If.FileHeader=function(e){e.readInt32(),this.fileFormat=e.readInt32(),this.compressionMethod=e.readInt32(),this.vertexCount=e.readInt32(),this.triangleCount=e.readInt32(),this.uvMapCount=e.readInt32(),this.attrMapCount=e.readInt32(),this.flags=e.readInt32(),this.comment=e.readString()},If.FileHeader.prototype.hasNormals=function(){return this.flags&If.Flags.NORMALS},If.FileBody=function(e){var t=3*e.triangleCount,n=3*e.vertexCount,i=e.hasNormals()?3*e.vertexCount:0,r=2*e.vertexCount,o=4*e.vertexCount,s=0,a=new ArrayBuffer(4*(t+n+i+r*e.uvMapCount+o*e.attrMapCount));if(this.indices=new Uint32Array(a,0,t),this.vertices=new Float32Array(a,4*t,n),e.hasNormals()&&(this.normals=new Float32Array(a,4*(t+n),i)),e.uvMapCount)for(this.uvMaps=[],s=0;s<e.uvMapCount;++s)this.uvMaps[s]={uv:new Float32Array(a,4*(t+n+i+s*r),r)};if(e.attrMapCount)for(this.attrMaps=[],s=0;s<e.attrMapCount;++s)this.attrMaps[s]={attr:new Float32Array(a,4*(t+n+i+r*e.uvMapCount+s*o),o)}},If.FileMG2Header=function(e){e.readInt32(),this.vertexPrecision=e.readFloat32(),this.normalPrecision=e.readFloat32(),this.lowerBoundx=e.readFloat32(),this.lowerBoundy=e.readFloat32(),this.lowerBoundz=e.readFloat32(),this.higherBoundx=e.readFloat32(),this.higherBoundy=e.readFloat32(),this.higherBoundz=e.readFloat32(),this.divx=e.readInt32(),this.divy=e.readInt32(),this.divz=e.readInt32(),this.sizex=(this.higherBoundx-this.lowerBoundx)/this.divx,this.sizey=(this.higherBoundy-this.lowerBoundy)/this.divy,this.sizez=(this.higherBoundz-this.lowerBoundz)/this.divz},If.ReaderRAW=function(){},If.ReaderRAW.prototype.read=function(e,t){this.readIndices(e,t.indices),this.readVertices(e,t.vertices),t.normals&&this.readNormals(e,t.normals),t.uvMaps&&this.readUVMaps(e,t.uvMaps),t.attrMaps&&this.readAttrMaps(e,t.attrMaps)},If.ReaderRAW.prototype.readIndices=function(e,t){e.readInt32(),e.readArrayInt32(t)},If.ReaderRAW.prototype.readVertices=function(e,t){e.readInt32(),e.readArrayFloat32(t)},If.ReaderRAW.prototype.readNormals=function(e,t){e.readInt32(),e.readArrayFloat32(t)},If.ReaderRAW.prototype.readUVMaps=function(e,t){for(var n=0;n<t.length;++n)e.readInt32(),t[n].name=e.readString(),t[n].filename=e.readString(),e.readArrayFloat32(t[n].uv)},If.ReaderRAW.prototype.readAttrMaps=function(e,t){for(var n=0;n<t.length;++n)e.readInt32(),t[n].name=e.readString(),e.readArrayFloat32(t[n].attr)},If.ReaderMG1=function(){},If.ReaderMG1.prototype.read=function(e,t){this.readIndices(e,t.indices),this.readVertices(e,t.vertices),t.normals&&this.readNormals(e,t.normals),t.uvMaps&&this.readUVMaps(e,t.uvMaps),t.attrMaps&&this.readAttrMaps(e,t.attrMaps)},If.ReaderMG1.prototype.readIndices=function(e,t){e.readInt32();var n=e.readInt32(),i=new If.InterleavedStream(t,3);If.decompress(e,n,i),If.restoreIndices(t,t.length)},If.ReaderMG1.prototype.readVertices=function(e,t){e.readInt32();var n=e.readInt32(),i=new If.InterleavedStream(t,1);If.decompress(e,n,i)},If.ReaderMG1.prototype.readNormals=function(e,t){e.readInt32();var n=e.readInt32(),i=new If.InterleavedStream(t,3);If.decompress(e,n,i)},If.ReaderMG1.prototype.readUVMaps=function(e,t){for(var n=0;n<t.length;++n){e.readInt32(),t[n].name=e.readString(),t[n].filename=e.readString();var i=e.readInt32(),r=new If.InterleavedStream(t[n].uv,2);If.decompress(e,i,r)}},If.ReaderMG1.prototype.readAttrMaps=function(e,t){for(var n=0;n<t.length;++n){e.readInt32(),t[n].name=e.readString();var i=e.readInt32(),r=new If.InterleavedStream(t[n].attr,4);If.decompress(e,i,r)}},If.ReaderMG2=function(){},If.ReaderMG2.prototype.read=function(e,t){this.MG2Header=new If.FileMG2Header(e),this.readVertices(e,t.vertices),this.readIndices(e,t.indices),t.normals&&this.readNormals(e,t),t.uvMaps&&this.readUVMaps(e,t.uvMaps),t.attrMaps&&this.readAttrMaps(e,t.attrMaps)},If.ReaderMG2.prototype.readVertices=function(e,t){e.readInt32();var n=e.readInt32(),i=new If.InterleavedStream(t,3);If.decompress(e,n,i);var r=this.readGridIndices(e,t);If.restoreVertices(t,this.MG2Header,r,this.MG2Header.vertexPrecision)},If.ReaderMG2.prototype.readGridIndices=function(e,t){e.readInt32();var n=e.readInt32(),i=new Uint32Array(t.length/3),r=new If.InterleavedStream(i,1);return If.decompress(e,n,r),If.restoreGridIndices(i,i.length),i},If.ReaderMG2.prototype.readIndices=function(e,t){e.readInt32();var n=e.readInt32(),i=new If.InterleavedStream(t,3);If.decompress(e,n,i),If.restoreIndices(t,t.length)},If.ReaderMG2.prototype.readNormals=function(e,t){e.readInt32();var n=e.readInt32(),i=new If.InterleavedStream(t.normals,3);If.decompress(e,n,i);var r=If.calcSmoothNormals(t.indices,t.vertices);If.restoreNormals(t.normals,r,this.MG2Header.normalPrecision)},If.ReaderMG2.prototype.readUVMaps=function(e,t){for(var n=0;n<t.length;++n){e.readInt32(),t[n].name=e.readString(),t[n].filename=e.readString();var i=e.readFloat32(),r=e.readInt32(),o=new If.InterleavedStream(t[n].uv,2);If.decompress(e,r,o),If.restoreMap(t[n].uv,2,i)}},If.ReaderMG2.prototype.readAttrMaps=function(e,t){for(var n=0;n<t.length;++n){e.readInt32(),t[n].name=e.readString();var i=e.readFloat32(),r=e.readInt32(),o=new If.InterleavedStream(t[n].attr,4);If.decompress(e,r,o),If.restoreMap(t[n].attr,4,i)}},If.decompress=function(e,t,n){var i=e.offset;Pf.decompress(e,e,n,n.data.length),e.offset=i+5+t},If.restoreIndices=function(e,t){var n=3;for(t>0&&(e[2]+=e[0],e[1]+=e[0]);n<t;n+=3)e[n]+=e[n-3],e[n]===e[n-3]?e[n+1]+=e[n-2]:e[n+1]+=e[n],e[n+2]+=e[n]},If.restoreGridIndices=function(e,t){for(var n=1;n<t;++n)e[n]+=e[n-1]},If.restoreVertices=function(e,t,n,i){for(var r,o,s,a,l,u=new Uint32Array(e.buffer,e.byteOffset,e.length),c=t.divx,d=c*t.divy,h=2147483647,p=0,f=0,m=0,_=n.length;f<_;m+=3)s=r=n[f++],s-=~~((l=~~(s/d))*d),s-=~~((a=~~(s/c))*c),o=u[m],r===h&&(o+=p),e[m]=t.lowerBoundx+s*t.sizex+i*o,e[m+1]=t.lowerBoundy+a*t.sizey+i*u[m+1],e[m+2]=t.lowerBoundz+l*t.sizez+i*u[m+2],h=r,p=o},If.restoreNormals=function(e,t,n){for(var i,r,o,s,a,l,u,c,d,h,p=new Uint32Array(e.buffer,e.byteOffset,e.length),f=0,m=e.length,_=1.5707963267948966;f<m;f+=3)i=p[f]*n,0===(r=p[f+1])?(e[f]=t[f]*i,e[f+1]=t[f+1]*i,e[f+2]=t[f+2]*i):(o=r<=4?(p[f+2]-2)*_:(4*p[f+2]/r-2)*_,r*=n*_,a=(s=i*Math.sin(r))*Math.cos(o),l=s*Math.sin(o),u=i*Math.cos(r),d=t[f+1],c=t[f]-t[f+2],(h=Math.sqrt(2*d*d+c*c))>1e-20&&(c/=h,d/=h),e[f]=t[f]*u+(t[f+1]*d-t[f+2]*c)*l-d*a,e[f+1]=t[f+1]*u-(t[f+2]+t[f])*d*l+c*a,e[f+2]=t[f+2]*u+(t[f]*c+t[f+1]*d)*l+d*a)},If.restoreMap=function(e,t,n){for(var i,r,o,s=new Uint32Array(e.buffer,e.byteOffset,e.length),a=0,l=e.length;a<t;++a)for(i=0,o=a;o<l;o+=t)i+=1&(r=s[o])?-(r+1>>1):r>>1,e[o]=i*n},If.calcSmoothNormals=function(e,t){var n,i,r,o,s,a,l,u,c,d,h,p,f,m,_,g=new Float32Array(t.length);for(m=0,_=e.length;m<_;)n=3*e[m++],i=3*e[m++],r=3*e[m++],l=t[i]-t[n],d=t[r]-t[n],u=t[i+1]-t[n+1],h=t[r+1]-t[n+1],c=t[i+2]-t[n+2],o=u*(p=t[r+2]-t[n+2])-c*h,s=c*d-l*p,a=l*h-u*d,(f=Math.sqrt(o*o+s*s+a*a))>1e-10&&(o/=f,s/=f,a/=f),g[n]+=o,g[n+1]+=s,g[n+2]+=a,g[i]+=o,g[i+1]+=s,g[i+2]+=a,g[r]+=o,g[r+1]+=s,g[r+2]+=a;for(m=0,_=g.length;m<_;m+=3)(f=Math.sqrt(g[m]*g[m]+g[m+1]*g[m+1]+g[m+2]*g[m+2]))>1e-10&&(g[m]/=f,g[m+1]/=f,g[m+2]/=f);return g},If.isLittleEndian=(Lf=new ArrayBuffer(2),Ef=new Uint8Array(Lf),Of=new Uint16Array(Lf),Ef[0]=1,1===Of[0]),If.InterleavedStream=function(e,t){this.data=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),this.offset=If.isLittleEndian?3:0,this.count=4*t,this.len=this.data.length},If.InterleavedStream.prototype.writeByte=function(e){this.data[this.offset]=e,this.offset+=this.count,this.offset>=this.len&&(this.offset-=this.len-4,this.offset>=this.count&&(this.offset-=this.count+(If.isLittleEndian?1:-1)))},If.Stream=function(e){this.data=e,this.offset=0},If.Stream.prototype.TWO_POW_MINUS23=Math.pow(2,-23),If.Stream.prototype.TWO_POW_MINUS126=Math.pow(2,-126),If.Stream.prototype.readByte=function(){return 255&this.data[this.offset++]},If.Stream.prototype.readInt32=function(){var e=this.readByte();return e|=this.readByte()<<8,(e|=this.readByte()<<16)|this.readByte()<<24},If.Stream.prototype.readFloat32=function(){var e=this.readByte();e+=this.readByte()<<8;var t=this.readByte(),n=this.readByte();e+=(127&t)<<16;var i=(127&n)<<1|(128&t)>>>7,r=128&n?-1:1;return 255===i?0!==e?NaN:r*(1/0):i>0?r*(1+e*this.TWO_POW_MINUS23)*Math.pow(2,i-127):0!==e?r*e*this.TWO_POW_MINUS126:0*r},If.Stream.prototype.readString=function(){var e=this.readInt32();return this.offset+=e,String.fromCharCode.apply(null,this.data.subarray(this.offset-e,this.offset))},If.Stream.prototype.readArrayInt32=function(e){for(var t=0,n=e.length;t<n;)e[t++]=this.readInt32();return e},If.Stream.prototype.readArrayFloat32=function(e){for(var t=0,n=e.length;t<n;)e[t++]=this.readFloat32();return e},Cf.prototype=Object.create(Bd.prototype),Cf.prototype.constructor=Cf,Cf.prototype.loadParts=function(e,t,n){n=n||{};var i=this,r=new XMLHttpRequest,o=n.basePath?n.basePath:this.extractUrlBase(e);r.onreadystatechange=function(){if(4===r.readyState&&(200===r.status||0===r.status)){for(var e=JSON.parse(r.responseText),s=[],a=[],l=0,u=0;u<e.materials.length;u++)s[u]=i.createMaterial(e.materials[u],o);var c=o+e.data,d={useWorker:n.useWorker,offsets:e.offsets};i.load(c,function(n){l+=1,a.push(n),l===e.offsets.length&&t(a,s)},d)}},r.open("GET",e,!0),r.setRequestHeader("Content-Type","text/plain"),r.send(null)},Cf.prototype.load=function(e,t,n){var i=this,r=void 0!==(n=n||{}).offsets?n.offsets:[0],o=new XMLHttpRequest;o.onreadystatechange=function(){if(4===o.readyState){if(200===o.status||0===o.status){var e=new Uint8Array(o.response);Date.now();if(n.useWorker){var s=n.worker||new Worker("js/loaders/ctm/CTMWorker.js");s.onmessage=function(e){for(var n=e.data,r=0;r<n.length;r++){var o=n[r];Date.now();i.createModel(o,t);Date.now()}},s.postMessage({data:e,offsets:r})}else for(var a=0;a<r.length;a++){var l=new If.Stream(e);l.offset=r[a];var u=new If.File(l);i.createModel(u,t)}}}else 3===o.readyState||2===o.readyState&&o.getResponseHeader("Content-Length")},o.open("GET",e,!0),o.responseType="arraybuffer",o.send(null)},Cf.prototype.createModel=function(e,t){var n=function(){ls.call(this),this.materials=[];var t,n,i=e.body.indices,r=e.body.vertices,o=e.body.normals,s=e.body.uvMaps;void 0!==s&&s.length>0&&(t=s[0].uv);var a=e.body.attrMaps;void 0!==a&&a.length>0&&"Color"===a[0].name&&(n=a[0].attr),this.setIndex(new Vo(i,1)),this.addAttribute("position",new Vo(r,3)),void 0!==o&&this.addAttribute("normal",new Vo(o,3)),void 0!==t&&this.addAttribute("uv",new Vo(t,2)),void 0!==n&&this.addAttribute("color",new Vo(n,4))};(n.prototype=Object.create(ls.prototype)).constructor=n;var i=new n;void 0===i.attributes.normal&&i.computeVertexNormals(),t(i)},Ff.prototype={constructor:Ff,load:function(e,t,n,i){var r=this,o=new Vd(r.manager);o.setPath(this.path),o.load(e,function(e){t(r.parse(e))},n,i)},setPath:function(e){this.path=e},setMaterials:function(e){this.materials=e},parse:function(e){var t,n=[],i=!1,r=[],o=[],s=[];function a(e){t={name:e,geometry:{vertices:[],normals:[],uvs:[]},material:{name:"",smooth:!0}},n.push(t)}function l(e){var t=parseInt(e);return 3*(t>=0?t-1:t+r.length/3)}function u(e){var t=parseInt(e);return 3*(t>=0?t-1:t+o.length/3)}function c(e){var t=parseInt(e);return 2*(t>=0?t-1:t+s.length/2)}function d(e,n,i){t.geometry.vertices.push(r[e],r[e+1],r[e+2],r[n],r[n+1],r[n+2],r[i],r[i+1],r[i+2])}function h(e,n,i){t.geometry.normals.push(o[e],o[e+1],o[e+2],o[n],o[n+1],o[n+2],o[i],o[i+1],o[i+2])}function p(e,n,i){t.geometry.uvs.push(s[e],s[e+1],s[n],s[n+1],s[i],s[i+1])}function f(e,t,n,i,r,o,s,a,f,m,_,g){var v,y=l(e),x=l(t),b=l(n);void 0===i?d(y,x,b):(d(y,x,v=l(i)),d(x,b,v)),void 0!==r&&(y=c(r),x=c(o),b=c(s),void 0===i?p(y,x,b):(p(y,x,v=c(a)),p(x,b,v))),void 0!==f&&(y=u(f),x=u(m),b=u(_),void 0===i?h(y,x,b):(h(y,x,v=u(g)),h(x,b,v)))}a("");for(var m=/^v\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)/,_=/^vn\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)/,g=/^vt\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)/,v=/^f\s+(-?\d+)\s+(-?\d+)\s+(-?\d+)(?:\s+(-?\d+))?/,y=/^f\s+((-?\d+)\/(-?\d+))\s+((-?\d+)\/(-?\d+))\s+((-?\d+)\/(-?\d+))(?:\s+((-?\d+)\/(-?\d+)))?/,x=/^f\s+((-?\d+)\/(-?\d+)\/(-?\d+))\s+((-?\d+)\/(-?\d+)\/(-?\d+))\s+((-?\d+)\/(-?\d+)\/(-?\d+))(?:\s+((-?\d+)\/(-?\d+)\/(-?\d+)))?/,b=/^f\s+((-?\d+)\/\/(-?\d+))\s+((-?\d+)\/\/(-?\d+))\s+((-?\d+)\/\/(-?\d+))(?:\s+((-?\d+)\/\/(-?\d+)))?/,w=/^[og]\s+(.+)/,j=/^s\s+(\d+|on|off)/,S=e.split("\n"),A=0;A<S.length;A++){var M,T=S[A];if(0!==(T=T.trim()).length&&"#"!==T.charAt(0))if(null!==(M=m.exec(T)))r.push(parseFloat(M[1]),parseFloat(M[2]),parseFloat(M[3]));else if(null!==(M=_.exec(T)))o.push(parseFloat(M[1]),parseFloat(M[2]),parseFloat(M[3]));else if(null!==(M=g.exec(T)))s.push(parseFloat(M[1]),parseFloat(M[2]));else if(null!==(M=v.exec(T)))f(M[1],M[2],M[3],M[4]);else if(null!==(M=y.exec(T)))f(M[2],M[5],M[8],M[11],M[3],M[6],M[9],M[12]);else if(null!==(M=x.exec(T)))f(M[2],M[6],M[10],M[14],M[3],M[7],M[11],M[15],M[4],M[8],M[12],M[16]);else if(null!==(M=b.exec(T)))f(M[2],M[5],M[8],M[11],void 0,void 0,void 0,void 0,M[3],M[6],M[9],M[12]);else if(null!==(M=w.exec(T))){var P=M[1].trim();!1===i?(i=!0,t.name=P):a(P)}else if(/^usemtl /.test(T))t.material.name=T.substring(7).trim();else if(/^mtllib /.test(T));else{if(null===(M=j.exec(T)))throw new Error("Unexpected line: "+T);t.material.smooth="1"===M[1]||"on"===M[1]}}var L=[];for(A=0;A<n.length;A++){var E=(t=n[A]).geometry,O=new ls;O.name=t.name,O.addAttribute("position",new Vo(new Float32Array(E.vertices),3)),E.normals.length>0?O.addAttribute("normal",new Vo(new Float32Array(E.normals),3)):O.computeVertexNormals(),E.uvs.length>0&&O.addAttribute("uv",new Vo(new Float32Array(E.uvs),2)),L.push(O)}return L}};var Nf=function(){function e(e){this.manager=void 0!==e?e:Ud,this.dracoLoader=null,this.ddsLoader=null}function t(){var e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}e.prototype={constructor:e,crossOrigin:"anonymous",load:function(e,t,n,i){var r,o=this;r=void 0!==this.resourcePath?this.resourcePath:void 0!==this.path?this.path:Ih.extractUrlBase(e),o.manager.itemStart(e);var s=function(t){i&&i(t),o.manager.itemError(e),o.manager.itemEnd(e)},a=new Vd(o.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),"use-credentials"===o.crossOrigin&&a.setWithCredentials(!0),a.load(e,function(n){try{o.parse(n,r,function(n){t(n),o.manager.itemEnd(e)},s)}catch(e){s(e)}},n,s)},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this},setResourcePath:function(e){return this.resourcePath=e,this},setDRACOLoader:function(e){return this.dracoLoader=e,this},setDDSLoader:function(e){return this.ddsLoader=e,this},parse:function(e,t,a,l){var p,f={};if("string"==typeof e)p=e;else if(Ih.decodeText(new Uint8Array(e,0,4))===s){try{f[n.KHR_BINARY_GLTF]=new u(e)}catch(e){return void(l&&l(e))}p=f[n.KHR_BINARY_GLTF].content}else p=Ih.decodeText(new Uint8Array(e));var m=JSON.parse(p);if(void 0===m.asset||m.asset.version[0]<2)l&&l(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported. Use LegacyGLTFLoader instead."));else{if(m.extensionsUsed)for(var _=0;_<m.extensionsUsed.length;++_){var g=m.extensionsUsed[_],v=m.extensionsRequired||[];switch(g){case n.KHR_LIGHTS_PUNCTUAL:f[g]=new r(m);break;case n.KHR_MATERIALS_UNLIT:f[g]=new o;break;case n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:f[g]=new h;break;case n.KHR_DRACO_MESH_COMPRESSION:f[g]=new c(m,this.dracoLoader);break;case n.MSFT_TEXTURE_DDS:f[n.MSFT_TEXTURE_DDS]=new i(this.ddsLoader);break;case n.KHR_TEXTURE_TRANSFORM:f[n.KHR_TEXTURE_TRANSFORM]=new d;break;default:v.indexOf(g)}}new z(m,f,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,manager:this.manager}).parse(a,l)}}};var n={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",MSFT_TEXTURE_DDS:"MSFT_texture_dds"};function i(e){if(!e)throw new Error("THREE.GLTFLoader: Attempting to load .dds texture without importing DDSLoader");this.name=n.MSFT_TEXTURE_DDS,this.ddsLoader=e}function r(e){this.name=n.KHR_LIGHTS_PUNCTUAL;var t=e.extensions&&e.extensions[n.KHR_LIGHTS_PUNCTUAL]||{};this.lightDefs=t.lights||[]}function o(){this.name=n.KHR_MATERIALS_UNLIT}r.prototype.loadLight=function(e){var t,n=this.lightDefs[e],i=new No(16777215);void 0!==n.color&&i.fromArray(n.color);var r=void 0!==n.range?n.range:0;switch(n.type){case"directional":(t=new Ph(i)).target.position.set(0,0,-1),t.add(t.target);break;case"point":(t=new Ah(i)).distance=r;break;case"spot":(t=new jh(i)).distance=r,n.spot=n.spot||{},n.spot.innerConeAngle=void 0!==n.spot.innerConeAngle?n.spot.innerConeAngle:0,n.spot.outerConeAngle=void 0!==n.spot.outerConeAngle?n.spot.outerConeAngle:Math.PI/4,t.angle=n.spot.outerConeAngle,t.penumbra=1-n.spot.innerConeAngle/n.spot.outerConeAngle,t.target.position.set(0,0,-1),t.add(t.target);break;default:throw new Error('THREE.GLTFLoader: Unexpected light type, "'+n.type+'".')}return t.position.set(0,0,0),t.decay=2,void 0!==n.intensity&&(t.intensity=n.intensity),t.name=n.name||"light_"+e,Promise.resolve(t)},o.prototype.getMaterialType=function(){return Go},o.prototype.extendParams=function(e,t,n){var i=[];e.color=new No(1,1,1),e.opacity=1;var r=t.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){var o=r.baseColorFactor;e.color.fromArray(o),e.opacity=o[3]}void 0!==r.baseColorTexture&&i.push(n.assignTexture(e,"map",r.baseColorTexture))}return Promise.all(i)};var s="glTF",a=12,l={JSON:1313821514,BIN:5130562};function u(e){this.name=n.KHR_BINARY_GLTF,this.content=null,this.body=null;var t=new DataView(e,0,a);if(this.header={magic:Ih.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==s)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected. Use LegacyGLTFLoader instead.");for(var i=new DataView(e,a),r=0;r<i.byteLength;){var o=i.getUint32(r,!0);r+=4;var u=i.getUint32(r,!0);if(r+=4,u===l.JSON){var c=new Uint8Array(e,a+r,o);this.content=Ih.decodeText(c)}else if(u===l.BIN){var d=a+r;this.body=e.slice(d,d+o)}r+=o}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}function c(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=n.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t}function d(){this.name=n.KHR_TEXTURE_TRANSFORM}function h(){return{name:n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,specularGlossinessParams:["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"],getMaterialType:function(){return Bs},extendParams:function(e,t,n){var i=t.extensions[this.name],r=ra.standard,o=Rs.clone(r.uniforms),s=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),a=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),l=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\ttexelSpecular = sRGBToLinear( texelSpecular );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),u=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),c=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb;","material.specularRoughness = clamp( 1.0 - glossinessFactor, 0.04, 1.0 );","material.specularColor = specularFactor.rgb;"].join("\n"),d=r.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",s).replace("#include <metalnessmap_pars_fragment>",a).replace("#include <roughnessmap_fragment>",l).replace("#include <metalnessmap_fragment>",u).replace("#include <lights_physical_fragment>",c);delete o.roughness,delete o.metalness,delete o.roughnessMap,delete o.metalnessMap,o.specular={value:(new No).setHex(1118481)},o.glossiness={value:.5},o.specularMap={value:null},o.glossinessMap={value:null},e.vertexShader=r.vertexShader,e.fragmentShader=d,e.uniforms=o,e.defines={STANDARD:""},e.color=new No(1,1,1),e.opacity=1;var h=[];if(Array.isArray(i.diffuseFactor)){var p=i.diffuseFactor;e.color.fromArray(p),e.opacity=p[3]}if(void 0!==i.diffuseTexture&&h.push(n.assignTexture(e,"map",i.diffuseTexture)),e.emissive=new No(0,0,0),e.glossiness=void 0!==i.glossinessFactor?i.glossinessFactor:1,e.specular=new No(1,1,1),Array.isArray(i.specularFactor)&&e.specular.fromArray(i.specularFactor),void 0!==i.specularGlossinessTexture){var f=i.specularGlossinessTexture;h.push(n.assignTexture(e,"glossinessMap",f)),h.push(n.assignTexture(e,"specularMap",f))}return Promise.all(h)},createMaterial:function(e){var t=new Bs({defines:e.defines,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,uniforms:e.uniforms,fog:!0,lights:!0,opacity:e.opacity,transparent:e.transparent});return t.isGLTFSpecularGlossinessMaterial=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=1,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t.extensions.derivatives=!0,t},cloneMaterial:function(e){var t=e.clone();t.isGLTFSpecularGlossinessMaterial=!0;for(var n=this.specularGlossinessParams,i=0,r=n.length;i<r;i++){var o=e[n[i]];t[n[i]]=o&&o.isColor?o.clone():o}return t},refreshUniforms:function(e,t,n,i,r){if(!0===r.isGLTFSpecularGlossinessMaterial){var o,s=r.uniforms,a=r.defines;s.opacity.value=r.opacity,s.diffuse.value.copy(r.color),s.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),s.map.value=r.map,s.specularMap.value=r.specularMap,s.alphaMap.value=r.alphaMap,s.lightMap.value=r.lightMap,s.lightMapIntensity.value=r.lightMapIntensity,s.aoMap.value=r.aoMap,s.aoMapIntensity.value=r.aoMapIntensity,r.map?o=r.map:r.specularMap?o=r.specularMap:r.displacementMap?o=r.displacementMap:r.normalMap?o=r.normalMap:r.bumpMap?o=r.bumpMap:r.glossinessMap?o=r.glossinessMap:r.alphaMap?o=r.alphaMap:r.emissiveMap&&(o=r.emissiveMap),void 0!==o&&(o.isWebGLRenderTarget&&(o=o.texture),!0===o.matrixAutoUpdate&&o.updateMatrix(),s.uvTransform.value.copy(o.matrix)),r.envMap&&(s.envMap.value=r.envMap,s.envMapIntensity.value=r.envMapIntensity,s.flipEnvMap.value=r.envMap.isCubeTexture?-1:1,s.reflectivity.value=r.reflectivity,s.refractionRatio.value=r.refractionRatio,s.maxMipLevel.value=e.properties.get(r.envMap).__maxMipLevel),s.specular.value.copy(r.specular),s.glossiness.value=r.glossiness,s.glossinessMap.value=r.glossinessMap,s.emissiveMap.value=r.emissiveMap,s.bumpMap.value=r.bumpMap,s.normalMap.value=r.normalMap,s.displacementMap.value=r.displacementMap,s.displacementScale.value=r.displacementScale,s.displacementBias.value=r.displacementBias,null!==s.glossinessMap.value&&void 0===a.USE_GLOSSINESSMAP&&(a.USE_GLOSSINESSMAP="",a.USE_ROUGHNESSMAP=""),null===s.glossinessMap.value&&void 0!==a.USE_GLOSSINESSMAP&&(delete a.USE_GLOSSINESSMAP,delete a.USE_ROUGHNESSMAP)}}}}function p(e,t,n,i){Sd.call(this,e,t,n,i)}c.prototype.decodePrimitive=function(e,t){var n=this.json,i=this.dracoLoader,r=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,s={},a={},l={};for(var u in o){var c=M[u]||u.toLowerCase();s[c]=o[u]}for(u in e.attributes){c=M[u]||u.toLowerCase();if(void 0!==o[u]){var d=n.accessors[e.attributes[u]],h=w[d.componentType];l[c]=h,a[c]=!0===d.normalized}}return t.getDependency("bufferView",r).then(function(e){return new Promise(function(t){i.decodeDracoFile(e,function(e){for(var n in e.attributes){var i=e.attributes[n],r=a[n];void 0!==r&&(i.normalized=r)}t(e)},s,l)})})},d.prototype.extendTexture=function(e,t){return e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),t.texCoord,e.needsUpdate=!0,e},p.prototype=Object.create(Sd.prototype),p.prototype.constructor=p,p.prototype.copySampleValue_=function(e){for(var t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=e*i*3+i,o=0;o!==i;o++)t[o]=n[r+o];return t},p.prototype.beforeStart_=p.prototype.copySampleValue_,p.prototype.afterEnd_=p.prototype.copySampleValue_,p.prototype.interpolate_=function(e,t,n,i){for(var r=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=2*s,l=3*s,u=i-t,c=(n-t)/u,d=c*c,h=d*c,p=e*l,f=p-l,m=-2*h+3*d,_=h-d,g=1-m,v=_-d+c,y=0;y!==s;y++){var x=o[f+y+s],b=o[f+y+a]*u,w=o[p+y+s],j=o[p+y]*u;r[y]=g*x+v*b+m*w+_*j}return r};var f,m=0,_=1,g=2,v=3,y=4,x=5,b=6,w={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},j={9728:Wn,9729:Qn,9984:Yn,9985:Jn,9986:qn,9987:Zn},S={33071:Hn,33648:Xn,10497:Vn},A={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},M={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},T={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},P={CUBICSPLINE:void 0,LINEAR:2301,STEP:2300},L="OPAQUE",E="MASK",O="BLEND",I={"image/png":hi,"image/jpeg":di};function C(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)?e:/^data:.*,.*$/i.test(e)?e:/^blob:.*$/i.test(e)?e:t+e)}function F(e,t,n){for(var i in n.extensions)void 0===e[i]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[i]=n.extensions[i])}function N(e,t){void 0!==t.extras&&"object"==typeof t.extras&&Object.assign(e.userData,t.extras)}function k(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(var n=0,i=t.weights.length;n<i;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){var r=t.extras.targetNames;if(e.morphTargetInfluences.length===r.length){e.morphTargetDictionary={};for(n=0,i=r.length;n<i;n++)e.morphTargetDictionary[r[n]]=n}}}function D(e){for(var t="",n=Object.keys(e).sort(),i=0,r=n.length;i<r;i++)t+=n[i]+":"+e[n[i]]+";";return t}function R(e){if(e.isInterleavedBufferAttribute){for(var t=e.count,n=e.itemSize,i=e.array.slice(0,t*n),r=0,o=0;r<t;++r)i[o++]=e.getX(r),n>=2&&(i[o++]=e.getY(r)),n>=3&&(i[o++]=e.getZ(r)),n>=4&&(i[o++]=e.getW(r));return new Vo(i,n,e.normalized)}return e.clone()}function z(e,n,i){this.json=e||{},this.extensions=n||{},this.options=i||{},this.cache=new t,this.primitiveCache={},this.textureLoader=new Qd(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.fileLoader=new Vd(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}function U(e,t,n){var i=t.attributes,r=[];function o(t,i){return n.getDependency("accessor",t).then(function(t){e.addAttribute(i,t)})}for(var s in i){var a=M[s]||s.toLowerCase();a in e.attributes||r.push(o(i[s],a))}if(void 0!==t.indices&&!e.index){var l=n.getDependency("accessor",t.indices).then(function(t){e.setIndex(t)});r.push(l)}return N(e,t),Promise.all(r).then(function(){return void 0!==t.targets?function(e,t,n){for(var i=!1,r=!1,o=0,s=t.length;o<s;o++){if(void 0!==(u=t[o]).POSITION&&(i=!0),void 0!==u.NORMAL&&(r=!0),i&&r)break}if(!i&&!r)return Promise.resolve(e);var a=[],l=[];for(o=0,s=t.length;o<s;o++){var u=t[o];if(i){var c=void 0!==u.POSITION?n.getDependency("accessor",u.POSITION):e.attributes.position;a.push(c)}if(r){c=void 0!==u.NORMAL?n.getDependency("accessor",u.NORMAL):e.attributes.normal;l.push(c)}}return Promise.all([Promise.all(a),Promise.all(l)]).then(function(n){for(var o=n[0],s=n[1],a=0,l=o.length;a<l;a++)e.attributes.position!==o[a]&&(o[a]=R(o[a]));for(a=0,l=s.length;a<l;a++)e.attributes.normal!==s[a]&&(s[a]=R(s[a]));for(a=0,l=t.length;a<l;a++){var u=t[a],c="morphTarget"+a;if(i&&void 0!==u.POSITION){var d=o[a];d.name=c;for(var h=e.attributes.position,p=0,f=d.count;p<f;p++)d.setXYZ(p,d.getX(p)+h.getX(p),d.getY(p)+h.getY(p),d.getZ(p)+h.getZ(p))}if(r&&void 0!==u.NORMAL){var m=s[a];m.name=c;var _=e.attributes.normal;for(p=0,f=m.count;p<f;p++)m.setXYZ(p,m.getX(p)+_.getX(p),m.getY(p)+_.getY(p),m.getZ(p)+_.getZ(p))}}return i&&(e.morphAttributes.position=o),r&&(e.morphAttributes.normal=s),e})}(e,t.targets,n):e})}return z.prototype.parse=function(e,t){var n=this,i=this.json,r=this.extensions;this.cache.removeAll(),this.markDefs(),Promise.all([this.getDependencies("scene"),this.getDependencies("animation"),this.getDependencies("camera")]).then(function(t){var o={scene:t[0][i.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:i.asset,parser:n,userData:{}};F(r,o,i),N(o,i),e(o)}).catch(t)},z.prototype.markDefs=function(){for(var e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[],i={},r={},o=0,s=t.length;o<s;o++)for(var a=t[o].joints,l=0,u=a.length;l<u;l++)e[a[l]].isBone=!0;for(var c=0,d=e.length;c<d;c++){var h=e[c];void 0!==h.mesh&&(void 0===i[h.mesh]&&(i[h.mesh]=r[h.mesh]=0),i[h.mesh]++,void 0!==h.skin&&(n[h.mesh].isSkinnedMesh=!0))}this.json.meshReferences=i,this.json.meshUses=r},z.prototype.getDependency=function(e,t){var i=e+":"+t,r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this.loadNode(t);break;case"mesh":r=this.loadMesh(t);break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this.loadBufferView(t);break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this.loadMaterial(t);break;case"texture":r=this.loadTexture(t);break;case"skin":r=this.loadSkin(t);break;case"animation":r=this.loadAnimation(t);break;case"camera":r=this.loadCamera(t);break;case"light":r=this.extensions[n.KHR_LIGHTS_PUNCTUAL].loadLight(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(i,r)}return r},z.prototype.getDependencies=function(e){var t=this.cache.get(e);if(!t){var n=this,i=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(i.map(function(t,i){return n.getDependency(e,i)})),this.cache.add(e,t)}return t},z.prototype.loadBuffer=function(e){var t=this.json.buffers[e],i=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[n.KHR_BINARY_GLTF].body);var r=this.options;return new Promise(function(e,n){i.load(C(t.uri,r.path),e,void 0,function(){n(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})},z.prototype.loadBufferView=function(e){var t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(e){var n=t.byteLength||0,i=t.byteOffset||0;return e.slice(i,i+n)})},z.prototype.loadAccessor=function(e){var t=this,n=this.json,i=this.json.accessors[e];if(void 0===i.bufferView&&void 0===i.sparse)return Promise.resolve(null);var r=[];return void 0!==i.bufferView?r.push(this.getDependency("bufferView",i.bufferView)):r.push(null),void 0!==i.sparse&&(r.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),r.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(r).then(function(e){var r,o=e[0],s=A[i.type],a=w[i.componentType],l=a.BYTES_PER_ELEMENT,u=l*s,c=i.byteOffset||0,d=void 0!==i.bufferView?n.bufferViews[i.bufferView].byteStride:void 0,h=!0===i.normalized;if(d&&d!==u){var p=Math.floor(c/d),f="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+p+":"+i.count,m=t.cache.get(f);m||(m=new su(new a(o,p*d,i.count*d/l),d/l),t.cache.add(f,m)),r=new au(m,s,c%d/l,h)}else r=new Vo(null===o?new a(i.count*s):new a(o,c,i.count*s),s,h);if(void 0!==i.sparse){var _=A.SCALAR,g=w[i.sparse.indices.componentType],v=i.sparse.indices.byteOffset||0,y=i.sparse.values.byteOffset||0,x=new g(e[1],v,i.sparse.count*_),b=new a(e[2],y,i.sparse.count*s);null!==o&&r.setArray(r.array.slice());for(var j=0,S=x.length;j<S;j++){var M=x[j];if(r.setX(M,b[j*s]),s>=2&&r.setY(M,b[j*s+1]),s>=3&&r.setZ(M,b[j*s+2]),s>=4&&r.setW(M,b[j*s+3]),s>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return r})},z.prototype.loadTexture=function(e){var t,i=this,r=this.json,o=this.options,s=this.textureLoader,a=window.URL||window.webkitURL,l=r.textures[e],u=l.extensions||{},c=(t=u[n.MSFT_TEXTURE_DDS]?r.images[u[n.MSFT_TEXTURE_DDS].source]:r.images[l.source]).uri,d=!1;return void 0!==t.bufferView&&(c=i.getDependency("bufferView",t.bufferView).then(function(e){d=!0;var n=new Blob([e],{type:t.mimeType});return c=a.createObjectURL(n)})),Promise.resolve(c).then(function(e){var t=Bd.Handlers.get(e);return t||(t=u[n.MSFT_TEXTURE_DDS]?i.extensions[n.MSFT_TEXTURE_DDS].ddsLoader:s),new Promise(function(n,i){t.load(C(e,o.path),n,void 0,i)})}).then(function(e){!0===d&&a.revokeObjectURL(c),e.flipY=!1,void 0!==l.name&&(e.name=l.name),t.mimeType in I&&(e.format=I[t.mimeType]);var n=(r.samplers||{})[l.sampler]||{};return e.magFilter=j[n.magFilter]||Qn,e.minFilter=j[n.minFilter]||Zn,e.wrapS=S[n.wrapS]||Vn,e.wrapT=S[n.wrapT]||Vn,e})},z.prototype.assignTexture=function(e,t,i){var r=this;return this.getDependency("texture",i.index).then(function(o){if(!o.isCompressedTexture)switch(t){case"aoMap":case"emissiveMap":case"metalnessMap":case"normalMap":case"roughnessMap":o.format=di}if(r.extensions[n.KHR_TEXTURE_TRANSFORM]){var s=void 0!==i.extensions?i.extensions[n.KHR_TEXTURE_TRANSFORM]:void 0;s&&(o=r.extensions[n.KHR_TEXTURE_TRANSFORM].extendTexture(o,s))}e[t]=o})},z.prototype.assignFinalMaterial=function(e){var t=e.geometry,i=e.material,r=this.extensions,o=void 0!==t.attributes.tangent,s=void 0!==t.attributes.color,a=void 0===t.attributes.normal,l=!0===e.isSkinnedMesh,u=Object.keys(t.morphAttributes).length>0,c=u&&void 0!==t.morphAttributes.normal;if(e.isPoints){var d="PointsMaterial:"+i.uuid,h=this.cache.get(d);h||(h=new Gu,Bo.prototype.copy.call(h,i),h.color.copy(i.color),h.map=i.map,h.lights=!1,h.sizeAttenuation=!1,this.cache.add(d,h)),i=h}else if(e.isLine){d="LineBasicMaterial:"+i.uuid;var p=this.cache.get(d);p||(p=new Ou,Bo.prototype.copy.call(p,i),p.color.copy(i.color),p.lights=!1,this.cache.add(d,p)),i=p}if(o||s||a||l||u){d="ClonedMaterial:"+i.uuid+":";i.isGLTFSpecularGlossinessMaterial&&(d+="specular-glossiness:"),l&&(d+="skinning:"),o&&(d+="vertex-tangents:"),s&&(d+="vertex-colors:"),a&&(d+="flat-shading:"),u&&(d+="morph-targets:"),c&&(d+="morph-normals:");var f=this.cache.get(d);f||(f=i.isGLTFSpecularGlossinessMaterial?r[n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].cloneMaterial(i):i.clone(),l&&(f.skinning=!0),o&&(f.vertexTangents=!0),s&&(f.vertexColors=Qt),a&&(f.flatShading=!0),u&&(f.morphTargets=!0),c&&(f.morphNormals=!0),this.cache.add(d,f)),i=f}i.aoMap&&void 0===t.attributes.uv2&&void 0!==t.attributes.uv&&t.addAttribute("uv2",new Vo(t.attributes.uv.array,2)),i.isGLTFSpecularGlossinessMaterial&&(e.onBeforeRender=r[n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].refreshUniforms),e.material=i},z.prototype.loadMaterial=function(e){var t,i=this.json,r=this.extensions,o=i.materials[e],s={},a=o.extensions||{},l=[];if(a[n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var u=r[n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];t=u.getMaterialType(),l.push(u.extendParams(s,o,this))}else if(a[n.KHR_MATERIALS_UNLIT]){var c=r[n.KHR_MATERIALS_UNLIT];t=c.getMaterialType(),l.push(c.extendParams(s,o,this))}else{t=fd;var d=o.pbrMetallicRoughness||{};if(s.color=new No(1,1,1),s.opacity=1,Array.isArray(d.baseColorFactor)){var h=d.baseColorFactor;s.color.fromArray(h),s.opacity=h[3]}void 0!==d.baseColorTexture&&l.push(this.assignTexture(s,"map",d.baseColorTexture)),s.metalness=void 0!==d.metallicFactor?d.metallicFactor:1,s.roughness=void 0!==d.roughnessFactor?d.roughnessFactor:1,void 0!==d.metallicRoughnessTexture&&(l.push(this.assignTexture(s,"metalnessMap",d.metallicRoughnessTexture)),l.push(this.assignTexture(s,"roughnessMap",d.metallicRoughnessTexture)))}!0===o.doubleSided&&(s.side=Wt);var p=o.alphaMode||L;return p===O?s.transparent=!0:(s.transparent=!1,p===E&&(s.alphaTest=void 0!==o.alphaCutoff?o.alphaCutoff:.5)),void 0!==o.normalTexture&&t!==Go&&(l.push(this.assignTexture(s,"normalMap",o.normalTexture)),s.normalScale=new ur(1,1),void 0!==o.normalTexture.scale&&s.normalScale.set(o.normalTexture.scale,o.normalTexture.scale)),void 0!==o.occlusionTexture&&t!==Go&&(l.push(this.assignTexture(s,"aoMap",o.occlusionTexture)),void 0!==o.occlusionTexture.strength&&(s.aoMapIntensity=o.occlusionTexture.strength)),void 0!==o.emissiveFactor&&t!==Go&&(s.emissive=(new No).fromArray(o.emissiveFactor)),void 0!==o.emissiveTexture&&t!==Go&&l.push(this.assignTexture(s,"emissiveMap",o.emissiveTexture)),Promise.all(l).then(function(){var e;return e=t===Bs?r[n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(s):new t(s),void 0!==o.name&&(e.name=o.name),e.map&&(e.map.encoding=Yi),e.emissiveMap&&(e.emissiveMap.encoding=Yi),e.specularMap&&(e.specularMap.encoding=Yi),N(e,o),o.extensions&&F(r,e,o),e})},z.prototype.loadGeometries=function(e){var t=this,i=this.extensions,r=this.primitiveCache;function o(e){return i[n.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then(function(n){return U(n,e,t)})}for(var s,a,l=[],u=0,c=e.length;u<c;u++){var d,h=e[u],p=(a=void 0,(a=(s=h).extensions&&s.extensions[n.KHR_DRACO_MESH_COMPRESSION])?"draco:"+a.bufferView+":"+a.indices+":"+D(a.attributes):s.indices+":"+D(s.attributes)+":"+s.mode),f=r[p];if(f)l.push(f.promise);else d=h.extensions&&h.extensions[n.KHR_DRACO_MESH_COMPRESSION]?o(h):U(new ls,h,t),r[p]={primitive:h,promise:d},l.push(d)}return Promise.all(l)},z.prototype.loadMesh=function(e){for(var t=this,n=this.json.meshes[e],i=n.primitives,r=[],o=0,s=i.length;o<s;o++){var a=void 0===i[o].material?f=f||new fd({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Ht}):this.getDependency("material",i[o].material);r.push(a)}return Promise.all(r).then(function(r){return t.loadGeometries(i).then(function(o){for(var s=[],a=0,l=o.length;a<l;a++){var u,c=o[a],d=i[a],h=r[a];if(d.mode===y||d.mode===x||d.mode===b||void 0===d.mode)!0!==(u=!0===n.isSkinnedMesh?new Mu(c,h):new Ms(c,h)).isSkinnedMesh||u.geometry.attributes.skinWeight.normalized||u.normalizeSkinWeights(),d.mode===x?u.drawMode=Hi:d.mode===b&&(u.drawMode=Xi);else if(d.mode===_)u=new Uu(c,h);else if(d.mode===v)u=new Du(c,h);else if(d.mode===g)u=new Bu(c,h);else{if(d.mode!==m)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+d.mode);u=new Yu(c,h)}Object.keys(u.geometry.morphAttributes).length>0&&k(u,n),u.name=n.name||"mesh_"+e,o.length>1&&(u.name+="_"+a),N(u,n),t.assignFinalMaterial(u),s.push(u)}if(1===s.length)return s[0];var p=new Ql;for(a=0,l=s.length;a<l;a++)p.add(s[a]);return p})})},z.prototype.loadCamera=function(e){var t,n=this.json.cameras[e],i=n[n.type];if(i)return"perspective"===n.type?t=new Vs(lr.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):"orthographic"===n.type&&(t=new Mh(i.xmag/-2,i.xmag/2,i.ymag/2,i.ymag/-2,i.znear,i.zfar)),void 0!==n.name&&(t.name=n.name),N(t,n),Promise.resolve(t)},z.prototype.loadSkin=function(e){var t=this.json.skins[e],n={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(n):this.getDependency("accessor",t.inverseBindMatrices).then(function(e){return n.inverseBindMatrices=e,n})},z.prototype.loadAnimation=function(e){for(var t=this.json.animations[e],n=[],i=[],r=[],o=[],s=[],a=0,l=t.channels.length;a<l;a++){var u=t.channels[a],c=t.samplers[u.sampler],d=u.target,h=void 0!==d.node?d.node:d.id,f=void 0!==t.parameters?t.parameters[c.input]:c.input,m=void 0!==t.parameters?t.parameters[c.output]:c.output;n.push(this.getDependency("node",h)),i.push(this.getDependency("accessor",f)),r.push(this.getDependency("accessor",m)),o.push(c),s.push(d)}return Promise.all([Promise.all(n),Promise.all(i),Promise.all(r),Promise.all(o),Promise.all(s)]).then(function(n){for(var i=n[0],r=n[1],o=n[2],s=n[3],a=n[4],l=[],u=0,c=i.length;u<c;u++){var d=i[u],h=r[u],f=o[u],m=s[u],_=a[u];if(void 0!==d){var g;switch(d.updateMatrix(),d.matrixAutoUpdate=!0,T[_.path]){case T.weights:g=Od;break;case T.rotation:g=Cd;break;case T.position:case T.scale:default:g=Nd}var v=d.name?d.name:d.uuid,y=void 0!==m.interpolation?P[m.interpolation]:2301,x=[];T[_.path]===T.weights?d.traverse(function(e){!0===e.isMesh&&e.morphTargetInfluences&&x.push(e.name?e.name:e.uuid)}):x.push(v);var b=f.array;if(f.normalized){var w;if(b.constructor===Int8Array)w=1/127;else if(b.constructor===Uint8Array)w=1/255;else if(b.constructor==Int16Array)w=1/32767;else{if(b.constructor!==Uint16Array)throw new Error("THREE.GLTFLoader: Unsupported output accessor component type.");w=1/65535}for(var j=new Float32Array(b.length),S=0,A=b.length;S<A;S++)j[S]=b[S]*w;b=j}for(S=0,A=x.length;S<A;S++){var M=new g(x[S]+"."+T[_.path],h.array,b,y);"CUBICSPLINE"===m.interpolation&&(M.createInterpolant=function(e){return new p(this.times,this.values,this.getValueSize()/3,e)},M.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),l.push(M)}}}return new kd(void 0!==t.name?t.name:"animation_"+e,void 0,l)})},z.prototype.loadNode=function(e){var t,i=this.json,r=this.extensions,o=this,s=i.meshReferences,a=i.meshUses,l=i.nodes[e];return(t=[],void 0!==l.mesh&&t.push(o.getDependency("mesh",l.mesh).then(function(e){var t;if(s[l.mesh]>1){var n=a[l.mesh]++;(t=e.clone()).name+="_instance_"+n,t.onBeforeRender=e.onBeforeRender;for(var i=0,r=t.children.length;i<r;i++)t.children[i].name+="_instance_"+n,t.children[i].onBeforeRender=e.children[i].onBeforeRender}else t=e;return void 0!==l.weights&&t.traverse(function(e){if(e.isMesh)for(var t=0,n=l.weights.length;t<n;t++)e.morphTargetInfluences[t]=l.weights[t]}),t})),void 0!==l.camera&&t.push(o.getDependency("camera",l.camera)),l.extensions&&l.extensions[n.KHR_LIGHTS_PUNCTUAL]&&void 0!==l.extensions[n.KHR_LIGHTS_PUNCTUAL].light&&t.push(o.getDependency("light",l.extensions[n.KHR_LIGHTS_PUNCTUAL].light)),Promise.all(t)).then(function(e){var t;if((t=!0===l.isBone?new Eu:e.length>1?new Ql:1===e.length?e[0]:new qr)!==e[0])for(var n=0,i=e.length;n<i;n++)t.add(e[n]);if(void 0!==l.name&&(t.userData.name=l.name,t.name=Sp.sanitizeNodeName(l.name)),N(t,l),l.extensions&&F(r,t,l),void 0!==l.matrix){var o=new Er;o.fromArray(l.matrix),t.applyMatrix(o)}else void 0!==l.translation&&t.position.fromArray(l.translation),void 0!==l.rotation&&t.quaternion.fromArray(l.rotation),void 0!==l.scale&&t.scale.fromArray(l.scale);return t})},z.prototype.loadScene=function(){function e(t,n,i,r){var o=i.nodes[t];return r.getDependency("node",t).then(function(e){return void 0===o.skin?e:r.getDependency("skin",o.skin).then(function(e){for(var n=[],i=0,o=(t=e).joints.length;i<o;i++)n.push(r.getDependency("node",t.joints[i]));return Promise.all(n)}).then(function(n){return e.traverse(function(e){if(e.isMesh){for(var i=[],r=[],o=0,s=n.length;o<s;o++){var a=n[o];if(a){i.push(a);var l=new Er;void 0!==t.inverseBindMatrices&&l.fromArray(t.inverseBindMatrices.array,16*o),r.push(l)}}e.bind(new Lu(i,r),e.matrixWorld)}}),e});var t}).then(function(t){n.add(t);var s=[];if(o.children)for(var a=o.children,l=0,u=a.length;l<u;l++){var c=a[l];s.push(e(c,t,i,r))}return Promise.all(s)})}return function(t){var n=this.json,i=this.extensions,r=this.json.scenes[t],o=new Qr;void 0!==r.name&&(o.name=r.name),N(o,r),r.extensions&&F(i,o,r);for(var s=r.nodes||[],a=[],l=0,u=s.length;l<u;l++)a.push(e(s[l],o,n,this));return Promise.all(a).then(function(){return o})}}(),e}(),kf=function(e){this.manager=e||Ud,this.path="",this.crossOrigin="anonymous",this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}};kf.prototype={constructor:kf,setPath:function(e){return this.path=e,this},setCrossOrigin:function(e){return this.crossOrigin=e,this},setDecoderPath:function(e){return this.decoderPath=e,this},setDecoderConfig:function(e){return this.decoderConfig=e,this},setWorkerLimit:function(e){return this.workerLimit=e,this},setVerbosity:function(){},setDrawMode:function(){},setSkipDequantization:function(){},load:function(e,t,n,i){var r=new Vd(this.manager);r.setPath(this.path),r.setResponseType("arraybuffer"),"use-credentials"===this.crossOrigin&&r.setWithCredentials(!0),r.load(e,e=>{var n={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes};this.decodeGeometry(e,n).then(t).catch(i)},n,i)},decodeDracoFile:function(e,t,n,i){var r={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes};this.decodeGeometry(e,r).then(t)},decodeGeometry:function(e,t){var n,i=this.workerNextTaskID++,r=e.byteLength;for(var o in t.attributeTypes){var s=t.attributeTypes[o];void 0!==s.BYTES_PER_ELEMENT&&(t.attributeTypes[o]=s.name)}var a=this._getWorker(i,r).then(r=>(n=r,new Promise((r,o)=>{n._callbacks[i]={resolve:r,reject:o},n.postMessage({type:"decode",id:i,taskConfig:t,buffer:e},[e])}))).then(e=>this._createGeometry(e.geometry));return a.finally(()=>{n&&i&&this._releaseTask(n,i)}),a},_createGeometry:function(e){var t=new ls;e.index&&t.setIndex(new Vo(e.index.array,1));for(var n=0;n<e.attributes.length;n++){var i=e.attributes[n],r=i.name,o=i.array,s=i.itemSize;t.addAttribute(r,new Vo(o,s))}return t},_loadLibrary:function(e,t){var n=new Vd(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),new Promise((t,i)=>{n.load(e,t,void 0,i)})},_initDecoder:function(){if(this.decoderPending)return this.decoderPending;var e="object"!=typeof WebAssembly||"js"===this.decoderConfig.type,t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(t=>{var n=t[0];e||(this.decoderConfig.wasmBinary=t[1]);var i=kf.DRACOWorker.toString(),r=["/* draco decoder */",n,"","/* worker */",i.substring(i.indexOf("{")+1,i.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([r]))}),this.decoderPending},_getWorker:function(e,t){return this._initDecoder().then(()=>{var n;this.workerPool.length<this.workerLimit?((n=new Worker(this.workerSourceURL))._callbacks={},n._taskCosts={},n._taskLoad=0,n.postMessage({type:"init",decoderConfig:this.decoderConfig}),n.onmessage=function(e){var t=e.data;switch(t.type){case"decode":n._callbacks[t.id].resolve(t);break;case"error":n._callbacks[t.id].reject(t)}},this.workerPool.push(n)):this.workerPool.sort(function(e,t){return e._taskLoad>t._taskLoad?-1:1});return(n=this.workerPool[this.workerPool.length-1])._taskCosts[e]=t,n._taskLoad+=t,n})},_releaseTask:function(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]},debug:function(){},dispose:function(){for(var e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}},kf.DRACOWorker=function(){var e,t;function n(e,t,n,i,r,o){var s,a,l=o.num_components(),u=n.num_points()*l;switch(r){case Float32Array:s=new e.DracoFloat32Array,t.GetAttributeFloatForAllPoints(n,o,s),a=new Float32Array(u);break;case Int8Array:s=new e.DracoInt8Array,t.GetAttributeInt8ForAllPoints(n,o,s),a=new Int8Array(u);break;case Int16Array:s=new e.DracoInt16Array,t.GetAttributeInt16ForAllPoints(n,o,s),a=new Int16Array(u);break;case Int32Array:s=new e.DracoInt32Array,t.GetAttributeInt32ForAllPoints(n,o,s),a=new Int32Array(u);break;case Uint8Array:s=new e.DracoUInt8Array,t.GetAttributeUInt8ForAllPoints(n,o,s),a=new Uint8Array(u);break;case Uint16Array:s=new e.DracoUInt16Array,t.GetAttributeUInt16ForAllPoints(n,o,s),a=new Uint16Array(u);break;case Uint32Array:s=new e.DracoUInt32Array,t.GetAttributeUInt32ForAllPoints(n,o,s),a=new Uint32Array(u);break;default:throw new Error("THREE.DRACOLoader: Unexpected attribute type.")}for(var c=0;c<u;c++)a[c]=s.GetValue(c);return e.destroy(s),{name:i,array:a,itemSize:l}}onmessage=function(i){var r=i.data;switch(r.type){case"init":e=r.decoderConfig,t=new Promise(function(t,n){e.onModuleLoaded=function(e){t({draco:e})},DracoDecoderModule(e)});break;case"decode":var o=r.buffer,s=r.taskConfig;t.then(e=>{var t=e.draco,i=new t.Decoder,a=new t.DecoderBuffer;a.Init(new Int8Array(o),o.byteLength);try{var l=function(e,t,i,r){var o,s,a=r.attributeIDs,l=r.attributeTypes,u=t.GetEncodedGeometryType(i);if(u===e.TRIANGULAR_MESH)o=new e.Mesh,s=t.DecodeBufferToMesh(i,o);else{if(u!==e.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");o=new e.PointCloud,s=t.DecodeBufferToPointCloud(i,o)}if(!s.ok()||0===o.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+s.error_msg());var c={index:null,attributes:[]};o.num_points(),o.num_attributes();for(var d in a){var h=self[l[d]],p=a[d],f=t.GetAttributeByUniqueId(o,p);c.attributes.push(n(e,t,o,d,h,f))}if(u===e.TRIANGULAR_MESH){for(var m=o.num_faces(),_=new Uint32Array(3*m),g=new e.DracoInt32Array,v=0;v<m;++v){t.GetFaceFromMesh(o,v,g);for(var y=0;y<3;++y)_[3*v+y]=g.GetValue(y)}c.index={array:_,itemSize:1},e.destroy(g)}return e.destroy(o),c}(t,i,a,s),u=l.attributes.map(e=>e.array.buffer);l.index&&u.push(l.index.array.buffer),self.postMessage({type:"decode",id:r.id,geometry:l},u)}catch(e){self.postMessage({type:"error",id:r.id,error:e.message})}finally{t.destroy(a),t.destroy(i)}})}}},kf.setDecoderPath=function(){},kf.setDecoderConfig=function(){},kf.releaseDecoderModule=function(){},kf.getDecoderModule=function(){};var Df=function(e){this.mobile=e,this.library=[],this.aliases=[]};function Rf(e){var t=[{type:"texture",fn:zf.bind(this)},{type:"ctm",fn:Bf.bind(this)},{type:"obj",fn:Gf.bind(this)},{type:"gltf_draco",fn:Uf.bind(this)}];var n=function(e){for(var n=0;n<t.length;n++)if(e==t[n].type)return t[n];return!1}(e.type);if(n&&e.id&&this.checkIDAvail(e.id)){var i={ID:e.id,type:n.type,loaded:!1,data:e,fn:n.fn};return this.library.push(i),i}return!1}function zf(e){var t=function(t){e.loaded=!0,e.onLoad&&e.onLoad(),this.checkIfAllLoaded()}.bind(this);if(e.data.cube);else if(e.data.alphaMask);else{var n=new Qd;e.obj=n.load(e.data.path,t,void 0,function(){})}}function Uf(e){var t=this,n=new Nf,i=new kf;i.setDecoderPath("../draco/"),n.setDRACOLoader(i);n.load(e.data.path,function(n){e.loaded=!0,t.checkIfAllLoaded(),e.meshes=n.scene.children},function(e){},function(e){})}function Bf(e){var t=new Cf,n={useWorker:!1},i=!1,r=0,o=[];e.data.offsets&&(e.obj=o,i=!0,n.offsets=e.data.offsets,n.filenames=e.data.filenames),t.load(e.data.path,function(t){var n=!1;if(i){if(e.data.meshObjs){if(t.attributes.position.array.length/9,e.data.meshObjs[r])(s=Rf.call(this,e.data.meshObjs[r]))&&(s.fn=null,s.loaded=!0,s.obj=t)}else if(e.data.filenames){var s;if(t.attributes.position.array.length/9,e.data.filenames[r])(s=Rf.call(this,{type:"ctm",id:e.data.filenames[r]}))&&(s.fn=null,s.loaded=!0,s.obj=t)}else o.push(t);++r>=e.data.offsets.length&&(n=!0)}else t.attributes.position.array.length/9,n=!0,e.obj=t;n&&(e.loaded=!0,this.checkIfAllLoaded())}.bind(this),n)}function Gf(e){(new Ff).load(e.data.path,function(t){e.geometries=t,e.loaded=!0,this.checkIfAllLoaded()}.bind(this))}function Vf(e){for(var t=0;t<this.library.length;t++)if(this.library[t].ID==e)return this.library[t];for(var n=0;n<this.aliases.length;n++)if(this.aliases[n].from==e)return Vf.call(this,this.aliases[n].to)}Df.prototype.load=function(e,t){if(e&&e.length){for(var n=[],i=0;i<e.length;i++){var r=Rf.call(this,e[i]);r&&(!0===r.data.async?n.push(r):(r.fn(r),r.fn=null))}this.loadDoneFn=function(){for(;n.length;){var e=n.pop();e.fn(e),e.fn=null}t&&t()}}else t&&t()},Df.prototype.getModel=function(e,t){for(var n=Vf.call(this,t),i=n.data.filenames.length-1;i>=0;i--)if(n.data.filenames[i]&&n.data.filenames[i]===e)return n.obj[i]},Df.prototype.checkIfAllLoaded=function(){for(var e=0;e<this.library.length;e++)if(0==this.library[e].loaded&&!0!==this.library[e].data.async)return!1;if(this.loadDoneFn){var t=this.loadDoneFn;this.loadDoneFn=null,t()}},Df.prototype.checkIDAvail=function(e){for(var t=0;t<this.library.length;t++)if(this.library[t].ID==e)return!1;for(var n=0;n<this.aliases.length;n++)if(this.aliases[n].from==e)return!1;return!0},Df.prototype.lookupObjectByID=Vf,Df.prototype.duplicateObject=function(e,t){var n=this.lookupObjectByID(e),i=!1;return n&&((i=Object.create(n)).ID=t,this.library.push(i)),i},Df.prototype.addAlias=function(e,t){this.aliases.push({from:e,to:t})},Df.prototype.registerObject=function(e,t){if(this.checkIDAvail(e)){var n={ID:e,type:"custom",loaded:!0,obj:t,mesh:t};this.library.push(n)}},Df.prototype.getLoaded=function(){var e=this.library.filter(function(e){return!0!==e.data.async&&e});return{loaded:e.filter(function(e){return!!e.loaded&&e}).length,total:e.length}},Df.prototype.destroy=function(){if(!this.destroyed){this.destroyed=!0;for(var e=0;e<this.library.length;e++){for(var t in this.library[e].obj&&this.library[e].obj.dispose&&this.library[e].obj.dispose(),this.library[e].obj=null,this.library[e].data=null,this.library[e].data)try{this.library[e].data[t]=null,delete this.library[e].data[t]}catch(e){}for(var n in this.library[e].fn=null,this.library[e])try{this.library[e][n]=null,delete this.library[e][n]}catch(e){}this.library[e]=null}this.library=null}};for(var Hf=[{id:"lut_loader",type:"texture",path:"assets/textures/luts/loader.png",async:!1},{id:"lut_main",type:"texture",path:"assets/textures/luts/main.png",async:!1},{id:"lut_benoit",type:"texture",path:"assets/textures/luts/benoit.png",async:!0},{id:"lut_elliot_wagner",type:"texture",path:"assets/textures/luts/elliot_wagner.png",async:!0},{id:"lut_harlan_nana",type:"texture",path:"assets/textures/luts/harlan_nana.png",async:!0},{id:"lut_jacob",type:"texture",path:"assets/textures/luts/jacob.png",async:!0},{id:"lut_joni",type:"texture",path:"assets/textures/luts/joni.png",async:!0},{id:"lut_linda",type:"texture",path:"assets/textures/luts/linda.png",async:!0},{id:"lut_marta_fran",type:"texture",path:"assets/textures/luts/marta_fran.png",async:!0},{id:"lut_meg",type:"texture",path:"assets/textures/luts/meg.png",async:!0},{id:"lut_ransom",type:"texture",path:"assets/textures/luts/ransom.png",async:!0},{id:"lut_richard",type:"texture",path:"assets/textures/luts/richard.png",async:!0},{id:"lut_walt_donna",type:"texture",path:"assets/textures/luts/walt_donna.png",async:!0},{id:"magnifying_glass_transition",type:"texture",path:"assets/textures/magnifying_glass_transition.jpg"},{id:"noise",type:"texture",path:"assets/textures/noise.png"},{id:"bg_tex",type:"texture",path:"assets/textures/bg-bookcase3.jpg"},{id:"desk_tex",type:"texture",path:"assets/textures/desk.jpg"},{id:"desk_lightmap",type:"texture",path:"assets/textures/desk_lightmap.jpg"},{id:"knife_base",type:"texture",path:"assets/textures/knife_mat_baseColor.jpg"},{id:"knife_lightmap",type:"texture",path:"assets/textures/knife_mat_lightmap.jpg"},{id:"knife_normal",type:"texture",path:"assets/textures/knife_mat_normal.png"},{id:"knife_metal",type:"texture",path:"assets/textures/knife_mat_occlusionRoughnessMetallic.jpg"},{id:"magnifying_glass_base",type:"texture",path:"assets/textures/magKnife_mat_baseColor.jpg"},{id:"magnifying_glass_photo",type:"texture",path:"assets/textures/detectives.jpg"},{id:"magknife_lightmap",type:"texture",path:"assets/textures/magKnife_mat_lightmap.png"},{id:"magnifying_glass_normal",type:"texture",path:"assets/textures/magKnife_mat_normal.png"},{id:"magnifying_glass_metal",type:"texture",path:"assets/textures/magKnife_mat_occlusionRoughnessMetallic.jpg"},{id:"glass_lightmap",type:"texture",path:"assets/textures/magGlass_lightmap.jpg"},{id:"syringe_base",type:"texture",path:"assets/textures/syringe_mat_baseColor.jpg"},{id:"syringe_metal",type:"texture",path:"assets/textures/syringe_mat_occlusionRoughnessMetallic.jpg"},{id:"syringe_lightmap",type:"texture",path:"assets/textures/syringe_mat_lightmap.jpg"},{id:"env",type:"texture",path:"assets/textures/env8.jpg"},{id:"env2",type:"texture",path:"assets/textures/envTEST.jpg"}],Xf=["magGlass1"],Wf=["scene6"],Yf=0;Yf<Xf.length;Yf++)Hf.push({id:Xf[Yf]+".obj",type:"obj",path:"assets/models/"+Xf[Yf]+".obj"});for(var qf=0;qf<Wf.length;qf++)Hf.push({id:Wf[qf]+".glb",type:"gltf_draco",path:"assets/models/"+Wf[qf]+".glb"});var Qf,Jf,Zf,Kf={files:Hf},$f={getInstance:function(){var e={},t=e.hasOwnProperty;return{subscribe:function(n,i){t.call(e,n)||(e[n]=[]);var r=e[n].push(i)-1;return{remove:function(){delete e[n][r]}}},publish:function(n,i){t.call(e,n)&&e[n].forEach(function(e){e(void 0!==i?i:{})})},destroy:function(){for(var t in e)delete e[t]}}}},em="varying vec2 vUv;\n\nvoid main() {\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n    vUv = vec2(uv.x, uv.y);\n}",tm="#define PI 3.14159265359\n\nuniform float t;\n// uniform sampler2D input_texture;\nuniform sampler2D tDiffuse;\nuniform sampler2D current_lut;\nuniform sampler2D next_lut;\nuniform sampler2D mag_tex;\nuniform sampler2D noise_tex;\n\nuniform float vignette_distance;\nuniform float vignette_strength;\nuniform float noise_strength;\n\nuniform float mag_scale;\n\nuniform float lut_strength;\n\nuniform float mag_radius;\nuniform vec2 mag_pos;\n\nuniform float satCur;\nuniform float satNext;\nuniform float blurCur;\nuniform float blurNext;\nuniform float vignetteCur;\nuniform float vignetteNext;\n\nuniform vec2 u_resolution;\nvarying vec2 vUv;\n\nvec4 lookup(in vec4 textureColor, in sampler2D lookupTable) {\n    #ifndef LUT_NO_CLAMP\n        textureColor = clamp(textureColor, 0.0, 1.0);\n    #endif\n\n    mediump float blueColor = textureColor.b * 63.0;\n\n    mediump vec2 quad1;\n    quad1.y = floor(floor(blueColor) / 8.0);\n    quad1.x = floor(blueColor) - (quad1.y * 8.0);\n\n    mediump vec2 quad2;\n    quad2.y = floor(ceil(blueColor) / 8.0);\n    quad2.x = ceil(blueColor) - (quad2.y * 8.0);\n\n    highp vec2 texPos1;\n    texPos1.x = (quad1.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * textureColor.r);\n    texPos1.y = (quad1.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * textureColor.g);\n\n    // #ifdef LUT_FLIP_Y\n        texPos1.y = 1.0-texPos1.y;\n    // #endif\n\n    highp vec2 texPos2;\n    texPos2.x = (quad2.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * textureColor.r);\n    texPos2.y = (quad2.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * textureColor.g);\n\n    // #ifdef LUT_FLIP_Y\n        texPos2.y = 1.0-texPos2.y;\n    // #endif\n\n    lowp vec4 newColor1 = texture2D(lookupTable, texPos1);\n    lowp vec4 newColor2 = texture2D(lookupTable, texPos2);\n\n    lowp vec4 newColor = mix(newColor1, newColor2, fract(blueColor));\n    return newColor;\n}\n\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n\n/**\n* BLUR\n*/\n#define pow2(x) (x * x)\n\nconst float pi = atan(1.0) * 4.0;\nconst int samples = 8;\nconst float sigma = float(samples) * 0.25;\n\nfloat gaussian(vec2 i) {\n    return 1.0 / (2.0 * pi * pow2(sigma)) * exp(-((pow2(i.x) + pow2(i.y)) / (2.0 * pow2(sigma))));\n}\n\nvec3 blur(sampler2D sp, vec2 uv, vec2 scale) {\n    vec3 col = vec3(0.0);\n    float accum = 0.0;\n    float weight;\n    vec2 offset;\n    \n    for (int x = -samples / 2; x < samples / 2; ++x) {\n        for (int y = -samples / 2; y < samples / 2; ++y) {\n            offset = vec2(x, y);\n            weight = gaussian(offset);\n            col += texture2D(sp, uv + scale * offset).rgb * weight;\n            accum += weight;\n        }\n    }\n    \n    return col / accum;\n}\n\n/**\n* END BLUR\n*/\n\nvoid main()\n{\n//   float rad = 0.125;\n  // gl_FragColor = texture2D(tDiffuse, vUv);\n    vec4 fragColor = texture2D(tDiffuse, vUv); // gl_FragColor;\n    vec4 blurColor = vec4(blur(tDiffuse, vUv, vec2(3.) / u_resolution), 1.);\n    // vec4 blurColor = fragColor;\n\n    vec4 currColorSource = blurCur * blurColor + (1. - blurCur) * fragColor;\n    vec4 nextColorSource = blurNext * blurColor + (1. - blurNext) * fragColor;\n\n    float ratio = u_resolution.y / u_resolution.x;\n    float whichColor = step(mag_radius, length(vec2(vUv.x, vUv.y * ratio) - vec2(mag_pos.x, mag_pos.y * ratio)));\n\n    float mag_rad = mag_radius * mag_scale;\n    vec2 mag_pos_scaled = vec2(mag_pos.x, mag_pos.y * ratio) / (mag_rad * 2.);\n    vec2 uv_scaled = vec2(vUv.x, vUv.y * ratio) / (mag_rad * 2.);\n\n    vec2 magUV = uv_scaled - (mag_pos_scaled - mag_rad / (mag_rad * 2.));\n\n    float ns = noise_strength;\n    float vs = vignette_strength;\n\n    vec4 noise = texture2D(noise_tex, (rand(vec2(t, t)) + vUv) * (u_resolution / 512.)) * ns;\n\n    vs = vignette_strength * vignetteCur;\n    float currentVignette = (1. - vs) + vs * smoothstep(0., vignette_distance, vUv.x) * smoothstep(0., vignette_distance, vUv.y) * smoothstep(0., vignette_distance, 1. - vUv.x) * smoothstep(0., vignette_distance, 1. - vUv.y);\n\n    vs = vignette_strength * vignetteNext;\n    float nextVignette = (1. - vs) + vs * smoothstep(0., vignette_distance, vUv.x) * smoothstep(0., vignette_distance, vUv.y) * smoothstep(0., vignette_distance, 1. - vUv.x) * smoothstep(0., vignette_distance, 1. - vUv.y);\n\n    vec4 currentColor = lookup(currColorSource, current_lut) * currentVignette + (noise * vignetteCur);\n    vec4 nextColor = lookup(nextColorSource, next_lut) * nextVignette + (noise * vignetteNext);\n\n    float gray = (currentColor.r + currentColor.g + currentColor.b) / 3.;\n    currentColor = mix(vec4(gray, gray, gray, 1.), currentColor, satCur);\n\n    gray = (nextColor.r + nextColor.g + nextColor.b) / 3.;\n    nextColor = mix(vec4(gray, gray, gray, 1.), nextColor, satNext);\n\n    // gl_FragColor = vec4(mix(nextColor, currentColor, whichColor).rgb, 1.) + texture2D(mag_tex, magUV);\n\n    vec4 magColor = texture2D(mag_tex, magUV);\n    float which = smoothstep(0.058, 0.1, (magColor.r + magColor.g + magColor.b) / 3.);\n    vec3 c = mix(nextColor, currentColor, whichColor).rgb;\n\n    gl_FragColor = vec4(mix(c, magColor.rgb, which).rgb, 1.);\n\n}",nm=function(){var e,t=new Vs(90,1,.1,10),n=new Qr,i=new Ms(new Ns(1,1,1),((e=new Bs({uniforms:{equirectangularMap:{value:null}},vertexShader:"varying vec3 localPosition;\n\t\t\t\t\n\t\t\t\tvoid main() {\n\t\t\t\t\tlocalPosition = position;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\n\t\t\t\tvarying vec3 localPosition;\n\t\t\t\tuniform sampler2D equirectangularMap;\n\t\t\t\t\n\t\t\t\tvec2 EquirectangularSampleUV(vec3 v) {\n\t\t\t\t\tvec2 uv = vec2(atan(v.z, v.x), asin(v.y));\n\t\t\t\t\tuv *= vec2(0.1591, 0.3183); // inverse atan\n\t\t\t\t\tuv += 0.5;\n\t\t\t\t\treturn uv;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 uv = EquirectangularSampleUV(normalize(localPosition));\n\t\t\t\t\tgl_FragColor = texture2D(equirectangularMap, uv);\n\t\t\t\t}",blending:Jt})).type="EquirectangularToCubeGenerator",e));i.material.side=Xt,n.add(i);var r=function(e,t){t=t||{},this.sourceTexture=e,this.resolution=t.resolution||512,this.views=[{t:[1,0,0],u:[0,-1,0]},{t:[-1,0,0],u:[0,-1,0]},{t:[0,1,0],u:[0,0,1]},{t:[0,-1,0],u:[0,0,-1]},{t:[0,0,1],u:[0,-1,0]},{t:[0,0,-1],u:[0,-1,0]}];var n={format:t.format||this.sourceTexture.format,magFilter:this.sourceTexture.magFilter,minFilter:this.sourceTexture.minFilter,type:t.type||this.sourceTexture.type,generateMipmaps:this.sourceTexture.generateMipmaps,anisotropy:this.sourceTexture.anisotropy,encoding:this.sourceTexture.encoding};this.renderTarget=new Ys(this.resolution,this.resolution,n)};return r.prototype={constructor:r,update:function(e){var r=e.getRenderTarget();i.material.uniforms.equirectangularMap.value=this.sourceTexture;for(var o=0;o<6;o++){var s=this.views[o];t.position.set(0,0,0),t.up.set(s.u[0],s.u[1],s.u[2]),t.lookAt(s.t[0],s.t[1],s.t[2]),e.setRenderTarget(this.renderTarget,o),e.clear(),e.render(n,t)}return e.setRenderTarget(r),this.renderTarget.texture},dispose:function(){this.renderTarget.dispose()}},r}(),im={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","vec4 texel = texture2D( tDiffuse, vUv );","gl_FragColor = opacity * texel;","}"].join("\n")};function rm(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}Object.assign(rm.prototype,{setSize:function(){},render:function(){}}),rm.FullScreenQuad=(Qf=new Mh(-1,1,1,-1,0,1),Jf=new la(2,2),Zf=function(e){this._mesh=new Ms(Jf,e)},Object.defineProperty(Zf.prototype,"material",{get:function(){return this._mesh.material},set:function(e){this._mesh.material=e}}),Object.assign(Zf.prototype,{render:function(e){e.render(this._mesh,Qf)}}),Zf);var om=function(e,t){rm.call(this),this.textureID=void 0!==t?t:"tDiffuse",e instanceof Bs?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=Rs.clone(e.uniforms),this.material=new Bs({defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new rm.FullScreenQuad(this.material)};om.prototype=Object.assign(Object.create(rm.prototype),{constructor:om,render:function(e,t,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}});var sm=function(e,t){rm.call(this),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1};sm.prototype=Object.assign(Object.create(rm.prototype),{constructor:sm,render:function(e,t,n){var i,r,o=e.getContext(),s=e.state;s.buffers.color.setMask(!1),s.buffers.depth.setMask(!1),s.buffers.color.setLocked(!0),s.buffers.depth.setLocked(!0),this.inverse?(i=0,r=1):(i=1,r=0),s.buffers.stencil.setTest(!0),s.buffers.stencil.setOp(o.REPLACE,o.REPLACE,o.REPLACE),s.buffers.stencil.setFunc(o.ALWAYS,i,4294967295),s.buffers.stencil.setClear(r),s.buffers.stencil.setLocked(!0),e.setRenderTarget(n),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),s.buffers.color.setLocked(!1),s.buffers.depth.setLocked(!1),s.buffers.stencil.setLocked(!1),s.buffers.stencil.setFunc(o.EQUAL,1,4294967295),s.buffers.stencil.setOp(o.KEEP,o.KEEP,o.KEEP),s.buffers.stencil.setLocked(!0)}});var am=function(){rm.call(this),this.needsSwap=!1};am.prototype=Object.create(rm.prototype),Object.assign(am.prototype,{render:function(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}});var lm=function(e,t){if(this.renderer=e,void 0===t){var n={minFilter:Qn,magFilter:Qn,format:hi,stencilBuffer:!1},i=e.getSize(new ur);this._pixelRatio=e.getPixelRatio(),this._width=i.width,this._height=i.height,(t=new br(this._width*this._pixelRatio,this._height*this._pixelRatio,n)).texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new om(im),this.clock=new tp};Object.assign(lm.prototype,{swapBuffers:function(){var e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e},addPass:function(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)},insertPass:function(e,t){this.passes.splice(t,0,e)},isLastEnabledPass:function(e){for(var t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0},render:function(e){void 0===e&&(e=this.clock.getDelta());var t,n,i=this.renderer.getRenderTarget(),r=!1,o=this.passes.length;for(n=0;n<o;n++)if(!1!==(t=this.passes[n]).enabled){if(t.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(n),t.render(this.renderer,this.writeBuffer,this.readBuffer,e,r),t.needsSwap){if(r){var s=this.renderer.getContext(),a=this.renderer.state.buffers.stencil;a.setFunc(s.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),a.setFunc(s.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==sm&&(t instanceof sm?r=!0:t instanceof am&&(r=!1))}this.renderer.setRenderTarget(i)},reset:function(e){if(void 0===e){var t=this.renderer.getSize(new ur);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,(e=this.renderTarget1.clone()).setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2},setSize:function(e,t){this._width=e,this._height=t;var n=this._width*this._pixelRatio,i=this._height*this._pixelRatio;this.renderTarget1.setSize(n,i),this.renderTarget2.setSize(n,i);for(var r=0;r<this.passes.length;r++)this.passes[r].setSize(n,i)},setPixelRatio:function(e){this._pixelRatio=e,this.setSize(this._width,this._height)}});var um=function(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1};Object.assign(um.prototype,{setSize:function(){},render:function(){}}),um.FullScreenQuad=function(){var e=new Mh(-1,1,1,-1,0,1),t=new la(2,2),n=function(e){this._mesh=new Ms(t,e)};return Object.defineProperty(n.prototype,"material",{get:function(){return this._mesh.material},set:function(e){this._mesh.material=e}}),Object.assign(n.prototype,{render:function(t){t.render(this._mesh,e)}}),n}();var cm=function(e,t,n,i,r){rm.call(this),this.scene=e,this.camera=t,this.overrideMaterial=n,this.clearColor=i,this.clearAlpha=void 0!==r?r:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1};cm.prototype=Object.assign(Object.create(rm.prototype),{constructor:cm,render:function(e,t,n){var i,r,o=e.autoClear;e.autoClear=!1,this.scene.overrideMaterial=this.overrideMaterial,this.clearColor&&(i=e.getClearColor().getHex(),r=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:n),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor&&e.setClearColor(i,r),this.scene.overrideMaterial=null,e.autoClear=o}});var dm={uniforms:{tDiffuse:{value:null},resolution:{value:new ur(1/1024,1/512)}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["precision highp float;","","uniform sampler2D tDiffuse;","","uniform vec2 resolution;","","varying vec2 vUv;","","// FXAA 3.11 implementation by NVIDIA, ported to WebGL by Agost Biro (biro@archilogic.com)","","//----------------------------------------------------------------------------------","// File:        es3-keplerFXAAassetsshaders/FXAA_DefaultES.frag","// SDK Version: v3.00","// Email:       gameworks@nvidia.com","// Site:        http://developer.nvidia.com/","//","// Copyright (c) 2014-2015, NVIDIA CORPORATION. All rights reserved.","//","// Redistribution and use in source and binary forms, with or without","// modification, are permitted provided that the following conditions","// are met:","//  * Redistributions of source code must retain the above copyright","//    notice, this list of conditions and the following disclaimer.","//  * Redistributions in binary form must reproduce the above copyright","//    notice, this list of conditions and the following disclaimer in the","//    documentation and/or other materials provided with the distribution.","//  * Neither the name of NVIDIA CORPORATION nor the names of its","//    contributors may be used to endorse or promote products derived","//    from this software without specific prior written permission.","//","// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS ``AS IS'' AND ANY","// EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE","// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR","// PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR","// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,","// EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,","// PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR","// PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY","// OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT","// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE","// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.","//","//----------------------------------------------------------------------------------","","#define FXAA_PC 1","#define FXAA_GLSL_100 1","#define FXAA_QUALITY_PRESET 12","","#define FXAA_GREEN_AS_LUMA 1","","/*--------------------------------------------------------------------------*/","#ifndef FXAA_PC_CONSOLE","    //","    // The console algorithm for PC is included","    // for developers targeting really low spec machines.","    // Likely better to just run FXAA_PC, and use a really low preset.","    //","    #define FXAA_PC_CONSOLE 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_GLSL_120","    #define FXAA_GLSL_120 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_GLSL_130","    #define FXAA_GLSL_130 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_HLSL_3","    #define FXAA_HLSL_3 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_HLSL_4","    #define FXAA_HLSL_4 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_HLSL_5","    #define FXAA_HLSL_5 0","#endif","/*==========================================================================*/","#ifndef FXAA_GREEN_AS_LUMA","    //","    // For those using non-linear color,","    // and either not able to get luma in alpha, or not wanting to,","    // this enables FXAA to run using green as a proxy for luma.","    // So with this enabled, no need to pack luma in alpha.","    //","    // This will turn off AA on anything which lacks some amount of green.","    // Pure red and blue or combination of only R and B, will get no AA.","    //","    // Might want to lower the settings for both,","    //    fxaaConsoleEdgeThresholdMin","    //    fxaaQualityEdgeThresholdMin","    // In order to insure AA does not get turned off on colors","    // which contain a minor amount of green.","    //","    // 1 = On.","    // 0 = Off.","    //","    #define FXAA_GREEN_AS_LUMA 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_EARLY_EXIT","    //","    // Controls algorithm's early exit path.","    // On PS3 turning this ON adds 2 cycles to the shader.","    // On 360 turning this OFF adds 10ths of a millisecond to the shader.","    // Turning this off on console will result in a more blurry image.","    // So this defaults to on.","    //","    // 1 = On.","    // 0 = Off.","    //","    #define FXAA_EARLY_EXIT 1","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_DISCARD","    //","    // Only valid for PC OpenGL currently.","    // Probably will not work when FXAA_GREEN_AS_LUMA = 1.","    //","    // 1 = Use discard on pixels which don't need AA.","    //     For APIs which enable concurrent TEX+ROP from same surface.","    // 0 = Return unchanged color on pixels which don't need AA.","    //","    #define FXAA_DISCARD 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_FAST_PIXEL_OFFSET","    //","    // Used for GLSL 120 only.","    //","    // 1 = GL API supports fast pixel offsets","    // 0 = do not use fast pixel offsets","    //","    #ifdef GL_EXT_gpu_shader4","        #define FXAA_FAST_PIXEL_OFFSET 1","    #endif","    #ifdef GL_NV_gpu_shader5","        #define FXAA_FAST_PIXEL_OFFSET 1","    #endif","    #ifdef GL_ARB_gpu_shader5","        #define FXAA_FAST_PIXEL_OFFSET 1","    #endif","    #ifndef FXAA_FAST_PIXEL_OFFSET","        #define FXAA_FAST_PIXEL_OFFSET 0","    #endif","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_GATHER4_ALPHA","    //","    // 1 = API supports gather4 on alpha channel.","    // 0 = API does not support gather4 on alpha channel.","    //","    #if (FXAA_HLSL_5 == 1)","        #define FXAA_GATHER4_ALPHA 1","    #endif","    #ifdef GL_ARB_gpu_shader5","        #define FXAA_GATHER4_ALPHA 1","    #endif","    #ifdef GL_NV_gpu_shader5","        #define FXAA_GATHER4_ALPHA 1","    #endif","    #ifndef FXAA_GATHER4_ALPHA","        #define FXAA_GATHER4_ALPHA 0","    #endif","#endif","","","/*============================================================================","                        FXAA QUALITY - TUNING KNOBS","------------------------------------------------------------------------------","NOTE the other tuning knobs are now in the shader function inputs!","============================================================================*/","#ifndef FXAA_QUALITY_PRESET","    //","    // Choose the quality preset.","    // This needs to be compiled into the shader as it effects code.","    // Best option to include multiple presets is to","    // in each shader define the preset, then include this file.","    //","    // OPTIONS","    // -----------------------------------------------------------------------","    // 10 to 15 - default medium dither (10=fastest, 15=highest quality)","    // 20 to 29 - less dither, more expensive (20=fastest, 29=highest quality)","    // 39       - no dither, very expensive","    //","    // NOTES","    // -----------------------------------------------------------------------","    // 12 = slightly faster then FXAA 3.9 and higher edge quality (default)","    // 13 = about same speed as FXAA 3.9 and better than 12","    // 23 = closest to FXAA 3.9 visually and performance wise","    //  _ = the lowest digit is directly related to performance","    // _  = the highest digit is directly related to style","    //","    #define FXAA_QUALITY_PRESET 12","#endif","","","/*============================================================================","","                           FXAA QUALITY - PRESETS","","============================================================================*/","","/*============================================================================","                     FXAA QUALITY - MEDIUM DITHER PRESETS","============================================================================*/","#if (FXAA_QUALITY_PRESET == 10)","    #define FXAA_QUALITY_PS 3","    #define FXAA_QUALITY_P0 1.5","    #define FXAA_QUALITY_P1 3.0","    #define FXAA_QUALITY_P2 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 11)","    #define FXAA_QUALITY_PS 4","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 3.0","    #define FXAA_QUALITY_P3 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 12)","    #define FXAA_QUALITY_PS 5","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 4.0","    #define FXAA_QUALITY_P4 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 13)","    #define FXAA_QUALITY_PS 6","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 4.0","    #define FXAA_QUALITY_P5 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 14)","    #define FXAA_QUALITY_PS 7","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 4.0","    #define FXAA_QUALITY_P6 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 15)","    #define FXAA_QUALITY_PS 8","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 4.0","    #define FXAA_QUALITY_P7 12.0","#endif","","/*============================================================================","                     FXAA QUALITY - LOW DITHER PRESETS","============================================================================*/","#if (FXAA_QUALITY_PRESET == 20)","    #define FXAA_QUALITY_PS 3","    #define FXAA_QUALITY_P0 1.5","    #define FXAA_QUALITY_P1 2.0","    #define FXAA_QUALITY_P2 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 21)","    #define FXAA_QUALITY_PS 4","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 22)","    #define FXAA_QUALITY_PS 5","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 23)","    #define FXAA_QUALITY_PS 6","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 24)","    #define FXAA_QUALITY_PS 7","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 3.0","    #define FXAA_QUALITY_P6 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 25)","    #define FXAA_QUALITY_PS 8","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 4.0","    #define FXAA_QUALITY_P7 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 26)","    #define FXAA_QUALITY_PS 9","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 4.0","    #define FXAA_QUALITY_P8 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 27)","    #define FXAA_QUALITY_PS 10","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 4.0","    #define FXAA_QUALITY_P9 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 28)","    #define FXAA_QUALITY_PS 11","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 2.0","    #define FXAA_QUALITY_P9 4.0","    #define FXAA_QUALITY_P10 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 29)","    #define FXAA_QUALITY_PS 12","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 2.0","    #define FXAA_QUALITY_P9 2.0","    #define FXAA_QUALITY_P10 4.0","    #define FXAA_QUALITY_P11 8.0","#endif","","/*============================================================================","                     FXAA QUALITY - EXTREME QUALITY","============================================================================*/","#if (FXAA_QUALITY_PRESET == 39)","    #define FXAA_QUALITY_PS 12","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.0","    #define FXAA_QUALITY_P2 1.0","    #define FXAA_QUALITY_P3 1.0","    #define FXAA_QUALITY_P4 1.0","    #define FXAA_QUALITY_P5 1.5","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 2.0","    #define FXAA_QUALITY_P9 2.0","    #define FXAA_QUALITY_P10 4.0","    #define FXAA_QUALITY_P11 8.0","#endif","","","","/*============================================================================","","                                API PORTING","","============================================================================*/","#if (FXAA_GLSL_100 == 1) || (FXAA_GLSL_120 == 1) || (FXAA_GLSL_130 == 1)","    #define FxaaBool bool","    #define FxaaDiscard discard","    #define FxaaFloat float","    #define FxaaFloat2 vec2","    #define FxaaFloat3 vec3","    #define FxaaFloat4 vec4","    #define FxaaHalf float","    #define FxaaHalf2 vec2","    #define FxaaHalf3 vec3","    #define FxaaHalf4 vec4","    #define FxaaInt2 ivec2","    #define FxaaSat(x) clamp(x, 0.0, 1.0)","    #define FxaaTex sampler2D","#else","    #define FxaaBool bool","    #define FxaaDiscard clip(-1)","    #define FxaaFloat float","    #define FxaaFloat2 float2","    #define FxaaFloat3 float3","    #define FxaaFloat4 float4","    #define FxaaHalf half","    #define FxaaHalf2 half2","    #define FxaaHalf3 half3","    #define FxaaHalf4 half4","    #define FxaaSat(x) saturate(x)","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_GLSL_100 == 1)","  #define FxaaTexTop(t, p) texture2D(t, p, 0.0)","  #define FxaaTexOff(t, p, o, r) texture2D(t, p + (o * r), 0.0)","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_GLSL_120 == 1)","    // Requires,","    //  #version 120","    // And at least,","    //  #extension GL_EXT_gpu_shader4 : enable","    //  (or set FXAA_FAST_PIXEL_OFFSET 1 to work like DX9)","    #define FxaaTexTop(t, p) texture2DLod(t, p, 0.0)","    #if (FXAA_FAST_PIXEL_OFFSET == 1)","        #define FxaaTexOff(t, p, o, r) texture2DLodOffset(t, p, 0.0, o)","    #else","        #define FxaaTexOff(t, p, o, r) texture2DLod(t, p + (o * r), 0.0)","    #endif","    #if (FXAA_GATHER4_ALPHA == 1)","        // use #extension GL_ARB_gpu_shader5 : enable","        #define FxaaTexAlpha4(t, p) textureGather(t, p, 3)","        #define FxaaTexOffAlpha4(t, p, o) textureGatherOffset(t, p, o, 3)","        #define FxaaTexGreen4(t, p) textureGather(t, p, 1)","        #define FxaaTexOffGreen4(t, p, o) textureGatherOffset(t, p, o, 1)","    #endif","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_GLSL_130 == 1)",'    // Requires "#version 130" or better',"    #define FxaaTexTop(t, p) textureLod(t, p, 0.0)","    #define FxaaTexOff(t, p, o, r) textureLodOffset(t, p, 0.0, o)","    #if (FXAA_GATHER4_ALPHA == 1)","        // use #extension GL_ARB_gpu_shader5 : enable","        #define FxaaTexAlpha4(t, p) textureGather(t, p, 3)","        #define FxaaTexOffAlpha4(t, p, o) textureGatherOffset(t, p, o, 3)","        #define FxaaTexGreen4(t, p) textureGather(t, p, 1)","        #define FxaaTexOffGreen4(t, p, o) textureGatherOffset(t, p, o, 1)","    #endif","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_HLSL_3 == 1)","    #define FxaaInt2 float2","    #define FxaaTex sampler2D","    #define FxaaTexTop(t, p) tex2Dlod(t, float4(p, 0.0, 0.0))","    #define FxaaTexOff(t, p, o, r) tex2Dlod(t, float4(p + (o * r), 0, 0))","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_HLSL_4 == 1)","    #define FxaaInt2 int2","    struct FxaaTex { SamplerState smpl; Texture2D tex; };","    #define FxaaTexTop(t, p) t.tex.SampleLevel(t.smpl, p, 0.0)","    #define FxaaTexOff(t, p, o, r) t.tex.SampleLevel(t.smpl, p, 0.0, o)","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_HLSL_5 == 1)","    #define FxaaInt2 int2","    struct FxaaTex { SamplerState smpl; Texture2D tex; };","    #define FxaaTexTop(t, p) t.tex.SampleLevel(t.smpl, p, 0.0)","    #define FxaaTexOff(t, p, o, r) t.tex.SampleLevel(t.smpl, p, 0.0, o)","    #define FxaaTexAlpha4(t, p) t.tex.GatherAlpha(t.smpl, p)","    #define FxaaTexOffAlpha4(t, p, o) t.tex.GatherAlpha(t.smpl, p, o)","    #define FxaaTexGreen4(t, p) t.tex.GatherGreen(t.smpl, p)","    #define FxaaTexOffGreen4(t, p, o) t.tex.GatherGreen(t.smpl, p, o)","#endif","","","/*============================================================================","                   GREEN AS LUMA OPTION SUPPORT FUNCTION","============================================================================*/","#if (FXAA_GREEN_AS_LUMA == 0)","    FxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.w; }","#else","    FxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.y; }","#endif","","","","","/*============================================================================","","                             FXAA3 QUALITY - PC","","============================================================================*/","#if (FXAA_PC == 1)","/*--------------------------------------------------------------------------*/","FxaaFloat4 FxaaPixelShader(","    //","    // Use noperspective interpolation here (turn off perspective interpolation).","    // {xy} = center of pixel","    FxaaFloat2 pos,","    //","    // Used only for FXAA Console, and not used on the 360 version.","    // Use noperspective interpolation here (turn off perspective interpolation).","    // {xy_} = upper left of pixel","    // {_zw} = lower right of pixel","    FxaaFloat4 fxaaConsolePosPos,","    //","    // Input color texture.","    // {rgb_} = color in linear or perceptual color space","    // if (FXAA_GREEN_AS_LUMA == 0)","    //     {__a} = luma in perceptual color space (not linear)","    FxaaTex tex,","    //","    // Only used on the optimized 360 version of FXAA Console.",'    // For everything but 360, just use the same input here as for "tex".',"    // For 360, same texture, just alias with a 2nd sampler.","    // This sampler needs to have an exponent bias of -1.","    FxaaTex fxaaConsole360TexExpBiasNegOne,","    //","    // Only used on the optimized 360 version of FXAA Console.",'    // For everything but 360, just use the same input here as for "tex".',"    // For 360, same texture, just alias with a 3nd sampler.","    // This sampler needs to have an exponent bias of -2.","    FxaaTex fxaaConsole360TexExpBiasNegTwo,","    //","    // Only used on FXAA Quality.","    // This must be from a constant/uniform.","    // {x_} = 1.0/screenWidthInPixels","    // {_y} = 1.0/screenHeightInPixels","    FxaaFloat2 fxaaQualityRcpFrame,","    //","    // Only used on FXAA Console.","    // This must be from a constant/uniform.","    // This effects sub-pixel AA quality and inversely sharpness.","    //   Where N ranges between,","    //     N = 0.50 (default)","    //     N = 0.33 (sharper)","    // {x__} = -N/screenWidthInPixels","    // {_y_} = -N/screenHeightInPixels","    // {_z_} =  N/screenWidthInPixels","    // {__w} =  N/screenHeightInPixels","    FxaaFloat4 fxaaConsoleRcpFrameOpt,","    //","    // Only used on FXAA Console.","    // Not used on 360, but used on PS3 and PC.","    // This must be from a constant/uniform.","    // {x__} = -2.0/screenWidthInPixels","    // {_y_} = -2.0/screenHeightInPixels","    // {_z_} =  2.0/screenWidthInPixels","    // {__w} =  2.0/screenHeightInPixels","    FxaaFloat4 fxaaConsoleRcpFrameOpt2,","    //","    // Only used on FXAA Console.","    // Only used on 360 in place of fxaaConsoleRcpFrameOpt2.","    // This must be from a constant/uniform.","    // {x__} =  8.0/screenWidthInPixels","    // {_y_} =  8.0/screenHeightInPixels","    // {_z_} = -4.0/screenWidthInPixels","    // {__w} = -4.0/screenHeightInPixels","    FxaaFloat4 fxaaConsole360RcpFrameOpt2,","    //","    // Only used on FXAA Quality.","    // This used to be the FXAA_QUALITY_SUBPIX define.","    // It is here now to allow easier tuning.","    // Choose the amount of sub-pixel aliasing removal.","    // This can effect sharpness.","    //   1.00 - upper limit (softer)","    //   0.75 - default amount of filtering","    //   0.50 - lower limit (sharper, less sub-pixel aliasing removal)","    //   0.25 - almost off","    //   0.00 - completely off","    FxaaFloat fxaaQualitySubpix,","    //","    // Only used on FXAA Quality.","    // This used to be the FXAA_QUALITY_EDGE_THRESHOLD define.","    // It is here now to allow easier tuning.","    // The minimum amount of local contrast required to apply algorithm.","    //   0.333 - too little (faster)","    //   0.250 - low quality","    //   0.166 - default","    //   0.125 - high quality","    //   0.063 - overkill (slower)","    FxaaFloat fxaaQualityEdgeThreshold,","    //","    // Only used on FXAA Quality.","    // This used to be the FXAA_QUALITY_EDGE_THRESHOLD_MIN define.","    // It is here now to allow easier tuning.","    // Trims the algorithm from processing darks.","    //   0.0833 - upper limit (default, the start of visible unfiltered edges)","    //   0.0625 - high quality (faster)","    //   0.0312 - visible limit (slower)","    // Special notes when using FXAA_GREEN_AS_LUMA,","    //   Likely want to set this to zero.","    //   As colors that are mostly not-green","    //   will appear very dark in the green channel!","    //   Tune by looking at mostly non-green content,","    //   then start at zero and increase until aliasing is a problem.","    FxaaFloat fxaaQualityEdgeThresholdMin,","    //","    // Only used on FXAA Console.","    // This used to be the FXAA_CONSOLE_EDGE_SHARPNESS define.","    // It is here now to allow easier tuning.","    // This does not effect PS3, as this needs to be compiled in.","    //   Use FXAA_CONSOLE_PS3_EDGE_SHARPNESS for PS3.","    //   Due to the PS3 being ALU bound,","    //   there are only three safe values here: 2 and 4 and 8.","    //   These options use the shaders ability to a free *|/ by 2|4|8.","    // For all other platforms can be a non-power of two.","    //   8.0 is sharper (default!!!)","    //   4.0 is softer","    //   2.0 is really soft (good only for vector graphics inputs)","    FxaaFloat fxaaConsoleEdgeSharpness,","    //","    // Only used on FXAA Console.","    // This used to be the FXAA_CONSOLE_EDGE_THRESHOLD define.","    // It is here now to allow easier tuning.","    // This does not effect PS3, as this needs to be compiled in.","    //   Use FXAA_CONSOLE_PS3_EDGE_THRESHOLD for PS3.","    //   Due to the PS3 being ALU bound,","    //   there are only two safe values here: 1/4 and 1/8.","    //   These options use the shaders ability to a free *|/ by 2|4|8.","    // The console setting has a different mapping than the quality setting.","    // Other platforms can use other values.","    //   0.125 leaves less aliasing, but is softer (default!!!)","    //   0.25 leaves more aliasing, and is sharper","    FxaaFloat fxaaConsoleEdgeThreshold,","    //","    // Only used on FXAA Console.","    // This used to be the FXAA_CONSOLE_EDGE_THRESHOLD_MIN define.","    // It is here now to allow easier tuning.","    // Trims the algorithm from processing darks.","    // The console setting has a different mapping than the quality setting.","    // This only applies when FXAA_EARLY_EXIT is 1.","    // This does not apply to PS3,","    // PS3 was simplified to avoid more shader instructions.","    //   0.06 - faster but more aliasing in darks","    //   0.05 - default","    //   0.04 - slower and less aliasing in darks","    // Special notes when using FXAA_GREEN_AS_LUMA,","    //   Likely want to set this to zero.","    //   As colors that are mostly not-green","    //   will appear very dark in the green channel!","    //   Tune by looking at mostly non-green content,","    //   then start at zero and increase until aliasing is a problem.","    FxaaFloat fxaaConsoleEdgeThresholdMin,","    //","    // Extra constants for 360 FXAA Console only.","    // Use zeros or anything else for other platforms.","    // These must be in physical constant registers and NOT immediates.","    // Immediates will result in compiler un-optimizing.","    // {xyzw} = float4(1.0, -1.0, 0.25, -0.25)","    FxaaFloat4 fxaaConsole360ConstDir",") {","/*--------------------------------------------------------------------------*/","    FxaaFloat2 posM;","    posM.x = pos.x;","    posM.y = pos.y;","    #if (FXAA_GATHER4_ALPHA == 1)","        #if (FXAA_DISCARD == 0)","            FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);","            #if (FXAA_GREEN_AS_LUMA == 0)","                #define lumaM rgbyM.w","            #else","                #define lumaM rgbyM.y","            #endif","        #endif","        #if (FXAA_GREEN_AS_LUMA == 0)","            FxaaFloat4 luma4A = FxaaTexAlpha4(tex, posM);","            FxaaFloat4 luma4B = FxaaTexOffAlpha4(tex, posM, FxaaInt2(-1, -1));","        #else","            FxaaFloat4 luma4A = FxaaTexGreen4(tex, posM);","            FxaaFloat4 luma4B = FxaaTexOffGreen4(tex, posM, FxaaInt2(-1, -1));","        #endif","        #if (FXAA_DISCARD == 1)","            #define lumaM luma4A.w","        #endif","        #define lumaE luma4A.z","        #define lumaS luma4A.x","        #define lumaSE luma4A.y","        #define lumaNW luma4B.w","        #define lumaN luma4B.z","        #define lumaW luma4B.x","    #else","        FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);","        #if (FXAA_GREEN_AS_LUMA == 0)","            #define lumaM rgbyM.w","        #else","            #define lumaM rgbyM.y","        #endif","        #if (FXAA_GLSL_100 == 1)","          FxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 0.0, 1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0, 0.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 0.0,-1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, 0.0), fxaaQualityRcpFrame.xy));","        #else","          FxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0, 1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0,-1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 0), fxaaQualityRcpFrame.xy));","        #endif","    #endif","/*--------------------------------------------------------------------------*/","    FxaaFloat maxSM = max(lumaS, lumaM);","    FxaaFloat minSM = min(lumaS, lumaM);","    FxaaFloat maxESM = max(lumaE, maxSM);","    FxaaFloat minESM = min(lumaE, minSM);","    FxaaFloat maxWN = max(lumaN, lumaW);","    FxaaFloat minWN = min(lumaN, lumaW);","    FxaaFloat rangeMax = max(maxWN, maxESM);","    FxaaFloat rangeMin = min(minWN, minESM);","    FxaaFloat rangeMaxScaled = rangeMax * fxaaQualityEdgeThreshold;","    FxaaFloat range = rangeMax - rangeMin;","    FxaaFloat rangeMaxClamped = max(fxaaQualityEdgeThresholdMin, rangeMaxScaled);","    FxaaBool earlyExit = range < rangeMaxClamped;","/*--------------------------------------------------------------------------*/","    if(earlyExit)","        #if (FXAA_DISCARD == 1)","            FxaaDiscard;","        #else","            return rgbyM;","        #endif","/*--------------------------------------------------------------------------*/","    #if (FXAA_GATHER4_ALPHA == 0)","        #if (FXAA_GLSL_100 == 1)","          FxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0,-1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0, 1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0,-1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, 1.0), fxaaQualityRcpFrame.xy));","        #else","          FxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1,-1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1,-1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));","        #endif","    #else","        FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(1, -1), fxaaQualityRcpFrame.xy));","        FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));","    #endif","/*--------------------------------------------------------------------------*/","    FxaaFloat lumaNS = lumaN + lumaS;","    FxaaFloat lumaWE = lumaW + lumaE;","    FxaaFloat subpixRcpRange = 1.0/range;","    FxaaFloat subpixNSWE = lumaNS + lumaWE;","    FxaaFloat edgeHorz1 = (-2.0 * lumaM) + lumaNS;","    FxaaFloat edgeVert1 = (-2.0 * lumaM) + lumaWE;","/*--------------------------------------------------------------------------*/","    FxaaFloat lumaNESE = lumaNE + lumaSE;","    FxaaFloat lumaNWNE = lumaNW + lumaNE;","    FxaaFloat edgeHorz2 = (-2.0 * lumaE) + lumaNESE;","    FxaaFloat edgeVert2 = (-2.0 * lumaN) + lumaNWNE;","/*--------------------------------------------------------------------------*/","    FxaaFloat lumaNWSW = lumaNW + lumaSW;","    FxaaFloat lumaSWSE = lumaSW + lumaSE;","    FxaaFloat edgeHorz4 = (abs(edgeHorz1) * 2.0) + abs(edgeHorz2);","    FxaaFloat edgeVert4 = (abs(edgeVert1) * 2.0) + abs(edgeVert2);","    FxaaFloat edgeHorz3 = (-2.0 * lumaW) + lumaNWSW;","    FxaaFloat edgeVert3 = (-2.0 * lumaS) + lumaSWSE;","    FxaaFloat edgeHorz = abs(edgeHorz3) + edgeHorz4;","    FxaaFloat edgeVert = abs(edgeVert3) + edgeVert4;","/*--------------------------------------------------------------------------*/","    FxaaFloat subpixNWSWNESE = lumaNWSW + lumaNESE;","    FxaaFloat lengthSign = fxaaQualityRcpFrame.x;","    FxaaBool horzSpan = edgeHorz >= edgeVert;","    FxaaFloat subpixA = subpixNSWE * 2.0 + subpixNWSWNESE;","/*--------------------------------------------------------------------------*/","    if(!horzSpan) lumaN = lumaW;","    if(!horzSpan) lumaS = lumaE;","    if(horzSpan) lengthSign = fxaaQualityRcpFrame.y;","    FxaaFloat subpixB = (subpixA * (1.0/12.0)) - lumaM;","/*--------------------------------------------------------------------------*/","    FxaaFloat gradientN = lumaN - lumaM;","    FxaaFloat gradientS = lumaS - lumaM;","    FxaaFloat lumaNN = lumaN + lumaM;","    FxaaFloat lumaSS = lumaS + lumaM;","    FxaaBool pairN = abs(gradientN) >= abs(gradientS);","    FxaaFloat gradient = max(abs(gradientN), abs(gradientS));","    if(pairN) lengthSign = -lengthSign;","    FxaaFloat subpixC = FxaaSat(abs(subpixB) * subpixRcpRange);","/*--------------------------------------------------------------------------*/","    FxaaFloat2 posB;","    posB.x = posM.x;","    posB.y = posM.y;","    FxaaFloat2 offNP;","    offNP.x = (!horzSpan) ? 0.0 : fxaaQualityRcpFrame.x;","    offNP.y = ( horzSpan) ? 0.0 : fxaaQualityRcpFrame.y;","    if(!horzSpan) posB.x += lengthSign * 0.5;","    if( horzSpan) posB.y += lengthSign * 0.5;","/*--------------------------------------------------------------------------*/","    FxaaFloat2 posN;","    posN.x = posB.x - offNP.x * FXAA_QUALITY_P0;","    posN.y = posB.y - offNP.y * FXAA_QUALITY_P0;","    FxaaFloat2 posP;","    posP.x = posB.x + offNP.x * FXAA_QUALITY_P0;","    posP.y = posB.y + offNP.y * FXAA_QUALITY_P0;","    FxaaFloat subpixD = ((-2.0)*subpixC) + 3.0;","    FxaaFloat lumaEndN = FxaaLuma(FxaaTexTop(tex, posN));","    FxaaFloat subpixE = subpixC * subpixC;","    FxaaFloat lumaEndP = FxaaLuma(FxaaTexTop(tex, posP));","/*--------------------------------------------------------------------------*/","    if(!pairN) lumaNN = lumaSS;","    FxaaFloat gradientScaled = gradient * 1.0/4.0;","    FxaaFloat lumaMM = lumaM - lumaNN * 0.5;","    FxaaFloat subpixF = subpixD * subpixE;","    FxaaBool lumaMLTZero = lumaMM < 0.0;","/*--------------------------------------------------------------------------*/","    lumaEndN -= lumaNN * 0.5;","    lumaEndP -= lumaNN * 0.5;","    FxaaBool doneN = abs(lumaEndN) >= gradientScaled;","    FxaaBool doneP = abs(lumaEndP) >= gradientScaled;","    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P1;","    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P1;","    FxaaBool doneNP = (!doneN) || (!doneP);","    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P1;","    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P1;","/*--------------------------------------------------------------------------*/","    if(doneNP) {","        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","        doneN = abs(lumaEndN) >= gradientScaled;","        doneP = abs(lumaEndP) >= gradientScaled;","        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P2;","        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P2;","        doneNP = (!doneN) || (!doneP);","        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P2;","        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P2;","/*--------------------------------------------------------------------------*/","        #if (FXAA_QUALITY_PS > 3)","        if(doneNP) {","            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","            doneN = abs(lumaEndN) >= gradientScaled;","            doneP = abs(lumaEndP) >= gradientScaled;","            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P3;","            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P3;","            doneNP = (!doneN) || (!doneP);","            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P3;","            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P3;","/*--------------------------------------------------------------------------*/","            #if (FXAA_QUALITY_PS > 4)","            if(doneNP) {","                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                doneN = abs(lumaEndN) >= gradientScaled;","                doneP = abs(lumaEndP) >= gradientScaled;","                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P4;","                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P4;","                doneNP = (!doneN) || (!doneP);","                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P4;","                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P4;","/*--------------------------------------------------------------------------*/","                #if (FXAA_QUALITY_PS > 5)","                if(doneNP) {","                    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                    doneN = abs(lumaEndN) >= gradientScaled;","                    doneP = abs(lumaEndP) >= gradientScaled;","                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P5;","                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P5;","                    doneNP = (!doneN) || (!doneP);","                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P5;","                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P5;","/*--------------------------------------------------------------------------*/","                    #if (FXAA_QUALITY_PS > 6)","                    if(doneNP) {","                        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                        doneN = abs(lumaEndN) >= gradientScaled;","                        doneP = abs(lumaEndP) >= gradientScaled;","                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P6;","                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P6;","                        doneNP = (!doneN) || (!doneP);","                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P6;","                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P6;","/*--------------------------------------------------------------------------*/","                        #if (FXAA_QUALITY_PS > 7)","                        if(doneNP) {","                            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                            doneN = abs(lumaEndN) >= gradientScaled;","                            doneP = abs(lumaEndP) >= gradientScaled;","                            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P7;","                            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P7;","                            doneNP = (!doneN) || (!doneP);","                            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P7;","                            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P7;","/*--------------------------------------------------------------------------*/","    #if (FXAA_QUALITY_PS > 8)","    if(doneNP) {","        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","        doneN = abs(lumaEndN) >= gradientScaled;","        doneP = abs(lumaEndP) >= gradientScaled;","        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P8;","        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P8;","        doneNP = (!doneN) || (!doneP);","        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P8;","        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P8;","/*--------------------------------------------------------------------------*/","        #if (FXAA_QUALITY_PS > 9)","        if(doneNP) {","            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","            doneN = abs(lumaEndN) >= gradientScaled;","            doneP = abs(lumaEndP) >= gradientScaled;","            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P9;","            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P9;","            doneNP = (!doneN) || (!doneP);","            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P9;","            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P9;","/*--------------------------------------------------------------------------*/","            #if (FXAA_QUALITY_PS > 10)","            if(doneNP) {","                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                doneN = abs(lumaEndN) >= gradientScaled;","                doneP = abs(lumaEndP) >= gradientScaled;","                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P10;","                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P10;","                doneNP = (!doneN) || (!doneP);","                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P10;","                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P10;","/*--------------------------------------------------------------------------*/","                #if (FXAA_QUALITY_PS > 11)","                if(doneNP) {","                    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                    doneN = abs(lumaEndN) >= gradientScaled;","                    doneP = abs(lumaEndP) >= gradientScaled;","                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P11;","                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P11;","                    doneNP = (!doneN) || (!doneP);","                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P11;","                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P11;","/*--------------------------------------------------------------------------*/","                    #if (FXAA_QUALITY_PS > 12)","                    if(doneNP) {","                        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                        doneN = abs(lumaEndN) >= gradientScaled;","                        doneP = abs(lumaEndP) >= gradientScaled;","                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P12;","                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P12;","                        doneNP = (!doneN) || (!doneP);","                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P12;","                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P12;","/*--------------------------------------------------------------------------*/","                    }","                    #endif","/*--------------------------------------------------------------------------*/","                }","                #endif","/*--------------------------------------------------------------------------*/","            }","            #endif","/*--------------------------------------------------------------------------*/","        }","        #endif","/*--------------------------------------------------------------------------*/","    }","    #endif","/*--------------------------------------------------------------------------*/","                        }","                        #endif","/*--------------------------------------------------------------------------*/","                    }","                    #endif","/*--------------------------------------------------------------------------*/","                }","                #endif","/*--------------------------------------------------------------------------*/","            }","            #endif","/*--------------------------------------------------------------------------*/","        }","        #endif","/*--------------------------------------------------------------------------*/","    }","/*--------------------------------------------------------------------------*/","    FxaaFloat dstN = posM.x - posN.x;","    FxaaFloat dstP = posP.x - posM.x;","    if(!horzSpan) dstN = posM.y - posN.y;","    if(!horzSpan) dstP = posP.y - posM.y;","/*--------------------------------------------------------------------------*/","    FxaaBool goodSpanN = (lumaEndN < 0.0) != lumaMLTZero;","    FxaaFloat spanLength = (dstP + dstN);","    FxaaBool goodSpanP = (lumaEndP < 0.0) != lumaMLTZero;","    FxaaFloat spanLengthRcp = 1.0/spanLength;","/*--------------------------------------------------------------------------*/","    FxaaBool directionN = dstN < dstP;","    FxaaFloat dst = min(dstN, dstP);","    FxaaBool goodSpan = directionN ? goodSpanN : goodSpanP;","    FxaaFloat subpixG = subpixF * subpixF;","    FxaaFloat pixelOffset = (dst * (-spanLengthRcp)) + 0.5;","    FxaaFloat subpixH = subpixG * fxaaQualitySubpix;","/*--------------------------------------------------------------------------*/","    FxaaFloat pixelOffsetGood = goodSpan ? pixelOffset : 0.0;","    FxaaFloat pixelOffsetSubpix = max(pixelOffsetGood, subpixH);","    if(!horzSpan) posM.x += pixelOffsetSubpix * lengthSign;","    if( horzSpan) posM.y += pixelOffsetSubpix * lengthSign;","    #if (FXAA_DISCARD == 1)","        return FxaaTexTop(tex, posM);","    #else","        return FxaaFloat4(FxaaTexTop(tex, posM).xyz, lumaM);","    #endif","}","/*==========================================================================*/","#endif","","void main() {","  gl_FragColor = FxaaPixelShader(","    vUv,","    vec4(0.0),","    tDiffuse,","    tDiffuse,","    tDiffuse,","    resolution,","    vec4(0.0),","    vec4(0.0),","    vec4(0.0),","    0.75,","    0.166,","    0.0833,","    0.0,","    0.0,","    0.0,","    vec4(0.0)","  );","","  // TODO avoid querying texture twice for same texel","  gl_FragColor.a = texture2D(tDiffuse, vUv).a;","}"].join("\n")};function hm(e,t){var n=e.__state.conversionName.toString(),i=Math.round(e.r),r=Math.round(e.g),o=Math.round(e.b),s=e.a,a=Math.round(e.h),l=e.s.toFixed(1),u=e.v.toFixed(1);if(t||"THREE_CHAR_HEX"===n||"SIX_CHAR_HEX"===n){for(var c=e.hex.toString(16);c.length<6;)c="0"+c;return"#"+c}return"CSS_RGB"===n?"rgb("+i+","+r+","+o+")":"CSS_RGBA"===n?"rgba("+i+","+r+","+o+","+s+")":"HEX"===n?"0x"+e.hex.toString(16):"RGB_ARRAY"===n?"["+i+","+r+","+o+"]":"RGBA_ARRAY"===n?"["+i+","+r+","+o+","+s+"]":"RGB_OBJ"===n?"{r:"+i+",g:"+r+",b:"+o+"}":"RGBA_OBJ"===n?"{r:"+i+",g:"+r+",b:"+o+",a:"+s+"}":"HSV_OBJ"===n?"{h:"+a+",s:"+l+",v:"+u+"}":"HSVA_OBJ"===n?"{h:"+a+",s:"+l+",v:"+u+",a:"+s+"}":"unknown format"}var pm=Array.prototype.forEach,fm=Array.prototype.slice,mm={BREAK:{},extend:function(e){return this.each(fm.call(arguments,1),function(t){(this.isObject(t)?Object.keys(t):[]).forEach(function(n){this.isUndefined(t[n])||(e[n]=t[n])}.bind(this))},this),e},defaults:function(e){return this.each(fm.call(arguments,1),function(t){(this.isObject(t)?Object.keys(t):[]).forEach(function(n){this.isUndefined(e[n])&&(e[n]=t[n])}.bind(this))},this),e},compose:function(){var e=fm.call(arguments);return function(){for(var t=fm.call(arguments),n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},each:function(e,t,n){if(e)if(pm&&e.forEach&&e.forEach===pm)e.forEach(t,n);else if(e.length===e.length+0){var i,r=void 0;for(r=0,i=e.length;r<i;r++)if(r in e&&t.call(n,e[r],r)===this.BREAK)return}else for(var o in e)if(t.call(n,e[o],o)===this.BREAK)return},defer:function(e){setTimeout(e,0)},debounce:function(e,t,n){var i=void 0;return function(){var r=this,o=arguments;function s(){i=null,n||e.apply(r,o)}var a=n||!i;clearTimeout(i),i=setTimeout(s,t),a&&e.apply(r,o)}},toArray:function(e){return e.toArray?e.toArray():fm.call(e)},isUndefined:function(e){return void 0===e},isNull:function(e){return null===e},isNaN:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return isNaN(e)}),isArray:Array.isArray||function(e){return e.constructor===Array},isObject:function(e){return e===Object(e)},isNumber:function(e){return e===e+0},isString:function(e){return e===e+""},isBoolean:function(e){return!1===e||!0===e},isFunction:function(e){return"[object Function]"===Object.prototype.toString.call(e)}},_m=[{litmus:mm.isString,conversions:{THREE_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString()+t[1].toString()+t[2].toString()+t[2].toString()+t[3].toString()+t[3].toString(),0)}},write:hm},SIX_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9]{6})$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString(),0)}},write:hm},CSS_RGB:{read:function(e){var t=e.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3])}},write:hm},CSS_RGBA:{read:function(e){var t=e.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3]),a:parseFloat(t[4])}},write:hm}}},{litmus:mm.isNumber,conversions:{HEX:{read:function(e){return{space:"HEX",hex:e,conversionName:"HEX"}},write:function(e){return e.hex}}}},{litmus:mm.isArray,conversions:{RGB_ARRAY:{read:function(e){return 3===e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2]}},write:function(e){return[e.r,e.g,e.b]}},RGBA_ARRAY:{read:function(e){return 4===e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2],a:e[3]}},write:function(e){return[e.r,e.g,e.b,e.a]}}}},{litmus:mm.isObject,conversions:{RGBA_OBJ:{read:function(e){return!!(mm.isNumber(e.r)&&mm.isNumber(e.g)&&mm.isNumber(e.b)&&mm.isNumber(e.a))&&{space:"RGB",r:e.r,g:e.g,b:e.b,a:e.a}},write:function(e){return{r:e.r,g:e.g,b:e.b,a:e.a}}},RGB_OBJ:{read:function(e){return!!(mm.isNumber(e.r)&&mm.isNumber(e.g)&&mm.isNumber(e.b))&&{space:"RGB",r:e.r,g:e.g,b:e.b}},write:function(e){return{r:e.r,g:e.g,b:e.b}}},HSVA_OBJ:{read:function(e){return!!(mm.isNumber(e.h)&&mm.isNumber(e.s)&&mm.isNumber(e.v)&&mm.isNumber(e.a))&&{space:"HSV",h:e.h,s:e.s,v:e.v,a:e.a}},write:function(e){return{h:e.h,s:e.s,v:e.v,a:e.a}}},HSV_OBJ:{read:function(e){return!!(mm.isNumber(e.h)&&mm.isNumber(e.s)&&mm.isNumber(e.v))&&{space:"HSV",h:e.h,s:e.s,v:e.v}},write:function(e){return{h:e.h,s:e.s,v:e.v}}}}}],gm=void 0,vm=void 0,ym=function(){vm=!1;var e=arguments.length>1?mm.toArray(arguments):arguments[0];return mm.each(_m,function(t){if(t.litmus(e))return mm.each(t.conversions,function(t,n){if(gm=t.read(e),!1===vm&&!1!==gm)return vm=gm,gm.conversionName=n,gm.conversion=t,mm.BREAK}),mm.BREAK}),vm},xm=void 0,bm={hsv_to_rgb:function(e,t,n){var i=Math.floor(e/60)%6,r=e/60-Math.floor(e/60),o=n*(1-t),s=n*(1-r*t),a=n*(1-(1-r)*t),l=[[n,a,o],[s,n,o],[o,n,a],[o,s,n],[a,o,n],[n,o,s]][i];return{r:255*l[0],g:255*l[1],b:255*l[2]}},rgb_to_hsv:function(e,t,n){var i=Math.min(e,t,n),r=Math.max(e,t,n),o=r-i,s=void 0;return 0===r?{h:NaN,s:0,v:0}:(s=e===r?(t-n)/o:t===r?2+(n-e)/o:4+(e-t)/o,(s/=6)<0&&(s+=1),{h:360*s,s:o/r,v:r/255})},rgb_to_hex:function(e,t,n){var i=this.hex_with_component(0,2,e);return i=this.hex_with_component(i,1,t),i=this.hex_with_component(i,0,n)},component_from_hex:function(e,t){return e>>8*t&255},hex_with_component:function(e,t,n){return n<<(xm=8*t)|e&~(255<<xm)}},wm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jm=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},Sm=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),Am=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0},Mm=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},Tm=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},Pm=function(){function e(){if(jm(this,e),this.__state=ym.apply(this,arguments),!1===this.__state)throw new Error("Failed to interpret color arguments");this.__state.a=this.__state.a||1}return Sm(e,[{key:"toString",value:function(){return hm(this)}},{key:"toHexString",value:function(){return hm(this,!0)}},{key:"toOriginal",value:function(){return this.__state.conversion.write(this)}}]),e}();function Lm(e,t,n){Object.defineProperty(e,t,{get:function(){return"RGB"===this.__state.space?this.__state[t]:(Pm.recalculateRGB(this,t,n),this.__state[t])},set:function(e){"RGB"!==this.__state.space&&(Pm.recalculateRGB(this,t,n),this.__state.space="RGB"),this.__state[t]=e}})}function Em(e,t){Object.defineProperty(e,t,{get:function(){return"HSV"===this.__state.space?this.__state[t]:(Pm.recalculateHSV(this),this.__state[t])},set:function(e){"HSV"!==this.__state.space&&(Pm.recalculateHSV(this),this.__state.space="HSV"),this.__state[t]=e}})}Pm.recalculateRGB=function(e,t,n){if("HEX"===e.__state.space)e.__state[t]=bm.component_from_hex(e.__state.hex,n);else{if("HSV"!==e.__state.space)throw new Error("Corrupted color state");mm.extend(e.__state,bm.hsv_to_rgb(e.__state.h,e.__state.s,e.__state.v))}},Pm.recalculateHSV=function(e){var t=bm.rgb_to_hsv(e.r,e.g,e.b);mm.extend(e.__state,{s:t.s,v:t.v}),mm.isNaN(t.h)?mm.isUndefined(e.__state.h)&&(e.__state.h=0):e.__state.h=t.h},Pm.COMPONENTS=["r","g","b","h","s","v","hex","a"],Lm(Pm.prototype,"r",2),Lm(Pm.prototype,"g",1),Lm(Pm.prototype,"b",0),Em(Pm.prototype,"h"),Em(Pm.prototype,"s"),Em(Pm.prototype,"v"),Object.defineProperty(Pm.prototype,"a",{get:function(){return this.__state.a},set:function(e){this.__state.a=e}}),Object.defineProperty(Pm.prototype,"hex",{get:function(){return"HEX"!==!this.__state.space&&(this.__state.hex=bm.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(e){this.__state.space="HEX",this.__state.hex=e}});var Om=function(){function e(t,n){jm(this,e),this.initialValue=t[n],this.domElement=document.createElement("div"),this.object=t,this.property=n,this.__onChange=void 0,this.__onFinishChange=void 0}return Sm(e,[{key:"onChange",value:function(e){return this.__onChange=e,this}},{key:"onFinishChange",value:function(e){return this.__onFinishChange=e,this}},{key:"setValue",value:function(e){return this.object[this.property]=e,this.__onChange&&this.__onChange.call(this,e),this.updateDisplay(),this}},{key:"getValue",value:function(){return this.object[this.property]}},{key:"updateDisplay",value:function(){return this}},{key:"isModified",value:function(){return this.initialValue!==this.getValue()}}]),e}(),Im={};mm.each({HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},function(e,t){mm.each(e,function(e){Im[e]=t})});var Cm=/(\d+(\.\d+)?)px/;function Fm(e){if("0"===e||mm.isUndefined(e))return 0;var t=e.match(Cm);return mm.isNull(t)?0:parseFloat(t[1])}var Nm={makeSelectable:function(e,t){void 0!==e&&void 0!==e.style&&(e.onselectstart=t?function(){return!1}:function(){},e.style.MozUserSelect=t?"auto":"none",e.style.KhtmlUserSelect=t?"auto":"none",e.unselectable=t?"on":"off")},makeFullscreen:function(e,t,n){var i=n,r=t;mm.isUndefined(r)&&(r=!0),mm.isUndefined(i)&&(i=!0),e.style.position="absolute",r&&(e.style.left=0,e.style.right=0),i&&(e.style.top=0,e.style.bottom=0)},fakeEvent:function(e,t,n,i){var r=n||{},o=Im[t];if(!o)throw new Error("Event type "+t+" not supported.");var s=document.createEvent(o);switch(o){case"MouseEvents":var a=r.x||r.clientX||0,l=r.y||r.clientY||0;s.initMouseEvent(t,r.bubbles||!1,r.cancelable||!0,window,r.clickCount||1,0,0,a,l,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var u=s.initKeyboardEvent||s.initKeyEvent;mm.defaults(r,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),u(t,r.bubbles||!1,r.cancelable,window,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,r.keyCode,r.charCode);break;default:s.initEvent(t,r.bubbles||!1,r.cancelable||!0)}mm.defaults(s,i),e.dispatchEvent(s)},bind:function(e,t,n,i){var r=i||!1;return e.addEventListener?e.addEventListener(t,n,r):e.attachEvent&&e.attachEvent("on"+t,n),Nm},unbind:function(e,t,n,i){var r=i||!1;return e.removeEventListener?e.removeEventListener(t,n,r):e.detachEvent&&e.detachEvent("on"+t,n),Nm},addClass:function(e,t){if(void 0===e.className)e.className=t;else if(e.className!==t){var n=e.className.split(/ +/);-1===n.indexOf(t)&&(n.push(t),e.className=n.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return Nm},removeClass:function(e,t){if(t)if(e.className===t)e.removeAttribute("class");else{var n=e.className.split(/ +/),i=n.indexOf(t);-1!==i&&(n.splice(i,1),e.className=n.join(" "))}else e.className=void 0;return Nm},hasClass:function(e,t){return new RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)").test(e.className)||!1},getWidth:function(e){var t=getComputedStyle(e);return Fm(t["border-left-width"])+Fm(t["border-right-width"])+Fm(t["padding-left"])+Fm(t["padding-right"])+Fm(t.width)},getHeight:function(e){var t=getComputedStyle(e);return Fm(t["border-top-width"])+Fm(t["border-bottom-width"])+Fm(t["padding-top"])+Fm(t["padding-bottom"])+Fm(t.height)},getOffset:function(e){var t=e,n={left:0,top:0};if(t.offsetParent)do{n.left+=t.offsetLeft,n.top+=t.offsetTop,t=t.offsetParent}while(t);return n},isActive:function(e){return e===document.activeElement&&(e.type||e.href)}},km=function(e){function t(e,n){jm(this,t);var i=Tm(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),r=i;return i.__prev=i.getValue(),i.__checkbox=document.createElement("input"),i.__checkbox.setAttribute("type","checkbox"),Nm.bind(i.__checkbox,"change",function(){r.setValue(!r.__prev)},!1),i.domElement.appendChild(i.__checkbox),i.updateDisplay(),i}return Mm(t,Om),Sm(t,[{key:"setValue",value:function(e){var n=Am(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),n}},{key:"updateDisplay",value:function(){return!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0,this.__prev=!0):(this.__checkbox.checked=!1,this.__prev=!1),Am(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(),Dm=function(e){function t(e,n,i){jm(this,t);var r=Tm(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),o=i,s=r;if(r.__select=document.createElement("select"),mm.isArray(o)){var a={};mm.each(o,function(e){a[e]=e}),o=a}return mm.each(o,function(e,t){var n=document.createElement("option");n.innerHTML=t,n.setAttribute("value",e),s.__select.appendChild(n)}),r.updateDisplay(),Nm.bind(r.__select,"change",function(){var e=this.options[this.selectedIndex].value;s.setValue(e)}),r.domElement.appendChild(r.__select),r}return Mm(t,Om),Sm(t,[{key:"setValue",value:function(e){var n=Am(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),n}},{key:"updateDisplay",value:function(){return Nm.isActive(this.__select)?this:(this.__select.value=this.getValue(),Am(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this))}}]),t}(),Rm=function(e){function t(e,n){jm(this,t);var i=Tm(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),r=i;function o(){r.setValue(r.__input.value)}return i.__input=document.createElement("input"),i.__input.setAttribute("type","text"),Nm.bind(i.__input,"keyup",o),Nm.bind(i.__input,"change",o),Nm.bind(i.__input,"blur",function(){r.__onFinishChange&&r.__onFinishChange.call(r,r.getValue())}),Nm.bind(i.__input,"keydown",function(e){13===e.keyCode&&this.blur()}),i.updateDisplay(),i.domElement.appendChild(i.__input),i}return Mm(t,Om),Sm(t,[{key:"updateDisplay",value:function(){return Nm.isActive(this.__input)||(this.__input.value=this.getValue()),Am(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}();function zm(e){var t=e.toString();return t.indexOf(".")>-1?t.length-t.indexOf(".")-1:0}var Um=function(e){function t(e,n,i){jm(this,t);var r=Tm(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),o=i||{};return r.__min=o.min,r.__max=o.max,r.__step=o.step,mm.isUndefined(r.__step)?0===r.initialValue?r.__impliedStep=1:r.__impliedStep=Math.pow(10,Math.floor(Math.log(Math.abs(r.initialValue))/Math.LN10))/10:r.__impliedStep=r.__step,r.__precision=zm(r.__impliedStep),r}return Mm(t,Om),Sm(t,[{key:"setValue",value:function(e){var n=e;return void 0!==this.__min&&n<this.__min?n=this.__min:void 0!==this.__max&&n>this.__max&&(n=this.__max),void 0!==this.__step&&n%this.__step!=0&&(n=Math.round(n/this.__step)*this.__step),Am(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,n)}},{key:"min",value:function(e){return this.__min=e,this}},{key:"max",value:function(e){return this.__max=e,this}},{key:"step",value:function(e){return this.__step=e,this.__impliedStep=e,this.__precision=zm(e),this}}]),t}();var Bm=function(e){function t(e,n,i){jm(this,t);var r=Tm(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,i));r.__truncationSuspended=!1;var o=r,s=void 0;function a(){o.__onFinishChange&&o.__onFinishChange.call(o,o.getValue())}function l(e){var t=s-e.clientY;o.setValue(o.getValue()+t*o.__impliedStep),s=e.clientY}function u(){Nm.unbind(window,"mousemove",l),Nm.unbind(window,"mouseup",u),a()}return r.__input=document.createElement("input"),r.__input.setAttribute("type","text"),Nm.bind(r.__input,"change",function(){var e=parseFloat(o.__input.value);mm.isNaN(e)||o.setValue(e)}),Nm.bind(r.__input,"blur",function(){a()}),Nm.bind(r.__input,"mousedown",function(e){Nm.bind(window,"mousemove",l),Nm.bind(window,"mouseup",u),s=e.clientY}),Nm.bind(r.__input,"keydown",function(e){13===e.keyCode&&(o.__truncationSuspended=!0,this.blur(),o.__truncationSuspended=!1,a())}),r.updateDisplay(),r.domElement.appendChild(r.__input),r}return Mm(t,Um),Sm(t,[{key:"updateDisplay",value:function(){var e,n,i;return this.__input.value=this.__truncationSuspended?this.getValue():(e=this.getValue(),n=this.__precision,i=Math.pow(10,n),Math.round(e*i)/i),Am(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}();function Gm(e,t,n,i,r){return i+(e-t)/(n-t)*(r-i)}var Vm=function(e){function t(e,n,i,r,o){jm(this,t);var s=Tm(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,{min:i,max:r,step:o})),a=s;function l(e){e.preventDefault();var t=a.__background.getBoundingClientRect();return a.setValue(Gm(e.clientX,t.left,t.right,a.__min,a.__max)),!1}function u(){Nm.unbind(window,"mousemove",l),Nm.unbind(window,"mouseup",u),a.__onFinishChange&&a.__onFinishChange.call(a,a.getValue())}function c(e){var t=e.touches[0].clientX,n=a.__background.getBoundingClientRect();a.setValue(Gm(t,n.left,n.right,a.__min,a.__max))}function d(){Nm.unbind(window,"touchmove",c),Nm.unbind(window,"touchend",d),a.__onFinishChange&&a.__onFinishChange.call(a,a.getValue())}return s.__background=document.createElement("div"),s.__foreground=document.createElement("div"),Nm.bind(s.__background,"mousedown",function(e){document.activeElement.blur(),Nm.bind(window,"mousemove",l),Nm.bind(window,"mouseup",u),l(e)}),Nm.bind(s.__background,"touchstart",function(e){if(1!==e.touches.length)return;Nm.bind(window,"touchmove",c),Nm.bind(window,"touchend",d),c(e)}),Nm.addClass(s.__background,"slider"),Nm.addClass(s.__foreground,"slider-fg"),s.updateDisplay(),s.__background.appendChild(s.__foreground),s.domElement.appendChild(s.__background),s}return Mm(t,Um),Sm(t,[{key:"updateDisplay",value:function(){var e=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*e+"%",Am(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(),Hm=function(e){function t(e,n,i){jm(this,t);var r=Tm(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),o=r;return r.__button=document.createElement("div"),r.__button.innerHTML=void 0===i?"Fire":i,Nm.bind(r.__button,"click",function(e){return e.preventDefault(),o.fire(),!1}),Nm.addClass(r.__button,"button"),r.domElement.appendChild(r.__button),r}return Mm(t,Om),Sm(t,[{key:"fire",value:function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())}}]),t}(),Xm=function(e){function t(e,n){jm(this,t);var i=Tm(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));i.__color=new Pm(i.getValue()),i.__temp=new Pm(0);var r=i;i.domElement=document.createElement("div"),Nm.makeSelectable(i.domElement,!1),i.__selector=document.createElement("div"),i.__selector.className="selector",i.__saturation_field=document.createElement("div"),i.__saturation_field.className="saturation-field",i.__field_knob=document.createElement("div"),i.__field_knob.className="field-knob",i.__field_knob_border="2px solid ",i.__hue_knob=document.createElement("div"),i.__hue_knob.className="hue-knob",i.__hue_field=document.createElement("div"),i.__hue_field.className="hue-field",i.__input=document.createElement("input"),i.__input.type="text",i.__input_textShadow="0 1px 1px ",Nm.bind(i.__input,"keydown",function(e){13===e.keyCode&&d.call(this)}),Nm.bind(i.__input,"blur",d),Nm.bind(i.__selector,"mousedown",function(){Nm.addClass(this,"drag").bind(window,"mouseup",function(){Nm.removeClass(r.__selector,"drag")})}),Nm.bind(i.__selector,"touchstart",function(){Nm.addClass(this,"drag").bind(window,"touchend",function(){Nm.removeClass(r.__selector,"drag")})});var o,s=document.createElement("div");function a(e){p(e),Nm.bind(window,"mousemove",p),Nm.bind(window,"touchmove",p),Nm.bind(window,"mouseup",u),Nm.bind(window,"touchend",u)}function l(e){f(e),Nm.bind(window,"mousemove",f),Nm.bind(window,"touchmove",f),Nm.bind(window,"mouseup",c),Nm.bind(window,"touchend",c)}function u(){Nm.unbind(window,"mousemove",p),Nm.unbind(window,"touchmove",p),Nm.unbind(window,"mouseup",u),Nm.unbind(window,"touchend",u),h()}function c(){Nm.unbind(window,"mousemove",f),Nm.unbind(window,"touchmove",f),Nm.unbind(window,"mouseup",c),Nm.unbind(window,"touchend",c),h()}function d(){var e=ym(this.value);!1!==e?(r.__color.__state=e,r.setValue(r.__color.toOriginal())):this.value=r.__color.toString()}function h(){r.__onFinishChange&&r.__onFinishChange.call(r,r.__color.toOriginal())}function p(e){-1===e.type.indexOf("touch")&&e.preventDefault();var t=r.__saturation_field.getBoundingClientRect(),n=e.touches&&e.touches[0]||e,i=n.clientX,o=n.clientY,s=(i-t.left)/(t.right-t.left),a=1-(o-t.top)/(t.bottom-t.top);return a>1?a=1:a<0&&(a=0),s>1?s=1:s<0&&(s=0),r.__color.v=a,r.__color.s=s,r.setValue(r.__color.toOriginal()),!1}function f(e){-1===e.type.indexOf("touch")&&e.preventDefault();var t=r.__hue_field.getBoundingClientRect(),n=1-((e.touches&&e.touches[0]||e).clientY-t.top)/(t.bottom-t.top);return n>1?n=1:n<0&&(n=0),r.__color.h=360*n,r.setValue(r.__color.toOriginal()),!1}return mm.extend(i.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),mm.extend(i.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:i.__field_knob_border+(i.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),mm.extend(i.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),mm.extend(i.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),mm.extend(s.style,{width:"100%",height:"100%",background:"none"}),Ym(s,"top","rgba(0,0,0,0)","#000"),mm.extend(i.__hue_field.style,{width:"15px",height:"100px",border:"1px solid #555",cursor:"ns-resize",position:"absolute",top:"3px",right:"3px"}),(o=i.__hue_field).style.background="",o.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",o.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",o.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",o.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",o.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",mm.extend(i.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:i.__input_textShadow+"rgba(0,0,0,0.7)"}),Nm.bind(i.__saturation_field,"mousedown",a),Nm.bind(i.__saturation_field,"touchstart",a),Nm.bind(i.__field_knob,"mousedown",a),Nm.bind(i.__field_knob,"touchstart",a),Nm.bind(i.__hue_field,"mousedown",l),Nm.bind(i.__hue_field,"touchstart",l),i.__saturation_field.appendChild(s),i.__selector.appendChild(i.__field_knob),i.__selector.appendChild(i.__saturation_field),i.__selector.appendChild(i.__hue_field),i.__hue_field.appendChild(i.__hue_knob),i.domElement.appendChild(i.__input),i.domElement.appendChild(i.__selector),i.updateDisplay(),i}return Mm(t,Om),Sm(t,[{key:"updateDisplay",value:function(){var e=ym(this.getValue());if(!1!==e){var t=!1;mm.each(Pm.COMPONENTS,function(n){if(!mm.isUndefined(e[n])&&!mm.isUndefined(this.__color.__state[n])&&e[n]!==this.__color.__state[n])return t=!0,{}},this),t&&mm.extend(this.__color.__state,e)}mm.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var n=this.__color.v<.5||this.__color.s>.5?255:0,i=255-n;mm.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+"rgb("+n+","+n+","+n+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,Ym(this.__saturation_field,"left","#fff",this.__temp.toHexString()),this.__input.value=this.__color.toString(),mm.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:"rgb("+n+","+n+","+n+")",textShadow:this.__input_textShadow+"rgba("+i+","+i+","+i+",.7)"})}}]),t}(),Wm=["-moz-","-o-","-webkit-","-ms-",""];function Ym(e,t,n,i){e.style.background="",mm.each(Wm,function(r){e.style.cssText+="background: "+r+"linear-gradient("+t+", "+n+" 0%, "+i+" 100%); "})}var qm=function(e,t){var n=t||document,i=document.createElement("style");i.type="text/css",i.innerHTML=e;var r=n.getElementsByTagName("head")[0];try{r.appendChild(i)}catch(e){}},Qm='<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n\n    </div>\n\n  </div>\n\n</div>',Jm=function(e,t){var n=e[t];return mm.isArray(arguments[2])||mm.isObject(arguments[2])?new Dm(e,t,arguments[2]):mm.isNumber(n)?mm.isNumber(arguments[2])&&mm.isNumber(arguments[3])?mm.isNumber(arguments[4])?new Vm(e,t,arguments[2],arguments[3],arguments[4]):new Vm(e,t,arguments[2],arguments[3]):mm.isNumber(arguments[4])?new Bm(e,t,{min:arguments[2],max:arguments[3],step:arguments[4]}):new Bm(e,t,{min:arguments[2],max:arguments[3]}):mm.isString(n)?new Rm(e,t):mm.isFunction(n)?new Hm(e,t,""):mm.isBoolean(n)?new km(e,t):null};var Zm=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,1e3/60)},Km=function(){function e(){jm(this,e),this.backgroundElement=document.createElement("div"),mm.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),Nm.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),mm.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var t=this;Nm.bind(this.backgroundElement,"click",function(){t.hide()})}return Sm(e,[{key:"show",value:function(){var e=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),mm.defer(function(){e.backgroundElement.style.opacity=1,e.domElement.style.opacity=1,e.domElement.style.webkitTransform="scale(1)"})}},{key:"hide",value:function(){var e=this,t=function t(){e.domElement.style.display="none",e.backgroundElement.style.display="none",Nm.unbind(e.domElement,"webkitTransitionEnd",t),Nm.unbind(e.domElement,"transitionend",t),Nm.unbind(e.domElement,"oTransitionEnd",t)};Nm.bind(this.domElement,"webkitTransitionEnd",t),Nm.bind(this.domElement,"transitionend",t),Nm.bind(this.domElement,"oTransitionEnd",t),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"}},{key:"layout",value:function(){this.domElement.style.left=window.innerWidth/2-Nm.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-Nm.getHeight(this.domElement)/2+"px"}}]),e}();qm(function(e){if(e&&"undefined"!=typeof window){var t=document.createElement("style");return t.setAttribute("type","text/css"),t.innerHTML=e,document.head.appendChild(t),e}}(".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n"));var $m="Default",e_=function(){try{return!!window.localStorage}catch(e){return!1}}(),t_=void 0,n_=!0,i_=void 0,r_=!1,o_=[],s_=function e(t){var n=this,i=t||{};this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),Nm.addClass(this.domElement,"dg"),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],i=mm.defaults(i,{closeOnTop:!1,autoPlace:!0,width:e.DEFAULT_WIDTH}),i=mm.defaults(i,{resizable:i.autoPlace,hideable:i.autoPlace}),mm.isUndefined(i.load)?i.load={preset:$m}:i.preset&&(i.load.preset=i.preset),mm.isUndefined(i.parent)&&i.hideable&&o_.push(this),i.resizable=mm.isUndefined(i.parent)&&i.resizable,i.autoPlace&&mm.isUndefined(i.scrollable)&&(i.scrollable=!0);var r,o=e_&&"true"===localStorage.getItem(h_(this,"isLocal")),s=void 0,a=void 0;if(Object.defineProperties(this,{parent:{get:function(){return i.parent}},scrollable:{get:function(){return i.scrollable}},autoPlace:{get:function(){return i.autoPlace}},closeOnTop:{get:function(){return i.closeOnTop}},preset:{get:function(){return n.parent?n.getRoot().preset:i.load.preset},set:function(e){n.parent?n.getRoot().preset=e:i.load.preset=e,function(e){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].value===e.preset&&(e.__preset_select.selectedIndex=t)}(this),n.revert()}},width:{get:function(){return i.width},set:function(e){i.width=e,g_(n,e)}},name:{get:function(){return i.name},set:function(e){i.name=e,a&&(a.innerHTML=i.name)}},closed:{get:function(){return i.closed},set:function(t){i.closed=t,i.closed?Nm.addClass(n.__ul,e.CLASS_CLOSED):Nm.removeClass(n.__ul,e.CLASS_CLOSED),this.onResize(),n.__closeButton&&(n.__closeButton.innerHTML=t?e.TEXT_OPEN:e.TEXT_CLOSED)}},load:{get:function(){return i.load}},useLocalStorage:{get:function(){return o},set:function(e){e_&&(o=e,e?Nm.bind(window,"unload",s):Nm.unbind(window,"unload",s),localStorage.setItem(h_(n,"isLocal"),e))}}}),mm.isUndefined(i.parent)){if(this.closed=i.closed||!1,Nm.addClass(this.domElement,e.CLASS_MAIN),Nm.makeSelectable(this.domElement,!1),e_&&o){n.useLocalStorage=!0;var l=localStorage.getItem(h_(this,"gui"));l&&(i.load=JSON.parse(l))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=e.TEXT_CLOSED,Nm.addClass(this.__closeButton,e.CLASS_CLOSE_BUTTON),i.closeOnTop?(Nm.addClass(this.__closeButton,e.CLASS_CLOSE_TOP),this.domElement.insertBefore(this.__closeButton,this.domElement.childNodes[0])):(Nm.addClass(this.__closeButton,e.CLASS_CLOSE_BOTTOM),this.domElement.appendChild(this.__closeButton)),Nm.bind(this.__closeButton,"click",function(){n.closed=!n.closed})}else{void 0===i.closed&&(i.closed=!0);var u=document.createTextNode(i.name);Nm.addClass(u,"controller-name"),a=a_(n,u);Nm.addClass(this.__ul,e.CLASS_CLOSED),Nm.addClass(a,"title"),Nm.bind(a,"click",function(e){return e.preventDefault(),n.closed=!n.closed,!1}),i.closed||(this.closed=!1)}i.autoPlace&&(mm.isUndefined(i.parent)&&(n_&&(i_=document.createElement("div"),Nm.addClass(i_,"dg"),Nm.addClass(i_,e.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(i_),n_=!1),i_.appendChild(this.domElement),Nm.addClass(this.domElement,e.CLASS_AUTO_PLACE)),this.parent||g_(n,i.width)),this.__resizeHandler=function(){n.onResizeDebounced()},Nm.bind(window,"resize",this.__resizeHandler),Nm.bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler),Nm.bind(this.__ul,"transitionend",this.__resizeHandler),Nm.bind(this.__ul,"oTransitionEnd",this.__resizeHandler),this.onResize(),i.resizable&&__(this),s=function(){e_&&"true"===localStorage.getItem(h_(n,"isLocal"))&&localStorage.setItem(h_(n,"gui"),JSON.stringify(n.getSaveObject()))},this.saveToLocalStorageIfPossible=s,i.parent||((r=n.getRoot()).width+=1,mm.defer(function(){r.width-=1}))};function a_(e,t,n){var i=document.createElement("li");return t&&i.appendChild(t),n?e.__ul.insertBefore(i,n):e.__ul.appendChild(i),e.onResize(),i}function l_(e){Nm.unbind(window,"resize",e.__resizeHandler),e.saveToLocalStorageIfPossible&&Nm.unbind(window,"unload",e.saveToLocalStorageIfPossible)}function u_(e,t){var n=e.__preset_select[e.__preset_select.selectedIndex];n.innerHTML=t?n.value+"*":n.value}function c_(e,t){var n=e.getRoot(),i=n.__rememberedObjects.indexOf(t.object);if(-1!==i){var r=n.__rememberedObjectIndecesToControllers[i];if(void 0===r&&(r={},n.__rememberedObjectIndecesToControllers[i]=r),r[t.property]=t,n.load&&n.load.remembered){var o=n.load.remembered,s=void 0;if(o[e.preset])s=o[e.preset];else{if(!o[$m])return;s=o[$m]}if(s[i]&&void 0!==s[i][t.property]){var a=s[i][t.property];t.initialValue=a,t.setValue(a)}}}}function d_(e,t,n,i){if(void 0===t[n])throw new Error('Object "'+t+'" has no property "'+n+'"');var r=void 0;if(i.color)r=new Xm(t,n);else{var o=[t,n].concat(i.factoryArgs);r=Jm.apply(e,o)}i.before instanceof Om&&(i.before=i.before.__li),c_(e,r),Nm.addClass(r.domElement,"c");var s=document.createElement("span");Nm.addClass(s,"property-name"),s.innerHTML=r.property;var a=document.createElement("div");a.appendChild(s),a.appendChild(r.domElement);var l=a_(e,a,i.before);return Nm.addClass(l,s_.CLASS_CONTROLLER_ROW),r instanceof Xm?Nm.addClass(l,"color"):Nm.addClass(l,wm(r.getValue())),function(e,t,n){if(n.__li=t,n.__gui=e,mm.extend(n,{options:function(t){if(arguments.length>1){var i=n.__li.nextElementSibling;return n.remove(),d_(e,n.object,n.property,{before:i,factoryArgs:[mm.toArray(arguments)]})}if(mm.isArray(t)||mm.isObject(t)){var r=n.__li.nextElementSibling;return n.remove(),d_(e,n.object,n.property,{before:r,factoryArgs:[t]})}},name:function(e){return n.__li.firstElementChild.firstElementChild.innerHTML=e,n},listen:function(){return n.__gui.listen(n),n},remove:function(){return n.__gui.remove(n),n}}),n instanceof Vm){var i=new Bm(n.object,n.property,{min:n.__min,max:n.__max,step:n.__step});mm.each(["updateDisplay","onChange","onFinishChange","step","min","max"],function(e){var t=n[e],r=i[e];n[e]=i[e]=function(){var e=Array.prototype.slice.call(arguments);return r.apply(i,e),t.apply(n,e)}}),Nm.addClass(t,"has-slider"),n.domElement.insertBefore(i.domElement,n.domElement.firstElementChild)}else if(n instanceof Bm){var r=function(t){if(mm.isNumber(n.__min)&&mm.isNumber(n.__max)){var i=n.__li.firstElementChild.firstElementChild.innerHTML,r=n.__gui.__listening.indexOf(n)>-1;n.remove();var o=d_(e,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[n.__min,n.__max,n.__step]});return o.name(i),r&&o.listen(),o}return t};n.min=mm.compose(r,n.min),n.max=mm.compose(r,n.max)}else n instanceof km?(Nm.bind(t,"click",function(){Nm.fakeEvent(n.__checkbox,"click")}),Nm.bind(n.__checkbox,"click",function(e){e.stopPropagation()})):n instanceof Hm?(Nm.bind(t,"click",function(){Nm.fakeEvent(n.__button,"click")}),Nm.bind(t,"mouseover",function(){Nm.addClass(n.__button,"hover")}),Nm.bind(t,"mouseout",function(){Nm.removeClass(n.__button,"hover")})):n instanceof Xm&&(Nm.addClass(t,"color"),n.updateDisplay=mm.compose(function(e){return t.style.borderLeftColor=n.__color.toString(),e},n.updateDisplay),n.updateDisplay());n.setValue=mm.compose(function(t){return e.getRoot().__preset_select&&n.isModified()&&u_(e.getRoot(),!0),t},n.setValue)}(e,l,r),e.__controllers.push(r),r}function h_(e,t){return document.location.href+"."+t}function p_(e,t,n){var i=document.createElement("option");i.innerHTML=t,i.value=t,e.__preset_select.appendChild(i),n&&(e.__preset_select.selectedIndex=e.__preset_select.length-1)}function f_(e,t){t.style.display=e.useLocalStorage?"block":"none"}function m_(e){var t=e.__save_row=document.createElement("li");Nm.addClass(e.domElement,"has-save"),e.__ul.insertBefore(t,e.__ul.firstChild),Nm.addClass(t,"save-row");var n=document.createElement("span");n.innerHTML="&nbsp;",Nm.addClass(n,"button gears");var i=document.createElement("span");i.innerHTML="Save",Nm.addClass(i,"button"),Nm.addClass(i,"save");var r=document.createElement("span");r.innerHTML="New",Nm.addClass(r,"button"),Nm.addClass(r,"save-as");var o=document.createElement("span");o.innerHTML="Revert",Nm.addClass(o,"button"),Nm.addClass(o,"revert");var s=e.__preset_select=document.createElement("select");if(e.load&&e.load.remembered?mm.each(e.load.remembered,function(t,n){p_(e,n,n===e.preset)}):p_(e,$m,!1),Nm.bind(s,"change",function(){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].innerHTML=e.__preset_select[t].value;e.preset=this.value}),t.appendChild(s),t.appendChild(n),t.appendChild(i),t.appendChild(r),t.appendChild(o),e_){var a=document.getElementById("dg-local-explain"),l=document.getElementById("dg-local-storage");document.getElementById("dg-save-locally").style.display="block","true"===localStorage.getItem(h_(0,"isLocal"))&&l.setAttribute("checked","checked"),f_(e,a),Nm.bind(l,"change",function(){e.useLocalStorage=!e.useLocalStorage,f_(e,a)})}var u=document.getElementById("dg-new-constructor");Nm.bind(u,"keydown",function(e){!e.metaKey||67!==e.which&&67!==e.keyCode||t_.hide()}),Nm.bind(n,"click",function(){u.innerHTML=JSON.stringify(e.getSaveObject(),void 0,2),t_.show(),u.focus(),u.select()}),Nm.bind(i,"click",function(){e.save()}),Nm.bind(r,"click",function(){var t=prompt("Enter a new preset name.");t&&e.saveAs(t)}),Nm.bind(o,"click",function(){e.revert()})}function __(e){var t=void 0;function n(n){return n.preventDefault(),e.width+=t-n.clientX,e.onResize(),t=n.clientX,!1}function i(){Nm.removeClass(e.__closeButton,s_.CLASS_DRAG),Nm.unbind(window,"mousemove",n),Nm.unbind(window,"mouseup",i)}function r(r){return r.preventDefault(),t=r.clientX,Nm.addClass(e.__closeButton,s_.CLASS_DRAG),Nm.bind(window,"mousemove",n),Nm.bind(window,"mouseup",i),!1}e.__resize_handle=document.createElement("div"),mm.extend(e.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"}),Nm.bind(e.__resize_handle,"mousedown",r),Nm.bind(e.__closeButton,"mousedown",r),e.domElement.insertBefore(e.__resize_handle,e.domElement.firstElementChild)}function g_(e,t){e.domElement.style.width=t+"px",e.__save_row&&e.autoPlace&&(e.__save_row.style.width=t+"px"),e.__closeButton&&(e.__closeButton.style.width=t+"px")}function v_(e,t){var n={};return mm.each(e.__rememberedObjects,function(i,r){var o={},s=e.__rememberedObjectIndecesToControllers[r];mm.each(s,function(e,n){o[n]=t?e.initialValue:e.getValue()}),n[r]=o}),n}s_.toggleHide=function(){r_=!r_,mm.each(o_,function(e){e.domElement.style.display=r_?"none":""})},s_.CLASS_AUTO_PLACE="a",s_.CLASS_AUTO_PLACE_CONTAINER="ac",s_.CLASS_MAIN="main",s_.CLASS_CONTROLLER_ROW="cr",s_.CLASS_TOO_TALL="taller-than-window",s_.CLASS_CLOSED="closed",s_.CLASS_CLOSE_BUTTON="close-button",s_.CLASS_CLOSE_TOP="close-top",s_.CLASS_CLOSE_BOTTOM="close-bottom",s_.CLASS_DRAG="drag",s_.DEFAULT_WIDTH=245,s_.TEXT_CLOSED="Close Controls",s_.TEXT_OPEN="Open Controls",s_._keydownHandler=function(e){"text"===document.activeElement.type||72!==e.which&&72!==e.keyCode||s_.toggleHide()},Nm.bind(window,"keydown",s_._keydownHandler,!1),mm.extend(s_.prototype,{add:function(e,t){return d_(this,e,t,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(e,t){return d_(this,e,t,{color:!0})},remove:function(e){this.__ul.removeChild(e.__li),this.__controllers.splice(this.__controllers.indexOf(e),1);var t=this;mm.defer(function(){t.onResize()})},destroy:function(){if(this.parent)throw new Error("Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead.");this.autoPlace&&i_.removeChild(this.domElement);var e=this;mm.each(this.__folders,function(t){e.removeFolder(t)}),Nm.unbind(window,"keydown",s_._keydownHandler,!1),l_(this)},addFolder:function(e){if(void 0!==this.__folders[e])throw new Error('You already have a folder in this GUI by the name "'+e+'"');var t={name:e,parent:this};t.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[e]&&(t.closed=this.load.folders[e].closed,t.load=this.load.folders[e]);var n=new s_(t);this.__folders[e]=n;var i=a_(this,n.domElement);return Nm.addClass(i,"folder"),n},removeFolder:function(e){this.__ul.removeChild(e.domElement.parentElement),delete this.__folders[e.name],this.load&&this.load.folders&&this.load.folders[e.name]&&delete this.load.folders[e.name],l_(e);var t=this;mm.each(e.__folders,function(t){e.removeFolder(t)}),mm.defer(function(){t.onResize()})},open:function(){this.closed=!1},close:function(){this.closed=!0},hide:function(){this.domElement.style.display="none"},show:function(){this.domElement.style.display=""},onResize:function(){var e=this.getRoot();if(e.scrollable){var t=Nm.getOffset(e.__ul).top,n=0;mm.each(e.__ul.childNodes,function(t){e.autoPlace&&t===e.__save_row||(n+=Nm.getHeight(t))}),window.innerHeight-t-20<n?(Nm.addClass(e.domElement,s_.CLASS_TOO_TALL),e.__ul.style.height=window.innerHeight-t-20+"px"):(Nm.removeClass(e.domElement,s_.CLASS_TOO_TALL),e.__ul.style.height="auto")}e.__resize_handle&&mm.defer(function(){e.__resize_handle.style.height=e.__ul.offsetHeight+"px"}),e.__closeButton&&(e.__closeButton.style.width=e.width+"px")},onResizeDebounced:mm.debounce(function(){this.onResize()},50),remember:function(){if(mm.isUndefined(t_)&&((t_=new Km).domElement.innerHTML=Qm),this.parent)throw new Error("You can only call remember on a top level GUI.");var e=this;mm.each(Array.prototype.slice.call(arguments),function(t){0===e.__rememberedObjects.length&&m_(e),-1===e.__rememberedObjects.indexOf(t)&&e.__rememberedObjects.push(t)}),this.autoPlace&&g_(this,this.width)},getRoot:function(){for(var e=this;e.parent;)e=e.parent;return e},getSaveObject:function(){var e=this.load;return e.closed=this.closed,this.__rememberedObjects.length>0&&(e.preset=this.preset,e.remembered||(e.remembered={}),e.remembered[this.preset]=v_(this)),e.folders={},mm.each(this.__folders,function(t,n){e.folders[n]=t.getSaveObject()}),e},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=v_(this),u_(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(e){this.load.remembered||(this.load.remembered={},this.load.remembered[$m]=v_(this,!0)),this.load.remembered[e]=v_(this),this.preset=e,p_(this,e,!0),this.saveToLocalStorageIfPossible()},revert:function(e){mm.each(this.__controllers,function(t){this.getRoot().load.remembered?c_(e||this.getRoot(),t):t.setValue(t.initialValue),t.__onFinishChange&&t.__onFinishChange.call(t,t.getValue())},this),mm.each(this.__folders,function(e){e.revert(e)}),e||u_(this.getRoot(),!1)},listen:function(e){var t=0===this.__listening.length;this.__listening.push(e),t&&function e(t){0!==t.length&&Zm.call(window,function(){e(t)});mm.each(t,function(e){e.updateDisplay()})}(this.__listening)},updateDisplay:function(){mm.each(this.__controllers,function(e){e.updateDisplay()}),mm.each(this.__folders,function(e){e.updateDisplay()})}});var y_=1e3,x_=1003,b_=1016,w_=!1;try{var j_={get passive(){w_=!0}};window.addEventListener("test",j_,j_),window.removeEventListener("test",j_,j_)}catch(e){w_=!1}function S_(e){this.element=e.element?e.element:document.body,this.onTap=e.onTap?e.onTap:function(){},this.onSwipeUp=e.onSwipeUp?e.onSwipeUp:function(){},this.onSwipeDown=e.onSwipeDown?e.onSwipeDown:function(){},this.onSwipeLeft=e.onSwipeLeft?e.onSwipeLeft:function(){},this.onSwipeRight=e.onSwipeRight?e.onSwipeRight:function(){},this.onDrag=e.onDrag?e.onDrag:function(){},this.onDown=e.onDown?e.onDown:function(){},this.onMove=e.onMove?e.onMove:function(){},this.onUp=e.onUp?e.onUp:function(){},this.track_mouse=e.track_mouse,this.touch=!1,this.dragState={},this.onMouseDown=T_.bind(this),this.onMouseMove=E_.bind(this),this.onMouseUp=O_.bind(this),this.onTouchStart=I_.bind(this),this.onTouchMove=N_.bind(this),this.onTouchEnd=k_.bind(this),this.down=D_.bind(this),this.move=R_.bind(this),this.up=z_.bind(this),A_.call(this)}function A_(){this.track_mouse&&this.element.addEventListener("mousemove",this.onMouseMove,!!w_&&{passive:!0}),this.element.addEventListener("mousedown",this.onMouseDown,!!w_&&{passive:!0}),this.element.addEventListener("touchstart",this.onTouchStart,!!w_&&{passive:!0})}function M_(){this.track_mouse&&this.element.addEventListener("mousemove",this.onMouseMove),this.element.removeEventListener("mousedown",this.onMouseDown),this.element.removeEventListener("touchstart",this.onTouchStart),this.mousedrag&&L_.call(this),this.touchdrag&&F_.call(this)}function T_(e){this.dragging||(this.down(e.clientX,e.clientY),P_.call(this))}function P_(){this.mousedrag=!0,this.track_mouse||this.element.addEventListener("mousemove",this.onMouseMove,!!w_&&{passive:!0}),this.element.addEventListener("mouseup",this.onMouseUp,!!w_&&{passive:!0}),this.element.addEventListener("mouseleave",this.onMouseUp,!!w_&&{passive:!0})}function L_(){this.mousedrag=!1,this.track_mouse||this.element.removeEventListener("mousemove",this.onMouseMove),this.element.removeEventListener("mouseup",this.onMouseUp),this.element.removeEventListener("mouseleave",this.onMouseUp)}function E_(e){this.move(e.clientX,e.clientY)}function O_(e){this.up(e.clientX,e.clientY),L_.call(this)}function I_(e){if(!this.dragging){this.touch=!0;var t=e.touches[0];this.down(t.clientX,t.clientY),C_.call(this)}}function C_(e){this.touchdrag=!0,this.element.addEventListener("touchmove",this.onTouchMove,!!w_&&{passive:!0}),this.element.addEventListener("touchend",this.onTouchEnd,!!w_&&{passive:!0})}function F_(){this.touchdrag=!1,this.element.removeEventListener("touchmove",this.onTouchMove),this.element.removeEventListener("touchend",this.onTouchEnd)}function N_(e){var t=e.touches[0];this.move(t.clientX,t.clientY)}function k_(e){var t=e.changedTouches[0];this.up(t.clientX,t.clientY),F_.call(this)}function D_(e,t){this.moved=!1,this.dragging=!0,this.dragState.x=this.dragState.startX=e,this.dragState.y=this.dragState.startY=t,this.dragState.startTime=Date.now(),this.onDown(e,t)}function R_(e,t){this.moved=!0,this.dragging&&this.onDrag(e,t,e-this.dragState.x,t-this.dragState.y),this.dragState.x=e,this.dragState.y=t}function z_(e,t){this.dragging=!1,this.onUp(e,t)}S_.prototype.destroy=function(){M_.call(this),this.element=null,this.onStart=null,this.onDrag=null,this.onEnd=null,this.onMouseDown=null,this.onMouseMove=null,this.onMouseUp=null,this.onTouchStart=null,this.onTouchMove=null,this.onTouchEnd=null,this.down=null,this.move=null,this.up=null},S_.prototype.addListeners=A_,S_.prototype.removeListeners=M_;var U_,B_,G_,V_,H_,X_,W_,Y_,q_,Q_,J_,Z_,K_,$_,eg={pointer:{current:new ur(0,0),target:new ur(0,0),targetTarget:new ur(0,0)},camera:{distance:37,distanceOffset:0,maxAngle:new pr(.075*Math.PI,.0075*Math.PI,0),minAngle:new pr(.075*-Math.PI,.0075*-Math.PI,0),currentAngle:new pr(0,0,0),targetAngle:new pr(0,0,0),offset:{x:0,y:0}},bg:{size:{width:123.7419,height:72},position:{x:0,y:0,z:-72.9992}},table:{size:{width:60,height:9.33,depth:25.1},position:{x:0,y:0,z:0}},knife:{size:{width:5.840958606,height:14,maxWidth:780,minWidth:500},position:{x:0,y:35.5,z:0}},magnifying_glass:{size:{width:5,height:11.5},position:{x:-3.34239,y:35.5,z:-3.09039}},syringe:{size:{width:1.7,height:9.5},position:{x:2.98013,y:36,z:-2.53533}},lights:{light1:{position:{x:1e3,y:950,z:-1e3}},light2:{position:{x:-483,y:155,z:465}},light3:{position:{x:500,y:72,z:500}}},knife_visible_percentage:.35,table_height:36,table_distance:102},tg={x:0,y:0,lastX:0},ng=new S_({element:document.getElementById("family_tree"),track_mouse:!0,onDown:function(e,t){tg.lastX=e},onUp:function(){}}),ig=new Lp,rg=[],og=!1,sg=new a({paused:!0}),ag=new a({paused:!0}),lg=!1,ug=10,cg=1,dg=new Df,hg=kt.getInstance(),pg={target:0,current:0,targetTarget:0},fg=!1,mg=eg.magnifying_glass.position.x+Math.sin(eg.camera.minAngle.x)*(eg.knife.position.z-eg.magnifying_glass.position.z),_g=eg.syringe.position.x+Math.sin(eg.camera.maxAngle.x)*(eg.knife.position.z-eg.syringe.position.z);function gg(){var e=new cm(this.scene,this.camera);W_=new om(dm);var t=dg.lookupObjectByID("noise").obj;t.wrapS=y_,t.wrapT=y_;var n={uniforms:{tDiffuse:{value:null},t:{type:"f",value:0},noise_tex:{type:"t",value:t},current_lut:{type:"t",value:q_},next_lut:{type:"t",value:null},mag_tex:{type:"t",value:dg.lookupObjectByID("magnifying_glass_transition").obj},lut_strength:{type:"f",value:1},vignette_distance:{type:"f",value:.35},vignette_strength:{type:"f",value:.5},noise_strength:{type:"f",value:.25},satCur:{value:1},satNext:{value:1},blurCur:{value:0},blurNext:{value:0},vignetteCur:{value:0},vignetteNext:{value:1},mag_pos:{type:"v2",value:new ur(.5,.5).rotateAround(new ur(1.5,.5),1.2*Math.PI)},mag_radius:{type:"f",value:1},mag_scale:{type:"f",value:1.25},u_resolution:{type:"v2",value:new ur(0,0)}},vertexShader:em,fragmentShader:tm};(Y_=new om(n)).uniforms.current_lut.value.needsUpdate=!0,Y_.uniforms.mag_tex.value.needsUpdate=!0,Y_.uniforms.noise_tex.value.needsUpdate=!0;var i=new om(im),r=this.renderer.getPixelRatio();W_.material.uniforms.resolution.value.x=1/(window.innerWidth*r),W_.material.uniforms.resolution.value.y=1/(window.innerHeight*r),(X_=new lm(this.renderer)).addPass(e),X_.addPass(Y_),X_.addPass(W_),X_.addPass(i)}function vg(){this.events=$f.getInstance(),this.initialized=!1}function yg(){var e=dg.lookupObjectByID("bg_tex").obj;e.wrapS=y_,e.wrapT=y_;var t=new aa(eg.bg.size.width,eg.bg.size.height);t.translate(0,.5*eg.bg.size.height,0);var n=new Go({map:e});this.bg_plane=new Ms(t,n),this.bg_plane.position.set(eg.bg.position.x,eg.bg.position.y,eg.bg.position.z),t.computeBoundingBox(),this.scene.add(this.bg_plane)}function xg(){var e=dg.lookupObjectByID("desk_tex").obj,t=dg.lookupObjectByID("desk_lightmap").obj;return e.flipY=!1,t.flipY=!1,new md({map:e,lightMap:t,lightMapIntensity:4,clearcoat:.1479,reflectivity:1,envMap:this.cubeMapTexture2})}function bg(){var e=dg.lookupObjectByID("magnifying_glass_photo").obj,t=dg.lookupObjectByID("glass_lightmap").obj;t.flipY=!1;var n=new md({map:e,lightMap:t,lightMapIntensity:2.5,clearcoat:1,reflectivity:1,roughness:0,envMap:this.cubeMapTexture2});return n.onBeforeCompile=function(e){e.uniforms.scale={value:2},e.uniforms.offset_x={value:1};e.fragmentShader="\n            uniform float scale;\n            uniform float offset_x;\n        "+e.fragmentShader.replace("#include <map_fragment>","\n            float ratio = 985. / 595.;\n            // float scale = 2.; // 1.75;\n            vec2 scaled_uv = vUv / scale;\n            float padding = 0.05;\n            vec2 offset_uv = vec2(scaled_uv.x, scaled_uv.y * ratio);\n            offset_uv.y += 0.5 * (1. - ratio * (1. / scale));\n            offset_uv.x += offset_x * (1. - 1. / scale + padding * 2.) - padding;\n            vec4 texelColor = texture2D( map, offset_uv );\n\n            texelColor = mapTexelToLinear( texelColor );\n            diffuseColor *= texelColor;\n        "),J_=e},n}function wg(){var e=dg.lookupObjectByID("magnifying_glass_base").obj,t=dg.lookupObjectByID("magknife_lightmap").obj,n=dg.lookupObjectByID("magnifying_glass_normal").obj,i=dg.lookupObjectByID("magnifying_glass_metal").obj;return e.flipY=!1,t.flipY=!1,n.flipY=!1,i.flipY=!1,new md({map:e,lightMap:t,lightMapIntensity:2,clearcoat:1,reflectivity:1,normalMap:n,metalnessMap:i,roughnessMap:i,envMap:this.cubeMapTexture2})}function jg(){var e=dg.lookupObjectByID("knife_base").obj,t=dg.lookupObjectByID("knife_lightmap").obj,n=dg.lookupObjectByID("knife_normal").obj,i=dg.lookupObjectByID("knife_metal").obj;return e.flipY=!1,t.flipY=!1,n.flipY=!1,i.flipY=!1,new md({map:e,lightMap:t,lightMapIntensity:1.5,clearcoat:0,reflectivity:1,normalMap:n,metalnessMap:i,roughnessMap:i,envMap:this.cubeMapTexture2})}function Sg(){var e=dg.lookupObjectByID("knife_base").obj,t=dg.lookupObjectByID("knife_lightmap").obj,n=dg.lookupObjectByID("knife_normal").obj,i=dg.lookupObjectByID("knife_metal").obj;return e.flipY=!1,t.flipY=!1,n.flipY=!1,i.flipY=!1,new md({map:e,lightMap:t,lightMapIntensity:2.5,clearcoat:1,reflectivity:1,normalMap:n,roughness:0,metalnessMap:i,envMap:this.cubeMapTexture})}function Ag(){var e=dg.lookupObjectByID("syringe_base").obj,t=dg.lookupObjectByID("syringe_lightmap").obj,n=dg.lookupObjectByID("syringe_metal").obj;return e.flipY=!1,t.flipY=!1,n.flipY=!1,new md({map:e,lightMap:t,lightMapIntensity:1.5,clearcoat:1,reflectivity:1,metalnessMap:n,roughnessMap:n,envMap:this.cubeMapTexture})}function Mg(){this.clickable=!0,og=!0}function Tg(){this.clickable=!1,og=!1}function Pg(){document.body.style.overflow="auto"}function Lg(){document.body.style.overflow="hidden"}function Eg(){var e=this;this.renderer=new iu({antialias:!1,autoClear:!1}),this.renderer.setPixelRatio(window.devicePixelRatio),(U_=document.createElement("div")).id="cursor",(B_=new Image).id="cursor_icon",U_.innerHTML='\n    <div id="text_svg_outer">\n    <svg id="text_svg" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="149.23px" height="149.23px" viewBox="0 0 149.23 149.23">\n    <style type="text/css">\n        .st0{fill:none;stroke:#000000;stroke-miterlimit:10;}\n    </style>\n    <defs>\n      <path id="textcircle" class="st0" d="M74.62,148.73c-40.93,0-74.12-33.18-74.12-74.12S33.68,0.5,74.62,0.5s74.12,33.18,74.12,74.12 S115.55,148.73,74.62,148.73"/>\n    </defs>\n    \n      <text dy="20">\n            <textPath id="cursor_text" xlink:href="#textcircle">\n                HARLAN THROMBEY\n            </textPath>\n        </text>\n    </svg>\n    </div>\n    ',U_.appendChild(B_),document.body.appendChild(U_),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.domElement.id="family_tree",document.body.appendChild(this.renderer.domElement),this.scene=new Qr,this.camera=new Vs(ug,G_/V_,.01,200),this.camera.position.set(0,eg.knife_visible_percentage*eg.knife.size.height*.5,eg.camera.distance),(q_=dg.lookupObjectByID("lut_loader").obj).minFilter=x_,q_.magFilter=x_,this.light1=new Ah(16777215,2.5,0,2),this.light1.position.set(eg.lights.light1.position.x,eg.lights.light1.position.y,eg.lights.light1.position.z),this.light2=new Ah(16777215,1.5,5e3,2),this.light2.position.set(eg.lights.light2.position.x,eg.lights.light2.position.y,eg.lights.light2.position.z),this.light3=new Ah(16777215,0,2e3,2),this.light3.position.set(eg.lights.light3.position.x,eg.lights.light3.position.y,eg.lights.light3.position.z);var t=new nm(dg.lookupObjectByID("env").obj,{resolution:512,type:b_});this.cubeMapTexture=t.update(this.renderer);var n=new nm(dg.lookupObjectByID("env2").obj,{resolution:512,type:b_});this.cubeMapTexture2=n.update(this.renderer),dg.lookupObjectByID("scene6.glb").meshes.forEach(function(t){var n,i=t.clone();switch(i.name){case"harlan":case"benoit":case"nana":case"linda":case"richard":case"meg":case"jacob":case"ransom":case"elliot":case"donna":case"wagner":case"marta":case"joni":case"walt":case"ransom_back":rg.push(i);case"harlan_back":n=jg.call(e);break;case"desk":n=xg.call(e),i.position.z=0;break;case"button":rg.push(i);case"knife":n=Sg.call(e);break;case"magknife":n=wg.call(e);break;case"glass":(i=new Ms(dg.lookupObjectByID("magGlass1.obj").geometries[0],n=bg.call(e))).name="detectives",rg.push(i);break;case"syringe":n=Ag.call(e),i.position.y=-.07,i.name="marta",rg.push(i);break;case"bottle":n=Ag.call(e),i.position.y=-.07,i.name="fran",rg.push(i)}i.name;var r=i.geometry,o=r.attributes.uv.array;if(r.addAttribute("uv2",new Vo(o,2)),i.material=n,"detectives"!==i.name&&i.scale.set(39.37,39.37,39.37),"harlan"===i.name||"harlan_back"===i.name||"ransom"===i.name||"ransom_back"===i.name){var s="".concat(i.name.split("_")[0],"_pivot");e[s]=e[s]||new Ql,i.position.x=-2.0236,i.position.z=.78137,e[s].add(i),e[s].position.x=-2.0236,e[s].position.z=.78137,e[s].rotation.y=Math.PI,e.scene.add(e[s])}else i.rotation.y=Math.PI,e.scene.add(i)}),yg.call(this),gg.call(this)}function Og(e){var t=Q_,n=Math.tan(.5*ug*(Math.PI/180))*t,i=Math.tan(.5*ug*(Math.PI/180))*(Q_-this.bg_plane.position.z),r=eg.bg.size.height-i,o=e*(.5*eg.knife_visible_percentage)*eg.knife.size.height;this.upper_limit=Math.min(r,eg.table_height+eg.knife.size.height-n*(1-e)),this.upper_limit=eg.table_height+eg.knife.size.height-n+o}function Ig(e){var t=Q_,n=Math.tan(ug*(Math.PI/180)*.5)*t,i=e*(.5*eg.knife_visible_percentage)*eg.knife.size.height;this.lower_limit=eg.table_height+n-(i+0)}function Cg(e,t){return new Promise(function(n,i){var r=oblio.app.dataSrc.widgets.CharacterDetails.data.people[e],o=r?"lut_".concat(r.lut):"lut_main",l=dg.lookupObjectByID(o),u=l.obj;if(!l.loaded){var c=document.getElementById("home");return c&&(c.style.cursor="wait"),void(l.onLoad=function(){c&&(c.style.cursor="default"),Cg(e,n),l.onLoad=null})}u.name=o,u.minFilter=x_,u.magFilter=x_,Y_.uniforms.next_lut.value=u,Y_.uniforms.next_lut.value.needsUpdate=!0;var d=1.2*Math.PI,h=2*Math.PI-d,p=new a({paused:!0,onComplete:function(){Y_.uniforms.current_lut.value=u,Y_.uniforms.current_lut.value.needsUpdate=!0,Y_.uniforms.next_lut.value=null,Y_.uniforms.mag_pos.value=new ur(.5,.5).rotateAround(new ur(1.5,.65),d),Y_.uniforms.blurCur.value="lut_main"===Y_.uniforms.current_lut.value.name?0:1,Y_.uniforms.blurNext.value=1,Y_.uniforms.vignetteCur.value=1,Y_.uniforms.vignetteNext.value=1,Y_.material.uniforms.satCur.value=1}});"lut_main"!==o&&p.to(Y_.material.uniforms.satCur,1.5,{value:0},0),p.to({t:0},2,{t:1,ease:s.d.easeInOut,onUpdateParams:["{self}"],onUpdate:function(e){Y_.material.uniforms.mag_pos.value=new ur(.5,.5).rotateAround(new ur(1.5,.65),d+h*e.target.t)}},0),t?p.call(t,null,null,"-=".concat(1)):p.call(n,null,null,"-=".concat(1)),p.play()})}function Fg(){Tg.call(this),ng.dragState.x=.5*G_,ng.dragState.y=.5*V_,eg.pointer.targetTarget.set(.5*G_,.5*V_)}function Ng(){if(!ng.touch){var e=fg;if("button"!==e&&"ransom_back"!==e){y.playFx("SX_KO_CharHover_Away_Off_var1"),B_.src="assets/characters/".concat(e,"/icon.svg");var t=oblio.app.dataSrc.widgets.CharacterDetails.data.people[e];if(t){var n=t.name.text.toUpperCase(),i=document.getElementById("cursor_text"),r=(document.getElementById("text_svg"),ag);sg.clear(),r.clear(),r.addLabel("goOutText"),r.to(text_svg_outer,.3,{rotation:"-=180deg",z:"1px",ease:s.d.easeIn},"goOutText"),r.to({i:n.length},.3,{i:0,ease:s.d.easeIn,onUpdateParams:["{self}"],onUpdate:function(e){var t=Math.floor(e.target.i);i.textContent=n.substring(0,t)}},"goOutText"),r.fromTo(B_,.3,{y:"-50%",alpha:1},{y:"0%",alpha:0,ease:s.d.easeIn},"-=0.25"),r.play()}}}}function kg(){if(!1!==og){var e,t,n=ng.touch;n?(e=ng.dragState.x/G_*2-1,t=-ng.dragState.y/V_*2+1):(e=tg.x/G_*2-1,t=-tg.y/V_*2+1);var i=new pr(e,t,.5);ig.setFromCamera(i,this.camera);var r,o=ig.intersectObjects(rg);if(n||(pg.targetTarget=.5),o.length>0){var a=o[0].object.name;if(document.body.style.cursor="button"===a||"ransom_back"===a?"pointer":"none","detectives"===a){if(lg=!0,J_){var l;if(n)l=pg.targetTarget,l=Math.max(0,Math.min(1,l-tg.vel/(6*(K_-Z_))));else{var u=Math.max(0,Z_/$_),c=K_/$_;l=(tg.x/G_-u)/(c-u)}pg.targetTarget=l,a=l>.65?"wagner":l<.345?"elliot":"benoit"}}else lg=!1;window.isMobile||fg&&fg===a||(!fg||"button"===fg||fg.match(/(elliot|wagner|benoit)/)&&a.match(/(elliot|wagner|benoit)/)||(r=fg),function(e){switch(e){case"harlan":case"benoit":case"nana":case"linda":case"richard":case"meg":case"jacob":case"ransom":case"elliot":case"donna":case"wagner":case"marta":case"joni":case"walt":case"fran":y.playFx("SX_KO_CharHover_".concat(e));break;case"button":break;default:y.playFx("SX_KO_Char_Hover_0_Generic")}if(fg=e,"button"!==e&&"ransom_back"!==e&&!ng.touch){B_.src="assets/characters/".concat(e,"/icon.svg");var t=oblio.app.dataSrc.widgets.CharacterDetails.data.people[e];if(t){U_.style.opacity=1;var n=t.name.text.toUpperCase(),i=(n.split(""),document.getElementById("cursor_text")),r=document.getElementById("text_svg"),o=document.getElementById("text_svg_outer");s.h.killTweensOf(B_),s.h.killTweensOf(r);var a=sg;ag.clear(),a.clear(),i.textContent="",a.fromTo(B_,.5,{y:"0%",alpha:0},{y:"-50%",alpha:1,ease:s.d.easeOut},0),a.addLabel("bringInText","-=0.25"),a.to(o,.5,{rotation:"-=180deg",z:"1px",ease:s.d.easeOut},"bringInText"),a.to({i:0},.5,{i:n.length+1,ease:s.d.easeOut,onUpdateParams:["{self}"],onUpdate:function(e){var t=Math.floor(e.target.i);i.textContent=n.substring(0,t)}},"bringInText"),a.play()}}}(a),n||"button"===fg||s.h.to(o[0].object.material.color,.5,{r:.5,g:.5,b:.5,ease:s.d.easeOut}))}else lg=!1,fg&&(r=fg,Ng(),fg=!1,document.body.style.cursor="default");if(r&&!n)for(var d=0;d<this.scene.children.length;d++){var h=this.scene.children[d],p=this.scene.children[d].name;(p===r||r.match(/(elliot|wagner|benoit)/)&&"detectives"===p)&&s.h.to(this.scene.children[d].material.color,.5,{r:1,g:1,b:1,ease:s.d.easeOut});for(var f=0;f<h.children.length;f++){var m=h.children[f].name;(m===r||r.match(/(elliot|wagner|benoit)/)&&"detectives"===m)&&s.h.to(h.children[f].material.color,.5,{r:1,g:1,b:1,ease:s.d.easeOut})}}}else document.body.style.cursor="default"}window.rotateAboutPoint=function(e,t,n,i,r){(r=void 0!==r&&r)&&e.parent.localToWorld(e.position),e.position.sub(t),e.position.applyAxisAngle(n,i),e.position.add(t),r&&e.parent.worldToLocal(e.position),e.rotateOnAxis(n,i)};var Dg=function(e,t){return function(e,t){e<Q_?e-=Q_:e+=Q_;var n=t.fov*Math.PI/180;return 2*Math.tan(n/2)*Math.abs(e)}(e,t)*t.aspect};window.xoffset=0,window.zoffset=0;var Rg=0;function zg(){this.paused||(Rg+=1,.1,function(){if(og){if(void 0===ng.dragState.x||void 0===ng.dragState.y)return;if(ng.touch){var e=lg?.25:1,t=Math.max(0,Math.min(G_,tg.x+e*(ng.dragState.x-tg.lastX)));tg.vel=t-tg.x,tg.x=t,tg.lastX=ng.dragState.x,tg.y=ng.dragState.y,eg.pointer.targetTarget.x=tg.x}else tg.x=ng.dragState.x,tg.y=ng.dragState.y,eg.pointer.targetTarget.x=G_-tg.x;eg.pointer.targetTarget.y=tg.y}var n=eg.pointer.target.clone(),i=ng.touch?1:.1;eg.pointer.target.add(n.subVectors(eg.pointer.targetTarget,eg.pointer.target).multiplyScalar(i));var r=eg.pointer.current.clone();eg.pointer.current.add(r.subVectors(eg.pointer.target,eg.pointer.current).multiplyScalar(.25)),U_.style.transform="translate3d(".concat(tg.x,"px, ").concat(tg.y,"px, 100px)"),J_&&(pg.target+=.1*(pg.targetTarget-pg.target),pg.current+=.25*(pg.target-pg.current),J_.uniforms.offset_x.value=pg.current),s.h.set(U_,{x:tg.x,y:tg.y})}(),kg.call(this),function(e){var t=eg.camera.maxAngle.x,n=eg.camera.minAngle.x,i=eg.camera.maxAngle.y,r=eg.camera.minAngle.y,o=n+(t-n)*(1-eg.pointer.current.x/G_),s=r+(i-r)*(1-eg.pointer.current.y/V_),a=mg+(_g-mg)*(1-eg.pointer.current.x/G_);eg.camera.targetAngle.set(o,s,0),e.position.x=Math.sin(o)*(eg.camera.distance+eg.camera.distanceOffset)+a+eg.camera.offset.x,e.position.z=Math.cos(o)*(eg.camera.distance+eg.camera.distanceOffset),Q_=Math.cos(o)*eg.camera.distance,e.rotation.x=eg.camera.targetAngle.y,e.rotation.y=eg.camera.targetAngle.x;var l=e.fov*Math.PI/180,u=2*Math.tan(l/2)*eg.camera.distance,c=a-eg.magnifying_glass.position.x+.5*eg.magnifying_glass.size.width,d=Math.cos(-eg.camera.targetAngle.x)*c+Math.sin(-eg.camera.targetAngle.x)*(eg.knife.position.z-eg.magnifying_glass.position.z),h=d/c*eg.magnifying_glass.size.width;$_=u*e.aspect,K_=(Z_=.5*$_-d)+h}(this.camera),Y_.uniforms.t.value=Rg,X_.render())}vg.prototype={init:function(){var e=this;this.clickable=!0,Eg.call(this),this.initialized=!0,this.updateID=hg.registerCallback(zg.bind(this)),window.requestAnimationFrame(function(){return zg.call(e)}),hg.play()},getAssetManager:function(){return dg},updateScroll:function(e){cg=1-e,this.camera.position.y=this.lower_limit+cg*(this.upper_limit-this.lower_limit)},preload:function(){var e=this;return new Promise(function(t,n){var i=Kf.files.find(function(e){return"gltf_draco"===e.type});dg.load([i],function(){e.loaded=!0,dg.load(Kf.files,function(){return t()})})})},resize:function(e,t){if(G_=window.innerWidth,V_=window.isMobile?window.outerHeight:window.innerHeight,!this.initialized)return eg.pointer.current.set(.5*G_,.5*V_),eg.pointer.target.set(.5*G_,.5*V_),void eg.pointer.targetTarget.set(.5*G_,.5*V_);var n=Math.min(eg.knife.size.maxWidth,G_),i=n*(eg.knife.size.height/eg.knife.size.width);eg.knife_visible_percentage=Math.max(.35,V_/i),n=(i=V_/eg.knife_visible_percentage)*(eg.knife.size.width/eg.knife.size.height),ug=2*Math.atan(eg.knife_visible_percentage*eg.knife.size.height*.5/Q_)*(180/Math.PI),this.camera.fov=ug,this.camera.aspect=G_/V_,this.camera.updateProjectionMatrix(),Og.call(this,e),Ig.call(this,t),window.cam_controller&&(window.cam_controller.min(this.lower_limit),window.cam_controller.max(this.upper_limit));var r=eg.knife_visible_percentage*eg.knife.size.height,o=r/(r+this.upper_limit-this.lower_limit),s=V_/o;this.camera.position.y=this.lower_limit+cg*(this.upper_limit-this.lower_limit),og||Fg.call(this),mg=eg.magnifying_glass.position.x+Math.sin(eg.camera.minAngle.x)*(eg.knife.position.z-eg.magnifying_glass.position.z),_g=eg.syringe.position.x+Math.sin(eg.camera.maxAngle.x)*(eg.knife.position.z-eg.syringe.position.z);var a=(eg.magnifying_glass.size.width+2*(eg.knife.position.x-eg.magnifying_glass.position.x))/eg.knife.size.width;o=Math.min(1,Math.max(0,2*(G_/(a*n)-.5))),mg+=(eg.knife.position.x-mg)*o,_g+=(eg.knife.position.x-_g)*o,this.renderer.setSize(G_,V_),X_.setSize(G_,V_);var l=this.renderer.getPixelRatio();return W_.material.uniforms.resolution.value.x=1/(G_*l),W_.material.uniforms.resolution.value.y=1/(V_*l),Y_.material.uniforms.u_resolution.value.x=G_,Y_.material.uniforms.u_resolution.value.y=V_,Y_.material.uniforms.mag_radius.value=Math.sqrt(Math.pow(V_/G_*.5,2)+Math.pow(.5,2)),Dg(eg.camera.distance,this.camera),ng.touch&&J_&&(J_.uniforms.scale.value=1.6),s},recenter:Fg,setInteractive:function(){og=!0},slide:function(e,t){var n=t?0:1,i=eg.syringe.position.x+.5*eg.syringe.size.width-(eg.magnifying_glass.position.x-.5*eg.magnifying_glass.size.width),r="home"===e?0:eg.camera.offset.x+e*i;s.h.to(eg.camera.offset,n,{x:r,ease:s.d.easeInOut})},playMagnifyingGlassTransition:Cg,enablePointer:Mg,disablePointer:Tg,bringIn:function(){var e=this;return new Promise(function(t,n){Y_.uniforms.blurNext.value=!1,Cg("lut_main").then(function(){Pg.call(e),Mg.call(e),t()})})},goOut:function(){var e=this;return new Promise(function(t,n){Y_.uniforms.blurNext.value=!1,Cg("lut_main").then(function(){Pg.call(e),t()})})},zoomIn:function(){s.h.to(eg.camera,1,{distanceOffset:0,ease:Power2.easeInOut})},hideCursor:Ng,handleClick:function(e){if(this.clickable&&(!e||!ng.moved)){var t=fg;if(t)if("ransom_back"===t)window.open("https://thispersondoesnotexist.com");else if("button"===t){var n=document.body.scrollHeight-V_,i=window.pageYOffset;s.h.killTweensOf(this.ransom_pivot.rotation);var r=new a({paused:!0});if(i/n<.45){var o=.6*n;r.to(window,.75,{scrollTo:{y:o,autoKill:!1},ease:s.d.easeInOut})}var l=this.ransom_pivot.rotation.y>0?0:Math.PI;r.to(this.ransom_pivot.rotation,.5,{y:l,ease:Back.easeOut,onComplete:function(){}}),r.play()}else Lg.call(this),Tg.call(this),this.events.publish("faceclick",{name:t}),s.h.to(eg.camera,2,{distanceOffset:10,ease:Power2.easeInOut}),Ng.call(this)}}};var Ug={getInstance:function(){return H_=H_||new vg}};var Bg=(s.g.document||{}).documentElement,Gg=s.g,Vg=function(e,t){var n="x"===t?"Width":"Height",i="scroll"+n,r="client"+n,o=document.body;return e===Gg||e===Bg||e===o?Math.max(Bg[i],o[i])-(Gg["inner"+n]||Bg[r]||o[r]):e[i]-e["offset"+n]},Hg=function(e,t){var n="scroll"+("x"===t?"Left":"Top");return e===Gg&&(null!=e.pageXOffset?n="page"+t.toUpperCase()+"Offset":e=null!=Bg[n]?Bg:document.body),function(){return e[n]}},Xg=function(e,t){var n,i=(n=e,"string"==typeof n&&(n=TweenLite.selector(n)),n.length&&n!==Gg&&n[0]&&n[0].style&&!n.nodeType&&(n=n[0]),n===Gg||n.nodeType&&n.style?n:null).getBoundingClientRect(),r=document.body,o=!t||t===Gg||t===r,s=o?{top:Bg.clientTop-(window.pageYOffset||Bg.scrollTop||r.scrollTop||0),left:Bg.clientLeft-(window.pageXOffset||Bg.scrollLeft||r.scrollLeft||0)}:t.getBoundingClientRect(),a={x:i.left-s.left,y:i.top-s.top};return!o&&t&&(a.x+=Hg(t,"x")(),a.y+=Hg(t,"y")()),a},Wg=function(e,t,n,i){var r=typeof e;return isNaN(e)?"string"===r&&"="===e.charAt(1)?parseInt(e.charAt(0)+"1",10)*parseFloat(e.substr(2))+i:"max"===e?Vg(t,n):Math.min(Vg(t,n),Xg(e,t)[n]):parseFloat(e)},Yg=s.g._gsDefine.plugin({propName:"scrollTo",API:2,global:!0,version:"1.9.2",init:function(e,t,n){return this._wdw=e===Gg,this._target=e,this._tween=n,"object"!=typeof t?"string"==typeof(t={y:t}).y&&"max"!==t.y&&"="!==t.y.charAt(1)&&(t.x=t.y):t.nodeType&&(t={y:t,x:t}),this.vars=t,this._autoKill=!1!==t.autoKill,this.getX=Hg(e,"x"),this.getY=Hg(e,"y"),this.x=this.xPrev=this.getX(),this.y=this.yPrev=this.getY(),null!=t.x?(this._addTween(this,"x",this.x,Wg(t.x,e,"x",this.x)-(t.offsetX||0),"scrollTo_x",!0),this._overwriteProps.push("scrollTo_x")):this.skipX=!0,null!=t.y?(this._addTween(this,"y",this.y,Wg(t.y,e,"y",this.y)-(t.offsetY||0),"scrollTo_y",!0),this._overwriteProps.push("scrollTo_y")):this.skipY=!0,!0},set:function(e){this._super.setRatio.call(this,e);var t=this._wdw||!this.skipX?this.getX():this.xPrev,n=this._wdw||!this.skipY?this.getY():this.yPrev,i=n-this.yPrev,r=t-this.xPrev,o=Yg.autoKillThreshold;this.x<0&&(this.x=0),this.y<0&&(this.y=0),this._autoKill&&(!this.skipX&&(r>o||r<-o)&&t<Vg(this._target,"x")&&(this.skipX=!0),!this.skipY&&(i>o||i<-o)&&n<Vg(this._target,"y")&&(this.skipY=!0),this.skipX&&this.skipY&&(this._tween.kill(),this.vars.onAutoKill&&this.vars.onAutoKill.apply(this.vars.onAutoKillScope||this._tween,this.vars.onAutoKillParams||[]))),this._wdw?Gg.scrollTo(this.skipX?t:this.x,this.skipY?n:this.y):(this.skipY||(this._target.scrollTop=this.y),this.skipX||(this._target.scrollLeft=this.x)),this.xPrev=this.x,this.yPrev=this.y}}),qg=Yg.prototype;Yg.max=Vg,Yg.getOffset=Xg,Yg.buildGetter=Hg,Yg.autoKillThreshold=7,qg._kill=function(e){return e.scrollTo_x&&(this.skipX=!0),e.scrollTo_y&&(this.skipY=!0),this._super._kill.call(this,e)};var Qg=function(){};function Jg(e,t,n,i,r){switch(this.element=e,t&&(this.onStart=t),n&&(this.onDrag=n),i&&(this.onEnd=i),this.dragStart=dv.bind(this),this.dragMove=hv.bind(this),this.dragEnd=pv.bind(this),r){case"touch":$g.call(this);break;case"mouse":Zg.call(this);break;default:this.firstTouch=!0,Zg.call(this),$g.call(this)}}function Zg(){this.onMouseDown=tv.bind(this),this.onMouseMove=rv.bind(this),this.onMouseUp=ov.bind(this),this.element.addEventListener("mousedown",this.onMouseDown)}function Kg(){this.element.removeEventListener("mousedown",this.onMouseDown),this.onMouseDown=null,this.onMouseMove=null,this.onMouseUp=null,this.mousedrag&&iv.call(this)}function $g(){this.onTouchStart=sv.bind(this),this.onTouchMove=uv.bind(this),this.onTouchEnd=cv.bind(this),this.element.addEventListener("touchstart",this.onTouchStart)}function ev(){this.element.removeEventListener("touchstart",this.onTouchStart),this.onTouchStart=null,this.onTouchMove=null,this.onTouchEnd=null,this.touchdrag&&lv.call(this)}function tv(e){this.dragging||(this.dragStart(e.pageX,e.pageY),nv.call(this))}function nv(){this.mousedrag=!0,document.body.addEventListener("mousemove",this.onMouseMove),document.body.addEventListener("mouseup",this.onMouseUp),document.body.addEventListener("mouseleave",this.onMouseUp)}function iv(){this.mousedrag=!1,document.body.removeEventListener("mousemove",this.onMouseMove),document.body.removeEventListener("mouseup",this.onMouseUp),document.body.removeEventListener("mouseleave",this.onMouseUp)}function rv(e){this.dragMove(e.pageX,e.pageY)}function ov(e){this.dragEnd(e.pageX,e.pageY),iv.call(this)}function sv(e){if(this.firstTouch&&(this.removeMouseListeners(),this.firstTouch=!1),!this.dragging){var t=e.touches[0];this.dragStart(t.pageX,t.pageY),av.call(this)}}function av(e){this.touchdrag=!0,document.body.addEventListener("touchmove",this.onTouchMove),document.body.addEventListener("touchend",this.onTouchEnd)}function lv(){this.touchdrag=!1,document.body.removeEventListener("touchmove",this.onTouchMove),document.body.removeEventListener("touchend",this.onTouchEnd)}function uv(e){var t=e.touches[0];this.dragMove(t.pageX,t.pageY)}function cv(e){var t=e.changedTouches[0];this.dragEnd(t.pageX,t.pageY),lv.call(this)}function dv(e,t){this.moved=!1,this.dragging=!0,this.onStart&&this.onStart(e,t)}function hv(e,t){this.moved=!0,this.onDrag&&this.onDrag(e,t)}function pv(e,t){this.dragging=!1,this.onEnd&&this.onEnd(e,t)}Qg.prototype={init:function(e){},show:function(e){TweenMax.to(this.elements.sectionWrapper,.75,{autoAlpha:1,ease:Power3.easeInOut,onComplete:function(){e&&e()}})},hide:function(e){TweenMax.to(this.elements.sectionWrapper,.75,{autoAlpha:0,ease:Power3.easeInOut,onComplete:function(){this.elements.sectionWrapper.style.display="none",e&&e()}.bind(this)})},resize:function(e,t){var n=oblio.settings.headerHeight;this.width=e,this.height=t-n,this.elements.sectionWrapper.style.width=this.width+"px",this.elements.sectionWrapper.style.height=this.height+"px",this.elements.sectionWrapper.style.top=n+"px"},insert:function(e){var t=this;return new Promise(function(n,i){var r=z().returnSectionOBJ(t.id);e.insertAdjacentHTML("beforeend",r.html),window.requestAnimationFrame(function(){n()})})}},Jg.prototype.destroy=function(){this.onMouseDown&&ev.call(this),this.onTouchStart&&Kg.call(this),this.element=null,this.onStart=null,this.onDrag=null,this.onEnd=null,this.dragStart=null,this.dragMove=null,this.dragEnd=null};kt.getInstance();var fv,mv="Buy",_v=z();var gv,vv={id:mv,prepareLoad:function(){var e=[];e.length>0&&_v.addFiles(mv,e)},init:function(e){var t=document.getElementById(mv.toLowerCase());this.elements={sectionWrapper:t,footer:document.getElementById("footer"),wrapper:t.querySelector(".wrapper"),header:t.querySelector("h1"),subheader:t.querySelector("h2")},t.addEventListener("click",function(){var e=document.getElementById("digital_links").offsetTop;s.h.to(window,.75,{scrollTo:{y:e,autoKill:!1},ease:s.d.easeInOut})}),e&&e()},resize:function(){var e=window.isMobile?window.outerHeight:window.innerHeight,t=this.elements.wrapper.offsetHeight,n=Math.max(e,t);this.elements.sectionWrapper.style.height="".concat(n,"px")},destroy:function(){for(var e in this.elements)this.elements.hasOwnProperty(e)&&delete this.elements[e];this.elements=null},hide:function(e){e&&e()},show:function(e){e&&e()},firstShow:function(e){s.h.fromTo(this.elements.sectionWrapper,1,{alpha:0,y:"10%"},{alpha:1,y:"0%",ease:s.d.easeInOut}),e&&e()}},yv={getInstance:function(){return fv=fv||Object.assign(Object.create(Qg.prototype),vv)}},xv="Accolades",bv=z();var wv={id:xv,prepareLoad:function(){var e=[];e.length>0&&bv.addFiles(xv,e)},init:function(e){var t=document.getElementById(xv.toLowerCase());this.elements={sectionWrapper:t,footer:document.getElementById("footer"),wrapper:t.querySelector(".wrapper")},e&&e()},resize:function(){var e=window.isMobile?window.outerHeight:window.innerHeight,t=this.elements.wrapper.offsetHeight,n=Math.max(e,t);this.elements.sectionWrapper.style.height="".concat(n,"px")},destroy:function(){for(var e in this.elements)this.elements.hasOwnProperty(e)&&delete this.elements[e];this.elements=null},hide:function(e){e&&e()},show:function(e){e&&e()},firstShow:function(e){s.h.fromTo(this.elements.sectionWrapper,1,{alpha:0,y:"10%"},{alpha:1,y:"0%",ease:s.d.easeInOut}),e&&e()}},jv={getInstance:function(){return gv=gv||Object.assign(Object.create(Qg.prototype),wv)}},Sv="volume",Av={getName:function(){return Sv},mousedown:function(e){this.dragging=!0;var t=1-Math.max(0,Math.min(1,(e.clientY-this.offset)/this.height));return this.setVolume(t),[{fname:"mute",args:[!0]},{fname:"updateVolume",args:[t]}]},mouseup:function(e){if(this.dragging){this.dragging=!1;var t=1-Math.max(0,Math.min(1,(e.clientY-this.offset)/this.height));return this.setVolume(t),[{fname:"updateVolume",args:[t]}]}},mousemove:function(e){if(this.dragging){var t=1-Math.max(0,Math.min(1,(e.clientY-this.offset)/this.height));return this.setVolume(t),[{fname:"updateVolume",args:[t]}]}},setVolume:function(e){this.needsUpdate=!0,this.volume=e,this.bar||(this.bar=this.el.querySelector(".volumebar")),this.handle||(this.handle=this.el.querySelector(".handle")),this.bar.style.transform="scaleY("+e+")",TweenMax.set(this.handle,{y:-e*this.height+"px"})},getVolume:function(){return this.volume},resize:function(){var e=this.el.querySelector(".track");this.offset=function(e){var t=0,n=0;for(;e;){if("BODY"==e.tagName){var i=e.scrollLeft||document.documentElement.scrollLeft,r=e.scrollTop||document.documentElement.scrollTop;t+=e.offsetLeft-i+e.clientLeft,n+=e.offsetTop-r+e.clientTop}else t+=e.offsetLeft-e.scrollLeft+e.clientLeft,n+=e.offsetTop-e.scrollTop+e.clientTop;e=e.offsetParent}return{x:t,y:n}}(e).y,this.height=e.offsetHeight}};var Mv="progress",Tv=function(e,t){return("000000000"+e).substr(-t)},Pv={getName:function(){return Mv},mousedown:function(e){this.scrubbing=!0;var t=Math.max(0,Math.min(1,(e.clientX-this.offset)/this.width));return this.setProgress(t),[{fname:"pause",args:[!0]},{fname:"updateTime",args:[t]}]},mouseup:function(e){if(this.scrubbing){var t=Math.max(0,Math.min(1,(e.clientX-this.offset)/this.width));return this.setProgress(t),window.setTimeout(function(){this.scrubbing=!1}.bind(this),50),[{fname:"resume"},{fname:"updateTime",args:[t]}]}},mousemove:function(e){if(this.scrubbing){var t=Math.max(0,Math.min(1,(e.clientX-this.offset)/this.width));return this.setProgress(t),[{fname:"updateTime",args:[t]}]}},setProgress:function(e){this.progress=e,this.bar.style.transform="scaleX("+this.progress+")",Lv.call(this)},setDuration:function(e){this.duration=e,Lv.call(this),this.resize()},getProgress:function(){return this.progress},resize:function(){var e=this.time.offsetWidth+12;this.width=this.el.offsetWidth-e,this.offset=function(e){var t=0,n=0;for(;e;){if("BODY"==e.tagName){var i=e.scrollLeft||document.documentElement.scrollLeft,r=e.scrollTop||document.documentElement.scrollTop;t+=e.offsetLeft-i+e.clientLeft,n+=e.offsetTop-r+e.clientTop}else t+=e.offsetLeft-e.scrollLeft+e.clientLeft,n+=e.offsetTop-e.scrollTop+e.clientTop;e=e.offsetParent}return{x:t,y:n}}(this.el).x,this.height=this.el.offsetHeight,this.track.style.width=this.width+"px"}};function Lv(){this.time.textContent=Ev(this.progress*this.duration)+"/"+Ev(this.duration)}function Ev(e){var t=Math.floor(e/3600),n=(t>0?Tv(Math.floor(e/60)%60,2):Math.floor(e/60))+":";return(t=t>0?t+":":"")+n+Tv(Math.floor(e%60),2)}var Ov="playpause",Iv={getName:function(){return Ov},click:function(){return[{fname:this.toggle()}]},toggle:function(){return this.paused?this.play():this.pause()},pause:function(){return this.el.classList.add("paused"),this.paused=!0,"pause"},play:function(){return this.el.classList.remove("paused"),this.paused=!1,"play"},getPaused:function(){return this.paused}};var Cv="mute",Fv={getName:function(){return Cv},click:function(){return[{fname:this.toggle(),args:[!1]}]},toggle:function(){return this.muted?(this.setState(this.volume),"unmute"):(this.setState(0),"mute")},setVolume:function(e){this.volume=e},getVolume:function(){return this.volume},setState:function(e){e>0?(this.el.classList.remove("muted"),this.muted=!1):(this.el.classList.add("muted"),this.muted=!0)}};var Nv="fullscreen",kv={getName:function(){return Nv},click:function(){return[{fname:"fullscreen"}]}};var Dv={play_pause:{create:function(e){var t,n=Object.assign(Object.create(Iv),{el:(t=document.createElement("div"),t.className="video-control playpause paused",t.setAttribute("data-name",Ov),t.innerHTML='<svg class="play" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:a="http://ns.adobe.com/AdobeSVGViewerExtensions/3.0/" x="0px" y="0px" width="16.288px" height="16.823px" viewBox="0 0 16.288 16.823" style="enable-background:new 0 0 16.288 16.823;" xml:space="preserve"><defs></defs><polygon id="XMLID_17_" style="fill:none;stroke-miterlimit:10;" points="2.637,15.921 14.645,8.411 2.637,0.902 "/></svg><svg class="pause" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:a="http://ns.adobe.com/AdobeSVGViewerExtensions/3.0/" x="0px" y="0px" width="16.288px" height="15.834px" viewBox="0 0 16.288 15.834" style="enable-background:new 0 0 16.288 15.834;" xml:space="preserve"><defs></defs><g id="XMLID_19_"><line id="XMLID_21_" style="fill:none;stroke-miterlimit:10;" x1="5" y1="0.417" x2="5" y2="15.417"/><line id="XMLID_20_" style="fill:none;stroke-miterlimit:10;" x1="11" y1="0.5" x2="11" y2="15.417"/></g></svg>',t)});return e.appendChild(n.el),n.paused=!0,n}},progress:{create:function(e,t){var n,i,r,o,s=Object.assign(Object.create(Pv),{el:(n=document.createElement("div"),i=document.createElement("div"),r=document.createElement("div"),o=document.createElement("div"),n.className="video-control progress",i.className="track",o.className="time",r.className="progressbar",n.setAttribute("data-name",Mv),i.appendChild(r),n.appendChild(i),n.appendChild(o),n),progress:0});return s.bar=s.el.querySelector(".progressbar"),s.time=s.el.querySelector(".time"),s.track=s.el.querySelector(".track"),e.appendChild(s.el),s.resize(),s.setDuration(t.getDuration()),s.setProgress(0),s}},volume:{create:function(e){var t,n,i,r,o,s=Object.assign(Object.create(Av),{el:(t=document.createElement("div"),n=document.createElement("div"),i=document.createElement("div"),r=document.createElement("div"),o=document.createElement("div"),t.className="video-control volume",n.className="slider",i.className="track",r.className="handle",o.className="volumebar",t.setAttribute("data-name",Sv),i.appendChild(o),i.appendChild(r),n.appendChild(i),t.appendChild(n),t),volume:1}),a=e.querySelector(".volume_wrapper");return a?a.appendChild(s.el):((a=document.createElement("div")).className="volume_wrapper",e.appendChild(a)),a.appendChild(s.el),s.resize(),s.setVolume(s.volume),s.needsUpdate=!0,s}},mute:{create:function(e){var t,n=Object.assign(Object.create(Fv),{el:(t=document.createElement("div"),t.className="video-control mute",t.innerHTML='<svg class="speaker" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:a="http://ns.adobe.com/AdobeSVGViewerExtensions/3.0/" x="0px" y="0px" width="16.558px" height="17.003px" viewBox="0 0 16.558 17.003" style="enable-background:new 0 0 16.558 17.003;" xml:space="preserve"><defs></defs><polygon id="XMLID_17_" style="fill:none;stroke-miterlimit:10;" points="9.46,15.919 0.77,8.501 9.46,1.084 "/></svg><svg class="vibes" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:a="http://ns.adobe.com/AdobeSVGViewerExtensions/3.0/" x="0px" y="0px" width="16.288px" height="15.834px" viewBox="0 0 16.288 15.834" style="enable-background:new 0 0 16.288 15.834;" xml:space="preserve"><defs></defs><line id="XMLID_21_" style="fill:none;stroke-miterlimit:10;" x1="11.788" y1="5.913" x2="11.788" y2="9.922"/><line id="XMLID_20_" style="fill:none;stroke-miterlimit:10;" x1="13.788" y1="4.917" x2="13.788" y2="10.917"/><line id="XMLID_19_" style="fill:none;stroke-miterlimit:10;" x1="15.788" y1="2.913" x2="15.788" y2="12.922"/></svg><svg class="offx" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:a="http://ns.adobe.com/AdobeSVGViewerExtensions/3.0/" x="0px" y="0px" width="16.288px" height="15.834px" viewBox="0 0 16.288 15.834" style="enable-background:new 0 0 16.288 15.834;" xml:space="preserve"><defs></defs><line id="XMLID_19_" style="fill:none;stroke-miterlimit:10;" x1="11.666" y1="5.796" x2="15.909" y2="10.039"/><line id="XMLID_18_" style="fill:none;stroke-miterlimit:10;" x1="15.909" y1="5.796" x2="11.666" y2="10.039"/></svg>',t.setAttribute("data-name",Cv),t),volume:1,muted:!1}),i=e.querySelector(".volume_wrapper");return i?i.appendChild(n.el):((i=document.createElement("div")).className="volume_wrapper",e.appendChild(i)),i.appendChild(n.el),n}},fullscreen:{create:function(e){var t,n=Object.assign(Object.create(kv),{el:(t=document.createElement("div"),t.className="video-control fullscreen",t.innerHTML='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:a="http://ns.adobe.com/AdobeSVGViewerExtensions/3.0/" x="0px" y="0px" width="16px" height="16px" viewBox="0 0 16 16" style="enable-background:new 0 0 16 16;" xml:space="preserve"><defs></defs><polyline id="XMLID_22_" style="fill:none;stroke-miterlimit:10;" points="0.5,6.5 0.5,0.5 6.5,0.5 "/><polyline id="XMLID_21_" style="fill:none;stroke-miterlimit:10;" points="9.5,0.5 15.5,0.5 15.5,6.5 "/><polyline id="XMLID_20_" style="fill:none;stroke-miterlimit:10;" points="6.5,15.5 0.5,15.5 0.5,9.5 "/><polyline id="XMLID_19_" style="fill:none;stroke-miterlimit:10;" points="15.5,9.5 15.5,15.5 9.5,15.5 "/></svg>',t.setAttribute("data-name",Nv),t)});return e.appendChild(n.el),n}}},Rv=function(e,t){for(;!e.classList.contains(t)&&(e=e.parentElement););return e},zv={resize:function(){this.resizables.map(function(e){return e.resize()})},mute:function(e){e&&this.components.mute?this.components.mute.setVolume(Math.max(.25,this.components.volume.getVolume())):this.updateVolume(0)},unmute:function(){var e=this.components.mute?this.components.mute.getVolume():1;this.updateVolume(e)},resume:function(){this.player.paused()?this.components.play_pause.pause():(this.player.play(),this.components.play_pause.play())},updateTime:function(e){this.player.setCurrentTime(e)},updateVolume:function(e){this.player.setVolume(e),this.components.mute&&this.components.mute.setState(e)}};function Uv(e){e.map(function(e){this[e.fname]?this[e.fname].apply(this,e.args):this.player[e.fname]&&this.player[e.fname].apply(this.player,e.args)}.bind(this))}function Bv(){var e=this,t=function(t){return function(n){var i=Rv(n.target,"video-control");if(i){n.preventDefault();var r=i.getAttribute("data-name"),o=t.reduce(function(e,t){return e&&r===e.getName()?e:!(!t||r!==t.getName())&&t},!1);if(o){var s=o.click(n);s&&Uv.call(e,s)}}}}(this.controls.filter(function(e){return void 0!==e.click})),n=function(t){return function(n){t.map(function(e){return e.mousemove(n)}).map(function(t){t&&Uv.call(e,t)})}}(this.controls.filter(function(e){return void 0!==e.mousemove})),i=function(t){return function(r){t.map(function(e){return e.mouseup(r)}).map(function(t){t&&Uv.call(e,t)}),e.player.hideCover&&e.player.hideCover(),window.removeEventListener("mouseup",i),window.removeEventListener("mousemove",n)}}(this.controls.filter(function(e){return void 0!==e.mouseup})),r=function(t,n,i){return function(r){var o=Rv(r.target,"video-control");if(o){var s=o.getAttribute("data-name"),a=t.reduce(function(e,t){return e&&s===e.getName()?e:!(!t||s!==t.getName())&&t},!1);if(a){var l=a.mousedown(r);l&&(r.preventDefault(),e.player.hideCover&&e.player.showCover(),window.addEventListener("mousemove",i),window.addEventListener("mouseup",n),Uv.call(e,l))}}}}(this.controls.filter(function(e){return void 0!==e.mousedown}),i,n);this.elements.el.parentElement.addEventListener("mouseenter",Gv.bind(this)),this.elements.el.parentElement.addEventListener("mouseleave",Vv.bind(this)),this.elements.el.parentElement.addEventListener("click",t),this.elements.el.addEventListener("mousedown",r),this.player.events.subscribe("play",function(e){this.components.play_pause.play()}.bind(this)),this.player.events.subscribe("pause",function(e){this.components.progress.scrubbing||(this.components.play_pause.pause(),this.events.publish("pause"))}.bind(this)),this.player.events.subscribe("timeupdate",function(e){this.components.progress.scrubbing||this.components.progress.setProgress(e.currentTime/e.duration)}.bind(this)),this.player.events.subscribe("durationchange",function(e){this.components.progress.setDuration(e.duration),this.resize()}.bind(this)),this.player.events.subscribe("ended",function(e){}.bind(this)),this.player.events.subscribe("volumechange",function(e){this.components.volume.setVolume(e.volume),this.components.mute.setState(e.volume)}.bind(this)),this.destroy=Wv.call(this,Hv.call(this,t,r))}function Gv(){this.elements.el.style.opacity=1}function Vv(){this.elements.el.style.opacity=0}function Hv(e,t){return function(){this.elements.el.removeEventListener("click",e),this.elements.el.removeEventListener("mousedown",t)}.bind(this)}function Xv(e){this.elements={el:this.wrapper},this.resizables=[],this.controls=e.map(function(e){var t=this;return this.components[e]=function(e){return Dv[e].create(t.elements.el,t.player)}(e)}.bind(this)),this.resizables=this.controls.filter(function(e){return void 0!==e.resize}),Bv.call(this),window.requestAnimationFrame(function(){this.resize()}.bind(this))}function Wv(e){return function(){e.call(this)}.bind(this)}var Yv={create:function(e,t,n){var i=Object.assign(Object.create(zv),{player:e,wrapper:t,components:{},events:Object.create($f.getInstance())});return e.cover.classList.add("playpause","video-control"),e.cover.setAttribute("data-name","playpause"),Xv.call(i,n),i}};function qv(e,t){var n=t/e;return function(){var e=this.wrapper.offsetWidth;this.video_el.style.width=e+"px",this.video_el.style.height=e*n+"px"}}function Qv(){["play","pause","ended","timeupdate","durationchange","volumechange"].forEach(function(e){this.video_el.addEventListener(e,this.onStateChange(e).bind(this))}.bind(this))}var Jv={proto:{play:function(e){void 0!==e&&(this.video_el.currentTime=0),this.video_el.play(),this.isPaused=!1},pause:function(e){e||(this.isPaused=!0),this.video_el.pause()},paused:function(){return this.isPaused},mute:function(){this.video_el.volume=0},setVolume:function(e){this.video_el.volume=e},getVolume:function(){return this.video_el.volume},getCurrentTime:function(){return this.video_el.currentTime},setCurrentTime:function(e){this.video_el.currentTime=e*this.video_el.duration},getDuration:function(){return this.video_el.duration},fullscreen:function(){(this.video_el.requestFullscreen||this.video_el.webkitRequestFullscreen||this.video_el.mozRequestFullscreen||this.video_el.msRequestFullscreen||function(){}).call(this.video_el)},loadVideoById:function(e,t){var n=this;return new Promise(function(i,r){t&&n.video_el.setAttribute("poster",t),n.video_el.addEventListener("loadedmetadata",function e(){i(),n.video_el.removeEventListener("loadedmetadata",e)}),n.video_el.src=e})},onStateChange:function(e){return function(t){switch(e){case"play":this.events.publish("play",{playing:!0});break;case"pause":this.events.publish("pause",{paused:!0});break;case"ended":this.events.publish("ended",{ended:!0});break;case"timeupdate":this.events.publish("timeupdate",{currentTime:this.getCurrentTime(),duration:this.getDuration()});break;case"durationchange":this.events.publish("durationchange",{duration:this.getDuration()});break;case"volumechange":this.events.publish("volumechange",{volume:this.getVolume()})}}},destroy:function(){},getPlayerState:function(){return new Promise(function(e,t){e()})}},resize:qv,load:function(){var e=this;return new Promise(function(t,n){e.isPaused=!1,e.loadVideoById(e.options.videoSrc,e.options.poster).then(function(){e.resize=qv(e.video_el.videoWidth,e.video_el.videoHeight),Qv.call(e),t(e)})})}},Zv=kt.getInstance(),Kv=!1;function $v(e){}function ey(e,t){var n=t/e;return function(e,t){e&&t||(e=this.wrapper.offsetWidth,t=Math.floor(e*n)),this.player.iframe.style.width=e+"px",this.player.iframe.style.height=t+"px"}}function ty(){this.onStateChange.call(this,{data:"timeupdate"})}var ny={proto:{play:function(){this.isPaused=!1,this.player.playVideo()},pause:function(e){e||(this.isPaused=!0),this.player.pauseVideo()},paused:function(){return this.isPaused},setVolume:function(e){this.volume=e,this.player.setVolume(100*this.volume),this.onStateChange.call(this,{data:"volumechange"})},getVolume:function(){return this.volume},getCurrentTime:function(){return this.player.getCurrentTime()},setCurrentTime:function(e){this.player.seekTo(e*this.getDuration())},getDuration:function(){return this.player.getDuration()},fullscreen:function(){var e=this.player.getIframe();(e.requestFullscreen||e.webkitRequestFullscreen||e.mozRequestFullscreen||e.msRequestFullscreen||function(){}).call(e)},hideCover:function(){this.cover.style.display="none"},showCover:function(){this.cover.style.display="block"},onStateChange:function(e){switch(e.data){case YT.PlayerState.PLAYING:this.start(),this.events.publish("durationchange",{duration:this.getDuration()}),this.events.publish("play",{playing:!0});break;case YT.PlayerState.PAUSED:this.stop(),this.events.publish("pause",{paused:!0});break;case YT.PlayerState.ENDED:this.stop(),this.events.publish("ended",{ended:!0});break;case YT.PlayerState.BUFFERING:this.events.publish("durationchange",{duration:this.getDuration()}),this.events.publish("buffering");break;case YT.PlayerState.CUED:this.events.publish("durationchange",{duration:this.getDuration()}),this.events.publish("cued");break;case"timeupdate":this.events.publish("timeupdate",{currentTime:this.getCurrentTime(),duration:this.getDuration()});break;case"volumechange":this.events.publish("volumechange",{volume:this.getVolume()});break;default:this.events.publish("durationchange",{duration:this.getDuration()})}},loadVideoById:function(e){this.player.loadVideoById({videoId:e})},cuePlaylist:function(e,t){t=t||0,"string"==typeof e?this.player.cuePlaylist({listType:"playlist",list:e,index:t}):this.player.cuePlaylist(e,t)},playVideoAt:function(e){this.player.playVideoAt(e)},initStart:function(e){return function(){void 0!==this.updateID&&this.stop(),this.updateID=Zv.registerCallback(e)}},stop:function(){this.updateID&&Zv.unregisterCallback(this.updateID),this.updateID=void 0},destroy:function(){this.stop(),this.player.destroy()},getPlayerState:function(){var e=this;return new Promise(function(t,n){t(e.player.getPlayerState())})}},resize:ey,load:function(){return new Promise(function(e,t){var n=this.video_el.id;if(window.onYouTubeIframeAPIReady=function(){this.isPaused=!1,this.player=new YT.Player(n,{videoId:this.options.videoSrc,playerVars:{autoplay:this.options.autoplay,enablejsapi:this.options.enablejsapi,color:this.options.color,showinfo:this.options.showinfo,controls:this.options.controls,wmode:"transparent",rel:this.options.rel,modestbranding:this.options.modestbranding},events:{onReady:function(){this.start=this.initStart(ty.bind(this)),e(this);var t=this.player.iframe=document.getElementById(n);this.hideCover(),this.resize=ey(t.width,t.height)}.bind(this),onStateChange:this.onStateChange.bind(this),onError:$v.bind(this)}})}.bind(this),!1===Kv){var i=document.createElement("script");i.src="https://www.youtube.com/iframe_api",document.body.appendChild(i),Kv=!0}else onYouTubeIframeAPIReady()}.bind(this))}};function iy(e,t){var n=t/e;return function(){var e=this.wrapper.offsetWidth;this.ratio=n,this.player.element.style.width=e+"px",this.player.element.style.height=e*this.ratio+"px"}}function ry(){["play","pause","ended","timeupdate","durationchange","volumechange"].forEach(function(e){this.player.on(e,this.onStateChange(e).bind(this))}.bind(this))}var oy={proto:{play:function(){this.isPaused=!1,this.player.play().then(function(){}.bind(this)).catch(function(e){})},pause:function(e){e||(this.isPaused=!0),this.player.pause().then(function(){}.bind(this))},paused:function(){return this.isPaused},setVolume:function(e){this.volume=e,this.player.setVolume(e)},getVolume:function(){return this.volume},getCurrentTime:function(){return this.player.getCurrentTime().then(function(e){this.currentTime=e}.bind(this)),this.currentTime||0},setCurrentTime:function(e){this.currentTime=e*this.duration,this.player.setCurrentTime(this.currentTime)},getDuration:function(){return this.player.getDuration().then(function(e){this.duration!==e&&(this.duration=e,this.onStateChange("durationchange").call(this))}.bind(this)),this.duration||0},fullscreen:function(){var e=document.getElementById(this.video_el.id);(e.requestFullscreen||e.webkitRequestFullscreen||e.mozRequestFullscreen||e.msRequestFullscreen||function(){}).call(e)},onStateChange:function(e){return function(t){switch(e){case"play":this.events.publish("play",{playing:!0});break;case"pause":this.events.publish("pause",{paused:!0});break;case"ended":this.events.publish("ended",{ended:!0});break;case"timeupdate":this.events.publish("timeupdate",{currentTime:this.getCurrentTime(),duration:this.getDuration()});break;case"durationchange":this.events.publish("durationchange",{duration:this.getDuration()});break;case"volumechange":this.events.publish("volumechange",{volume:this.getVolume()})}}},getRatio:function(){return this.ratio},destroy:function(){this.player.destroy()},getPlayerState:function(){var e=this;return new Promise(function(t,n){var i,r=!1;e.player.getPaused().then(function(e){r="undefined"!==i,i=e?2:r?i:1,r&&t(i)}),e.player.getEnded().then(function(e){r="undefined"!==i,i=e?0:r?i:1,r&&t(i)})})}},resize:iy,load:function(){return new Promise(function(e,t){this.isPaused=!1;var n=this.options.videoSrc;delete this.options.videoSrc,function(e,t){return new Promise(function(t,n){Math.round(1e5*Math.random());var i="https://vimeo.com/api/oembed.json?url=https%3A//vimeo.com/"+e,r=new XMLHttpRequest;r.addEventListener("load",function(e){var n=JSON.parse(e.target.responseText);t(n.html.replace(/(src="(?:[^\\"]+|\\.)*(?="))/,"$1?background=1&loop=0&autoplay=0"))}),r.open("GET",i),r.send()}.bind())}(n,this.options).then(function(t){var n=document.createElement("div");n.innerHTML=t;var i=n.querySelector("iframe");[].slice.call(this.video_el.attributes).forEach(function(e){i.setAttribute(e.name,e.value)}),this.video_el.replaceWith(i),function(e,t){var n=document.createElement("script");n.type="text/javascript",n.readyState?n.onreadystatechange=function(){"loaded"!==n.readyState&&"complete"!==n.readyState||(n.onreadystatechange=null,t())}:n.onload=function(){t()},n.src=e,document.getElementsByTagName("head")[0].appendChild(n)}("https://player.vimeo.com/api/player.js",function(){this.player=new Vimeo.Player(i,{}),this.player.ready().then(function(){this.resize=iy(this.player.element.width,this.player.element.height),ry.call(this),this.setVolume(1),this.options.autoplay&&this.play(),e(this)}.bind(this))}.bind(this))}.bind(this))}.bind(this))}},sy={create:function(e,t,n,i){var r=function(e){switch(e){case"html":return Jv;case"youtube":return ny;case"vimeo":return oy;default:return!1}}(n),o=Object.assign(Object.create(r.proto),{wrapper:t,video_el:e,cover:document.createElement("div"),options:i,events:Object.create($f.getInstance())});return o.cover.className="cover",o.wrapper.insertBefore(o.cover,t.querySelector(".controls_wrapper")),r.load.call(o)}};function ay(e){return(ay="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ly,uy,cy,dy,hy,py,fy,my="Videos",_y=[],gy=X(),vy=[];kt.getInstance();function yy(e){var t={autoplay:1,videoSrc:e,rel:0,showinfo:1,modestbranding:1,pauseoverlay:0,controls:0},n=this.elements.sectionWrapper.querySelector(".vid_wrapper");void 0!==sy&&sy.create(n.querySelector(".videoplayer"),n,"youtube",t).then(function(e){(ly=e).events.subscribe("ended",wy),uy=Yv.create(ly,n.querySelector(".controls_wrapper"),["play_pause","progress","fullscreen","volume","mute"]),ly.events.subscribe("play",xy),uy.events.subscribe("pause",by),hy.pause_cover=n.querySelector(".pause_cover"),vy.push(e,uy),hy.pause_cover.addEventListener("click",ly.play.bind(ly)),Ay.call(this)}.bind(this))}function xy(){oblio.app.family_tree&&(oblio.app.family_tree.paused=!0),TweenLite.to(hy.pause_cover,.25,{alpha:0,onComplete:function(){hy.pause_cover.style.display="none",uy.elements.el.style.visibility="visible"}})}function by(){}function wy(){ly.setCurrentTime(0),ly.pause()}function jy(e){if(e.preventDefault(),e.target.parentNode.classList.contains("active"))e.stopPropagation();else{this.verbose;var t=py[fy];"object"===ay(e)&&e.target.rel&&(fy=e.target.rel),this.elements.player.style.visibility="visible";for(var n=py[fy],i=0;i<this.elements.vidMenuButtons.length;i++){var r=this.elements.vidMenuButtons[i];r.rel===fy?r.parentNode.className="active":r.parentNode.className=""}t.type===n.type?ly.loadVideoById(py[fy].videoSrc):setTimeout(this.show.bind(this),100);var o=oblio.app.dataSrc.widgets.Videos.data.videos.find(function(e,t){return e.deeplink===fy&&e.visible});history.pushState({},"","".concat(window.location.origin).concat(window.location.pathname,"#/Videos/").concat(o.deeplink))}}function Sy(){ly&&ly.pause&&ly.pause()}function Ay(){var e=this.width,t=Math.min(this.height,this.width*(9/16)),n=window.isMobile?window.outerHeight:window.innerHeight,i=this.elements.wrapper.offsetHeight,r=Math.max(1.1*n,i);this.elements.sectionWrapper.style.height="".concat(r,"px"),vy.forEach(function(n){return n.resize(e,t)})}var My,Ty={id:my,prepareLoad:function(){var e=[];e.length>0&&sectionLoader.addFiles(my,e)},init:function(e){dy=oblio.app.dataSrc.widgets.Videos.data;var t=document.getElementById(my.toLowerCase());this.elements=hy={sectionWrapper:t,videoMenuObj:document.getElementById("playerMenu"),menuWrapper:document.getElementById("vid_nav_wrapper"),cookiePrefs:document.getElementById("teconsent"),footer:document.getElementById("footer"),header:document.getElementById("mainHeader"),wrapper:t.querySelector(".wrapper")},this.elements.player=this.elements.sectionWrapper.querySelector(".vid_wrapper");var n=window.location.href.split("Videos/")[1];void 0!==n&&(n=n.split("/")[0]);var i,r=oblio.app.dataSrc.widgets.Videos.data.videos,o=r.find(function(e,t){return e.deeplink===n&&e.visible});o||(o=r[oblio.app.dataSrc.settings.defaultVideoIndex]),fy=o.deeplink,yy.call(this,o.videoSrc),py=[],dy.videos.length>1&&(this.elements.menuWrapper.style.display="block");for(var s=0;s<dy.videos.length;s++)dy.videos[s].visible&&"false"!==dy.videos[s].visible&&(py[dy.videos[s].deeplink]=dy.videos[s],_y.push({link:dy.videos[s].videoSrc,label:dy.videos[s].title}),0);void 0!==document.hidden?("hidden",i="visibilitychange"):void 0!==document.mozHidden?("mozHidden",i="mozvisibilitychange"):void 0!==document.msHidden?("msHidden",i="msvisibilitychange"):void 0!==document.webkitHidden&&("webkitHidden",i="webkitvisibilitychange"),document.addEventListener(i,function(e){!0===e.target.hidden?Sy.call(this):e.target.hidden}.bind(this),!1),this.resize(),e&&e()},resize:Ay,startup:function(e){this.verbose,this.elements.sectionWrapper.style.display="block",1===_y.length&&(this.elements.videoMenuObj.style.visibility="hidden"),this.elements.videoMenuObj.addEventListener("click",jy.bind(this)),this.elements.vidMenuButtons=this.elements.videoMenuObj.getElementsByTagName("a");var t=this.elements.videoMenuObj.querySelector('[rel="'.concat(fy,'"]'));t||(t=this.elements.videoMenuObj.querySelector("a")),t.parentNode.className="active",e&&e()},shutdown:function(e){this.verbose,e&&e()},hide:function(e){oblio.app.family_tree&&(oblio.app.family_tree.paused=!1),Sy(),e&&e()},pauseVideo:Sy,onIntroComplete:function(){this.verbose,gy.changeSection("Home")},show:function(e){Ay.call(this),e&&e()},destroy:function(){for(var e in ly.destroy(),this.elements)this.elements.hasOwnProperty(e)&&delete this.elements[e];hy=null,this.elements=null}},Py={getInstance:function(){return cy=cy||Object.assign(Object.create(Qg.prototype),Ty)}},Ly="Posters",Ey=z();var Oy,Iy={id:Ly,prepareLoad:function(){var e=[];oblio.app.dataSrc.widgets.Posters.data,e.length>0&&Ey.addFiles(Ly,e)},init:function(e){var t=document.getElementById(Ly.toLowerCase());this.elements={sectionWrapper:t,footer:document.getElementById("footer"),wrapper:t.querySelector(".wrapper")},this.elements.wrapper=this.elements.sectionWrapper.querySelector(".wrapper"),[].slice.call(t.querySelectorAll("img")).forEach(function(e){var t=new Image;t.addEventListener("load",function(){t.style.opacity=1}),t.src=e.getAttribute("data-img"),e.parentElement.replaceChild(t,e)}),e&&e()},resize:function(e,t){var n=window.isMobile?window.outerHeight:window.innerHeight,i=this.elements.wrapper.offsetHeight,r=Math.max(n,i);this.elements.sectionWrapper.style.height="".concat(r,"px")},hide:function(e){e&&e()},show:function(e){e&&e()},destroy:function(){for(var e in this.elements)this.elements.hasOwnProperty(e)&&delete this.elements[e];this.elements=null}},Cy={getInstance:function(){return My=My||Object.assign(Object.create(Qg.prototype),Iy)}},Fy="Gallery",Ny=z();var ky,Dy={id:Fy,prepareLoad:function(){var e=[];oblio.app.dataSrc.widgets.Gallery.data,e.length>0&&Ny.addFiles(Fy,e)},init:function(e){var t=document.getElementById(Fy.toLowerCase());this.elements={sectionWrapper:t,footer:document.getElementById("footer"),wrapper:t.querySelector(".wrapper")},this.elements.wrapper=this.elements.sectionWrapper.querySelector(".wrapper"),[].slice.call(t.querySelectorAll("img")).forEach(function(e){var t=new Image;t.addEventListener("load",function(){t.style.opacity=1}),t.src=e.getAttribute("data-img"),e.parentElement.replaceChild(t,e)}),e&&e()},resize:function(e,t){var n=window.isMobile?window.outerHeight:window.innerHeight,i=this.elements.wrapper.offsetHeight,r=Math.max(n,i);this.elements.sectionWrapper.style.height="".concat(r,"px")},hide:function(e){e&&e()},show:function(e){e&&e()},destroy:function(){for(var e in this.elements)this.elements.hasOwnProperty(e)&&delete this.elements[e];this.elements=null}},Ry={getInstance:function(){return Oy=Oy||Object.assign(Object.create(Qg.prototype),Dy)}},zy="About",Uy=z();var By={id:zy,prepareLoad:function(){var e=[];e.length>0&&Uy.addFiles(zy,e)},init:function(e){var t=document.getElementById(zy.toLowerCase());this.elements={sectionWrapper:t,footer:document.getElementById("footer"),wrapper:t.querySelector(".wrapper")},e&&e()},resize:function(){var e=window.isMobile?window.outerHeight:window.innerHeight,t=this.elements.wrapper.offsetHeight,n=Math.max(e,t);this.elements.sectionWrapper.style.height="".concat(n,"px")},destroy:function(){for(var e in this.elements)this.elements.hasOwnProperty(e)&&delete this.elements[e];this.elements=null},hide:function(e){e&&e()},show:function(e){e&&e()},firstShow:function(e){s.h.fromTo(this.elements.sectionWrapper,1,{alpha:0,y:"10%"},{alpha:1,y:"0%",ease:s.d.easeInOut}),e&&e()}},Gy={getInstance:function(){return ky=ky||Object.assign(Object.create(Qg.prototype),By)}};function Vy(){}Vy.prototype={init:function(e){var t=this;return new Promise(function(n,i){t.elements={video:e.querySelector("video")};var r=t.elements.video.getAttribute("data-playbackrate");t.elements.video.playbackRate=r||.75,n()})},destroy:function(){for(var e in this.elements)this.elements.hasOwnProperty(e)&&delete this.elements[e]}};var Hy=function(e,t){this.el=e,this.onReady=t};Hy.prototype.place=function(e){return e.appendChild(this.el),this.el},Hy.prototype.destroy=function(){for(var e in this)this.hasOwnProperty(e)&&(this[e]=null)};var Xy=function(e,t){for(var n in e)e.hasOwnProperty(n)&&(this[n]=e[n]);this.el=e.el||new Image,this.el.style.position="absolute",this.el.alt="Background",this.el.complete?window.requestAnimationFrame(t):this.el.addEventListener("load",function(){t()}.bind(this)),e.url&&(this.el.src=e.url),Hy.apply(this,[this.el,t])};(Xy.prototype=Object.create(Hy.prototype)).constructor=Xy;var Wy={getNew:function(e,t){return new Xy(e,t)}},Yy=n("../node_modules/OblioUtils/utils/videoPlayerYT.js"),qy=n("../node_modules/OblioUtils/utils/videoPlayerHTML5.js"),Qy=function(e,t,n){for(var i in e)e.hasOwnProperty(i)&&(this[i]=e[i]);var r={videoSrc:String(this.videoSrc),autoplay:1,loop:1,controls:!1};if("youTube"===this.type)this.playerObj=new Yy.VideoPlayerYT(wrapper,r);else{if("htmlVideo"!==this.type)return!1;this.playerObj=new qy.VideoPlayerHTML5(wrapper,r),this.playerObj.player.width="auto",this.playerObj.player.height="auto",this.playerObj.player.style.position="absolute",this.playerObj.player.style.width="auto",this.playerObj.player.style.height="auto"}this.el=this.playerObj.player,this.playerObj.onPlaying=function(){}.bind(this),t.call(this),this.el.play(),Hy.apply(this,[this.el,t])};(Qy.prototype=Object.create(Hy.prototype)).constructor=Qy;var Jy={getNew:function(e,t){return new Qy(e,t)}},Zy=function(e,t,n,i,r,o){this.loaded=void 0===t||t,this.elements={outer:r||document.createElement("div"),inner:o||document.createElement("div"),resizeContainer:n||!1},this.container=this.elements.outer,e&&Ky.call(this,e),this.elements.outer.appendChild(this.elements.inner)};function Ky(e){if(!1!==e.img){this.obj&&this.obj.destroy(),this.obj=e,this.elements.backplate=e.el,this.settings={h:e.h,v:e.v,ratio:this._getRatio(),mode:e.mode||"cover"};for(var t=this.elements.inner;t.lastChild;)t.removeChild(t.lastChild);this.elements.backplate=e.el,this.elements.inner.appendChild(this.elements.backplate),this.onScreen=!0,this.loaded||(this.elements.backplate.classList.add("loading"),this.elements.backplate.addEventListener("load",this._onImageLoaded.bind(this)))}}Zy.prototype._onImageLoaded=function(e){this.resize(),window.setTimeout(this.resize.bind(this),100),this.onScreen&&!this.loaded&&TweenLite.fromTo(this.elements.backplate,.5,{alpha:0},{alpha:1})},Zy.prototype._getRatio=function(){return this.elements.backplate?this.elements.backplate.height/this.elements.backplate.width:1},Zy.prototype.destroy=function(){for(var e in this.elements)this.elements.hasOwnProperty(e)&&delete this.elements[e];this.elements=null,this.obj&&this.obj.destroy()},Zy.prototype.resize=function(e,t){if(this.obj){var n,i,r;e&&t||(e=(n=this.elements.resizeContainer?this.elements.resizeContainer.getBoundingClientRect():this.container.getBoundingClientRect()).width,t=n.height),this.obj.dimensions?(i=this.obj.dimensions.width,r=this.obj.dimensions.height):(i=this.elements.backplate?this.elements.backplate.offsetWidth:0,r=this.elements.backplate?this.elements.backplate.offsetHeight:0);var o=i,s=r,a="contain"===this.settings.mode?Math.min(e/o,t/s):Math.max(e/o,t/s),l=o*a,u=s*a,c=e-l+0- -0,d=t-u+0- -0;this.elements.backplate&&(this.elements.backplate.style.top=(d*this.obj.v-0).toFixed()+"px",this.elements.backplate.style.left=(c*this.obj.h-0).toFixed()+"px",this.elements.backplate.style.width=l+"px",this.elements.backplate.style.height=u+"px")}},Zy.prototype.changeImage=Ky;var $y={getNew:function(e,t,n,i,r,o){return new Zy(e,t,n,i,r,o)}},ex=function(e){this.removeFunctions=[],this.slide_ids={};var t=e.el||e;this.close_fn=e.close_fn||!1,this.axis=e.axis||"x",this.duration=e.duration||.75,this.rotate=e.rotate||!1,this.rotation_delay=e.rotation_delay||3e3,this.activeSlides=[],this.enabled=!0,this.dragPosition={},this.dragOffset={},this.state={},this.slides=[],this.nextSlideshow=e.nextSlideshow||!1,this.previousSlideshow=e.previousSlideshow||!1,this.elements={wrapper:t,resizeContainer:e.resizeContainer||document.body,paginator_container:e.paginator_container||t},this.slideDimensions={w:this.elements.resizeContainer.offsetWidth,h:this.elements.resizeContainer.offsetHeight};var n=document.getElementsByClassName("prev_slide");n.length>0?this.elements.prev=n[0]:(this.elements.prev=document.createElement("a"),this.elements.prev.href="#",this.elements.prev.className="prev_slide",this.elements.paginator_container.appendChild(this.elements.prev));var i=document.getElementsByClassName("next_slide");i.length>0?this.elements.next=i[0]:(this.elements.next=document.createElement("a"),this.elements.next.href="#",this.elements.next.className="next_slide",this.elements.paginator_container.appendChild(this.elements.next));var r=e.fullBleed||e.ignoreHeader?0:oblio.settings.headerHeight,o=e.fullBleed||e.ignoreFooter?0:oblio.settings.footerHeight;this.settings={headerHeight:r,footerHeight:o,mode:e.mode||"cover"},this.animationState={},this.buildSlideshow(e.slides)};function tx(e,t,n){e.addEventListener(t,n),this.removeFunctions.push(function(){return e.removeEventListener(t,n)})}function nx(){for(var e=this.removeFunctions.pop();e;)e(),e=this.removeFunctions.pop()}function ix(e){this.dragging||(this.elements.wrapper.className=this.elements.wrapper.className+" dragging"),e.preventDefault(),this.startDrag(e.pageX,e.pageY)}function rx(e){e.preventDefault(),this.drag(e.pageX,e.pageY)}function ox(e){e.preventDefault(),this.elements.wrapper.className=this.elements.wrapper.className.replace(/ dragging/g,""),this.stopDrag(e.pageX,e.pageY)}function sx(e){if(this.enabled){e.preventDefault();var t=e.touches[0];this.startDrag(t.pageX,t.pageY)}}function ax(e){if(this.enabled){e.preventDefault();var t=e.touches[0];this.drag(t.pageX,t.pageY)}}function lx(e){if(this.enabled){e.preventDefault();var t=e.changedTouches[0];this.stopDrag(t.pageX,t.pageY)}}function ux(){}function cx(e){}function dx(){var e=this.animationState.currVelocity>0?1:-1,t=Math.min(Math.abs(this.animationState.currVelocity),Math.abs(this.animationState.currSlideX)/5)*e,n=[{slide:this.animationState.lastSlide,targetLeft:this.animationState.lastSlideX},{slide:this.animationState.currSlide,targetLeft:this.animationState.currSlideX}];this.animationState.lastSlideX+=t,this.animationState.currSlideX+=t,this.animationState.currVelocity*=1.25,this.animationState.otherSlide&&n.push({slide:this.animationState.otherSlide,targetLeft:this.animationState.otherSlideX}),this.positionSlides(n),-1===e&&this.animationState.currSlideX>1||1===e&&this.animationState.currSlideX<-1?window.requestAnimationFrame(dx.bind(this)):0===this.animationState.currSlideX?(this.animationState.otherSlide=null,this.state.animating=!1,this.onTransitionComplete(this)):(this.animationState.currSlideX=0,this.animationState.currVelocity=0,window.requestAnimationFrame(dx.bind(this)))}function hx(e){var t=this.slides[e],n=t.elements.outer;n.className.match("active")||(n.className=n.className+" active",t.needsUpdate&&(t.resize(this.slideDimensions.w,this.slideDimensions.h),t.needsUpdate=!1),t.obj.el.play&&t.obj.el.play()),-1===this.activeSlides.indexOf(e)&&this.activeSlides.push(e)}ex.prototype._go=function(e){this.state.animating=!0,e&&(this.animationState.currSlideX=0,this.animationState.lastSlideX=this.animationState.currSlide.elements.outer.offsetWidth),window.requestAnimationFrame(dx.bind(this))},ex.prototype._updateState=function(){this.state.previous_index=this.state.current_index-1,this.state.previous_index<0&&(this.state.previous_index=this.slides.length-1),this.state.next_index=this.state.current_index+1,this.state.next_index>this.slides.length-1&&(this.state.next_index=0),oblio.settings.windowDimensions.width,oblio.settings.windowDimensions.height,this.slides[this.state.current_index].resize(),this.slides[this.state.previous_index].resize(),this.slides[this.state.next_index].resize()},ex.prototype.buildSlideshow=function(e){var t,n,i,r=document.createDocumentFragment();for(i=0;i<e.length;i++)if(!1!==e[i].visible){switch(e[i].type){case"image":t=Wy.getNew(e[i],ux);break;case"htmlVideo":case"youtube":document.createElement("video").canPlayType?t=Jy.getNew(e[i],cx):(e[i].url=e[i].fallback,t=Wy.getNew(e[i],ux));break;default:t=Wy.getNew(e[i],ux.bind(this))}(n=$y.getNew(t,!1,this.elements.wrapper,this.settings.mode)).elements.outer.className=n.elements.outer.className+" slide",n.elements.inner.className=n.elements.inner.className+" backplate_wrapper",t.el.className=t.el.className+" backplate",r.appendChild(n.elements.outer),this.slides.push(n)}this.elements.wrapper.appendChild(r),e.length<=1&&(this.elements.prev.parentNode.removeChild(this.elements.prev),this.elements.next.parentNode.removeChild(this.elements.next)),this.state={current_index:0,last_index:this.slides.length-1,direction:"left",animating:!1},this.state.previous_index=this.state.last_index,this.state.next_index=Math.min(1,this.state.previous_index),this.elements.wrapper.style.top=this.settings.headerHeight+"px",this.close_fn&&(this.close=close_fn,this.elements.close_btn=document.createElement("a"),this.elements.close_btn.href="#",this.elements.close_btn.className="close",this.elements.wrapper.appendChild(this.elements.close_btn),this.elements.close_btn.addEventListener("click",this.close,!1)),this.slides.length>0&&(this.slides[this.state.current_index].onScreen=!0,hx.call(this,this.state.current_index),this.positionSlides([{slide:this.slides[this.state.current_index],targetLeft:0},{slide:this.slides[this.state.last_index],targetLeft:-this.slides[this.state.last_index].elements.outer.offsetWidth}])),this.rotate&&(this.timer&&window.clearInterval(this.timer),this.timer=window.setInterval(this.next.bind(this),this.rotation_delay)),this.addEventHandlers(),this.resize()},ex.prototype.reset=function(e){for(var t=this.slides.length-1;t>=0;t--)this.slides[t].video_player&&this.slides[t].video_player.reset();this.state.current_index=0,this.state.last_index=this.slides.length-1,this.state.previous_index=this.state.last_index,this.state.next_index=Math.min(1,this.state.previous_index),e&&this._go("instant"),this.resize()},ex.prototype.keyHandler=function(e){switch(e.keyCode){case 37:if(this.state.animating)return;this.dragPosition.x=0,this.dragOffset.x=0,this.animationState.currVelocity=1,this.slides[this.state.next_index].elements.outer.style.left="4000px",hx.call(this,this.state.previous_index),this.previous();break;case 39:if(this.state.animating)return;this.dragPosition.x=0,this.dragOffset.x=0,this.animationState.currVelocity=-1,this.slides[this.state.next_index].elements.outer.style.left="4000px",hx.call(this,this.state.next_index),this.next()}},ex.prototype.clickHandler=function(e){var t=e.target;if(t.matches("a")||t.matches("button"))if(e.preventDefault(),t.classList.contains("prev_slide")){if(this.state.animating)return;this.dragPosition.x=0,this.dragOffset.x=0,this.animationState.currVelocity=1,this.slides[this.state.next_index].elements.outer.style.left="4000px",hx.call(this,this.state.previous_index),this.previous()}else if(t.classList.contains("next_slide")){if(this.state.animating)return;this.dragPosition.x=0,this.dragOffset.x=0,this.animationState.currVelocity=-1,this.slides[this.state.next_index].elements.outer.style.left="4000px",hx.call(this,this.state.next_index),this.next()}},ex.prototype.next=function(){this.state.animating||(this.nextSlideshow&&this.state.current_index+1>=this.slides.length?this.nextSlideshow():(this.animationState.currSlide=this.slides[this.state.next_index],this.animationState.lastSlide=this.slides[this.state.current_index],this.animationState.lastSlideX=this.dragPosition.x-this.dragOffset.x,this.animationState.currSlideX=this.dragPosition.x-this.dragOffset.x+this.animationState.currSlide.elements.outer.offsetWidth,this.state.last_index=this.state.current_index,this.state.current_index+1<this.slides.length?this.state.current_index=this.state.current_index+1:this.state.current_index=0,this._updateState(),this.state.direction="left",this._go()))},ex.prototype.previous=function(){this.state.animating||(this.previousSlideshow&&this.state.current_index-1<0?this.previousSlideshow():(this.animationState.lastSlide=this.slides[this.state.current_index],this.animationState.currSlide=this.slides[this.state.previous_index],this.animationState.lastSlideX=this.dragPosition.x-this.dragOffset.x,this.animationState.currSlideX=this.dragPosition.x-this.dragOffset.x-this.animationState.currSlide.elements.outer.offsetWidth,this.state.last_index=this.state.current_index,this.state.current_index-1>=0?this.state.current_index=this.state.current_index-1:this.state.current_index=this.slides.length-1,this._updateState(),this.state.direction="right",this._go()))},ex.prototype.goToId=function(e,t){if(!this.state.animating){var n=this.slide_ids[e];this.state.direction="left",this.state.last_index=this.state.current_index,this.state.current_index=n,this._updateState(),this._go(t)}},ex.prototype.goToIndex=function(e){this.state.animating||(this.state.direction=e>this.state.current_index?"left":"right","left"===this.state.direction?(this.animationState.currVelocity=-1,this.animationState.lastSlide=this.slides[this.state.current_index],this.animationState.lastSlideX=0,this.animationState.currSlide=this.slides[e],this.animationState.currSlideX=this.animationState.lastSlide.elements.outer.offsetWidth):"right"===this.state.direction&&(this.animationState.currVelocity=1,this.animationState.lastSlide=this.slides[this.state.current_index],this.animationState.lastSlideX=0,this.animationState.currSlide=this.slides[e],this.animationState.currSlideX=-this.animationState.lastSlide.elements.outer.offsetWidth),hx.call(this,this.state.current_index),this.state.last_index=this.state.current_index,this.state.current_index=e,this._updateState(),this._go())},ex.prototype.resize=function(e,t){if(0!==this.slides.length){var n=e,i=t,r=this.elements.wrapper,o=this.slides[this.state.current_index];void 0!==n&&void 0!==i||(this.elements.resizeContainer?(n=this.elements.resizeContainer.offsetWidth,i=this.elements.resizeContainer.offsetHeight):(n=oblio.settings.windowDimensions.width,i=oblio.settings.windowDimensions.height-(this.settings.headerHeight+this.settings.footerHeight))),this.slideDimensions={w:n,h:i},r.style.height=i+"px";for(var s=this.slides.length-1;s>=0;s--)s!==this.state.current_index&&(this.slides[s].needsUpdate=!0);o.resize(n,i)}},ex.prototype.onTransitionComplete=function(){for(var e;this.activeSlides.length;)(e=this.activeSlides.pop())!==this.state.current_index&&(this.slides[e].elements.outer.className=this.slides[e].elements.outer.className.replace(" active",""),this.slides[e].obj.el.pause&&this.slides[e].obj.el.pause());this.activeSlides.push(this.state.current_index)},ex.prototype.enter=function(){this.rotate&&(this.timer&&window.clearInterval(this.timer),this.timer=window.setInterval(this.next.bind(this),this.rotation_delay))},ex.prototype.exit=function(){this.timer&&window.clearInterval(this.timer)},ex.prototype.addEventHandlers=function(){this.slides.length>1?(tx.call(this,this.elements.paginator_container,"click",this.clickHandler.bind(this)),tx.call(this,this.elements.wrapper,"mousedown",ix.bind(this)),tx.call(this,this.elements.wrapper,"mousemove",rx.bind(this)),tx.call(this,window,"mouseup",ox.bind(this)),tx.call(this,this.elements.wrapper,"touchstart",sx.bind(this)),tx.call(this,this.elements.wrapper,"touchmove",ax.bind(this)),tx.call(this,this.elements.wrapper,"touchend",lx.bind(this)),this.elements.wrapper.addEventListener("touchend",lx.bind(this))):this.elements.wrapper.className=this.elements.wrapper.className+" disabled"},ex.prototype.mouseDown=ix,ex.prototype.mouseMove=rx,ex.prototype.mouseUp=ox,ex.prototype.touchStart=sx,ex.prototype.touchMove=ax,ex.prototype.touchEnd=lx,ex.prototype.startDrag=function(e,t){if(this.dragging||this.state.animating||!this.enabled)return!1;this.dragging=!0,this.moved=!1,this.dragOffset.x=this.dragPosition.x=e,this.dragOffset.y=this.dragPosition.y=t,this.drag(e,t),hx.call(this,this.state.previous_index),hx.call(this,this.state.next_index)},ex.prototype.drag=function(e,t){if(!this.dragging||!this.enabled)return!1;this.dragPosition.lastX&&(this.moved=!0),this.dragPosition.x=e,this.dragPosition.y=t;var n=this.dragPosition.x-this.dragOffset.x,i=this.slides[this.state.previous_index],r=this.slides[this.state.current_index],o=this.slides[this.state.next_index];this.dragPosition.velocity=this.dragPosition.x-this.dragPosition.lastX,this.dragPosition.lastX=this.dragPosition.x,this.positionSlides([{slide:r,targetLeft:n},{slide:i,targetLeft:n-r.elements.outer.offsetWidth},{slide:o,targetLeft:n+r.elements.outer.offsetWidth}])},ex.prototype.stopDrag=function(e,t){if(!this.dragging||!this.enabled)return!1;if(this.dragPosition.lastX=null,!this.moved)return this.dragging=!1,!1;this.dragPosition.x=e,this.dragPosition.y=t,this.dragging=!1;var n,i=this.dragPosition.x-this.dragOffset.x;if(this.dragPosition.velocity,this.animationState={currX:this.dragPosition.x,currVelocity:Math.abs(this.dragPosition.velocity)<5?i/Math.abs(i):this.dragPosition.velocity},i>20)this.dragPosition.velocity<-5?(this.animationState.otherSlide=this.slides[this.state.previous_index],this.animationState.otherSlideX=-this.slides[this.state.current_index].elements.outer.offsetWidth,n="next"):n="previous";else{if(!(i<-20))return this.animationState.currVelocity=i>0?-1:1,this.animationState.currSlide=this.slides[this.state.current_index],this.animationState.lastSlide=i>0?this.slides[this.state.previous_index]:this.slides[this.state.next_index],this.animationState.lastSlideX=this.dragPosition.x-this.dragOffset.x+this.animationState.currSlide.elements.outer.offsetWidth,this.animationState.currSlideX=this.dragPosition.x-this.dragOffset.x,void window.requestAnimationFrame(dx.bind(this));this.dragPosition.velocity>5?(this.animationState.otherSlide=this.slides[this.state.next_index],this.animationState.otherSlideX=this.slides[this.state.current_index].elements.outer.offsetWidth,n="previous"):n="next"}"next"===n?this.next():"previous"===n&&this.previous()},ex.prototype.positionSlides=function(e){for(var t=e.length-1;t>=0;t--)e[t].slide.elements.outer.style.left=e[t].targetLeft.toFixed(2)+"px"},ex.prototype.destroy=function(){nx.call(this);for(var e=0;e<this.slides.length;e++)this.slides[e].destroy();for(var t in this.elements)this.elements.hasOwnProperty(t)&&delete this.elements[t];for(var n in this)this.hasOwnProperty(n)&&delete this[n]};var px={getNew:function(e){return new ex(e)}};n("../node_modules/q/q.js");function fx(e){this.images=e.images}function mx(){var e=this,t={el:this.elements.wrapper,slides:this.images,fullBleed:!0,mode:"contain",resizeContainer:this.elements.wrapper,paginator_container:this.elements.wrapper.parentElement};this.resize(),window.setTimeout(function(){return e.slideshow=px.getNew(t)},100)}function _x(){}fx.prototype={init:function(e){var t=this;return new Promise(function(n,i){t.elements={wrapper:e.querySelector(".wrapper")},mx.call(t),n()})},resize:function(){var e=this.elements.wrapper.offsetWidth,t=.70875*e;this.elements.wrapper.style.height="".concat(t,"px"),this.slideshow&&this.slideshow.resize(e,t)},destroy:function(){var e;for(e in this.slideshow.destroy(),this.elements)this.elements.hasOwnProperty(e)&&delete this.elements[e];for(e in this)this.hasOwnProperty(e)&&delete this[e]}},_x.prototype={init:function(e){var t=this;return new Promise(function(n,i){t.elements={wrapper:e,poster:e.querySelector(".poster img"),role:e.querySelector(".role"),icon:e.querySelector(".icon"),firstName:e.querySelector(".first"),lastName:e.querySelector(".last")},t.elements.firstName.innerHTML=t.elements.firstName.textContent.split("").map(function(e){return"<span>".concat(e,"</span>")}).join(""),t.elements.lastName.innerHTML=t.elements.lastName.textContent.split("").map(function(e){return"<span>".concat(e,"</span>")}).join("");t.elements.poster.addEventListener("load",function e(){n(),t.elements.poster.removeEventListener("load",e)}),t.elements.poster.setAttribute("src",t.elements.poster.getAttribute("data-src"))})},show:function(){var e=new a({paused:!0,onComplete:function(){}});this.elements.wrapper.style.opacity=1,e.fromTo(this.elements.poster.parentElement,.55,{y:"25%",alpha:0},{y:"0%",alpha:1,ease:Power1.easeIn},0),e.addLabel("name","-=0.5");for(var t=[].slice.call(this.elements.firstName.querySelectorAll("span")),n=[].slice.call(this.elements.lastName.querySelectorAll("span")),i=0,r=0;r<Math.max(t.length,n.length);r++){var o=t[r],l=n[r];o&&e.fromTo(o,.5,{y:"30%",alpha:0},{y:"0%",alpha:1,ease:s.c.easeOut},"name+=".concat(i)),l&&e.fromTo(l,.5,{y:"30%",alpha:0},{y:"0%",alpha:1,ease:s.c.easeOut},"name+=".concat(i+.25)),i+=.05}e.fromTo(this.elements.icon,.75,{y:"-200%",alpha:0},{y:"0%",alpha:1,ease:Power4.easeOut},"name+=".concat(.85*i)),e.fromTo(this.elements.role,.75,{y:"100%",alpha:0},{y:"0%",alpha:1,ease:s.d.easeInOut},"name+=".concat(.85*i)),e.play()},update:function(e,t){var n=.25*t;s.h.set(this.elements.role,{y:"".concat(-e*n,"px")}),n*=1.5,s.h.set(this.elements.lastName,{y:"".concat(-e*n,"px")}),n*=1.5,s.h.set(this.elements.firstName,{y:"".concat(-e*n,"px")}),n*=1.5,s.h.set(this.elements.icon,{y:"".concat(-e*n,"px")})},destroy:function(){}};var gx,vx,yx={},xx=Ug.getInstance(),bx=[],wx=!1,jx=0,Sx=0;function Ax(){}function Mx(e){var t=this,n=U(e.target,".next_module");n&&(y.playFx("SX_KO_Click_Confirm_Simple"),Px.call(this).then(function(){var e=n.getAttribute("data-link");y.playFx("SX_KO_ConfirmClick_CharacterDetail_noMX"),xx.playMagnifyingGlassTransition(e).then(function(){return Lx.call(t,e)})}))}function Tx(){return new Promise(function(e,t){""!==yx.modules_wrapper.innerHTML?(Px().then(function(){yx.modules_wrapper.innerHTML="",yx.wrapper.style.display="none",e(!0)}),s.h.to(yx.back_button_wrapper,.5,{alpha:0})):e(!1)})}function Px(){return new Promise(function(e,t){var n=new a({paused:!0});n.to(yx.modules_wrapper,.75,{alpha:0,ease:s.d.easeInOut},0),n.fromTo(yx.modules_wrapper,.75,{y:"0%"},{y:"10%",ease:s.d.easeIn,onComplete:function(){yx.modules_wrapper.scrollTop=0,yx.modules_wrapper.style.display="none",yx.modules_wrapper.style.opacity=1,s.h.set(yx.modules_wrapper,{y:"0%"}),function(){for(var e=bx.pop();void 0!==e;){for(var t in e.script&&e.script.destroy(),e)delete e[t];e=bx.pop()}}()}},0),n.call(e,null,null,"-=0.25"),n.play()})}function Lx(e){return new Promise(function(t,n){if(bx.length>0)Px().then(function(){return Lx(e)});else{s.h.to(yx.back_button_wrapper,.5,{delay:1.5,alpha:1});var i=(vx.indexOf(e)+1)%vx.length,r=gx[e],o=gx[vx[i]],a="";bx=r.nodes.filter(function(e){return e.visible}).map(function(e){return a+=oblio.templates["".concat(e.type,"_module")].render(e),function(e){var t={hidden:!0};if(oblio.app.dataSrc.widgets["".concat(e.type,"_module")].jsPath)switch(e.type){case"gallery":t.script=new fx({images:e.images});break;case"gif":t.script=new Vy;break;case"poster":t.script=new _x}return t}(e)},""),o&&(o.link=vx[i],o.type="next",a+=oblio.templates.next_module.render(o),bx.push({type:"next",hidden:!0})),yx.modules_wrapper.innerHTML=a;var l=function(){u===bx.length&&(yx.wrapper.style.cursor="default",yx.wrapper.style.display="block",yx.modules_wrapper.style.display="block",yx.modules_wrapper.scrollTop=0,window.setTimeout(function(){Cx(),wx=!0,t()},100))},u=0;bx=[].slice.call(yx.modules_wrapper.querySelectorAll(".module")).map(function(e,t){return bx[t].el=e,bx[t].script?bx[t].script.init(e).then(function(){u++,l()}):u++,bx[t]}),l(),window.setTimeout(function(){u<bx.length&&(yx.wrapper.style.display="block",yx.wrapper.style.cursor="wait")},750)}})}function Ex(){wx=!0}function Ox(e){e.script&&e.script.hide?e.script.hide():e.el.style.opacity=0,e.hidden=!0}function Ix(e){e.script&&e.script.show?e.script.show():(s.h.fromTo(e.el,.75,{y:"25%"},{y:"0%",ease:s.d.easeInOut}),s.h.fromTo(e.el,.75,{alpha:0},{alpha:1,ease:Power2.easeInOut})),e.hidden=!1}function Cx(){Sx=window.innerHeight;for(var e=0;e<bx.length;e++){var t=bx[e];t.script&&t.script.resize&&t.script.resize(),t.top=t.el.offsetTop,t.height=t.el.offsetHeight}}Ax.prototype={init:function(){gx=oblio.app.dataSrc.widgets.CharacterDetails.data.people,vx=oblio.app.dataSrc.widgets.CharacterDetails.data.order,yx.wrapper=document.createElement("div"),yx.wrapper.id="characterDetails",yx.wrapper.innerHTML=oblio.templates.CharacterDetails.render(oblio.app.dataSrc.widgets.CharacterDetails.data),yx.wrapper.addEventListener("click",Mx.bind(this)),document.body.appendChild(yx.wrapper),yx.modules_wrapper=document.getElementById("character_modules"),yx.modules_wrapper.addEventListener("scroll",Ex),s.h.set(yx.modules_wrapper,{y:"0%"}),yx.back_button=document.getElementById("back_to_home"),yx.back_button_wrapper=document.getElementById("back_button_wrapper"),yx.back_button.addEventListener("click",function(e){e.preventDefault(),y.playFx("SX_KO_Click_BackToHome_withWipe"),Tx().then(function(){oblio.app.family_tree.zoomIn(),oblio.app.family_tree.bringIn().then(function(){return oblio.sections.Home.firstShow()})})})},show:Lx,hide:Tx,resize:Cx,updateScroll:function(){if(wx){jx=yx.modules_wrapper.scrollTop;for(var e=0;e<bx.length;e++){var t=bx[e];t.type,t.hidden?jx>t.top-Sx&&Ix(t):(t.script&&t.script.update&&t.script.update(jx/(t.top+t.height),t.height),jx<t.top-Sx&&Ox(t))}wx=!1}}};var Fx=X();function Nx(e){var t=this;this.currentIndex=0,this.active=!1,this.duration=5e3,this.elements={touts:[].slice.call(e.querySelectorAll(".wrapper")),dots:[].slice.call(e.querySelectorAll(".feature_dots li")),paginator:e.querySelector(".feature_dots")},this.elements.paginator.addEventListener("click",function(e){for(var n=e.target,i=0;n=n.previousElementSibling;i++);i!==t.currentIndex&&(t.currentIndex=i,kx.call(t))}),e.addEventListener("click",function(e){switch(e.target.className){case"shop":break;case"commentary":oblio.app.family_tree.disablePointer(),TweenLite.to("#download_overlay",.5,{autoAlpha:1}),e.preventDefault();break;case"accolades":Fx.changeSection("Accolades"),e.preventDefault()}})}function kx(){var e=this;this.elements.touts.forEach(function(t,n){t.classList.remove("active"),e.elements.dots[n].classList.remove("active")}),this.t=Date.now()+this.duration,this.elements.touts[this.currentIndex].classList.add("active"),this.elements.dots[this.currentIndex].classList.add("active")}function Dx(){var e=this;Date.now()-this.t>this.duration&&(Rx.call(this),kx.call(this)),this.active&&window.requestAnimationFrame(function(){return Dx.call(e)})}function Rx(){this.currentIndex=(this.currentIndex+1)%this.elements.touts.length,kx.call(this)}Nx.prototype={start:function(){this.active||(this.t=Date.now(),this.active=!0,Dx.call(this),kx.call(this))},stop:function(){this.active=!1},destroy:function(){}};var zx,Ux,Bx,Gx,Vx,Hx,Xx="Home",Wx=0,Yx=X(),qx=Ug.getInstance(),Qx=z(),Jx=0,Zx=0,Kx=0,$x=0,eb=0,tb=0,nb=0,ib=0,rb=0,ob=new a({paused:!0}),sb=new a({paused:!0}),ab=!0,lb=!0,ub=!0,cb=!0,db=!1;function hb(){db=!0,oblio.app.mainMenu.showTT()}function pb(){db=!1,oblio.app.mainMenu.hideTT()}function fb(){this.elements.updates&&(ab=!0,this.elements.updates.classList.remove("disabled"),s.h.killTweensOf(this.elements.updates),s.h.to(this.elements.updates,.5,{alpha:1,ease:s.d.easeInOut}),window.innerWidth<=500&&s.h.to("#mobile_gradient",.5,{alpha:1,ease:s.d.easeInOut}))}function mb(){this.elements.updates&&(ab=!1,this.elements.updates.classList.add("disabled"),s.h.killTweensOf(this.elements.updates),s.h.to(this.elements.updates,.5,{alpha:0,ease:s.d.easeInOut}),s.h.to("#mobile_gradient",.5,{alpha:0,ease:s.d.easeInOut}))}function _b(){this.elements.features&&(lb=!0,s.h.killTweensOf(this.elements.features),s.h.to(this.elements.features,.5,{alpha:1,ease:s.d.easeInOut}))}function gb(){this.elements.features&&(lb=!1,s.h.killTweensOf(this.elements.features),s.h.to(this.elements.features,.5,{alpha:0,ease:s.d.easeInOut}))}function vb(){this.elements.arButton&&(ub=!0,s.h.killTweensOf(this.elements.arButton),s.h.to(this.elements.arButton,.5,{alpha:1,ease:s.d.easeInOut}))}function yb(){this.elements.arButton&&(ub=!1,s.h.killTweensOf(this.elements.arButton),s.h.to(this.elements.arButton,.5,{alpha:0,ease:s.d.easeInOut}))}function xb(){this.elements.scroll_for_more&&(cb=!0,s.h.killTweensOf(this.elements.scroll_for_more),s.h.to(this.elements.scroll_for_more,.5,{alpha:1,ease:s.d.easeInOut}))}function bb(){this.elements.scroll_for_more&&(cb=!1,s.h.killTweensOf(this.elements.scroll_for_more),s.h.to(this.elements.scroll_for_more,.5,{alpha:0,ease:s.d.easeInOut}))}function wb(e){if(e.touches&&!this.touch)return this.touch=!0,this.elements.clicker.removeEventListener("click",Hx),this.elements.clicker.removeEventListener("touchstart",Hx),void this.elements.clicker.addEventListener("touchend",Hx);oblio.app.family_tree.handleClick(this.touch)}function jb(){var e=this;return new Promise(function(t,n){ob.clear(!0),ob.eventCallback("onComplete",function(){t()});var i=0,r=Power2.easeIn,o=.75*Kx;tb>0&&ob.to(e.elements.updates,.5,{y:"".concat(o/tb*100-100,"%"),alpha:0,ease:r},i),rb>0&&ob.to(e.elements.scroll_for_more,.5,{y:"".concat(o/rb*100-100,"%"),alpha:0,ease:r},i),nb>0&&ob.to(e.elements.features,.5,{y:"".concat(o/nb*100-100,"%"),alpha:0,ease:r},i),ib>0&&ob.to(e.elements.arButton,.5,{y:"".concat(o/ib*100-100,"%"),alpha:0,ease:r},i),i+=.075,e.elements.releasedate&&ob.fromTo(e.elements.releasedate,.5,{y:"0%",alpha:1},{y:"".concat(o/Kx*100,"%"),alpha:0,ease:r},i),i+=.075,e.elements.gettickets&&ob.fromTo(e.elements.gettickets,.5,{y:"0%",alpha:1},{y:"".concat(o/Kx*100,"%"),alpha:0,ease:r},i),i+=.075,e.elements.divider&&ob.fromTo(e.elements.divider,.5,{y:"0%",alpha:1},{y:"".concat(o/$x*100,"%"),alpha:0,ease:r},i),i+=.075,e.elements.tt&&ob.fromTo(e.elements.tt,.5,{y:"0%",alpha:1},{y:"".concat(o/eb*100,"%"),alpha:0,ease:r},i),i+=.075,e.elements.tagline&&ob.fromTo(e.elements.tagline,.5,{y:"0%",alpha:1},{y:"".concat(o/Zx*100,"%"),alpha:0,ease:r},i),i+=.075,ob.play()})}function Sb(){var e=this;return new Promise(function(t,n){e.elements.sectionWrapper.style.opacity=1,sb.clear(!0),sb.eventCallback("onComplete",function(){t()});var i=.5,r=Power2.easeOut,o=.75*Kx;e.elements.tagline&&sb.fromTo(e.elements.tagline,.75,{y:"".concat(o/Zx*100,"%"),alpha:0},{y:"0%",alpha:1,ease:r},i),i+=.125,e.elements.tt&&sb.fromTo(e.elements.tt,.75,{y:"".concat(o/eb*100,"%"),alpha:0},{y:"0%",alpha:1,ease:r},i),i+=.125,e.elements.divider&&sb.fromTo(e.elements.divider,.75,{y:"".concat(o/$x*100,"%"),alpha:0},{y:"0%",alpha:1,ease:r},i),i+=.125,e.elements.releasedate&&sb.fromTo(e.elements.releasedate,.75,{y:"".concat(o/Kx*100,"%"),alpha:0},{y:"0%",alpha:1,ease:r},i),i+=.75,e.elements.gettickets&&sb.fromTo(e.elements.gettickets,.75,{y:"".concat(o/Kx*100,"%"),alpha:0},{y:"0%",alpha:1,ease:r},i),i+=.75,0===Wx&&(tb>0&&(window.innerWidth<=500&&sb.to("#mobile_gradient",.5,{alpha:1,ease:s.d.easeInOut}),sb.fromTo(e.elements.updates,.75,{y:"".concat(o/tb*100-100,"%"),alpha:0},{y:"-100%",alpha:1,ease:r},i)),nb>0&&(window.innerWidth>500?sb.fromTo(e.elements.features,.75,{y:"".concat(o/nb*100-100,"%"),alpha:0},{y:"-100%",alpha:1,ease:r},i):sb.fromTo(e.elements.features,.75,{y:"".concat(o/nb*100,"%"),alpha:0},{y:"0%",alpha:1,ease:r},i)),ib>0&&sb.fromTo(e.elements.arButton,.75,{y:"".concat(o/ib*100,"%"),alpha:0},{y:"0%",alpha:1,ease:r},i),rb>0&&sb.fromTo(e.elements.scroll_for_more,.75,{y:"".concat(o/rb*100-100,"%"),alpha:0},{y:"-100%",alpha:1,ease:r},i),pb.call(e)),sb.play()})}function Ab(e){jb.call(this),function(e){var t=this;y.playFx("SX_KO_ConfirmClick_CharacterDetail_noMX"),qx.playMagnifyingGlassTransition(e).then(function(){return Vx.show(e)}).then(function(){db||window.setTimeout(function(){return hb.call(t)},1e3)})}(e.name)}var Mb={id:Xx,prepareLoad:function(){var e=[];e.length>0&&Qx.addFiles(Xx,e)},init:function(e){var t=document.getElementById(Xx.toLowerCase());this.elements={sectionWrapper:t,wrapper:t.querySelector(".wrapper"),updates:document.getElementById("updates"),features:document.getElementById("features"),scroll_for_more:t.querySelector("h3.scroll"),divider:t.querySelector(".big_divider"),tt:document.getElementById("home_tt"),releasedate:t.querySelector(".releasedate"),gettickets:t.querySelector(".button_wrapper"),tagline:t.querySelector(".tagline"),clicker:t.querySelector(".clicker")},Vx||(Vx=new Ax).init(),this.touch=!1,Hx=wb.bind(this),this.elements.clicker.addEventListener("click",Hx),this.elements.clicker.addEventListener("touchstart",Hx),this.elements.gettickets.addEventListener("click",function(e){e.preventDefault(),Yx.changeSection("Buy")}),Ux=qx.events.subscribe("faceclick",Ab.bind(this)),e(),Bx=function(){var e="undefined"!=typeof Quotes&&Quotes.getNew(this.elements.sectionWrapper);e&&e.init({wrapper:this.elements.sectionWrapper});return e}(),this.features=new Nx(this.elements.features),this.features.start(),this.initialized=!0,qx.enable()},show:function(e){Bx&&Bx.start(),oblio.app.family_tree.enablePointer(),Gx=window.isMobile?window.outerHeight-window.innerHeight:0,this.resize(),e&&e()},resize:function(){var e=window.isMobile?window.outerHeight:window.innerHeight,t=window.innerWidth;Jx=this.elements.wrapper.offsetHeight,this.elements.tagline&&(Zx=this.elements.tagline.offsetHeight),this.elements.releasedate&&(Kx=this.elements.releasedate.offsetHeight),this.elements.divider&&($x=this.elements.divider.getBoundingClientRect().height),this.elements.tt&&(eb=this.elements.tt.getBoundingClientRect().height),this.elements.scroll_for_more&&(rb=this.elements.scroll_for_more.offsetHeight,this.elements.scroll_for_more.style.top=e-Gx+"px"),this.elements.updates&&(tb=this.elements.updates.offsetHeight,this.elements.updates.style.top=e-Gx+"px"),this.elements.features&&(nb=this.elements.features.offsetHeight,t>500?(this.elements.features.style.top=e-Gx+"px",this.elements.features.style.removeProperty("transform")):(this.elements.features.style.removeProperty("top"),s.h.set(this.elements.features,{y:"0%"}))),this.elements.arButton&&(ib=this.elements.arButton.offsetHeight);var n=Math.max(e,Jx);this.elements.sectionWrapper.style.height="".concat(n,"px"),Vx&&Vx.resize()},destroy:function(){for(var e in this.elements.arButton&&this.elements.arButton.removeEventListener("touchstart",this.viewInARFunction),this.elements)this.elements.hasOwnProperty(e)&&delete this.elements[e];Ux.remove(),this.initialized=!1,this.elements=null},hide:function(e){Vx.hide().then(function(t){t?(oblio.app.family_tree.zoomIn(),oblio.app.family_tree.goOut().then(function(){window.setTimeout(function(){e&&e()},300)})):e&&e()})},closeCharacters:function(){var e=this;Vx.hide().then(function(t){t?(oblio.app.family_tree.zoomIn(),oblio.app.family_tree.bringIn().then(function(){return e.firstShow()})):callback&&callback()})},firstShow:function(){Sb.call(this)},updateScroll:function(e){this.initialized&&(Wx=e,e>0?(ab&&mb.call(this),lb&&gb.call(this),ub&&yb.call(this),cb&&bb.call(this),e>Jx?db||hb.call(this):db&&pb.call(this)):(ab||fb.call(this),lb||_b.call(this),ub||vb.call(this),cb||xb.call(this)),Vx&&Vx.updateScroll())},hideHomeElements:jb},Tb={Buy:yv,Accolades:jv,Videos:Py,Posters:Cy,Gallery:Ry,About:Gy,Home:{getInstance:function(){return zx=zx||Object.assign(Object.create(Qg.prototype),Mb)}}};window.oblio=window.oblio||{},window.oblio.app=oblio.app||{};var Pb,Lb,Eb,Ob,Ib=Et(),Cb=o(null,"Main"),Fb=_t(),Nb=X(),kb=z(),Db=oblio.settings.deeplink,Rb=kt.getInstance(),zb=7,Ub=10,Bb=375,Gb=1600,Vb=1,Hb=0;function Xb(){window.isMobile=Pe,Eb={shell:document.getElementById("shell"),window:window},oblio.settings=oblio.settings||{},oblio.settings.headerHeight=28,oblio.settings.mpaaShown=!1,oblio.settings.footerHeight=46.875,oblio.settings.minHeight=0,oblio.settings.minWidth=0,oblio.settings.useJSONP=!1,oblio.settings.baseUrl=window.location.origin+window.location.pathname,oblio.sections={},document.documentElement.classList.add("no-touch"),window.addEventListener("touchstart",function e(){document.documentElement.classList.remove("no-touch"),document.documentElement.classList.add("touch"),window.removeEventListener("touchstart",e)},!1),oblio.settings.windowDimensions={width:Eb.shell.offsetWidth,height:Eb.shell.offsetHeight},Nb.verbose=!0,kb.verbose=!0,window.onresize=ew,window.onorientationchange=ew;var e=[{fn:kb.loadJSON,scope:kb,vars:["json/"+oblio.settings.jsonFileName]},{fn:Wb,vars:null}];y.loadFX(),window.setTimeout(function(){return Cb.execute(e)},1e3)}function Wb(){for(var e in Ob=new x,oblio.app.dataSrc.settings)oblio.app.dataSrc.settings.hasOwnProperty(e)&&(oblio.settings[e]=oblio.app.dataSrc.settings[e],oblio.settings[e]);!function(e){oblio.sections={},oblio.app.dataSrc.sections.reduce(function(e,t){return e[t]=Tb[t].getInstance(),e},oblio.sections),e&&e()}(),"#commentary"===window.location.hash&&(oblio.show_commentary=!0),Nb.parseDeepLink(Db),void 0===oblio.sections.videos&&(oblio.app.dataSrc.settings.introTrailer=!1),oblio.app.dataSrc.settings.introTrailer&&"Home"===Nb.currentSection&&(Nb.currentSection="Videos",oblio.sections.videos.introVideo=!0,oblio.sections.videos.defaultVideoIndex=oblio.app.dataSrc.settings.defaultVideoIndex),Nb.loadQueue("main"),"Videos"!==Nb.currentSection&&Nb.loadQueue("Home"),Nb.loadQueue(Nb.currentSection),Nb.forceChange=!0,Nb.changeOrder=["load","section_add_next","section_init_next","section_startup_next",Jb,"section_show_next",$b,"section_remove_prev"],Db=Nb.currentSection;var t=[{fn:Ib.addLoader,scope:Ib,vars:[Ob]},{fn:Nb.load,scope:Nb,vars:null},{fn:Fb.init,scope:Fb,vars:null},{fn:Nb.changeSection,scope:Nb,vars:[Nb.currentSection]},{fn:qb}];ew(),oblio.app.family_tree=Ug.getInstance(),"Videos"!==Nb.currentSection&&oblio.app.family_tree.preload().then(function(){}),Cb.execute(t);var n=[];"Videos"!==Nb.currentSection&&(n=["assets/images/share.jpg",oblio.app.dataSrc.widgets.Gallery.data.images[0].url,oblio.app.dataSrc.widgets.Posters.data.images[0].url]),kb.addFiles("main",n),kb.assetManager=oblio.app.family_tree.getAssetManager()}function Yb(){var e=window.pageYOffset;Hb=e/Vb,oblio.app.family_tree.updateScroll(Hb),"Home"===Nb.currentSection&&oblio.sections.Home.updateScroll(e)}function qb(){oblio.app.dataSrc.widgets[Nb.currentSection].data.hideMenu||oblio.app.mainMenu&&(oblio.app.mainMenu.verbose=!0,oblio.app.mainMenu.show()),oblio.app.footer&&oblio.app.footer.show(),ew(),Nb.changeOrder=[Kb,"section_hide_prev","load","section_add_next","section_init_next","section_startup_next",Zb,"section_shutdown_prev","section_show_next",$b,"section_remove_prev"],"Home"!==Db&&Nb.changeSection(Db);var e=document.getElementById("soundButton");e.classList.remove("off"),e.classList.add("on"),e.addEventListener("click",function(){e.classList.contains("on")?(e.classList.remove("on"),e.classList.add("off"),y.mute(!0)):(e.classList.remove("off"),e.classList.add("on"),y.mute(!1))})}var Qb=0;function Jb(e,t,n){var i,r=this;"Videos"===e?i=function(){return new Promise(function(e,t){e()})}:(oblio.app.family_tree.init(),oblio.app.family_tree.recenter(),"Home"===e?(oblio.app.mainMenu.hideTT(),i=function(){return new Promise(function(e,t){oblio.app.family_tree.bringIn().then(function(){y.playFx("SX_KO_Home_WipeIn_Shing_noMX"),e()})})}):(Qb=1,oblio.app.family_tree.resize(),oblio.app.family_tree.slide(1,!0),i=oblio.app.family_tree.goOut.bind(oblio.app.family_tree)),Rb.registerCallback(Yb)),ew();var o=document.getElementById("loader_wrapper"),a=function(){o.style.opacity=0,i().then(function(){oblio.sections[e].elements.sectionWrapper.style.position="relative","Home"!==e&&oblio.app.mainMenu.showTT(),"Home"===e&&(r.isMobile||oblio.app.family_tree.setInteractive()),n(),oblio.sections[e].firstShow?oblio.sections[e].firstShow():(s.h.fromTo(oblio.sections[e].elements.sectionWrapper,.75,{alpha:0,y:"10%"},{delay:.25,alpha:1,y:"0%",ease:s.d.easeOut}),oblio.sections[e].show())}),window.setTimeout(function(){return o.style.display="none"},500)};"Videos"===e?a():Ob.hide().then(function(){return a()})}function Zb(e,t,n){var i=this,r=document.getElementById("loader_wrapper");if(r.style.opacity=0,window.setTimeout(function(){return r.style.display="none"},500),!oblio.app.family_tree.initialized)return oblio.sections[t].elements.sectionWrapper.style.display="none",void Jb.call(this,e,t,n);var o=oblio.app.dataSrc.sections,l=0;void 0!==oblio.sections[t]&&(0!==(l=o.indexOf(t)<o.indexOf(e)?1:-1)&&(3===Qb&&(l=-1),1===Qb&&(l=1)),Qb+=l,"Home"===e&&(Qb=0));var u=new a({paused:!0,onComplete:function(){oblio.sections[e].elements.sectionWrapper.style.position="relative",("Home"===t||""===t&&"Home"!==e)&&oblio.app.mainMenu.showTT(),"Home"===e&&(i.isMobile||oblio.app.family_tree.setInteractive()),window.setTimeout(function(){return ew()},500),n()}});"Home"===t&&oblio.app.family_tree.hideCursor(),"Home"===e?oblio.app.mainMenu.hideTT():u.call(function(){oblio.app.family_tree.recenter()});var c,d,h=Math.min(.75,document.documentElement.scrollTop/500);switch(u.to(window,h,{scrollTo:{y:0},ease:s.d.easeInOut}),u.addLabel("transition"),l){case 0:c="0%",d="0%";break;case 1:c="-100%",d="100%";break;case-1:c="100%",d="-100%"}"Home"===e&&0!==l&&(l="home",c="100%",d="-100%"),t&&u.to(oblio.sections[t].elements.sectionWrapper,1,{x:c,ease:s.d.easeInOut},"transition"),u.fromTo(oblio.sections[e].elements.sectionWrapper,1,{x:d},{x:"0%",ease:s.d.easeInOut},"transition"),u.call(function(){return oblio.app.family_tree.slide(l)},null,null,"transition"),u.play(),oblio.sections[e].elements.sectionWrapper.style.opacity=1,ew()}function Kb(e,t,n){if(!oblio.app.family_tree.loaded){var i=["assets/images/share.jpg",oblio.app.dataSrc.widgets.Gallery.data.images[0].url,oblio.app.dataSrc.widgets.Posters.data.images[0].url];kb.addFiles(e,i),Nb.loadQueue("Home"),oblio.app.family_tree.preload().then(function(){})}oblio.app.mainMenu?oblio.app.mainMenu.closeMenu().then(function(){return n()}):n()}function $b(e,t,n){oblio.app.mainMenu&&(oblio.app.mainMenu.resize(),oblio.app.mainMenu.show()),n&&n(),ew()}function ew(e,t){Pb=window.isMobile?window.outerHeight:window.innerHeight,Lb=window.innerWidth;var n,i,r=Math.min(Ub,Math.max(zb,(i=zb)+(Ub-i)*(Lb-(n=Bb))/(Gb-n)));if(document.body.style.fontSize=r+"px",Fb.resize(Lb,Pb),Ob&&Ob.resize(),t&&t(),oblio.app.family_tree){document.body.querySelector(".releasedate");var o=Lb>=768?Math.min(89.5*r,.6*Lb):Math.min(89.5*r,.8675*Lb),s=((Lb>=768?8*r:14*r)+.4405594406*o)/(.5*Pb);Pb<500&&(s=.65);var a=.4405594406*o*.75,l=a/(.5*Pb);if("Home"===Nb.currentSection){var u=oblio.app.family_tree.resize(s,l);document.getElementById("home").style.height="".concat(u-a,"px")}else l=0,oblio.app.family_tree.resize(s,l)}Vb=document.body.scrollHeight-Pb}Xb.prototype.pause=function(){oblio.sections[Nb.currentSection].pause&&oblio.sections[Nb.currentSection].pause()},Xb.prototype.play=function(){oblio.sections[Nb.currentSection].play&&oblio.sections[Nb.currentSection].play()},Xb.prototype.resize=ew,oblio.app.main=new Xb},"./scss/main.scss":function(e,t,n){}});